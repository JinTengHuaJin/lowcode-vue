import{c as Te,g as Rb,v as Vb,_ as Wt,d as dc,a as jb,b as _i,F as jg,r as Ig,o as Gi,e as Go,t as Ib,f as eo,h as _b}from"./index.8c15c793.js";var Gb={},or={exports:{}};(function(E,T){(function(c,F){F(T)})(Te,function(c){/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.

	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.

	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */var F=function(i,n){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(i,n)};function B(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=i}F(i,n),i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var A=function(){return(A=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r]);return i}).apply(this,arguments)};function z(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(e=Object.getOwnPropertySymbols(i);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]])}return t}function _(i,n,t,e){var r,o=arguments.length,s=o<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,n,t,e);else for(var a=i.length-1;a>=0;a--)(r=i[a])&&(s=(o<3?r(s):o>3?r(n,t,s):r(n,t))||s);return o>3&&s&&Object.defineProperty(n,t,s),s}function W(i,n,t){if(t||arguments.length===2)for(var e,r=0,o=n.length;r<o;r++)!e&&r in n||(e||(e=Array.prototype.slice.call(n,0,r)),e[r]=n[r]);return i.concat(e||Array.prototype.slice.call(n))}var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Te<"u"?Te:typeof self<"u"?self:{},wt={exports:{}};/*!
     * jQuery JavaScript Library v3.6.0
     * https://jquery.com/
     *
     * Includes Sizzle.js
     * https://sizzlejs.com/
     *
     * Copyright OpenJS Foundation and other contributors
     * Released under the MIT license
     * https://jquery.org/license
     *
     * Date: 2021-03-02T17:08Z
     */(function(i){(function(n,t){i.exports=n.document?t(n,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}})(typeof window<"u"?window:tt,function(n,t){var e=[],r=Object.getPrototypeOf,o=e.slice,s=function(p){return e.concat.apply([],p)},a=e.push,l=e.indexOf,u={},h=u.toString,d=u.hasOwnProperty,f=d.toString,v=f.call(Object),b={},w=function(p){return typeof p=="function"&&typeof p.nodeType!="number"&&typeof p.item!="function"},P=function(p){return p!=null&&p===p.window},x=n.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function D(p,g,m){var C,M,k=(m=m||x).createElement("script");if(k.text=p,g)for(C in S)(M=g[C]||g.getAttribute&&g.getAttribute(C))&&k.setAttribute(C,M);m.head.appendChild(k).parentNode.removeChild(k)}function N(p){return p==null?p+"":typeof p=="object"||typeof p=="function"?u[h.call(p)]||"object":typeof p}var V="3.6.0",y=function(p,g){return new y.fn.init(p,g)};function H(p){var g=!!p&&"length"in p&&p.length,m=N(p);return!w(p)&&!P(p)&&(m==="array"||g===0||typeof g=="number"&&g>0&&g-1 in p)}y.fn=y.prototype={jquery:V,constructor:y,length:0,toArray:function(){return o.call(this)},get:function(p){return p==null?o.call(this):p<0?this[p+this.length]:this[p]},pushStack:function(p){var g=y.merge(this.constructor(),p);return g.prevObject=this,g},each:function(p){return y.each(this,p)},map:function(p){return this.pushStack(y.map(this,function(g,m){return p.call(g,m,g)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(p,g){return(g+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(p,g){return g%2}))},eq:function(p){var g=this.length,m=+p+(p<0?g:0);return this.pushStack(m>=0&&m<g?[this[m]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:e.sort,splice:e.splice},y.extend=y.fn.extend=function(){var p,g,m,C,M,k,O=arguments[0]||{},j=1,G=arguments.length,$=!1;for(typeof O=="boolean"&&($=O,O=arguments[j]||{},j++),typeof O=="object"||w(O)||(O={}),j===G&&(O=this,j--);j<G;j++)if((p=arguments[j])!=null)for(g in p)C=p[g],g!=="__proto__"&&O!==C&&($&&C&&(y.isPlainObject(C)||(M=Array.isArray(C)))?(m=O[g],k=M&&!Array.isArray(m)?[]:M||y.isPlainObject(m)?m:{},M=!1,O[g]=y.extend($,k,C)):C!==void 0&&(O[g]=C));return O},y.extend({expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),isReady:!0,error:function(p){throw new Error(p)},noop:function(){},isPlainObject:function(p){var g,m;return!(!p||h.call(p)!=="[object Object]")&&(!(g=r(p))||typeof(m=d.call(g,"constructor")&&g.constructor)=="function"&&f.call(m)===v)},isEmptyObject:function(p){var g;for(g in p)return!1;return!0},globalEval:function(p,g,m){D(p,{nonce:g&&g.nonce},m)},each:function(p,g){var m,C=0;if(H(p))for(m=p.length;C<m&&g.call(p[C],C,p[C])!==!1;C++);else for(C in p)if(g.call(p[C],C,p[C])===!1)break;return p},makeArray:function(p,g){var m=g||[];return p!=null&&(H(Object(p))?y.merge(m,typeof p=="string"?[p]:p):a.call(m,p)),m},inArray:function(p,g,m){return g==null?-1:l.call(g,p,m)},merge:function(p,g){for(var m=+g.length,C=0,M=p.length;C<m;C++)p[M++]=g[C];return p.length=M,p},grep:function(p,g,m){for(var C=[],M=0,k=p.length,O=!m;M<k;M++)!g(p[M],M)!==O&&C.push(p[M]);return C},map:function(p,g,m){var C,M,k=0,O=[];if(H(p))for(C=p.length;k<C;k++)(M=g(p[k],k,m))!=null&&O.push(M);else for(k in p)(M=g(p[k],k,m))!=null&&O.push(M);return s(O)},guid:1,support:b}),typeof Symbol=="function"&&(y.fn[Symbol.iterator]=e[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(p,g){u["[object "+g+"]"]=g.toLowerCase()});var I=function(p){var g,m,C,M,k,O,j,G,$,Q,rt,Y,K,mt,Mt,bt,ue,Me,en,Kt="sizzle"+1*new Date,Nt=p.document,Ze=0,_t=0,ce=Fa(),ji=Fa(),Na=Fa(),nn=Fa(),Qr=function(L,R){return L===R&&(rt=!0),0},jo={}.hasOwnProperty,Ke=[],Io=Ke.pop,vn=Ke.push,he=Ke.push,rn=Ke.slice,on=function(L,R){for(var U=0,nt=L.length;U<nt;U++)if(L[U]===R)return U;return-1},jn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ce="[\\x20\\t\\r\\n\\f]",$t="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Se="\\[[\\x20\\t\\r\\n\\f]*("+$t+")(?:"+Ce+"*([*^$|!~]?=)"+Ce+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+$t+"))|)"+Ce+"*\\]",sn=":("+$t+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Se+")*)|.*)\\)|)",we=new RegExp(Ce+"+","g"),an=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),_o=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Oa=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),Mb=new RegExp(Ce+"|>"),Sb=new RegExp(sn),kb=new RegExp("^"+$t+"$"),La={ID:new RegExp("^#("+$t+")"),CLASS:new RegExp("^\\.("+$t+")"),TAG:new RegExp("^("+$t+"|[*])"),ATTR:new RegExp("^"+Se),PSEUDO:new RegExp("^"+sn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+jn+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Tb=/HTML$/i,Db=/^(?:input|select|textarea|button)$/i,Nb=/^h\d$/i,Ii=/^[^{]+\{\s*\[native \w/,Ob=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tc=/[+~]/,er=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nr=function(L,R){var U="0x"+L.slice(1)-65536;return R||(U<0?String.fromCharCode(U+65536):String.fromCharCode(U>>10|55296,1023&U|56320))},Ng=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Og=function(L,R){return R?L==="\0"?"\uFFFD":L.slice(0,-1)+"\\"+L.charCodeAt(L.length-1).toString(16)+" ":"\\"+L},Lg=function(){Y()},Lb=za(function(L){return L.disabled===!0&&L.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{he.apply(Ke=rn.call(Nt.childNodes),Nt.childNodes),Ke[Nt.childNodes.length].nodeType}catch{he={apply:Ke.length?function(R,U){vn.apply(R,rn.call(U))}:function(R,U){for(var nt=R.length,q=0;R[nt++]=U[q++];);R.length=nt-1}}}function te(L,R,U,nt){var q,st,ut,pt,vt,Tt,Dt,St=R&&R.ownerDocument,jt=R?R.nodeType:9;if(U=U||[],typeof L!="string"||!L||jt!==1&&jt!==9&&jt!==11)return U;if(!nt&&(Y(R),R=R||K,Mt)){if(jt!==11&&(vt=Ob.exec(L)))if(q=vt[1]){if(jt===9){if(!(ut=R.getElementById(q)))return U;if(ut.id===q)return U.push(ut),U}else if(St&&(ut=St.getElementById(q))&&en(R,ut)&&ut.id===q)return U.push(ut),U}else{if(vt[2])return he.apply(U,R.getElementsByTagName(L)),U;if((q=vt[3])&&m.getElementsByClassName&&R.getElementsByClassName)return he.apply(U,R.getElementsByClassName(q)),U}if(m.qsa&&!nn[L+" "]&&(!bt||!bt.test(L))&&(jt!==1||R.nodeName.toLowerCase()!=="object")){if(Dt=L,St=R,jt===1&&(Mb.test(L)||Oa.test(L))){for((St=tc.test(L)&&nc(R.parentNode)||R)===R&&m.scope||((pt=R.getAttribute("id"))?pt=pt.replace(Ng,Og):R.setAttribute("id",pt=Kt)),st=(Tt=O(L)).length;st--;)Tt[st]=(pt?"#"+pt:":scope")+" "+Ba(Tt[st]);Dt=Tt.join(",")}try{return he.apply(U,St.querySelectorAll(Dt)),U}catch{nn(L,!0)}finally{pt===Kt&&R.removeAttribute("id")}}}return G(L.replace(an,"$1"),R,U,nt)}function Fa(){var L=[];return function R(U,nt){return L.push(U+" ")>C.cacheLength&&delete R[L.shift()],R[U+" "]=nt}}function kn(L){return L[Kt]=!0,L}function Tn(L){var R=K.createElement("fieldset");try{return!!L(R)}catch{return!1}finally{R.parentNode&&R.parentNode.removeChild(R),R=null}}function ec(L,R){for(var U=L.split("|"),nt=U.length;nt--;)C.attrHandle[U[nt]]=R}function Fg(L,R){var U=R&&L,nt=U&&L.nodeType===1&&R.nodeType===1&&L.sourceIndex-R.sourceIndex;if(nt)return nt;if(U){for(;U=U.nextSibling;)if(U===R)return-1}return L?1:-1}function Fb(L){return function(R){return R.nodeName.toLowerCase()==="input"&&R.type===L}}function Bb(L){return function(R){var U=R.nodeName.toLowerCase();return(U==="input"||U==="button")&&R.type===L}}function Bg(L){return function(R){return"form"in R?R.parentNode&&R.disabled===!1?"label"in R?"label"in R.parentNode?R.parentNode.disabled===L:R.disabled===L:R.isDisabled===L||R.isDisabled!==!L&&Lb(R)===L:R.disabled===L:"label"in R&&R.disabled===L}}function to(L){return kn(function(R){return R=+R,kn(function(U,nt){for(var q,st=L([],U.length,R),ut=st.length;ut--;)U[q=st[ut]]&&(U[q]=!(nt[q]=U[q]))})})}function nc(L){return L&&L.getElementsByTagName!==void 0&&L}for(g in m=te.support={},k=te.isXML=function(L){var R=L&&L.namespaceURI,U=L&&(L.ownerDocument||L).documentElement;return!Tb.test(R||U&&U.nodeName||"HTML")},Y=te.setDocument=function(L){var R,U,nt=L?L.ownerDocument||L:Nt;return nt!=K&&nt.nodeType===9&&nt.documentElement&&(mt=(K=nt).documentElement,Mt=!k(K),Nt!=K&&(U=K.defaultView)&&U.top!==U&&(U.addEventListener?U.addEventListener("unload",Lg,!1):U.attachEvent&&U.attachEvent("onunload",Lg)),m.scope=Tn(function(q){return mt.appendChild(q).appendChild(K.createElement("div")),q.querySelectorAll!==void 0&&!q.querySelectorAll(":scope fieldset div").length}),m.attributes=Tn(function(q){return q.className="i",!q.getAttribute("className")}),m.getElementsByTagName=Tn(function(q){return q.appendChild(K.createComment("")),!q.getElementsByTagName("*").length}),m.getElementsByClassName=Ii.test(K.getElementsByClassName),m.getById=Tn(function(q){return mt.appendChild(q).id=Kt,!K.getElementsByName||!K.getElementsByName(Kt).length}),m.getById?(C.filter.ID=function(q){var st=q.replace(er,nr);return function(ut){return ut.getAttribute("id")===st}},C.find.ID=function(q,st){if(st.getElementById!==void 0&&Mt){var ut=st.getElementById(q);return ut?[ut]:[]}}):(C.filter.ID=function(q){var st=q.replace(er,nr);return function(ut){var pt=ut.getAttributeNode!==void 0&&ut.getAttributeNode("id");return pt&&pt.value===st}},C.find.ID=function(q,st){if(st.getElementById!==void 0&&Mt){var ut,pt,vt,Tt=st.getElementById(q);if(Tt){if((ut=Tt.getAttributeNode("id"))&&ut.value===q)return[Tt];for(vt=st.getElementsByName(q),pt=0;Tt=vt[pt++];)if((ut=Tt.getAttributeNode("id"))&&ut.value===q)return[Tt]}return[]}}),C.find.TAG=m.getElementsByTagName?function(q,st){return st.getElementsByTagName!==void 0?st.getElementsByTagName(q):m.qsa?st.querySelectorAll(q):void 0}:function(q,st){var ut,pt=[],vt=0,Tt=st.getElementsByTagName(q);if(q==="*"){for(;ut=Tt[vt++];)ut.nodeType===1&&pt.push(ut);return pt}return Tt},C.find.CLASS=m.getElementsByClassName&&function(q,st){if(st.getElementsByClassName!==void 0&&Mt)return st.getElementsByClassName(q)},ue=[],bt=[],(m.qsa=Ii.test(K.querySelectorAll))&&(Tn(function(q){var st;mt.appendChild(q).innerHTML="<a id='"+Kt+"'></a><select id='"+Kt+"-\r\\' msallowcapture=''><option selected=''></option></select>",q.querySelectorAll("[msallowcapture^='']").length&&bt.push(`[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|"")`),q.querySelectorAll("[selected]").length||bt.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+jn+")"),q.querySelectorAll("[id~="+Kt+"-]").length||bt.push("~="),(st=K.createElement("input")).setAttribute("name",""),q.appendChild(st),q.querySelectorAll("[name='']").length||bt.push(`\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|"")`),q.querySelectorAll(":checked").length||bt.push(":checked"),q.querySelectorAll("a#"+Kt+"+*").length||bt.push(".#.+[+~]"),q.querySelectorAll("\\\f"),bt.push("[\\r\\n\\f]")}),Tn(function(q){q.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var st=K.createElement("input");st.setAttribute("type","hidden"),q.appendChild(st).setAttribute("name","D"),q.querySelectorAll("[name=d]").length&&bt.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),q.querySelectorAll(":enabled").length!==2&&bt.push(":enabled",":disabled"),mt.appendChild(q).disabled=!0,q.querySelectorAll(":disabled").length!==2&&bt.push(":enabled",":disabled"),q.querySelectorAll("*,:x"),bt.push(",.*:")})),(m.matchesSelector=Ii.test(Me=mt.matches||mt.webkitMatchesSelector||mt.mozMatchesSelector||mt.oMatchesSelector||mt.msMatchesSelector))&&Tn(function(q){m.disconnectedMatch=Me.call(q,"*"),Me.call(q,"[s!='']:x"),ue.push("!=",sn)}),bt=bt.length&&new RegExp(bt.join("|")),ue=ue.length&&new RegExp(ue.join("|")),R=Ii.test(mt.compareDocumentPosition),en=R||Ii.test(mt.contains)?function(q,st){var ut=q.nodeType===9?q.documentElement:q,pt=st&&st.parentNode;return q===pt||!(!pt||pt.nodeType!==1||!(ut.contains?ut.contains(pt):q.compareDocumentPosition&&16&q.compareDocumentPosition(pt)))}:function(q,st){if(st){for(;st=st.parentNode;)if(st===q)return!0}return!1},Qr=R?function(q,st){if(q===st)return rt=!0,0;var ut=!q.compareDocumentPosition-!st.compareDocumentPosition;return ut||(1&(ut=(q.ownerDocument||q)==(st.ownerDocument||st)?q.compareDocumentPosition(st):1)||!m.sortDetached&&st.compareDocumentPosition(q)===ut?q==K||q.ownerDocument==Nt&&en(Nt,q)?-1:st==K||st.ownerDocument==Nt&&en(Nt,st)?1:Q?on(Q,q)-on(Q,st):0:4&ut?-1:1)}:function(q,st){if(q===st)return rt=!0,0;var ut,pt=0,vt=q.parentNode,Tt=st.parentNode,Dt=[q],St=[st];if(!vt||!Tt)return q==K?-1:st==K?1:vt?-1:Tt?1:Q?on(Q,q)-on(Q,st):0;if(vt===Tt)return Fg(q,st);for(ut=q;ut=ut.parentNode;)Dt.unshift(ut);for(ut=st;ut=ut.parentNode;)St.unshift(ut);for(;Dt[pt]===St[pt];)pt++;return pt?Fg(Dt[pt],St[pt]):Dt[pt]==Nt?-1:St[pt]==Nt?1:0}),K},te.matches=function(L,R){return te(L,null,null,R)},te.matchesSelector=function(L,R){if(Y(L),m.matchesSelector&&Mt&&!nn[R+" "]&&(!ue||!ue.test(R))&&(!bt||!bt.test(R)))try{var U=Me.call(L,R);if(U||m.disconnectedMatch||L.document&&L.document.nodeType!==11)return U}catch{nn(R,!0)}return te(R,K,null,[L]).length>0},te.contains=function(L,R){return(L.ownerDocument||L)!=K&&Y(L),en(L,R)},te.attr=function(L,R){(L.ownerDocument||L)!=K&&Y(L);var U=C.attrHandle[R.toLowerCase()],nt=U&&jo.call(C.attrHandle,R.toLowerCase())?U(L,R,!Mt):void 0;return nt!==void 0?nt:m.attributes||!Mt?L.getAttribute(R):(nt=L.getAttributeNode(R))&&nt.specified?nt.value:null},te.escape=function(L){return(L+"").replace(Ng,Og)},te.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},te.uniqueSort=function(L){var R,U=[],nt=0,q=0;if(rt=!m.detectDuplicates,Q=!m.sortStable&&L.slice(0),L.sort(Qr),rt){for(;R=L[q++];)R===L[q]&&(nt=U.push(q));for(;nt--;)L.splice(U[nt],1)}return Q=null,L},M=te.getText=function(L){var R,U="",nt=0,q=L.nodeType;if(q){if(q===1||q===9||q===11){if(typeof L.textContent=="string")return L.textContent;for(L=L.firstChild;L;L=L.nextSibling)U+=M(L)}else if(q===3||q===4)return L.nodeValue}else for(;R=L[nt++];)U+=M(R);return U},(C=te.selectors={cacheLength:50,createPseudo:kn,match:La,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(er,nr),L[3]=(L[3]||L[4]||L[5]||"").replace(er,nr),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||te.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&te.error(L[0]),L},PSEUDO:function(L){var R,U=!L[6]&&L[2];return La.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":U&&Sb.test(U)&&(R=O(U,!0))&&(R=U.indexOf(")",U.length-R)-U.length)&&(L[0]=L[0].slice(0,R),L[2]=U.slice(0,R)),L.slice(0,3))}},filter:{TAG:function(L){var R=L.replace(er,nr).toLowerCase();return L==="*"?function(){return!0}:function(U){return U.nodeName&&U.nodeName.toLowerCase()===R}},CLASS:function(L){var R=ce[L+" "];return R||(R=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+L+"("+Ce+"|$)"))&&ce(L,function(U){return R.test(typeof U.className=="string"&&U.className||U.getAttribute!==void 0&&U.getAttribute("class")||"")})},ATTR:function(L,R,U){return function(nt){var q=te.attr(nt,L);return q==null?R==="!=":!R||(q+="",R==="="?q===U:R==="!="?q!==U:R==="^="?U&&q.indexOf(U)===0:R==="*="?U&&q.indexOf(U)>-1:R==="$="?U&&q.slice(-U.length)===U:R==="~="?(" "+q.replace(we," ")+" ").indexOf(U)>-1:R==="|="&&(q===U||q.slice(0,U.length+1)===U+"-"))}},CHILD:function(L,R,U,nt,q){var st=L.slice(0,3)!=="nth",ut=L.slice(-4)!=="last",pt=R==="of-type";return nt===1&&q===0?function(vt){return!!vt.parentNode}:function(vt,Tt,Dt){var St,jt,fe,Ot,ke,Fe,He=st!==ut?"nextSibling":"previousSibling",ee=vt.parentNode,In=pt&&vt.nodeName.toLowerCase(),Ve=!Dt&&!pt,xe=!1;if(ee){if(st){for(;He;){for(Ot=vt;Ot=Ot[He];)if(pt?Ot.nodeName.toLowerCase()===In:Ot.nodeType===1)return!1;Fe=He=L==="only"&&!Fe&&"nextSibling"}return!0}if(Fe=[ut?ee.firstChild:ee.lastChild],ut&&Ve){for(xe=(ke=(St=(jt=(fe=(Ot=ee)[Kt]||(Ot[Kt]={}))[Ot.uniqueID]||(fe[Ot.uniqueID]={}))[L]||[])[0]===Ze&&St[1])&&St[2],Ot=ke&&ee.childNodes[ke];Ot=++ke&&Ot&&Ot[He]||(xe=ke=0)||Fe.pop();)if(Ot.nodeType===1&&++xe&&Ot===vt){jt[L]=[Ze,ke,xe];break}}else if(Ve&&(xe=ke=(St=(jt=(fe=(Ot=vt)[Kt]||(Ot[Kt]={}))[Ot.uniqueID]||(fe[Ot.uniqueID]={}))[L]||[])[0]===Ze&&St[1]),xe===!1)for(;(Ot=++ke&&Ot&&Ot[He]||(xe=ke=0)||Fe.pop())&&((pt?Ot.nodeName.toLowerCase()!==In:Ot.nodeType!==1)||!++xe||(Ve&&((jt=(fe=Ot[Kt]||(Ot[Kt]={}))[Ot.uniqueID]||(fe[Ot.uniqueID]={}))[L]=[Ze,xe]),Ot!==vt)););return(xe-=q)===nt||xe%nt==0&&xe/nt>=0}}},PSEUDO:function(L,R){var U,nt=C.pseudos[L]||C.setFilters[L.toLowerCase()]||te.error("unsupported pseudo: "+L);return nt[Kt]?nt(R):nt.length>1?(U=[L,L,"",R],C.setFilters.hasOwnProperty(L.toLowerCase())?kn(function(q,st){for(var ut,pt=nt(q,R),vt=pt.length;vt--;)q[ut=on(q,pt[vt])]=!(st[ut]=pt[vt])}):function(q){return nt(q,0,U)}):nt}},pseudos:{not:kn(function(L){var R=[],U=[],nt=j(L.replace(an,"$1"));return nt[Kt]?kn(function(q,st,ut,pt){for(var vt,Tt=nt(q,null,pt,[]),Dt=q.length;Dt--;)(vt=Tt[Dt])&&(q[Dt]=!(st[Dt]=vt))}):function(q,st,ut){return R[0]=q,nt(R,null,ut,U),R[0]=null,!U.pop()}}),has:kn(function(L){return function(R){return te(L,R).length>0}}),contains:kn(function(L){return L=L.replace(er,nr),function(R){return(R.textContent||M(R)).indexOf(L)>-1}}),lang:kn(function(L){return kb.test(L||"")||te.error("unsupported lang: "+L),L=L.replace(er,nr).toLowerCase(),function(R){var U;do if(U=Mt?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return(U=U.toLowerCase())===L||U.indexOf(L+"-")===0;while((R=R.parentNode)&&R.nodeType===1);return!1}}),target:function(L){var R=p.location&&p.location.hash;return R&&R.slice(1)===L.id},root:function(L){return L===mt},focus:function(L){return L===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(L.type||L.href||~L.tabIndex)},enabled:Bg(!1),disabled:Bg(!0),checked:function(L){var R=L.nodeName.toLowerCase();return R==="input"&&!!L.checked||R==="option"&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!C.pseudos.empty(L)},header:function(L){return Nb.test(L.nodeName)},input:function(L){return Db.test(L.nodeName)},button:function(L){var R=L.nodeName.toLowerCase();return R==="input"&&L.type==="button"||R==="button"},text:function(L){var R;return L.nodeName.toLowerCase()==="input"&&L.type==="text"&&((R=L.getAttribute("type"))==null||R.toLowerCase()==="text")},first:to(function(){return[0]}),last:to(function(L,R){return[R-1]}),eq:to(function(L,R,U){return[U<0?U+R:U]}),even:to(function(L,R){for(var U=0;U<R;U+=2)L.push(U);return L}),odd:to(function(L,R){for(var U=1;U<R;U+=2)L.push(U);return L}),lt:to(function(L,R,U){for(var nt=U<0?U+R:U>R?R:U;--nt>=0;)L.push(nt);return L}),gt:to(function(L,R,U){for(var nt=U<0?U+R:U;++nt<R;)L.push(nt);return L})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[g]=Fb(g);for(g in{submit:!0,reset:!0})C.pseudos[g]=Bb(g);function zg(){}function Ba(L){for(var R=0,U=L.length,nt="";R<U;R++)nt+=L[R].value;return nt}function za(L,R,U){var nt=R.dir,q=R.next,st=q||nt,ut=U&&st==="parentNode",pt=_t++;return R.first?function(vt,Tt,Dt){for(;vt=vt[nt];)if(vt.nodeType===1||ut)return L(vt,Tt,Dt);return!1}:function(vt,Tt,Dt){var St,jt,fe,Ot=[Ze,pt];if(Dt){for(;vt=vt[nt];)if((vt.nodeType===1||ut)&&L(vt,Tt,Dt))return!0}else for(;vt=vt[nt];)if(vt.nodeType===1||ut)if(jt=(fe=vt[Kt]||(vt[Kt]={}))[vt.uniqueID]||(fe[vt.uniqueID]={}),q&&q===vt.nodeName.toLowerCase())vt=vt[nt]||vt;else{if((St=jt[st])&&St[0]===Ze&&St[1]===pt)return Ot[2]=St[2];if(jt[st]=Ot,Ot[2]=L(vt,Tt,Dt))return!0}return!1}}function rc(L){return L.length>1?function(R,U,nt){for(var q=L.length;q--;)if(!L[q](R,U,nt))return!1;return!0}:L[0]}function Ra(L,R,U,nt,q){for(var st,ut=[],pt=0,vt=L.length,Tt=R!=null;pt<vt;pt++)(st=L[pt])&&(U&&!U(st,nt,q)||(ut.push(st),Tt&&R.push(pt)));return ut}function oc(L,R,U,nt,q,st){return nt&&!nt[Kt]&&(nt=oc(nt)),q&&!q[Kt]&&(q=oc(q,st)),kn(function(ut,pt,vt,Tt){var Dt,St,jt,fe=[],Ot=[],ke=pt.length,Fe=ut||function(In,Ve,xe){for(var Dn=0,Va=Ve.length;Dn<Va;Dn++)te(In,Ve[Dn],xe);return xe}(R||"*",vt.nodeType?[vt]:vt,[]),He=!L||!ut&&R?Fe:Ra(Fe,fe,L,vt,Tt),ee=U?q||(ut?L:ke||nt)?[]:pt:He;if(U&&U(He,ee,vt,Tt),nt)for(Dt=Ra(ee,Ot),nt(Dt,[],vt,Tt),St=Dt.length;St--;)(jt=Dt[St])&&(ee[Ot[St]]=!(He[Ot[St]]=jt));if(ut){if(q||L){if(q){for(Dt=[],St=ee.length;St--;)(jt=ee[St])&&Dt.push(He[St]=jt);q(null,ee=[],Dt,Tt)}for(St=ee.length;St--;)(jt=ee[St])&&(Dt=q?on(ut,jt):fe[St])>-1&&(ut[Dt]=!(pt[Dt]=jt))}}else ee=Ra(ee===pt?ee.splice(ke,ee.length):ee),q?q(null,pt,ee,Tt):he.apply(pt,ee)})}function ic(L){for(var R,U,nt,q=L.length,st=C.relative[L[0].type],ut=st||C.relative[" "],pt=st?1:0,vt=za(function(St){return St===R},ut,!0),Tt=za(function(St){return on(R,St)>-1},ut,!0),Dt=[function(St,jt,fe){var Ot=!st&&(fe||jt!==$)||((R=jt).nodeType?vt(St,jt,fe):Tt(St,jt,fe));return R=null,Ot}];pt<q;pt++)if(U=C.relative[L[pt].type])Dt=[za(rc(Dt),U)];else{if((U=C.filter[L[pt].type].apply(null,L[pt].matches))[Kt]){for(nt=++pt;nt<q&&!C.relative[L[nt].type];nt++);return oc(pt>1&&rc(Dt),pt>1&&Ba(L.slice(0,pt-1).concat({value:L[pt-2].type===" "?"*":""})).replace(an,"$1"),U,pt<nt&&ic(L.slice(pt,nt)),nt<q&&ic(L=L.slice(nt)),nt<q&&Ba(L))}Dt.push(U)}return rc(Dt)}return zg.prototype=C.filters=C.pseudos,C.setFilters=new zg,O=te.tokenize=function(L,R){var U,nt,q,st,ut,pt,vt,Tt=ji[L+" "];if(Tt)return R?0:Tt.slice(0);for(ut=L,pt=[],vt=C.preFilter;ut;){for(st in U&&!(nt=_o.exec(ut))||(nt&&(ut=ut.slice(nt[0].length)||ut),pt.push(q=[])),U=!1,(nt=Oa.exec(ut))&&(U=nt.shift(),q.push({value:U,type:nt[0].replace(an," ")}),ut=ut.slice(U.length)),C.filter)!(nt=La[st].exec(ut))||vt[st]&&!(nt=vt[st](nt))||(U=nt.shift(),q.push({value:U,type:st,matches:nt}),ut=ut.slice(U.length));if(!U)break}return R?ut.length:ut?te.error(L):ji(L,pt).slice(0)},j=te.compile=function(L,R){var U,nt=[],q=[],st=Na[L+" "];if(!st){for(R||(R=O(L)),U=R.length;U--;)(st=ic(R[U]))[Kt]?nt.push(st):q.push(st);(st=Na(L,function(ut,pt){var vt=pt.length>0,Tt=ut.length>0,Dt=function(St,jt,fe,Ot,ke){var Fe,He,ee,In=0,Ve="0",xe=St&&[],Dn=[],Va=$,Rg=St||Tt&&C.find.TAG("*",ke),Vg=Ze+=Va==null?1:Math.random()||.1,zb=Rg.length;for(ke&&($=jt==K||jt||ke);Ve!==zb&&(Fe=Rg[Ve])!=null;Ve++){if(Tt&&Fe){for(He=0,jt||Fe.ownerDocument==K||(Y(Fe),fe=!Mt);ee=ut[He++];)if(ee(Fe,jt||K,fe)){Ot.push(Fe);break}ke&&(Ze=Vg)}vt&&((Fe=!ee&&Fe)&&In--,St&&xe.push(Fe))}if(In+=Ve,vt&&Ve!==In){for(He=0;ee=pt[He++];)ee(xe,Dn,jt,fe);if(St){if(In>0)for(;Ve--;)xe[Ve]||Dn[Ve]||(Dn[Ve]=Io.call(Ot));Dn=Ra(Dn)}he.apply(Ot,Dn),ke&&!St&&Dn.length>0&&In+pt.length>1&&te.uniqueSort(Ot)}return ke&&(Ze=Vg,$=Va),xe};return vt?kn(Dt):Dt}(q,nt))).selector=L}return st},G=te.select=function(L,R,U,nt){var q,st,ut,pt,vt,Tt=typeof L=="function"&&L,Dt=!nt&&O(L=Tt.selector||L);if(U=U||[],Dt.length===1){if((st=Dt[0]=Dt[0].slice(0)).length>2&&(ut=st[0]).type==="ID"&&R.nodeType===9&&Mt&&C.relative[st[1].type]){if(!(R=(C.find.ID(ut.matches[0].replace(er,nr),R)||[])[0]))return U;Tt&&(R=R.parentNode),L=L.slice(st.shift().value.length)}for(q=La.needsContext.test(L)?0:st.length;q--&&(ut=st[q],!C.relative[pt=ut.type]);)if((vt=C.find[pt])&&(nt=vt(ut.matches[0].replace(er,nr),tc.test(st[0].type)&&nc(R.parentNode)||R))){if(st.splice(q,1),!(L=nt.length&&Ba(st)))return he.apply(U,nt),U;break}}return(Tt||j(L,Dt))(nt,R,!Mt,U,!R||tc.test(L)&&nc(R.parentNode)||R),U},m.sortStable=Kt.split("").sort(Qr).join("")===Kt,m.detectDuplicates=!!rt,Y(),m.sortDetached=Tn(function(L){return 1&L.compareDocumentPosition(K.createElement("fieldset"))}),Tn(function(L){return L.innerHTML="<a href='#'></a>",L.firstChild.getAttribute("href")==="#"})||ec("type|href|height|width",function(L,R,U){if(!U)return L.getAttribute(R,R.toLowerCase()==="type"?1:2)}),m.attributes&&Tn(function(L){return L.innerHTML="<input/>",L.firstChild.setAttribute("value",""),L.firstChild.getAttribute("value")===""})||ec("value",function(L,R,U){if(!U&&L.nodeName.toLowerCase()==="input")return L.defaultValue}),Tn(function(L){return L.getAttribute("disabled")==null})||ec(jn,function(L,R,U){var nt;if(!U)return L[R]===!0?R.toLowerCase():(nt=L.getAttributeNode(R))&&nt.specified?nt.value:null}),te}(n);y.find=I,y.expr=I.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=I.uniqueSort,y.text=I.getText,y.isXMLDoc=I.isXML,y.contains=I.contains,y.escapeSelector=I.escape;var X=function(p,g,m){for(var C=[],M=m!==void 0;(p=p[g])&&p.nodeType!==9;)if(p.nodeType===1){if(M&&y(p).is(m))break;C.push(p)}return C},J=function(p,g){for(var m=[];p;p=p.nextSibling)p.nodeType===1&&p!==g&&m.push(p);return m},Z=y.expr.match.needsContext;function it(p,g){return p.nodeName&&p.nodeName.toLowerCase()===g.toLowerCase()}var ct=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function et(p,g,m){return w(g)?y.grep(p,function(C,M){return!!g.call(C,M,C)!==m}):g.nodeType?y.grep(p,function(C){return C===g!==m}):typeof g!="string"?y.grep(p,function(C){return l.call(g,C)>-1!==m}):y.filter(g,p,m)}y.filter=function(p,g,m){var C=g[0];return m&&(p=":not("+p+")"),g.length===1&&C.nodeType===1?y.find.matchesSelector(C,p)?[C]:[]:y.find.matches(p,y.grep(g,function(M){return M.nodeType===1}))},y.fn.extend({find:function(p){var g,m,C=this.length,M=this;if(typeof p!="string")return this.pushStack(y(p).filter(function(){for(g=0;g<C;g++)if(y.contains(M[g],this))return!0}));for(m=this.pushStack([]),g=0;g<C;g++)y.find(p,M[g],m);return C>1?y.uniqueSort(m):m},filter:function(p){return this.pushStack(et(this,p||[],!1))},not:function(p){return this.pushStack(et(this,p||[],!0))},is:function(p){return!!et(this,typeof p=="string"&&Z.test(p)?y(p):p||[],!1).length}});var lt,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(p,g,m){var C,M;if(!p)return this;if(m=m||lt,typeof p=="string"){if(!(C=p[0]==="<"&&p[p.length-1]===">"&&p.length>=3?[null,p,null]:ht.exec(p))||!C[1]&&g)return!g||g.jquery?(g||m).find(p):this.constructor(g).find(p);if(C[1]){if(g=g instanceof y?g[0]:g,y.merge(this,y.parseHTML(C[1],g&&g.nodeType?g.ownerDocument||g:x,!0)),ct.test(C[1])&&y.isPlainObject(g))for(C in g)w(this[C])?this[C](g[C]):this.attr(C,g[C]);return this}return(M=x.getElementById(C[2]))&&(this[0]=M,this.length=1),this}return p.nodeType?(this[0]=p,this.length=1,this):w(p)?m.ready!==void 0?m.ready(p):p(y):y.makeArray(p,this)}).prototype=y.fn,lt=y(x);var at=/^(?:parents|prev(?:Until|All))/,gt={children:!0,contents:!0,next:!0,prev:!0};function yt(p,g){for(;(p=p[g])&&p.nodeType!==1;);return p}y.fn.extend({has:function(p){var g=y(p,this),m=g.length;return this.filter(function(){for(var C=0;C<m;C++)if(y.contains(this,g[C]))return!0})},closest:function(p,g){var m,C=0,M=this.length,k=[],O=typeof p!="string"&&y(p);if(!Z.test(p)){for(;C<M;C++)for(m=this[C];m&&m!==g;m=m.parentNode)if(m.nodeType<11&&(O?O.index(m)>-1:m.nodeType===1&&y.find.matchesSelector(m,p))){k.push(m);break}}return this.pushStack(k.length>1?y.uniqueSort(k):k)},index:function(p){return p?typeof p=="string"?l.call(y(p),this[0]):l.call(this,p.jquery?p[0]:p):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(p,g){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(p,g))))},addBack:function(p){return this.add(p==null?this.prevObject:this.prevObject.filter(p))}}),y.each({parent:function(p){var g=p.parentNode;return g&&g.nodeType!==11?g:null},parents:function(p){return X(p,"parentNode")},parentsUntil:function(p,g,m){return X(p,"parentNode",m)},next:function(p){return yt(p,"nextSibling")},prev:function(p){return yt(p,"previousSibling")},nextAll:function(p){return X(p,"nextSibling")},prevAll:function(p){return X(p,"previousSibling")},nextUntil:function(p,g,m){return X(p,"nextSibling",m)},prevUntil:function(p,g,m){return X(p,"previousSibling",m)},siblings:function(p){return J((p.parentNode||{}).firstChild,p)},children:function(p){return J(p.firstChild)},contents:function(p){return p.contentDocument!=null&&r(p.contentDocument)?p.contentDocument:(it(p,"template")&&(p=p.content||p),y.merge([],p.childNodes))}},function(p,g){y.fn[p]=function(m,C){var M=y.map(this,g,m);return p.slice(-5)!=="Until"&&(C=m),C&&typeof C=="string"&&(M=y.filter(C,M)),this.length>1&&(gt[p]||y.uniqueSort(M),at.test(p)&&M.reverse()),this.pushStack(M)}});var ft=/[^\x20\t\r\n\f]+/g;function Et(p){return p}function Ft(p){throw p}function re(p,g,m,C){var M;try{p&&w(M=p.promise)?M.call(p).done(g).fail(m):p&&w(M=p.then)?M.call(p,g,m):g.apply(void 0,[p].slice(C))}catch(k){m.apply(void 0,[k])}}y.Callbacks=function(p){p=typeof p=="string"?function(Q){var rt={};return y.each(Q.match(ft)||[],function(Y,K){rt[K]=!0}),rt}(p):y.extend({},p);var g,m,C,M,k=[],O=[],j=-1,G=function(){for(M=M||p.once,C=g=!0;O.length;j=-1)for(m=O.shift();++j<k.length;)k[j].apply(m[0],m[1])===!1&&p.stopOnFalse&&(j=k.length,m=!1);p.memory||(m=!1),g=!1,M&&(k=m?[]:"")},$={add:function(){return k&&(m&&!g&&(j=k.length-1,O.push(m)),function Q(rt){y.each(rt,function(Y,K){w(K)?p.unique&&$.has(K)||k.push(K):K&&K.length&&N(K)!=="string"&&Q(K)})}(arguments),m&&!g&&G()),this},remove:function(){return y.each(arguments,function(Q,rt){for(var Y;(Y=y.inArray(rt,k,Y))>-1;)k.splice(Y,1),Y<=j&&j--}),this},has:function(Q){return Q?y.inArray(Q,k)>-1:k.length>0},empty:function(){return k&&(k=[]),this},disable:function(){return M=O=[],k=m="",this},disabled:function(){return!k},lock:function(){return M=O=[],m||g||(k=m=""),this},locked:function(){return!!M},fireWith:function(Q,rt){return M||(rt=[Q,(rt=rt||[]).slice?rt.slice():rt],O.push(rt),g||G()),this},fire:function(){return $.fireWith(this,arguments),this},fired:function(){return!!C}};return $},y.extend({Deferred:function(p){var g=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],m="pending",C={state:function(){return m},always:function(){return M.done(arguments).fail(arguments),this},catch:function(k){return C.then(null,k)},pipe:function(){var k=arguments;return y.Deferred(function(O){y.each(g,function(j,G){var $=w(k[G[4]])&&k[G[4]];M[G[1]](function(){var Q=$&&$.apply(this,arguments);Q&&w(Q.promise)?Q.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[G[0]+"With"](this,$?[Q]:arguments)})}),k=null}).promise()},then:function(k,O,j){var G=0;function $(Q,rt,Y,K){return function(){var mt=this,Mt=arguments,bt=function(){var Me,en;if(!(Q<G)){if((Me=Y.apply(mt,Mt))===rt.promise())throw new TypeError("Thenable self-resolution");en=Me&&(typeof Me=="object"||typeof Me=="function")&&Me.then,w(en)?K?en.call(Me,$(G,rt,Et,K),$(G,rt,Ft,K)):(G++,en.call(Me,$(G,rt,Et,K),$(G,rt,Ft,K),$(G,rt,Et,rt.notifyWith))):(Y!==Et&&(mt=void 0,Mt=[Me]),(K||rt.resolveWith)(mt,Mt))}},ue=K?bt:function(){try{bt()}catch(Me){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(Me,ue.stackTrace),Q+1>=G&&(Y!==Ft&&(mt=void 0,Mt=[Me]),rt.rejectWith(mt,Mt))}};Q?ue():(y.Deferred.getStackHook&&(ue.stackTrace=y.Deferred.getStackHook()),n.setTimeout(ue))}}return y.Deferred(function(Q){g[0][3].add($(0,Q,w(j)?j:Et,Q.notifyWith)),g[1][3].add($(0,Q,w(k)?k:Et)),g[2][3].add($(0,Q,w(O)?O:Ft))}).promise()},promise:function(k){return k!=null?y.extend(k,C):C}},M={};return y.each(g,function(k,O){var j=O[2],G=O[5];C[O[1]]=j.add,G&&j.add(function(){m=G},g[3-k][2].disable,g[3-k][3].disable,g[0][2].lock,g[0][3].lock),j.add(O[3].fire),M[O[0]]=function(){return M[O[0]+"With"](this===M?void 0:this,arguments),this},M[O[0]+"With"]=j.fireWith}),C.promise(M),p&&p.call(M,M),M},when:function(p){var g=arguments.length,m=g,C=Array(m),M=o.call(arguments),k=y.Deferred(),O=function(j){return function(G){C[j]=this,M[j]=arguments.length>1?o.call(arguments):G,--g||k.resolveWith(C,M)}};if(g<=1&&(re(p,k.done(O(m)).resolve,k.reject,!g),k.state()==="pending"||w(M[m]&&M[m].then)))return k.then();for(;m--;)re(M[m],O(m),k.reject);return k.promise()}});var Qt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(p,g){n.console&&n.console.warn&&p&&Qt.test(p.name)&&n.console.warn("jQuery.Deferred exception: "+p.message,p.stack,g)},y.readyException=function(p){n.setTimeout(function(){throw p})};var zt=y.Deferred();function Xt(){x.removeEventListener("DOMContentLoaded",Xt),n.removeEventListener("load",Xt),y.ready()}y.fn.ready=function(p){return zt.then(p).catch(function(g){y.readyException(g)}),this},y.extend({isReady:!1,readyWait:1,ready:function(p){(p===!0?--y.readyWait:y.isReady)||(y.isReady=!0,p!==!0&&--y.readyWait>0||zt.resolveWith(x,[y]))}}),y.ready.then=zt.then,x.readyState==="complete"||x.readyState!=="loading"&&!x.documentElement.doScroll?n.setTimeout(y.ready):(x.addEventListener("DOMContentLoaded",Xt),n.addEventListener("load",Xt));var Bt=function(p,g,m,C,M,k,O){var j=0,G=p.length,$=m==null;if(N(m)==="object")for(j in M=!0,m)Bt(p,g,j,m[j],!0,k,O);else if(C!==void 0&&(M=!0,w(C)||(O=!0),$&&(O?(g.call(p,C),g=null):($=g,g=function(Q,rt,Y){return $.call(y(Q),Y)})),g))for(;j<G;j++)g(p[j],m,O?C:C.call(p[j],j,g(p[j],m)));return M?p:$?g.call(p):G?g(p[0],m):k},Yt=/^-ms-/,Pe=/-([a-z])/g;function Gt(p,g){return g.toUpperCase()}function Zt(p){return p.replace(Yt,"ms-").replace(Pe,Gt)}var fn=function(p){return p.nodeType===1||p.nodeType===9||!+p.nodeType};function de(){this.expando=y.expando+de.uid++}de.uid=1,de.prototype={cache:function(p){var g=p[this.expando];return g||(g={},fn(p)&&(p.nodeType?p[this.expando]=g:Object.defineProperty(p,this.expando,{value:g,configurable:!0}))),g},set:function(p,g,m){var C,M=this.cache(p);if(typeof g=="string")M[Zt(g)]=m;else for(C in g)M[Zt(C)]=g[C];return M},get:function(p,g){return g===void 0?this.cache(p):p[this.expando]&&p[this.expando][Zt(g)]},access:function(p,g,m){return g===void 0||g&&typeof g=="string"&&m===void 0?this.get(p,g):(this.set(p,g,m),m!==void 0?m:g)},remove:function(p,g){var m,C=p[this.expando];if(C!==void 0){if(g!==void 0)for(m=(g=Array.isArray(g)?g.map(Zt):(g=Zt(g))in C?[g]:g.match(ft)||[]).length;m--;)delete C[g[m]];(g===void 0||y.isEmptyObject(C))&&(p.nodeType?p[this.expando]=void 0:delete p[this.expando])}},hasData:function(p){var g=p[this.expando];return g!==void 0&&!y.isEmptyObject(g)}};var At=new de,Le=new de,Iu=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Aa=/[A-Z]/g;function Yr(p,g,m){var C;if(m===void 0&&p.nodeType===1)if(C="data-"+g.replace(Aa,"-$&").toLowerCase(),typeof(m=p.getAttribute(C))=="string"){try{m=function(M){return M==="true"||M!=="false"&&(M==="null"?null:M===+M+""?+M:Iu.test(M)?JSON.parse(M):M)}(m)}catch{}Le.set(p,g,m)}else m=void 0;return m}y.extend({hasData:function(p){return Le.hasData(p)||At.hasData(p)},data:function(p,g,m){return Le.access(p,g,m)},removeData:function(p,g){Le.remove(p,g)},_data:function(p,g,m){return At.access(p,g,m)},_removeData:function(p,g){At.remove(p,g)}}),y.fn.extend({data:function(p,g){var m,C,M,k=this[0],O=k&&k.attributes;if(p===void 0){if(this.length&&(M=Le.get(k),k.nodeType===1&&!At.get(k,"hasDataAttrs"))){for(m=O.length;m--;)O[m]&&(C=O[m].name).indexOf("data-")===0&&(C=Zt(C.slice(5)),Yr(k,C,M[C]));At.set(k,"hasDataAttrs",!0)}return M}return typeof p=="object"?this.each(function(){Le.set(this,p)}):Bt(this,function(j){var G;if(k&&j===void 0)return(G=Le.get(k,p))!==void 0||(G=Yr(k,p))!==void 0?G:void 0;this.each(function(){Le.set(this,p,j)})},null,g,arguments.length>1,null,!0)},removeData:function(p){return this.each(function(){Le.remove(this,p)})}}),y.extend({queue:function(p,g,m){var C;if(p)return g=(g||"fx")+"queue",C=At.get(p,g),m&&(!C||Array.isArray(m)?C=At.access(p,g,y.makeArray(m)):C.push(m)),C||[]},dequeue:function(p,g){g=g||"fx";var m=y.queue(p,g),C=m.length,M=m.shift(),k=y._queueHooks(p,g);M==="inprogress"&&(M=m.shift(),C--),M&&(g==="fx"&&m.unshift("inprogress"),delete k.stop,M.call(p,function(){y.dequeue(p,g)},k)),!C&&k&&k.empty.fire()},_queueHooks:function(p,g){var m=g+"queueHooks";return At.get(p,m)||At.access(p,m,{empty:y.Callbacks("once memory").add(function(){At.remove(p,[g+"queue",m])})})}}),y.fn.extend({queue:function(p,g){var m=2;return typeof p!="string"&&(g=p,p="fx",m--),arguments.length<m?y.queue(this[0],p):g===void 0?this:this.each(function(){var C=y.queue(this,p,g);y._queueHooks(this,p),p==="fx"&&C[0]!=="inprogress"&&y.dequeue(this,p)})},dequeue:function(p){return this.each(function(){y.dequeue(this,p)})},clearQueue:function(p){return this.queue(p||"fx",[])},promise:function(p,g){var m,C=1,M=y.Deferred(),k=this,O=this.length,j=function(){--C||M.resolveWith(k,[k])};for(typeof p!="string"&&(g=p,p=void 0),p=p||"fx";O--;)(m=At.get(k[O],p+"queueHooks"))&&m.empty&&(C++,m.empty.add(j));return j(),M.promise(g)}});var Pa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Li=new RegExp("^(?:([+-])=|)("+Pa+")([a-z%]*)$","i"),tr=["Top","Right","Bottom","Left"],Jr=x.documentElement,Oo=function(p){return y.contains(p.ownerDocument,p)},Y1={composed:!0};Jr.getRootNode&&(Oo=function(p){return y.contains(p.ownerDocument,p)||p.getRootNode(Y1)===p.ownerDocument});var Ma=function(p,g){return(p=g||p).style.display==="none"||p.style.display===""&&Oo(p)&&y.css(p,"display")==="none"};function Qf(p,g,m,C){var M,k,O=20,j=C?function(){return C.cur()}:function(){return y.css(p,g,"")},G=j(),$=m&&m[3]||(y.cssNumber[g]?"":"px"),Q=p.nodeType&&(y.cssNumber[g]||$!=="px"&&+G)&&Li.exec(y.css(p,g));if(Q&&Q[3]!==$){for(G/=2,$=$||Q[3],Q=+G||1;O--;)y.style(p,g,Q+$),(1-k)*(1-(k=j()/G||.5))<=0&&(O=0),Q/=k;Q*=2,y.style(p,g,Q+$),m=m||[]}return m&&(Q=+Q||+G||0,M=m[1]?Q+(m[1]+1)*m[2]:+m[2],C&&(C.unit=$,C.start=Q,C.end=M)),M}var tg={};function J1(p){var g,m=p.ownerDocument,C=p.nodeName,M=tg[C];return M||(g=m.body.appendChild(m.createElement(C)),M=y.css(g,"display"),g.parentNode.removeChild(g),M==="none"&&(M="block"),tg[C]=M,M)}function Lo(p,g){for(var m,C,M=[],k=0,O=p.length;k<O;k++)(C=p[k]).style&&(m=C.style.display,g?(m==="none"&&(M[k]=At.get(C,"display")||null,M[k]||(C.style.display="")),C.style.display===""&&Ma(C)&&(M[k]=J1(C))):m!=="none"&&(M[k]="none",At.set(C,"display",m)));for(k=0;k<O;k++)M[k]!=null&&(p[k].style.display=M[k]);return p}y.fn.extend({show:function(){return Lo(this,!0)},hide:function(){return Lo(this)},toggle:function(p){return typeof p=="boolean"?p?this.show():this.hide():this.each(function(){Ma(this)?y(this).show():y(this).hide()})}});var Fi=/^(?:checkbox|radio)$/i,eg=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ng=/^$|^module$|\/(?:java|ecma)script/i;(function(){var p=x.createDocumentFragment().appendChild(x.createElement("div")),g=x.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),p.appendChild(g),b.checkClone=p.cloneNode(!0).cloneNode(!0).lastChild.checked,p.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!p.cloneNode(!0).lastChild.defaultValue,p.innerHTML="<option></option>",b.option=!!p.lastChild})();var gn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ye(p,g){var m;return m=p.getElementsByTagName!==void 0?p.getElementsByTagName(g||"*"):p.querySelectorAll!==void 0?p.querySelectorAll(g||"*"):[],g===void 0||g&&it(p,g)?y.merge([p],m):m}function _u(p,g){for(var m=0,C=p.length;m<C;m++)At.set(p[m],"globalEval",!g||At.get(g[m],"globalEval"))}gn.tbody=gn.tfoot=gn.colgroup=gn.caption=gn.thead,gn.th=gn.td,b.option||(gn.optgroup=gn.option=[1,"<select multiple='multiple'>","</select>"]);var Z1=/<|&#?\w+;/;function rg(p,g,m,C,M){for(var k,O,j,G,$,Q,rt=g.createDocumentFragment(),Y=[],K=0,mt=p.length;K<mt;K++)if((k=p[K])||k===0)if(N(k)==="object")y.merge(Y,k.nodeType?[k]:k);else if(Z1.test(k)){for(O=O||rt.appendChild(g.createElement("div")),j=(eg.exec(k)||["",""])[1].toLowerCase(),G=gn[j]||gn._default,O.innerHTML=G[1]+y.htmlPrefilter(k)+G[2],Q=G[0];Q--;)O=O.lastChild;y.merge(Y,O.childNodes),(O=rt.firstChild).textContent=""}else Y.push(g.createTextNode(k));for(rt.textContent="",K=0;k=Y[K++];)if(C&&y.inArray(k,C)>-1)M&&M.push(k);else if($=Oo(k),O=Ye(rt.appendChild(k),"script"),$&&_u(O),m)for(Q=0;k=O[Q++];)ng.test(k.type||"")&&m.push(k);return rt}var og=/^([^.]*)(?:\.(.+)|)/;function Fo(){return!0}function Bo(){return!1}function K1(p,g){return p===function(){try{return x.activeElement}catch{}}()==(g==="focus")}function Gu(p,g,m,C,M,k){var O,j;if(typeof g=="object"){for(j in typeof m!="string"&&(C=C||m,m=void 0),g)Gu(p,j,m,C,g[j],k);return p}if(C==null&&M==null?(M=m,C=m=void 0):M==null&&(typeof m=="string"?(M=C,C=void 0):(M=C,C=m,m=void 0)),M===!1)M=Bo;else if(!M)return p;return k===1&&(O=M,(M=function(G){return y().off(G),O.apply(this,arguments)}).guid=O.guid||(O.guid=y.guid++)),p.each(function(){y.event.add(this,g,M,C,m)})}function Sa(p,g,m){m?(At.set(p,g,!1),y.event.add(p,g,{namespace:!1,handler:function(C){var M,k,O=At.get(this,g);if(1&C.isTrigger&&this[g]){if(O.length)(y.event.special[g]||{}).delegateType&&C.stopPropagation();else if(O=o.call(arguments),At.set(this,g,O),M=m(this,g),this[g](),O!==(k=At.get(this,g))||M?At.set(this,g,!1):k={},O!==k)return C.stopImmediatePropagation(),C.preventDefault(),k&&k.value}else O.length&&(At.set(this,g,{value:y.event.trigger(y.extend(O[0],y.Event.prototype),O.slice(1),this)}),C.stopImmediatePropagation())}})):At.get(p,g)===void 0&&y.event.add(p,g,Fo)}y.event={global:{},add:function(p,g,m,C,M){var k,O,j,G,$,Q,rt,Y,K,mt,Mt,bt=At.get(p);if(fn(p))for(m.handler&&(m=(k=m).handler,M=k.selector),M&&y.find.matchesSelector(Jr,M),m.guid||(m.guid=y.guid++),(G=bt.events)||(G=bt.events=Object.create(null)),(O=bt.handle)||(O=bt.handle=function(ue){return y!==void 0&&y.event.triggered!==ue.type?y.event.dispatch.apply(p,arguments):void 0}),$=(g=(g||"").match(ft)||[""]).length;$--;)K=Mt=(j=og.exec(g[$])||[])[1],mt=(j[2]||"").split(".").sort(),K&&(rt=y.event.special[K]||{},K=(M?rt.delegateType:rt.bindType)||K,rt=y.event.special[K]||{},Q=y.extend({type:K,origType:Mt,data:C,handler:m,guid:m.guid,selector:M,needsContext:M&&y.expr.match.needsContext.test(M),namespace:mt.join(".")},k),(Y=G[K])||((Y=G[K]=[]).delegateCount=0,rt.setup&&rt.setup.call(p,C,mt,O)!==!1||p.addEventListener&&p.addEventListener(K,O)),rt.add&&(rt.add.call(p,Q),Q.handler.guid||(Q.handler.guid=m.guid)),M?Y.splice(Y.delegateCount++,0,Q):Y.push(Q),y.event.global[K]=!0)},remove:function(p,g,m,C,M){var k,O,j,G,$,Q,rt,Y,K,mt,Mt,bt=At.hasData(p)&&At.get(p);if(bt&&(G=bt.events)){for($=(g=(g||"").match(ft)||[""]).length;$--;)if(K=Mt=(j=og.exec(g[$])||[])[1],mt=(j[2]||"").split(".").sort(),K){for(rt=y.event.special[K]||{},Y=G[K=(C?rt.delegateType:rt.bindType)||K]||[],j=j[2]&&new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=k=Y.length;k--;)Q=Y[k],!M&&Mt!==Q.origType||m&&m.guid!==Q.guid||j&&!j.test(Q.namespace)||C&&C!==Q.selector&&(C!=="**"||!Q.selector)||(Y.splice(k,1),Q.selector&&Y.delegateCount--,rt.remove&&rt.remove.call(p,Q));O&&!Y.length&&(rt.teardown&&rt.teardown.call(p,mt,bt.handle)!==!1||y.removeEvent(p,K,bt.handle),delete G[K])}else for(K in G)y.event.remove(p,K+g[$],m,C,!0);y.isEmptyObject(G)&&At.remove(p,"handle events")}},dispatch:function(p){var g,m,C,M,k,O,j=new Array(arguments.length),G=y.event.fix(p),$=(At.get(this,"events")||Object.create(null))[G.type]||[],Q=y.event.special[G.type]||{};for(j[0]=G,g=1;g<arguments.length;g++)j[g]=arguments[g];if(G.delegateTarget=this,!Q.preDispatch||Q.preDispatch.call(this,G)!==!1){for(O=y.event.handlers.call(this,G,$),g=0;(M=O[g++])&&!G.isPropagationStopped();)for(G.currentTarget=M.elem,m=0;(k=M.handlers[m++])&&!G.isImmediatePropagationStopped();)G.rnamespace&&k.namespace!==!1&&!G.rnamespace.test(k.namespace)||(G.handleObj=k,G.data=k.data,(C=((y.event.special[k.origType]||{}).handle||k.handler).apply(M.elem,j))!==void 0&&(G.result=C)===!1&&(G.preventDefault(),G.stopPropagation()));return Q.postDispatch&&Q.postDispatch.call(this,G),G.result}},handlers:function(p,g){var m,C,M,k,O,j=[],G=g.delegateCount,$=p.target;if(G&&$.nodeType&&!(p.type==="click"&&p.button>=1)){for(;$!==this;$=$.parentNode||this)if($.nodeType===1&&(p.type!=="click"||$.disabled!==!0)){for(k=[],O={},m=0;m<G;m++)O[M=(C=g[m]).selector+" "]===void 0&&(O[M]=C.needsContext?y(M,this).index($)>-1:y.find(M,this,null,[$]).length),O[M]&&k.push(C);k.length&&j.push({elem:$,handlers:k})}}return $=this,G<g.length&&j.push({elem:$,handlers:g.slice(G)}),j},addProp:function(p,g){Object.defineProperty(y.Event.prototype,p,{enumerable:!0,configurable:!0,get:w(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[p]},set:function(m){Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:m})}})},fix:function(p){return p[y.expando]?p:new y.Event(p)},special:{load:{noBubble:!0},click:{setup:function(p){var g=this||p;return Fi.test(g.type)&&g.click&&it(g,"input")&&Sa(g,"click",Fo),!1},trigger:function(p){var g=this||p;return Fi.test(g.type)&&g.click&&it(g,"input")&&Sa(g,"click"),!0},_default:function(p){var g=p.target;return Fi.test(g.type)&&g.click&&it(g,"input")&&At.get(g,"click")||it(g,"a")}},beforeunload:{postDispatch:function(p){p.result!==void 0&&p.originalEvent&&(p.originalEvent.returnValue=p.result)}}}},y.removeEvent=function(p,g,m){p.removeEventListener&&p.removeEventListener(g,m)},y.Event=function(p,g){if(!(this instanceof y.Event))return new y.Event(p,g);p&&p.type?(this.originalEvent=p,this.type=p.type,this.isDefaultPrevented=p.defaultPrevented||p.defaultPrevented===void 0&&p.returnValue===!1?Fo:Bo,this.target=p.target&&p.target.nodeType===3?p.target.parentNode:p.target,this.currentTarget=p.currentTarget,this.relatedTarget=p.relatedTarget):this.type=p,g&&y.extend(this,g),this.timeStamp=p&&p.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:Bo,isPropagationStopped:Bo,isImmediatePropagationStopped:Bo,isSimulated:!1,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=Fo,p&&!this.isSimulated&&p.preventDefault()},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=Fo,p&&!this.isSimulated&&p.stopPropagation()},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=Fo,p&&!this.isSimulated&&p.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(p,g){y.event.special[p]={setup:function(){return Sa(this,p,K1),!1},trigger:function(){return Sa(this,p),!0},_default:function(){return!0},delegateType:g}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,g){y.event.special[p]={delegateType:g,bindType:g,handle:function(m){var C,M=this,k=m.relatedTarget,O=m.handleObj;return k&&(k===M||y.contains(M,k))||(m.type=O.origType,C=O.handler.apply(this,arguments),m.type=g),C}}}),y.fn.extend({on:function(p,g,m,C){return Gu(this,p,g,m,C)},one:function(p,g,m,C){return Gu(this,p,g,m,C,1)},off:function(p,g,m){var C,M;if(p&&p.preventDefault&&p.handleObj)return C=p.handleObj,y(p.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if(typeof p=="object"){for(M in p)this.off(M,g,p[M]);return this}return g!==!1&&typeof g!="function"||(m=g,g=void 0),m===!1&&(m=Bo),this.each(function(){y.event.remove(this,p,m,g)})}});var Q1=/<script|<style|<link/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,eb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ig(p,g){return it(p,"table")&&it(g.nodeType!==11?g:g.firstChild,"tr")&&y(p).children("tbody")[0]||p}function nb(p){return p.type=(p.getAttribute("type")!==null)+"/"+p.type,p}function rb(p){return(p.type||"").slice(0,5)==="true/"?p.type=p.type.slice(5):p.removeAttribute("type"),p}function sg(p,g){var m,C,M,k,O,j;if(g.nodeType===1){if(At.hasData(p)&&(j=At.get(p).events))for(M in At.remove(g,"handle events"),j)for(m=0,C=j[M].length;m<C;m++)y.event.add(g,M,j[M][m]);Le.hasData(p)&&(k=Le.access(p),O=y.extend({},k),Le.set(g,O))}}function ob(p,g){var m=g.nodeName.toLowerCase();m==="input"&&Fi.test(p.type)?g.checked=p.checked:m!=="input"&&m!=="textarea"||(g.defaultValue=p.defaultValue)}function zo(p,g,m,C){g=s(g);var M,k,O,j,G,$,Q=0,rt=p.length,Y=rt-1,K=g[0],mt=w(K);if(mt||rt>1&&typeof K=="string"&&!b.checkClone&&tb.test(K))return p.each(function(Mt){var bt=p.eq(Mt);mt&&(g[0]=K.call(this,Mt,bt.html())),zo(bt,g,m,C)});if(rt&&(k=(M=rg(g,p[0].ownerDocument,!1,p,C)).firstChild,M.childNodes.length===1&&(M=k),k||C)){for(j=(O=y.map(Ye(M,"script"),nb)).length;Q<rt;Q++)G=M,Q!==Y&&(G=y.clone(G,!0,!0),j&&y.merge(O,Ye(G,"script"))),m.call(p[Q],G,Q);if(j)for($=O[O.length-1].ownerDocument,y.map(O,rb),Q=0;Q<j;Q++)G=O[Q],ng.test(G.type||"")&&!At.access(G,"globalEval")&&y.contains($,G)&&(G.src&&(G.type||"").toLowerCase()!=="module"?y._evalUrl&&!G.noModule&&y._evalUrl(G.src,{nonce:G.nonce||G.getAttribute("nonce")},$):D(G.textContent.replace(eb,""),G,$))}return p}function ag(p,g,m){for(var C,M=g?y.filter(g,p):p,k=0;(C=M[k])!=null;k++)m||C.nodeType!==1||y.cleanData(Ye(C)),C.parentNode&&(m&&Oo(C)&&_u(Ye(C,"script")),C.parentNode.removeChild(C));return p}y.extend({htmlPrefilter:function(p){return p},clone:function(p,g,m){var C,M,k,O,j=p.cloneNode(!0),G=Oo(p);if(!(b.noCloneChecked||p.nodeType!==1&&p.nodeType!==11||y.isXMLDoc(p)))for(O=Ye(j),C=0,M=(k=Ye(p)).length;C<M;C++)ob(k[C],O[C]);if(g)if(m)for(k=k||Ye(p),O=O||Ye(j),C=0,M=k.length;C<M;C++)sg(k[C],O[C]);else sg(p,j);return(O=Ye(j,"script")).length>0&&_u(O,!G&&Ye(p,"script")),j},cleanData:function(p){for(var g,m,C,M=y.event.special,k=0;(m=p[k])!==void 0;k++)if(fn(m)){if(g=m[At.expando]){if(g.events)for(C in g.events)M[C]?y.event.remove(m,C):y.removeEvent(m,C,g.handle);m[At.expando]=void 0}m[Le.expando]&&(m[Le.expando]=void 0)}}}),y.fn.extend({detach:function(p){return ag(this,p,!0)},remove:function(p){return ag(this,p)},text:function(p){return Bt(this,function(g){return g===void 0?y.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=g)})},null,p,arguments.length)},append:function(){return zo(this,arguments,function(p){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||ig(this,p).appendChild(p)})},prepend:function(){return zo(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=ig(this,p);g.insertBefore(p,g.firstChild)}})},before:function(){return zo(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this)})},after:function(){return zo(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this.nextSibling)})},empty:function(){for(var p,g=0;(p=this[g])!=null;g++)p.nodeType===1&&(y.cleanData(Ye(p,!1)),p.textContent="");return this},clone:function(p,g){return p=p!=null&&p,g=g==null?p:g,this.map(function(){return y.clone(this,p,g)})},html:function(p){return Bt(this,function(g){var m=this[0]||{},C=0,M=this.length;if(g===void 0&&m.nodeType===1)return m.innerHTML;if(typeof g=="string"&&!Q1.test(g)&&!gn[(eg.exec(g)||["",""])[1].toLowerCase()]){g=y.htmlPrefilter(g);try{for(;C<M;C++)(m=this[C]||{}).nodeType===1&&(y.cleanData(Ye(m,!1)),m.innerHTML=g);m=0}catch{}}m&&this.empty().append(g)},null,p,arguments.length)},replaceWith:function(){var p=[];return zo(this,arguments,function(g){var m=this.parentNode;y.inArray(this,p)<0&&(y.cleanData(Ye(this)),m&&m.replaceChild(g,this))},p)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(p,g){y.fn[p]=function(m){for(var C,M=[],k=y(m),O=k.length-1,j=0;j<=O;j++)C=j===O?this:this.clone(!0),y(k[j])[g](C),a.apply(M,C.get());return this.pushStack(M)}});var Hu=new RegExp("^("+Pa+")(?!px)[a-z%]+$","i"),ka=function(p){var g=p.ownerDocument.defaultView;return g&&g.opener||(g=n),g.getComputedStyle(p)},lg=function(p,g,m){var C,M,k={};for(M in g)k[M]=p.style[M],p.style[M]=g[M];for(M in C=m.call(p),g)p.style[M]=k[M];return C},ib=new RegExp(tr.join("|"),"i");function Bi(p,g,m){var C,M,k,O,j=p.style;return(m=m||ka(p))&&((O=m.getPropertyValue(g)||m[g])!==""||Oo(p)||(O=y.style(p,g)),!b.pixelBoxStyles()&&Hu.test(O)&&ib.test(g)&&(C=j.width,M=j.minWidth,k=j.maxWidth,j.minWidth=j.maxWidth=j.width=O,O=m.width,j.width=C,j.minWidth=M,j.maxWidth=k)),O!==void 0?O+"":O}function ug(p,g){return{get:function(){if(!p())return(this.get=g).apply(this,arguments);delete this.get}}}(function(){function p(){if($){G.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",$.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Jr.appendChild(G).appendChild($);var Q=n.getComputedStyle($);m=Q.top!=="1%",j=g(Q.marginLeft)===12,$.style.right="60%",k=g(Q.right)===36,C=g(Q.width)===36,$.style.position="absolute",M=g($.offsetWidth/3)===12,Jr.removeChild(G),$=null}}function g(Q){return Math.round(parseFloat(Q))}var m,C,M,k,O,j,G=x.createElement("div"),$=x.createElement("div");$.style&&($.style.backgroundClip="content-box",$.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=$.style.backgroundClip==="content-box",y.extend(b,{boxSizingReliable:function(){return p(),C},pixelBoxStyles:function(){return p(),k},pixelPosition:function(){return p(),m},reliableMarginLeft:function(){return p(),j},scrollboxSize:function(){return p(),M},reliableTrDimensions:function(){var Q,rt,Y,K;return O==null&&(Q=x.createElement("table"),rt=x.createElement("tr"),Y=x.createElement("div"),Q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",rt.style.cssText="border:1px solid",rt.style.height="1px",Y.style.height="9px",Y.style.display="block",Jr.appendChild(Q).appendChild(rt).appendChild(Y),K=n.getComputedStyle(rt),O=parseInt(K.height,10)+parseInt(K.borderTopWidth,10)+parseInt(K.borderBottomWidth,10)===rt.offsetHeight,Jr.removeChild(Q)),O}}))})();var cg=["Webkit","Moz","ms"],hg=x.createElement("div").style,pg={};function Uu(p){var g=y.cssProps[p]||pg[p];return g||(p in hg?p:pg[p]=function(m){for(var C=m[0].toUpperCase()+m.slice(1),M=cg.length;M--;)if((m=cg[M]+C)in hg)return m}(p)||p)}var sb=/^(none|table(?!-c[ea]).+)/,dg=/^--/,ab={position:"absolute",visibility:"hidden",display:"block"},fg={letterSpacing:"0",fontWeight:"400"};function gg(p,g,m){var C=Li.exec(g);return C?Math.max(0,C[2]-(m||0))+(C[3]||"px"):g}function qu(p,g,m,C,M,k){var O=g==="width"?1:0,j=0,G=0;if(m===(C?"border":"content"))return 0;for(;O<4;O+=2)m==="margin"&&(G+=y.css(p,m+tr[O],!0,M)),C?(m==="content"&&(G-=y.css(p,"padding"+tr[O],!0,M)),m!=="margin"&&(G-=y.css(p,"border"+tr[O]+"Width",!0,M))):(G+=y.css(p,"padding"+tr[O],!0,M),m!=="padding"?G+=y.css(p,"border"+tr[O]+"Width",!0,M):j+=y.css(p,"border"+tr[O]+"Width",!0,M));return!C&&k>=0&&(G+=Math.max(0,Math.ceil(p["offset"+g[0].toUpperCase()+g.slice(1)]-k-G-j-.5))||0),G}function vg(p,g,m){var C=ka(p),M=(!b.boxSizingReliable()||m)&&y.css(p,"boxSizing",!1,C)==="border-box",k=M,O=Bi(p,g,C),j="offset"+g[0].toUpperCase()+g.slice(1);if(Hu.test(O)){if(!m)return O;O="auto"}return(!b.boxSizingReliable()&&M||!b.reliableTrDimensions()&&it(p,"tr")||O==="auto"||!parseFloat(O)&&y.css(p,"display",!1,C)==="inline")&&p.getClientRects().length&&(M=y.css(p,"boxSizing",!1,C)==="border-box",(k=j in p)&&(O=p[j])),(O=parseFloat(O)||0)+qu(p,g,m||(M?"border":"content"),k,C,O)+"px"}function Je(p,g,m,C,M){return new Je.prototype.init(p,g,m,C,M)}y.extend({cssHooks:{opacity:{get:function(p,g){if(g){var m=Bi(p,"opacity");return m===""?"1":m}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(p,g,m,C){if(p&&p.nodeType!==3&&p.nodeType!==8&&p.style){var M,k,O,j=Zt(g),G=dg.test(g),$=p.style;if(G||(g=Uu(j)),O=y.cssHooks[g]||y.cssHooks[j],m===void 0)return O&&"get"in O&&(M=O.get(p,!1,C))!==void 0?M:$[g];(k=typeof m)=="string"&&(M=Li.exec(m))&&M[1]&&(m=Qf(p,g,M),k="number"),m!=null&&m==m&&(k!=="number"||G||(m+=M&&M[3]||(y.cssNumber[j]?"":"px")),b.clearCloneStyle||m!==""||g.indexOf("background")!==0||($[g]="inherit"),O&&"set"in O&&(m=O.set(p,m,C))===void 0||(G?$.setProperty(g,m):$[g]=m))}},css:function(p,g,m,C){var M,k,O,j=Zt(g);return dg.test(g)||(g=Uu(j)),(O=y.cssHooks[g]||y.cssHooks[j])&&"get"in O&&(M=O.get(p,!0,m)),M===void 0&&(M=Bi(p,g,C)),M==="normal"&&g in fg&&(M=fg[g]),m===""||m?(k=parseFloat(M),m===!0||isFinite(k)?k||0:M):M}}),y.each(["height","width"],function(p,g){y.cssHooks[g]={get:function(m,C,M){if(C)return!sb.test(y.css(m,"display"))||m.getClientRects().length&&m.getBoundingClientRect().width?vg(m,g,M):lg(m,ab,function(){return vg(m,g,M)})},set:function(m,C,M){var k,O=ka(m),j=!b.scrollboxSize()&&O.position==="absolute",G=(j||M)&&y.css(m,"boxSizing",!1,O)==="border-box",$=M?qu(m,g,M,G,O):0;return G&&j&&($-=Math.ceil(m["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(O[g])-qu(m,g,"border",!1,O)-.5)),$&&(k=Li.exec(C))&&(k[3]||"px")!=="px"&&(m.style[g]=C,C=y.css(m,g)),gg(0,C,$)}}}),y.cssHooks.marginLeft=ug(b.reliableMarginLeft,function(p,g){if(g)return(parseFloat(Bi(p,"marginLeft"))||p.getBoundingClientRect().left-lg(p,{marginLeft:0},function(){return p.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(p,g){y.cssHooks[p+g]={expand:function(m){for(var C=0,M={},k=typeof m=="string"?m.split(" "):[m];C<4;C++)M[p+tr[C]+g]=k[C]||k[C-2]||k[0];return M}},p!=="margin"&&(y.cssHooks[p+g].set=gg)}),y.fn.extend({css:function(p,g){return Bt(this,function(m,C,M){var k,O,j={},G=0;if(Array.isArray(C)){for(k=ka(m),O=C.length;G<O;G++)j[C[G]]=y.css(m,C[G],!1,k);return j}return M!==void 0?y.style(m,C,M):y.css(m,C)},p,g,arguments.length>1)}}),y.Tween=Je,Je.prototype={constructor:Je,init:function(p,g,m,C,M,k){this.elem=p,this.prop=m,this.easing=M||y.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=C,this.unit=k||(y.cssNumber[m]?"":"px")},cur:function(){var p=Je.propHooks[this.prop];return p&&p.get?p.get(this):Je.propHooks._default.get(this)},run:function(p){var g,m=Je.propHooks[this.prop];return this.options.duration?this.pos=g=y.easing[this.easing](p,this.options.duration*p,0,1,this.options.duration):this.pos=g=p,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),m&&m.set?m.set(this):Je.propHooks._default.set(this),this}},Je.prototype.init.prototype=Je.prototype,Je.propHooks={_default:{get:function(p){var g;return p.elem.nodeType!==1||p.elem[p.prop]!=null&&p.elem.style[p.prop]==null?p.elem[p.prop]:(g=y.css(p.elem,p.prop,""))&&g!=="auto"?g:0},set:function(p){y.fx.step[p.prop]?y.fx.step[p.prop](p):p.elem.nodeType!==1||!y.cssHooks[p.prop]&&p.elem.style[Uu(p.prop)]==null?p.elem[p.prop]=p.now:y.style(p.elem,p.prop,p.now+p.unit)}}},Je.propHooks.scrollTop=Je.propHooks.scrollLeft={set:function(p){p.elem.nodeType&&p.elem.parentNode&&(p.elem[p.prop]=p.now)}},y.easing={linear:function(p){return p},swing:function(p){return .5-Math.cos(p*Math.PI)/2},_default:"swing"},y.fx=Je.prototype.init,y.fx.step={};var Ro,Ta,Vo,yg,lb=/^(?:toggle|show|hide)$/,ub=/queueHooks$/;function $u(){Ta&&(x.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame($u):n.setTimeout($u,y.fx.interval),y.fx.tick())}function mg(){return n.setTimeout(function(){Ro=void 0}),Ro=Date.now()}function Da(p,g){var m,C=0,M={height:p};for(g=g?1:0;C<4;C+=2-g)M["margin"+(m=tr[C])]=M["padding"+m]=p;return g&&(M.opacity=M.width=p),M}function bg(p,g,m){for(var C,M=(Sn.tweeners[g]||[]).concat(Sn.tweeners["*"]),k=0,O=M.length;k<O;k++)if(C=M[k].call(m,g,p))return C}function Sn(p,g,m){var C,M,k=0,O=Sn.prefilters.length,j=y.Deferred().always(function(){delete G.elem}),G=function(){if(M)return!1;for(var rt=Ro||mg(),Y=Math.max(0,$.startTime+$.duration-rt),K=1-(Y/$.duration||0),mt=0,Mt=$.tweens.length;mt<Mt;mt++)$.tweens[mt].run(K);return j.notifyWith(p,[$,K,Y]),K<1&&Mt?Y:(Mt||j.notifyWith(p,[$,1,0]),j.resolveWith(p,[$]),!1)},$=j.promise({elem:p,props:y.extend({},g),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},m),originalProperties:g,originalOptions:m,startTime:Ro||mg(),duration:m.duration,tweens:[],createTween:function(rt,Y){var K=y.Tween(p,$.opts,rt,Y,$.opts.specialEasing[rt]||$.opts.easing);return $.tweens.push(K),K},stop:function(rt){var Y=0,K=rt?$.tweens.length:0;if(M)return this;for(M=!0;Y<K;Y++)$.tweens[Y].run(1);return rt?(j.notifyWith(p,[$,1,0]),j.resolveWith(p,[$,rt])):j.rejectWith(p,[$,rt]),this}}),Q=$.props;for(!function(rt,Y){var K,mt,Mt,bt,ue;for(K in rt)if(Mt=Y[mt=Zt(K)],bt=rt[K],Array.isArray(bt)&&(Mt=bt[1],bt=rt[K]=bt[0]),K!==mt&&(rt[mt]=bt,delete rt[K]),(ue=y.cssHooks[mt])&&"expand"in ue)for(K in bt=ue.expand(bt),delete rt[mt],bt)K in rt||(rt[K]=bt[K],Y[K]=Mt);else Y[mt]=Mt}(Q,$.opts.specialEasing);k<O;k++)if(C=Sn.prefilters[k].call($,p,Q,$.opts))return w(C.stop)&&(y._queueHooks($.elem,$.opts.queue).stop=C.stop.bind(C)),C;return y.map(Q,bg,$),w($.opts.start)&&$.opts.start.call(p,$),$.progress($.opts.progress).done($.opts.done,$.opts.complete).fail($.opts.fail).always($.opts.always),y.fx.timer(y.extend(G,{elem:p,anim:$,queue:$.opts.queue})),$}y.Animation=y.extend(Sn,{tweeners:{"*":[function(p,g){var m=this.createTween(p,g);return Qf(m.elem,p,Li.exec(g),m),m}]},tweener:function(p,g){w(p)?(g=p,p=["*"]):p=p.match(ft);for(var m,C=0,M=p.length;C<M;C++)m=p[C],Sn.tweeners[m]=Sn.tweeners[m]||[],Sn.tweeners[m].unshift(g)},prefilters:[function(p,g,m){var C,M,k,O,j,G,$,Q,rt="width"in g||"height"in g,Y=this,K={},mt=p.style,Mt=p.nodeType&&Ma(p),bt=At.get(p,"fxshow");for(C in m.queue||((O=y._queueHooks(p,"fx")).unqueued==null&&(O.unqueued=0,j=O.empty.fire,O.empty.fire=function(){O.unqueued||j()}),O.unqueued++,Y.always(function(){Y.always(function(){O.unqueued--,y.queue(p,"fx").length||O.empty.fire()})})),g)if(M=g[C],lb.test(M)){if(delete g[C],k=k||M==="toggle",M===(Mt?"hide":"show")){if(M!=="show"||!bt||bt[C]===void 0)continue;Mt=!0}K[C]=bt&&bt[C]||y.style(p,C)}if((G=!y.isEmptyObject(g))||!y.isEmptyObject(K))for(C in rt&&p.nodeType===1&&(m.overflow=[mt.overflow,mt.overflowX,mt.overflowY],($=bt&&bt.display)==null&&($=At.get(p,"display")),(Q=y.css(p,"display"))==="none"&&($?Q=$:(Lo([p],!0),$=p.style.display||$,Q=y.css(p,"display"),Lo([p]))),(Q==="inline"||Q==="inline-block"&&$!=null)&&y.css(p,"float")==="none"&&(G||(Y.done(function(){mt.display=$}),$==null&&(Q=mt.display,$=Q==="none"?"":Q)),mt.display="inline-block")),m.overflow&&(mt.overflow="hidden",Y.always(function(){mt.overflow=m.overflow[0],mt.overflowX=m.overflow[1],mt.overflowY=m.overflow[2]})),G=!1,K)G||(bt?"hidden"in bt&&(Mt=bt.hidden):bt=At.access(p,"fxshow",{display:$}),k&&(bt.hidden=!Mt),Mt&&Lo([p],!0),Y.done(function(){for(C in Mt||Lo([p]),At.remove(p,"fxshow"),K)y.style(p,C,K[C])})),G=bg(Mt?bt[C]:0,C,Y),C in bt||(bt[C]=G.start,Mt&&(G.end=G.start,G.start=0))}],prefilter:function(p,g){g?Sn.prefilters.unshift(p):Sn.prefilters.push(p)}}),y.speed=function(p,g,m){var C=p&&typeof p=="object"?y.extend({},p):{complete:m||!m&&g||w(p)&&p,duration:p,easing:m&&g||g&&!w(g)&&g};return y.fx.off?C.duration=0:typeof C.duration!="number"&&(C.duration in y.fx.speeds?C.duration=y.fx.speeds[C.duration]:C.duration=y.fx.speeds._default),C.queue!=null&&C.queue!==!0||(C.queue="fx"),C.old=C.complete,C.complete=function(){w(C.old)&&C.old.call(this),C.queue&&y.dequeue(this,C.queue)},C},y.fn.extend({fadeTo:function(p,g,m,C){return this.filter(Ma).css("opacity",0).show().end().animate({opacity:g},p,m,C)},animate:function(p,g,m,C){var M=y.isEmptyObject(p),k=y.speed(g,m,C),O=function(){var j=Sn(this,y.extend({},p),k);(M||At.get(this,"finish"))&&j.stop(!0)};return O.finish=O,M||k.queue===!1?this.each(O):this.queue(k.queue,O)},stop:function(p,g,m){var C=function(M){var k=M.stop;delete M.stop,k(m)};return typeof p!="string"&&(m=g,g=p,p=void 0),g&&this.queue(p||"fx",[]),this.each(function(){var M=!0,k=p!=null&&p+"queueHooks",O=y.timers,j=At.get(this);if(k)j[k]&&j[k].stop&&C(j[k]);else for(k in j)j[k]&&j[k].stop&&ub.test(k)&&C(j[k]);for(k=O.length;k--;)O[k].elem!==this||p!=null&&O[k].queue!==p||(O[k].anim.stop(m),M=!1,O.splice(k,1));!M&&m||y.dequeue(this,p)})},finish:function(p){return p!==!1&&(p=p||"fx"),this.each(function(){var g,m=At.get(this),C=m[p+"queue"],M=m[p+"queueHooks"],k=y.timers,O=C?C.length:0;for(m.finish=!0,y.queue(this,p,[]),M&&M.stop&&M.stop.call(this,!0),g=k.length;g--;)k[g].elem===this&&k[g].queue===p&&(k[g].anim.stop(!0),k.splice(g,1));for(g=0;g<O;g++)C[g]&&C[g].finish&&C[g].finish.call(this);delete m.finish})}}),y.each(["toggle","show","hide"],function(p,g){var m=y.fn[g];y.fn[g]=function(C,M,k){return C==null||typeof C=="boolean"?m.apply(this,arguments):this.animate(Da(g,!0),C,M,k)}}),y.each({slideDown:Da("show"),slideUp:Da("hide"),slideToggle:Da("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(p,g){y.fn[p]=function(m,C,M){return this.animate(g,m,C,M)}}),y.timers=[],y.fx.tick=function(){var p,g=0,m=y.timers;for(Ro=Date.now();g<m.length;g++)(p=m[g])()||m[g]!==p||m.splice(g--,1);m.length||y.fx.stop(),Ro=void 0},y.fx.timer=function(p){y.timers.push(p),y.fx.start()},y.fx.interval=13,y.fx.start=function(){Ta||(Ta=!0,$u())},y.fx.stop=function(){Ta=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(p,g){return p=y.fx&&y.fx.speeds[p]||p,g=g||"fx",this.queue(g,function(m,C){var M=n.setTimeout(m,p);C.stop=function(){n.clearTimeout(M)}})},Vo=x.createElement("input"),yg=x.createElement("select").appendChild(x.createElement("option")),Vo.type="checkbox",b.checkOn=Vo.value!=="",b.optSelected=yg.selected,(Vo=x.createElement("input")).value="t",Vo.type="radio",b.radioValue=Vo.value==="t";var Cg,zi=y.expr.attrHandle;y.fn.extend({attr:function(p,g){return Bt(this,y.attr,p,g,arguments.length>1)},removeAttr:function(p){return this.each(function(){y.removeAttr(this,p)})}}),y.extend({attr:function(p,g,m){var C,M,k=p.nodeType;if(k!==3&&k!==8&&k!==2)return p.getAttribute===void 0?y.prop(p,g,m):(k===1&&y.isXMLDoc(p)||(M=y.attrHooks[g.toLowerCase()]||(y.expr.match.bool.test(g)?Cg:void 0)),m!==void 0?m===null?void y.removeAttr(p,g):M&&"set"in M&&(C=M.set(p,m,g))!==void 0?C:(p.setAttribute(g,m+""),m):M&&"get"in M&&(C=M.get(p,g))!==null?C:(C=y.find.attr(p,g))==null?void 0:C)},attrHooks:{type:{set:function(p,g){if(!b.radioValue&&g==="radio"&&it(p,"input")){var m=p.value;return p.setAttribute("type",g),m&&(p.value=m),g}}}},removeAttr:function(p,g){var m,C=0,M=g&&g.match(ft);if(M&&p.nodeType===1)for(;m=M[C++];)p.removeAttribute(m)}}),Cg={set:function(p,g,m){return g===!1?y.removeAttr(p,m):p.setAttribute(m,m),m}},y.each(y.expr.match.bool.source.match(/\w+/g),function(p,g){var m=zi[g]||y.find.attr;zi[g]=function(C,M,k){var O,j,G=M.toLowerCase();return k||(j=zi[G],zi[G]=O,O=m(C,M,k)!=null?G:null,zi[G]=j),O}});var cb=/^(?:input|select|textarea|button)$/i,hb=/^(?:a|area)$/i;function Zr(p){return(p.match(ft)||[]).join(" ")}function Kr(p){return p.getAttribute&&p.getAttribute("class")||""}function Wu(p){return Array.isArray(p)?p:typeof p=="string"&&p.match(ft)||[]}y.fn.extend({prop:function(p,g){return Bt(this,y.prop,p,g,arguments.length>1)},removeProp:function(p){return this.each(function(){delete this[y.propFix[p]||p]})}}),y.extend({prop:function(p,g,m){var C,M,k=p.nodeType;if(k!==3&&k!==8&&k!==2)return k===1&&y.isXMLDoc(p)||(g=y.propFix[g]||g,M=y.propHooks[g]),m!==void 0?M&&"set"in M&&(C=M.set(p,m,g))!==void 0?C:p[g]=m:M&&"get"in M&&(C=M.get(p,g))!==null?C:p[g]},propHooks:{tabIndex:{get:function(p){var g=y.find.attr(p,"tabindex");return g?parseInt(g,10):cb.test(p.nodeName)||hb.test(p.nodeName)&&p.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(y.propHooks.selected={get:function(p){var g=p.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(p){var g=p.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),y.fn.extend({addClass:function(p){var g,m,C,M,k,O,j,G=0;if(w(p))return this.each(function($){y(this).addClass(p.call(this,$,Kr(this)))});if((g=Wu(p)).length){for(;m=this[G++];)if(M=Kr(m),C=m.nodeType===1&&" "+Zr(M)+" "){for(O=0;k=g[O++];)C.indexOf(" "+k+" ")<0&&(C+=k+" ");M!==(j=Zr(C))&&m.setAttribute("class",j)}}return this},removeClass:function(p){var g,m,C,M,k,O,j,G=0;if(w(p))return this.each(function($){y(this).removeClass(p.call(this,$,Kr(this)))});if(!arguments.length)return this.attr("class","");if((g=Wu(p)).length){for(;m=this[G++];)if(M=Kr(m),C=m.nodeType===1&&" "+Zr(M)+" "){for(O=0;k=g[O++];)for(;C.indexOf(" "+k+" ")>-1;)C=C.replace(" "+k+" "," ");M!==(j=Zr(C))&&m.setAttribute("class",j)}}return this},toggleClass:function(p,g){var m=typeof p,C=m==="string"||Array.isArray(p);return typeof g=="boolean"&&C?g?this.addClass(p):this.removeClass(p):w(p)?this.each(function(M){y(this).toggleClass(p.call(this,M,Kr(this),g),g)}):this.each(function(){var M,k,O,j;if(C)for(k=0,O=y(this),j=Wu(p);M=j[k++];)O.hasClass(M)?O.removeClass(M):O.addClass(M);else p!==void 0&&m!=="boolean"||((M=Kr(this))&&At.set(this,"__className__",M),this.setAttribute&&this.setAttribute("class",M||p===!1?"":At.get(this,"__className__")||""))})},hasClass:function(p){var g,m,C=0;for(g=" "+p+" ";m=this[C++];)if(m.nodeType===1&&(" "+Zr(Kr(m))+" ").indexOf(g)>-1)return!0;return!1}});var pb=/\r/g;y.fn.extend({val:function(p){var g,m,C,M=this[0];return arguments.length?(C=w(p),this.each(function(k){var O;this.nodeType===1&&((O=C?p.call(this,k,y(this).val()):p)==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=y.map(O,function(j){return j==null?"":j+""})),(g=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in g&&g.set(this,O,"value")!==void 0||(this.value=O))})):M?(g=y.valHooks[M.type]||y.valHooks[M.nodeName.toLowerCase()])&&"get"in g&&(m=g.get(M,"value"))!==void 0?m:typeof(m=M.value)=="string"?m.replace(pb,""):m==null?"":m:void 0}}),y.extend({valHooks:{option:{get:function(p){var g=y.find.attr(p,"value");return g!=null?g:Zr(y.text(p))}},select:{get:function(p){var g,m,C,M=p.options,k=p.selectedIndex,O=p.type==="select-one",j=O?null:[],G=O?k+1:M.length;for(C=k<0?G:O?k:0;C<G;C++)if(((m=M[C]).selected||C===k)&&!m.disabled&&(!m.parentNode.disabled||!it(m.parentNode,"optgroup"))){if(g=y(m).val(),O)return g;j.push(g)}return j},set:function(p,g){for(var m,C,M=p.options,k=y.makeArray(g),O=M.length;O--;)((C=M[O]).selected=y.inArray(y.valHooks.option.get(C),k)>-1)&&(m=!0);return m||(p.selectedIndex=-1),k}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(p,g){if(Array.isArray(g))return p.checked=y.inArray(y(p).val(),g)>-1}},b.checkOn||(y.valHooks[this].get=function(p){return p.getAttribute("value")===null?"on":p.value})}),b.focusin="onfocusin"in n;var wg=/^(?:focusinfocus|focusoutblur)$/,xg=function(p){p.stopPropagation()};y.extend(y.event,{trigger:function(p,g,m,C){var M,k,O,j,G,$,Q,rt,Y=[m||x],K=d.call(p,"type")?p.type:p,mt=d.call(p,"namespace")?p.namespace.split("."):[];if(k=rt=O=m=m||x,m.nodeType!==3&&m.nodeType!==8&&!wg.test(K+y.event.triggered)&&(K.indexOf(".")>-1&&(mt=K.split("."),K=mt.shift(),mt.sort()),G=K.indexOf(":")<0&&"on"+K,(p=p[y.expando]?p:new y.Event(K,typeof p=="object"&&p)).isTrigger=C?2:3,p.namespace=mt.join("."),p.rnamespace=p.namespace?new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p.result=void 0,p.target||(p.target=m),g=g==null?[p]:y.makeArray(g,[p]),Q=y.event.special[K]||{},C||!Q.trigger||Q.trigger.apply(m,g)!==!1)){if(!C&&!Q.noBubble&&!P(m)){for(j=Q.delegateType||K,wg.test(j+K)||(k=k.parentNode);k;k=k.parentNode)Y.push(k),O=k;O===(m.ownerDocument||x)&&Y.push(O.defaultView||O.parentWindow||n)}for(M=0;(k=Y[M++])&&!p.isPropagationStopped();)rt=k,p.type=M>1?j:Q.bindType||K,($=(At.get(k,"events")||Object.create(null))[p.type]&&At.get(k,"handle"))&&$.apply(k,g),($=G&&k[G])&&$.apply&&fn(k)&&(p.result=$.apply(k,g),p.result===!1&&p.preventDefault());return p.type=K,C||p.isDefaultPrevented()||Q._default&&Q._default.apply(Y.pop(),g)!==!1||!fn(m)||G&&w(m[K])&&!P(m)&&((O=m[G])&&(m[G]=null),y.event.triggered=K,p.isPropagationStopped()&&rt.addEventListener(K,xg),m[K](),p.isPropagationStopped()&&rt.removeEventListener(K,xg),y.event.triggered=void 0,O&&(m[G]=O)),p.result}},simulate:function(p,g,m){var C=y.extend(new y.Event,m,{type:p,isSimulated:!0});y.event.trigger(C,null,g)}}),y.fn.extend({trigger:function(p,g){return this.each(function(){y.event.trigger(p,g,this)})},triggerHandler:function(p,g){var m=this[0];if(m)return y.event.trigger(p,g,m,!0)}}),b.focusin||y.each({focus:"focusin",blur:"focusout"},function(p,g){var m=function(C){y.event.simulate(g,C.target,y.event.fix(C))};y.event.special[g]={setup:function(){var C=this.ownerDocument||this.document||this,M=At.access(C,g);M||C.addEventListener(p,m,!0),At.access(C,g,(M||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,M=At.access(C,g)-1;M?At.access(C,g,M):(C.removeEventListener(p,m,!0),At.remove(C,g))}}});var Ri=n.location,Eg={guid:Date.now()},Xu=/\?/;y.parseXML=function(p){var g,m;if(!p||typeof p!="string")return null;try{g=new n.DOMParser().parseFromString(p,"text/xml")}catch{}return m=g&&g.getElementsByTagName("parsererror")[0],g&&!m||y.error("Invalid XML: "+(m?y.map(m.childNodes,function(C){return C.textContent}).join(`
`):p)),g};var db=/\[\]$/,Ag=/\r?\n/g,fb=/^(?:submit|button|image|reset|file)$/i,gb=/^(?:input|select|textarea|keygen)/i;function Yu(p,g,m,C){var M;if(Array.isArray(g))y.each(g,function(k,O){m||db.test(p)?C(p,O):Yu(p+"["+(typeof O=="object"&&O!=null?k:"")+"]",O,m,C)});else if(m||N(g)!=="object")C(p,g);else for(M in g)Yu(p+"["+M+"]",g[M],m,C)}y.param=function(p,g){var m,C=[],M=function(k,O){var j=w(O)?O():O;C[C.length]=encodeURIComponent(k)+"="+encodeURIComponent(j==null?"":j)};if(p==null)return"";if(Array.isArray(p)||p.jquery&&!y.isPlainObject(p))y.each(p,function(){M(this.name,this.value)});else for(m in p)Yu(m,p[m],g,M);return C.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var p=y.prop(this,"elements");return p?y.makeArray(p):this}).filter(function(){var p=this.type;return this.name&&!y(this).is(":disabled")&&gb.test(this.nodeName)&&!fb.test(p)&&(this.checked||!Fi.test(p))}).map(function(p,g){var m=y(this).val();return m==null?null:Array.isArray(m)?y.map(m,function(C){return{name:g.name,value:C.replace(Ag,`\r
`)}}):{name:g.name,value:m.replace(Ag,`\r
`)}}).get()}});var vb=/%20/g,yb=/#.*$/,mb=/([?&])_=[^&]*/,bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:GET|HEAD)$/,wb=/^\/\//,Pg={},Ju={},Mg="*/".concat("*"),Zu=x.createElement("a");function Sg(p){return function(g,m){typeof g!="string"&&(m=g,g="*");var C,M=0,k=g.toLowerCase().match(ft)||[];if(w(m))for(;C=k[M++];)C[0]==="+"?(C=C.slice(1)||"*",(p[C]=p[C]||[]).unshift(m)):(p[C]=p[C]||[]).push(m)}}function kg(p,g,m,C){var M={},k=p===Ju;function O(j){var G;return M[j]=!0,y.each(p[j]||[],function($,Q){var rt=Q(g,m,C);return typeof rt!="string"||k||M[rt]?k?!(G=rt):void 0:(g.dataTypes.unshift(rt),O(rt),!1)}),G}return O(g.dataTypes[0])||!M["*"]&&O("*")}function Ku(p,g){var m,C,M=y.ajaxSettings.flatOptions||{};for(m in g)g[m]!==void 0&&((M[m]?p:C||(C={}))[m]=g[m]);return C&&y.extend(!0,p,C),p}Zu.href=Ri.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ri.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ri.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mg,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(p,g){return g?Ku(Ku(p,y.ajaxSettings),g):Ku(y.ajaxSettings,p)},ajaxPrefilter:Sg(Pg),ajaxTransport:Sg(Ju),ajax:function(p,g){typeof p=="object"&&(g=p,p=void 0),g=g||{};var m,C,M,k,O,j,G,$,Q,rt,Y=y.ajaxSetup({},g),K=Y.context||Y,mt=Y.context&&(K.nodeType||K.jquery)?y(K):y.event,Mt=y.Deferred(),bt=y.Callbacks("once memory"),ue=Y.statusCode||{},Me={},en={},Kt="canceled",Nt={readyState:0,getResponseHeader:function(_t){var ce;if(G){if(!k)for(k={};ce=bb.exec(M);)k[ce[1].toLowerCase()+" "]=(k[ce[1].toLowerCase()+" "]||[]).concat(ce[2]);ce=k[_t.toLowerCase()+" "]}return ce==null?null:ce.join(", ")},getAllResponseHeaders:function(){return G?M:null},setRequestHeader:function(_t,ce){return G==null&&(_t=en[_t.toLowerCase()]=en[_t.toLowerCase()]||_t,Me[_t]=ce),this},overrideMimeType:function(_t){return G==null&&(Y.mimeType=_t),this},statusCode:function(_t){var ce;if(_t)if(G)Nt.always(_t[Nt.status]);else for(ce in _t)ue[ce]=[ue[ce],_t[ce]];return this},abort:function(_t){var ce=_t||Kt;return m&&m.abort(ce),Ze(0,ce),this}};if(Mt.promise(Nt),Y.url=((p||Y.url||Ri.href)+"").replace(wb,Ri.protocol+"//"),Y.type=g.method||g.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(ft)||[""],Y.crossDomain==null){j=x.createElement("a");try{j.href=Y.url,j.href=j.href,Y.crossDomain=Zu.protocol+"//"+Zu.host!=j.protocol+"//"+j.host}catch{Y.crossDomain=!0}}if(Y.data&&Y.processData&&typeof Y.data!="string"&&(Y.data=y.param(Y.data,Y.traditional)),kg(Pg,Y,g,Nt),G)return Nt;for(Q in($=y.event&&Y.global)&&y.active++==0&&y.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!Cb.test(Y.type),C=Y.url.replace(yb,""),Y.hasContent?Y.data&&Y.processData&&(Y.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Y.data=Y.data.replace(vb,"+")):(rt=Y.url.slice(C.length),Y.data&&(Y.processData||typeof Y.data=="string")&&(C+=(Xu.test(C)?"&":"?")+Y.data,delete Y.data),Y.cache===!1&&(C=C.replace(mb,"$1"),rt=(Xu.test(C)?"&":"?")+"_="+Eg.guid+++rt),Y.url=C+rt),Y.ifModified&&(y.lastModified[C]&&Nt.setRequestHeader("If-Modified-Since",y.lastModified[C]),y.etag[C]&&Nt.setRequestHeader("If-None-Match",y.etag[C])),(Y.data&&Y.hasContent&&Y.contentType!==!1||g.contentType)&&Nt.setRequestHeader("Content-Type",Y.contentType),Nt.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+(Y.dataTypes[0]!=="*"?", "+Mg+"; q=0.01":""):Y.accepts["*"]),Y.headers)Nt.setRequestHeader(Q,Y.headers[Q]);if(Y.beforeSend&&(Y.beforeSend.call(K,Nt,Y)===!1||G))return Nt.abort();if(Kt="abort",bt.add(Y.complete),Nt.done(Y.success),Nt.fail(Y.error),m=kg(Ju,Y,g,Nt)){if(Nt.readyState=1,$&&mt.trigger("ajaxSend",[Nt,Y]),G)return Nt;Y.async&&Y.timeout>0&&(O=n.setTimeout(function(){Nt.abort("timeout")},Y.timeout));try{G=!1,m.send(Me,Ze)}catch(_t){if(G)throw _t;Ze(-1,_t)}}else Ze(-1,"No Transport");function Ze(_t,ce,ji,Na){var nn,Qr,jo,Ke,Io,vn=ce;G||(G=!0,O&&n.clearTimeout(O),m=void 0,M=Na||"",Nt.readyState=_t>0?4:0,nn=_t>=200&&_t<300||_t===304,ji&&(Ke=function(he,rn,on){for(var jn,Ce,$t,Se,sn=he.contents,we=he.dataTypes;we[0]==="*";)we.shift(),jn===void 0&&(jn=he.mimeType||rn.getResponseHeader("Content-Type"));if(jn){for(Ce in sn)if(sn[Ce]&&sn[Ce].test(jn)){we.unshift(Ce);break}}if(we[0]in on)$t=we[0];else{for(Ce in on){if(!we[0]||he.converters[Ce+" "+we[0]]){$t=Ce;break}Se||(Se=Ce)}$t=$t||Se}if($t)return $t!==we[0]&&we.unshift($t),on[$t]}(Y,Nt,ji)),!nn&&y.inArray("script",Y.dataTypes)>-1&&y.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),Ke=function(he,rn,on,jn){var Ce,$t,Se,sn,we,an={},_o=he.dataTypes.slice();if(_o[1])for(Se in he.converters)an[Se.toLowerCase()]=he.converters[Se];for($t=_o.shift();$t;)if(he.responseFields[$t]&&(on[he.responseFields[$t]]=rn),!we&&jn&&he.dataFilter&&(rn=he.dataFilter(rn,he.dataType)),we=$t,$t=_o.shift()){if($t==="*")$t=we;else if(we!=="*"&&we!==$t){if(!(Se=an[we+" "+$t]||an["* "+$t])){for(Ce in an)if((sn=Ce.split(" "))[1]===$t&&(Se=an[we+" "+sn[0]]||an["* "+sn[0]])){Se===!0?Se=an[Ce]:an[Ce]!==!0&&($t=sn[0],_o.unshift(sn[1]));break}}if(Se!==!0)if(Se&&he.throws)rn=Se(rn);else try{rn=Se(rn)}catch(Oa){return{state:"parsererror",error:Se?Oa:"No conversion from "+we+" to "+$t}}}}return{state:"success",data:rn}}(Y,Ke,Nt,nn),nn?(Y.ifModified&&((Io=Nt.getResponseHeader("Last-Modified"))&&(y.lastModified[C]=Io),(Io=Nt.getResponseHeader("etag"))&&(y.etag[C]=Io)),_t===204||Y.type==="HEAD"?vn="nocontent":_t===304?vn="notmodified":(vn=Ke.state,Qr=Ke.data,nn=!(jo=Ke.error))):(jo=vn,!_t&&vn||(vn="error",_t<0&&(_t=0))),Nt.status=_t,Nt.statusText=(ce||vn)+"",nn?Mt.resolveWith(K,[Qr,vn,Nt]):Mt.rejectWith(K,[Nt,vn,jo]),Nt.statusCode(ue),ue=void 0,$&&mt.trigger(nn?"ajaxSuccess":"ajaxError",[Nt,Y,nn?Qr:jo]),bt.fireWith(K,[Nt,vn]),$&&(mt.trigger("ajaxComplete",[Nt,Y]),--y.active||y.event.trigger("ajaxStop")))}return Nt},getJSON:function(p,g,m){return y.get(p,g,m,"json")},getScript:function(p,g){return y.get(p,void 0,g,"script")}}),y.each(["get","post"],function(p,g){y[g]=function(m,C,M,k){return w(C)&&(k=k||M,M=C,C=void 0),y.ajax(y.extend({url:m,type:g,dataType:k,data:C,success:M},y.isPlainObject(m)&&m))}}),y.ajaxPrefilter(function(p){var g;for(g in p.headers)g.toLowerCase()==="content-type"&&(p.contentType=p.headers[g]||"")}),y._evalUrl=function(p,g,m){return y.ajax({url:p,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){y.globalEval(C,g,m)}})},y.fn.extend({wrapAll:function(p){var g;return this[0]&&(w(p)&&(p=p.call(this[0])),g=y(p,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var m=this;m.firstElementChild;)m=m.firstElementChild;return m}).append(this)),this},wrapInner:function(p){return w(p)?this.each(function(g){y(this).wrapInner(p.call(this,g))}):this.each(function(){var g=y(this),m=g.contents();m.length?m.wrapAll(p):g.append(p)})},wrap:function(p){var g=w(p);return this.each(function(m){y(this).wrapAll(g?p.call(this,m):p)})},unwrap:function(p){return this.parent(p).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(p){return!y.expr.pseudos.visible(p)},y.expr.pseudos.visible=function(p){return!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch{}};var xb={0:200,1223:204},Vi=y.ajaxSettings.xhr();b.cors=!!Vi&&"withCredentials"in Vi,b.ajax=Vi=!!Vi,y.ajaxTransport(function(p){var g,m;if(b.cors||Vi&&!p.crossDomain)return{send:function(C,M){var k,O=p.xhr();if(O.open(p.type,p.url,p.async,p.username,p.password),p.xhrFields)for(k in p.xhrFields)O[k]=p.xhrFields[k];for(k in p.mimeType&&O.overrideMimeType&&O.overrideMimeType(p.mimeType),p.crossDomain||C["X-Requested-With"]||(C["X-Requested-With"]="XMLHttpRequest"),C)O.setRequestHeader(k,C[k]);g=function(j){return function(){g&&(g=m=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,j==="abort"?O.abort():j==="error"?typeof O.status!="number"?M(0,"error"):M(O.status,O.statusText):M(xb[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=g(),m=O.onerror=O.ontimeout=g("error"),O.onabort!==void 0?O.onabort=m:O.onreadystatechange=function(){O.readyState===4&&n.setTimeout(function(){g&&m()})},g=g("abort");try{O.send(p.hasContent&&p.data||null)}catch(j){if(g)throw j}},abort:function(){g&&g()}}}),y.ajaxPrefilter(function(p){p.crossDomain&&(p.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(p){return y.globalEval(p),p}}}),y.ajaxPrefilter("script",function(p){p.cache===void 0&&(p.cache=!1),p.crossDomain&&(p.type="GET")}),y.ajaxTransport("script",function(p){var g,m;if(p.crossDomain||p.scriptAttrs)return{send:function(C,M){g=y("<script>").attr(p.scriptAttrs||{}).prop({charset:p.scriptCharset,src:p.url}).on("load error",m=function(k){g.remove(),m=null,k&&M(k.type==="error"?404:200,k.type)}),x.head.appendChild(g[0])},abort:function(){m&&m()}}});var Tg,Dg=[],Qu=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var p=Dg.pop()||y.expando+"_"+Eg.guid++;return this[p]=!0,p}}),y.ajaxPrefilter("json jsonp",function(p,g,m){var C,M,k,O=p.jsonp!==!1&&(Qu.test(p.url)?"url":typeof p.data=="string"&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qu.test(p.data)&&"data");if(O||p.dataTypes[0]==="jsonp")return C=p.jsonpCallback=w(p.jsonpCallback)?p.jsonpCallback():p.jsonpCallback,O?p[O]=p[O].replace(Qu,"$1"+C):p.jsonp!==!1&&(p.url+=(Xu.test(p.url)?"&":"?")+p.jsonp+"="+C),p.converters["script json"]=function(){return k||y.error(C+" was not called"),k[0]},p.dataTypes[0]="json",M=n[C],n[C]=function(){k=arguments},m.always(function(){M===void 0?y(n).removeProp(C):n[C]=M,p[C]&&(p.jsonpCallback=g.jsonpCallback,Dg.push(C)),k&&w(M)&&M(k[0]),k=M=void 0}),"script"}),b.createHTMLDocument=((Tg=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Tg.childNodes.length===2),y.parseHTML=function(p,g,m){return typeof p!="string"?[]:(typeof g=="boolean"&&(m=g,g=!1),g||(b.createHTMLDocument?((C=(g=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,g.head.appendChild(C)):g=x),k=!m&&[],(M=ct.exec(p))?[g.createElement(M[1])]:(M=rg([p],g,k),k&&k.length&&y(k).remove(),y.merge([],M.childNodes)));var C,M,k},y.fn.load=function(p,g,m){var C,M,k,O=this,j=p.indexOf(" ");return j>-1&&(C=Zr(p.slice(j)),p=p.slice(0,j)),w(g)?(m=g,g=void 0):g&&typeof g=="object"&&(M="POST"),O.length>0&&y.ajax({url:p,type:M||"GET",dataType:"html",data:g}).done(function(G){k=arguments,O.html(C?y("<div>").append(y.parseHTML(G)).find(C):G)}).always(m&&function(G,$){O.each(function(){m.apply(this,k||[G.responseText,$,G])})}),this},y.expr.pseudos.animated=function(p){return y.grep(y.timers,function(g){return p===g.elem}).length},y.offset={setOffset:function(p,g,m){var C,M,k,O,j,G,$=y.css(p,"position"),Q=y(p),rt={};$==="static"&&(p.style.position="relative"),j=Q.offset(),k=y.css(p,"top"),G=y.css(p,"left"),($==="absolute"||$==="fixed")&&(k+G).indexOf("auto")>-1?(O=(C=Q.position()).top,M=C.left):(O=parseFloat(k)||0,M=parseFloat(G)||0),w(g)&&(g=g.call(p,m,y.extend({},j))),g.top!=null&&(rt.top=g.top-j.top+O),g.left!=null&&(rt.left=g.left-j.left+M),"using"in g?g.using.call(p,rt):Q.css(rt)}},y.fn.extend({offset:function(p){if(arguments.length)return p===void 0?this:this.each(function(M){y.offset.setOffset(this,p,M)});var g,m,C=this[0];return C?C.getClientRects().length?(g=C.getBoundingClientRect(),m=C.ownerDocument.defaultView,{top:g.top+m.pageYOffset,left:g.left+m.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var p,g,m,C=this[0],M={top:0,left:0};if(y.css(C,"position")==="fixed")g=C.getBoundingClientRect();else{for(g=this.offset(),m=C.ownerDocument,p=C.offsetParent||m.documentElement;p&&(p===m.body||p===m.documentElement)&&y.css(p,"position")==="static";)p=p.parentNode;p&&p!==C&&p.nodeType===1&&((M=y(p).offset()).top+=y.css(p,"borderTopWidth",!0),M.left+=y.css(p,"borderLeftWidth",!0))}return{top:g.top-M.top-y.css(C,"marginTop",!0),left:g.left-M.left-y.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var p=this.offsetParent;p&&y.css(p,"position")==="static";)p=p.offsetParent;return p||Jr})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(p,g){var m=g==="pageYOffset";y.fn[p]=function(C){return Bt(this,function(M,k,O){var j;if(P(M)?j=M:M.nodeType===9&&(j=M.defaultView),O===void 0)return j?j[g]:M[k];j?j.scrollTo(m?j.pageXOffset:O,m?O:j.pageYOffset):M[k]=O},p,C,arguments.length)}}),y.each(["top","left"],function(p,g){y.cssHooks[g]=ug(b.pixelPosition,function(m,C){if(C)return C=Bi(m,g),Hu.test(C)?y(m).position()[g]+"px":C})}),y.each({Height:"height",Width:"width"},function(p,g){y.each({padding:"inner"+p,content:g,"":"outer"+p},function(m,C){y.fn[C]=function(M,k){var O=arguments.length&&(m||typeof M!="boolean"),j=m||(M===!0||k===!0?"margin":"border");return Bt(this,function(G,$,Q){var rt;return P(G)?C.indexOf("outer")===0?G["inner"+p]:G.document.documentElement["client"+p]:G.nodeType===9?(rt=G.documentElement,Math.max(G.body["scroll"+p],rt["scroll"+p],G.body["offset"+p],rt["offset"+p],rt["client"+p])):Q===void 0?y.css(G,$,j):y.style(G,$,Q,j)},g,O?M:void 0,O)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(p,g){y.fn[g]=function(m){return this.on(g,m)}}),y.fn.extend({bind:function(p,g,m){return this.on(p,null,g,m)},unbind:function(p,g){return this.off(p,null,g)},delegate:function(p,g,m,C){return this.on(g,p,m,C)},undelegate:function(p,g,m){return arguments.length===1?this.off(p,"**"):this.off(g,p||"**",m)},hover:function(p,g){return this.mouseenter(p).mouseleave(g||p)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(p,g){y.fn[g]=function(m,C){return arguments.length>0?this.on(g,null,m,C):this.trigger(g)}});var Eb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;y.proxy=function(p,g){var m,C,M;if(typeof g=="string"&&(m=p[g],g=p,p=m),w(p))return C=o.call(arguments,2),(M=function(){return p.apply(g||this,C.concat(o.call(arguments)))}).guid=p.guid=p.guid||y.guid++,M},y.holdReady=function(p){p?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=it,y.isFunction=w,y.isWindow=P,y.camelCase=Zt,y.type=N,y.now=Date.now,y.isNumeric=function(p){var g=y.type(p);return(g==="number"||g==="string")&&!isNaN(p-parseFloat(p))},y.trim=function(p){return p==null?"":(p+"").replace(Eb,"")};var Ab=n.jQuery,Pb=n.$;return y.noConflict=function(p){return n.$===y&&(n.$=Pb),p&&n.jQuery===y&&(n.jQuery=Ab),y},t===void 0&&(n.jQuery=n.$=y),y})})(wt);var Ct=wt.exports;/*!
     * jQuery Mousewheel 3.1.13
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license
     * http://jquery.org/license
     */(function(i,n){i.exports=function(t){var e,r,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(t.event.fixHooks)for(var l=o.length;l;)t.event.fixHooks[o[--l]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var v=s.length;v;)this.addEventListener(s[--v],h,!1);else this.onmousewheel=h;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var v=s.length;v;)this.removeEventListener(s[--v],h,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(v){var b=t(v),w=b["offsetParent"in t.fn?"offsetParent":"parent"]();return w.length||(w=t("body")),parseInt(w.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(v){return t(v).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function h(v){var b=v||window.event,w=a.call(arguments,1),P=0,x=0,S=0,D=0,N=0,V=0;if((v=t.event.fix(b)).type="mousewheel","detail"in b&&(S=-1*b.detail),"wheelDelta"in b&&(S=b.wheelDelta),"wheelDeltaY"in b&&(S=b.wheelDeltaY),"wheelDeltaX"in b&&(x=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(x=-1*S,S=0),P=S===0?x:S,"deltaY"in b&&(P=S=-1*b.deltaY),"deltaX"in b&&(x=b.deltaX,S===0&&(P=-1*x)),S!==0||x!==0){if(b.deltaMode===1){var y=t.data(this,"mousewheel-line-height");P*=y,S*=y,x*=y}else if(b.deltaMode===2){var H=t.data(this,"mousewheel-page-height");P*=H,S*=H,x*=H}if(D=Math.max(Math.abs(S),Math.abs(x)),(!r||D<r)&&(r=D,f(b,D)&&(r/=40)),f(b,D)&&(P/=40,x/=40,S/=40),P=Math[P>=1?"floor":"ceil"](P/r),x=Math[x>=1?"floor":"ceil"](x/r),S=Math[S>=1?"floor":"ceil"](S/r),u.settings.normalizeOffset&&this.getBoundingClientRect){var I=this.getBoundingClientRect();N=v.clientX-I.left,V=v.clientY-I.top}return v.deltaX=x,v.deltaY=S,v.deltaFactor=r,v.offsetX=N,v.offsetY=V,v.deltaMode=0,w.unshift(v,P,x,S),e&&clearTimeout(e),e=setTimeout(d,200),(t.event.dispatch||t.event.handle).apply(this,w)}}function d(){r=null}function f(v,b){return u.settings.adjustOldDeltas&&v.type==="mousewheel"&&b%120==0}t.fn.extend({mousewheel:function(v){return v?this.bind("mousewheel",v):this.trigger("mousewheel")},unmousewheel:function(v){return this.unbind("mousewheel",v)}})}})({exports:{}});var kt,Pt=!1,xt=!1,It=!1,Nn=!1,Ue=!1,Gn=!1,Er=!1,Yi=!1,xc=!1,Ec=!1,Ac=!1,Pc=!1,Mc=!1,Sc=!1,kc=!1,Tc=!1;if(typeof navigator=="object"){var De=navigator.userAgent;Pt=De.indexOf("Macintosh")>=0,xt=!!De.match(/(iPad|iPhone|iPod)/g),It=De.indexOf("Windows")>=0,Nn=De.indexOf("MSIE")>=0,Ue=!!De.match(/Trident\/7\./),Gn=!!De.match(/Edge\//),Er=De.indexOf("Mozilla/")>=0&&De.indexOf("MSIE")<0&&De.indexOf("Edge/")<0,xc=De.indexOf("Chrome/")>=0&&De.indexOf("Edge/")<0,Ec=De.indexOf("Opera/")>=0||De.indexOf("OPR/")>=0,Ac=De.indexOf("Firefox/")>=0,Pc=De.indexOf("AppleWebKit/")>=0&&De.indexOf("Chrome/")<0&&De.indexOf("Edge/")<0,typeof document=="object"&&(Tc=!document.createElementNS||""+document.createElementNS("http://www.w3.org/2000/svg","foreignObject")!="[object SVGForeignObjectElement]"||De.indexOf("Opera/")>=0)}if(typeof window=="object"&&(Yi=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Sc=window.PointerEvent!=null&&!Pt),typeof document=="object"){Mc="ontouchstart"in document.documentElement;try{var k0=Object.defineProperty({},"passive",{get:function(){kc=!0}}),Dc=document.createElement("div");Dc.addEventListener&&Dc.addEventListener("click",function(){},k0)}catch{}}if(c.Platform=void 0,(kt=c.Platform||(c.Platform={})).IS_MAC=Pt,kt.IS_IOS=xt,kt.IS_WINDOWS=It,kt.IS_IE=Nn,kt.IS_IE11=Ue,kt.IS_EDGE=Gn,kt.IS_NETSCAPE=Er,kt.IS_CHROME_APP=Yi,kt.IS_CHROME=xc,kt.IS_OPERA=Ec,kt.IS_FIREFOX=Ac,kt.IS_SAFARI=Pc,kt.SUPPORT_TOUCH=Mc,kt.SUPPORT_POINTER=Sc,kt.SUPPORT_PASSIVE=kc,kt.NO_FOREIGNOBJECT=Tc,kt.SUPPORT_FOREIGNOBJECT=!kt.NO_FOREIGNOBJECT,function(i){function n(){var e=window.module;return e!=null&&e.hot!=null&&e.hot.status!=null?e.hot.status():"unkonwn"}i.getHMRStatus=n,i.isApplyingHMR=function(){return n()==="apply"};var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};i.isEventSupported=function(e){var r=document.createElement(t[e]||"div"),o="on"+e,s=o in r;return s||(r.setAttribute(o,"return;"),s=typeof r[o]=="function"),s}}(c.Platform||(c.Platform={})),c.Platform.SUPPORT_PASSIVE){Ct.event.special.touchstart={setup:function(i,n,t){if(!this.addEventListener)return!1;this.addEventListener("touchstart",t,{passive:!0})}};var qa=Ct.event.special.mousewheel;if(qa){var T0=qa.setup;qa.setup=function(){var i=this,n=this.addEventListener;if(!n)return!1;this.addEventListener=function(t,e){n.call(i,t,e,{passive:!0})},T0.call(this),this.addEventListener=n}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(i){Object.prototype.hasOwnProperty.call(i,"append")||Object.defineProperty(i,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=document.createDocumentFragment();n.forEach(function(r){var o=r instanceof Node;e.appendChild(o?r:document.createTextNode(String(r)))}),this.appendChild(e)}})});var Nc=typeof Te=="object"&&Te&&Te.Object===Object&&Te,D0=typeof self=="object"&&self&&self.Object===Object&&self,Qe=Nc||D0||Function("return this")(),ln=Qe.Symbol,Oc=Object.prototype,N0=Oc.hasOwnProperty,O0=Oc.toString,qo=ln?ln.toStringTag:void 0,L0=Object.prototype.toString,Lc=ln?ln.toStringTag:void 0;function un(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Lc&&Lc in Object(i)?function(n){var t=N0.call(n,qo),e=n[qo];try{n[qo]=void 0;var r=!0}catch{}var o=O0.call(n);return r&&(t?n[qo]=e:delete n[qo]),o}(i):function(n){return L0.call(n)}(i)}function je(i){return i!=null&&typeof i=="object"}function On(i){return typeof i=="symbol"||je(i)&&un(i)=="[object Symbol]"}function ro(i,n){for(var t=-1,e=i==null?0:i.length,r=Array(e);++t<e;)r[t]=n(i[t],t,i);return r}var Ee=Array.isArray,Fc=ln?ln.prototype:void 0,Bc=Fc?Fc.toString:void 0;function sr(i){if(typeof i=="string")return i;if(Ee(i))return ro(i,sr)+"";if(On(i))return Bc?Bc.call(i):"";var n=i+"";return n=="0"&&1/i==-1/0?"-0":n}var F0=/\s/,B0=/^\s+/;function z0(i){return i&&i.slice(0,function(n){for(var t=n.length;t--&&F0.test(n.charAt(t)););return t}(i)+1).replace(B0,"")}function ie(i){var n=typeof i;return i!=null&&(n=="object"||n=="function")}var R0=/^[-+]0x[0-9a-f]+$/i,V0=/^0b[01]+$/i,j0=/^0o[0-7]+$/i,I0=parseInt;function ar(i){if(typeof i=="number")return i;if(On(i))return NaN;if(ie(i)){var n=typeof i.valueOf=="function"?i.valueOf():i;i=ie(n)?n+"":n}if(typeof i!="string")return i===0?i:+i;i=z0(i);var t=V0.test(i);return t||j0.test(i)?I0(i.slice(2),t?2:8):R0.test(i)?NaN:+i}var _0=1/0;function Ji(i){return i?(i=ar(i))===_0||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0}function mn(i){var n=Ji(i),t=n%1;return n==n?t?n-t:n:0}function Ar(i){return i}function $o(i){if(!ie(i))return!1;var n=un(i);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"}var zc,$a=Qe["__core-js_shared__"],Rc=(zc=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||""))?"Symbol(src)_1."+zc:"",G0=Function.prototype.toString;function Pr(i){if(i!=null){try{return G0.call(i)}catch{}try{return i+""}catch{}}return""}var H0=/^\[object .+?Constructor\]$/,U0=Function.prototype,q0=Object.prototype,$0=U0.toString,W0=q0.hasOwnProperty,X0=RegExp("^"+$0.call(W0).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y0(i){return!(!ie(i)||(n=i,Rc&&Rc in n))&&($o(i)?X0:H0).test(Pr(i));var n}function Mr(i,n){var t=function(e,r){return e==null?void 0:e[r]}(i,n);return Y0(t)?t:void 0}var Wa=Mr(Qe,"WeakMap"),Vc=Object.create,J0=function(){function i(){}return function(n){if(!ie(n))return{};if(Vc)return Vc(n);i.prototype=n;var t=new i;return i.prototype=void 0,t}}();function Xa(i,n,t){switch(t.length){case 0:return i.call(n);case 1:return i.call(n,t[0]);case 2:return i.call(n,t[0],t[1]);case 3:return i.call(n,t[0],t[1],t[2])}return i.apply(n,t)}function jc(){}function Ic(i,n){var t=-1,e=i.length;for(n||(n=Array(e));++t<e;)n[t]=i[t];return n}var Z0=Date.now,_c,Ya,Ja,Zi=function(){try{var i=Mr(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Gc=(_c=Zi?function(i,n){return Zi(i,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:Ar,Ya=0,Ja=0,function(){var i=Z0(),n=16-(i-Ja);if(Ja=i,n>0){if(++Ya>=800)return arguments[0]}else Ya=0;return _c.apply(void 0,arguments)});function K0(i){return i!=i}function Hc(i,n){return!!(i!=null&&i.length)&&function(t,e,r){return e==e?function(o,s,a){for(var l=a-1,u=o.length;++l<u;)if(o[l]===s)return l;return-1}(t,e,r):function(o,s,a,l){for(var u=o.length,h=a+(l?1:-1);l?h--:++h<u;)if(s(o[h],h,o))return h;return-1}(t,K0,r)}(i,n,0)>-1}var Q0=/^(?:0|[1-9]\d*)$/;function Ki(i,n){var t=typeof i;return!!(n=n==null?9007199254740991:n)&&(t=="number"||t!="symbol"&&Q0.test(i))&&i>-1&&i%1==0&&i<n}function Qi(i,n,t){n=="__proto__"&&Zi?Zi(i,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[n]=t}function Sr(i,n){return i===n||i!=i&&n!=n}var tv=Object.prototype.hasOwnProperty;function Za(i,n,t){var e=i[n];tv.call(i,n)&&Sr(e,t)&&(t!==void 0||n in i)||Qi(i,n,t)}function kr(i,n,t,e){var r=!t;t||(t={});for(var o=-1,s=n.length;++o<s;){var a=n[o],l=e?e(t[a],i[a],a,t,i):void 0;l===void 0&&(l=i[a]),r?Qi(t,a,l):Za(t,a,l)}return t}var Uc=Math.max;function qc(i,n,t){return n=Uc(n===void 0?i.length-1:n,0),function(){for(var e=arguments,r=-1,o=Uc(e.length-n,0),s=Array(o);++r<o;)s[r]=e[n+r];r=-1;for(var a=Array(n+1);++r<n;)a[r]=e[r];return a[n]=t(s),Xa(i,this,a)}}function lr(i,n){return Gc(qc(i,n,Ar),i+"")}function Ka(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991}function Hn(i){return i!=null&&Ka(i.length)&&!$o(i)}function Tr(i,n,t){if(!ie(t))return!1;var e=typeof n;return!!(e=="number"?Hn(t)&&Ki(n,t.length):e=="string"&&n in t)&&Sr(t[n],i)}function ts(i){return lr(function(n,t){var e=-1,r=t.length,o=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(o=i.length>3&&typeof o=="function"?(r--,o):void 0,s&&Tr(t[0],t[1],s)&&(o=r<3?void 0:o,r=1),n=Object(n);++e<r;){var a=t[e];a&&i(n,a,e,o)}return n})}var ev=Object.prototype;function es(i){var n=i&&i.constructor;return i===(typeof n=="function"&&n.prototype||ev)}function $c(i){return je(i)&&un(i)=="[object Arguments]"}var Wc=Object.prototype,nv=Wc.hasOwnProperty,rv=Wc.propertyIsEnumerable,oo=$c(function(){return arguments}())?$c:function(i){return je(i)&&nv.call(i,"callee")&&!rv.call(i,"callee")},Xc=typeof c=="object"&&c&&!c.nodeType&&c,Yc=Xc&&!0&&E&&!E.nodeType&&E,Jc=Yc&&Yc.exports===Xc?Qe.Buffer:void 0,io=(Jc?Jc.isBuffer:void 0)||function(){return!1},oe={};function so(i){return function(n){return i(n)}}oe["[object Float32Array]"]=oe["[object Float64Array]"]=oe["[object Int8Array]"]=oe["[object Int16Array]"]=oe["[object Int32Array]"]=oe["[object Uint8Array]"]=oe["[object Uint8ClampedArray]"]=oe["[object Uint16Array]"]=oe["[object Uint32Array]"]=!0,oe["[object Arguments]"]=oe["[object Array]"]=oe["[object ArrayBuffer]"]=oe["[object Boolean]"]=oe["[object DataView]"]=oe["[object Date]"]=oe["[object Error]"]=oe["[object Function]"]=oe["[object Map]"]=oe["[object Number]"]=oe["[object Object]"]=oe["[object RegExp]"]=oe["[object Set]"]=oe["[object String]"]=oe["[object WeakMap]"]=!1;var Zc=typeof c=="object"&&c&&!c.nodeType&&c,Wo=Zc&&!0&&E&&!E.nodeType&&E,Qa=Wo&&Wo.exports===Zc&&Nc.process,ur=function(){try{var i=Wo&&Wo.require&&Wo.require("util").types;return i||Qa&&Qa.binding&&Qa.binding("util")}catch{}}(),Kc=ur&&ur.isTypedArray,ns=Kc?so(Kc):function(i){return je(i)&&Ka(i.length)&&!!oe[un(i)]},ov=Object.prototype.hasOwnProperty;function Qc(i,n){var t=Ee(i),e=!t&&oo(i),r=!t&&!e&&io(i),o=!t&&!e&&!r&&ns(i),s=t||e||r||o,a=s?function(h,d){for(var f=-1,v=Array(h);++f<h;)v[f]=d(f);return v}(i.length,String):[],l=a.length;for(var u in i)!n&&!ov.call(i,u)||s&&(u=="length"||r&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ki(u,l))||a.push(u);return a}function th(i,n){return function(t){return i(n(t))}}var iv=th(Object.keys,Object),sv=Object.prototype.hasOwnProperty;function eh(i){if(!es(i))return iv(i);var n=[];for(var t in Object(i))sv.call(i,t)&&t!="constructor"&&n.push(t);return n}function ao(i){return Hn(i)?Qc(i):eh(i)}var av=Object.prototype.hasOwnProperty;function lv(i){if(!ie(i))return function(r){var o=[];if(r!=null)for(var s in Object(r))o.push(s);return o}(i);var n=es(i),t=[];for(var e in i)(e!="constructor"||!n&&av.call(i,e))&&t.push(e);return t}function Un(i){return Hn(i)?Qc(i,!0):lv(i)}var uv=ts(function(i,n){kr(n,Un(n),i)}),nh=ts(function(i,n,t,e){kr(n,Un(n),i,e)}),cv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hv=/^\w*$/;function tl(i,n){if(Ee(i))return!1;var t=typeof i;return!(t!="number"&&t!="symbol"&&t!="boolean"&&i!=null&&!On(i))||hv.test(i)||!cv.test(i)||n!=null&&i in Object(n)}var Xo=Mr(Object,"create"),pv=Object.prototype.hasOwnProperty,dv=Object.prototype.hasOwnProperty;function Dr(i){var n=-1,t=i==null?0:i.length;for(this.clear();++n<t;){var e=i[n];this.set(e[0],e[1])}}function rs(i,n){for(var t=i.length;t--;)if(Sr(i[t][0],n))return t;return-1}Dr.prototype.clear=function(){this.__data__=Xo?Xo(null):{},this.size=0},Dr.prototype.delete=function(i){var n=this.has(i)&&delete this.__data__[i];return this.size-=n?1:0,n},Dr.prototype.get=function(i){var n=this.__data__;if(Xo){var t=n[i];return t==="__lodash_hash_undefined__"?void 0:t}return pv.call(n,i)?n[i]:void 0},Dr.prototype.has=function(i){var n=this.__data__;return Xo?n[i]!==void 0:dv.call(n,i)},Dr.prototype.set=function(i,n){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=Xo&&n===void 0?"__lodash_hash_undefined__":n,this};var fv=Array.prototype.splice;function qn(i){var n=-1,t=i==null?0:i.length;for(this.clear();++n<t;){var e=i[n];this.set(e[0],e[1])}}qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(i){var n=this.__data__,t=rs(n,i);return!(t<0)&&(t==n.length-1?n.pop():fv.call(n,t,1),--this.size,!0)},qn.prototype.get=function(i){var n=this.__data__,t=rs(n,i);return t<0?void 0:n[t][1]},qn.prototype.has=function(i){return rs(this.__data__,i)>-1},qn.prototype.set=function(i,n){var t=this.__data__,e=rs(t,i);return e<0?(++this.size,t.push([i,n])):t[e][1]=n,this};var Yo=Mr(Qe,"Map");function os(i,n){var t,e,r=i.__data__;return((e=typeof(t=n))=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null)?r[typeof n=="string"?"string":"hash"]:r.map}function $n(i){var n=-1,t=i==null?0:i.length;for(this.clear();++n<t;){var e=i[n];this.set(e[0],e[1])}}$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Dr,map:new(Yo||qn),string:new Dr}},$n.prototype.delete=function(i){var n=os(this,i).delete(i);return this.size-=n?1:0,n},$n.prototype.get=function(i){return os(this,i).get(i)},$n.prototype.has=function(i){return os(this,i).has(i)},$n.prototype.set=function(i,n){var t=os(this,i),e=t.size;return t.set(i,n),this.size+=t.size==e?0:1,this};function el(i,n){if(typeof i!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");var t=function(){var e=arguments,r=n?n.apply(this,e):e[0],o=t.cache;if(o.has(r))return o.get(r);var s=i.apply(this,e);return t.cache=o.set(r,s)||o,s};return t.cache=new(el.Cache||$n),t}el.Cache=$n;var gv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vv=/\\(\\)?/g,yv=function(i){var n=el(i,function(e){return t.size===500&&t.clear(),e}),t=n.cache;return n}(function(i){var n=[];return i.charCodeAt(0)===46&&n.push(""),i.replace(gv,function(t,e,r,o){n.push(r?o.replace(vv,"$1"):e||t)}),n});function ge(i){return i==null?"":sr(i)}function is(i,n){return Ee(i)?i:tl(i,n)?[i]:yv(ge(i))}function Jo(i){if(typeof i=="string"||On(i))return i;var n=i+"";return n=="0"&&1/i==-1/0?"-0":n}function ss(i,n){for(var t=0,e=(n=is(n,i)).length;i!=null&&t<e;)i=i[Jo(n[t++])];return t&&t==e?i:void 0}function nl(i,n){for(var t=-1,e=n.length,r=i.length;++t<e;)i[r+t]=n[t];return i}var rh=ln?ln.isConcatSpreadable:void 0;function mv(i){return Ee(i)||oo(i)||!!(rh&&i&&i[rh])}function Zo(i,n,t,e,r){var o=-1,s=i.length;for(t||(t=mv),r||(r=[]);++o<s;){var a=i[o];n>0&&t(a)?n>1?Zo(a,n-1,t,e,r):nl(r,a):e||(r[r.length]=a)}return r}function bv(i){return i!=null&&i.length?Zo(i,1):[]}var rl=th(Object.getPrototypeOf,Object),Cv=Function.prototype,wv=Object.prototype,oh=Cv.toString,xv=wv.hasOwnProperty,Ev=oh.call(Object);function qe(i){if(!je(i)||un(i)!="[object Object]")return!1;var n=rl(i);if(n===null)return!0;var t=xv.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&oh.call(t)==Ev}function ih(i){if(!je(i))return!1;var n=un(i);return n=="[object Error]"||n=="[object DOMException]"||typeof i.message=="string"&&typeof i.name=="string"&&!qe(i)}var Av=lr(function(i,n){try{return Xa(i,void 0,n)}catch(t){return ih(t)?t:new Error(t)}});function as(i,n,t){var e=i.length;return t=t===void 0?e:t,!n&&t>=e?i:function(r,o,s){var a=-1,l=r.length;o<0&&(o=-o>l?0:l+o),(s=s>l?l:s)<0&&(s+=l),l=o>s?0:s-o>>>0,o>>>=0;for(var u=Array(l);++a<l;)u[a]=r[a+o];return u}(i,n,t)}var Pv=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function lo(i){return Pv.test(i)}var Mv="[\\ud800-\\udfff]",ol="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",il="\\ud83c[\\udffb-\\udfff]",sh="[^\\ud800-\\udfff]",ah="(?:\\ud83c[\\udde6-\\uddff]){2}",lh="[\\ud800-\\udbff][\\udc00-\\udfff]",uh="(?:"+ol+"|"+il+")?",ch="[\\ufe0e\\ufe0f]?",Sv=ch+uh+("(?:\\u200d(?:"+[sh,ah,lh].join("|")+")"+ch+uh+")*"),kv="(?:"+[sh+ol+"?",ol,ah,lh,Mv].join("|")+")",Tv=RegExp(il+"(?="+il+")|"+kv+Sv,"g");function ls(i){return lo(i)?function(n){return n.match(Tv)||[]}(i):function(n){return n.split("")}(i)}function hh(i){return function(n){var t=lo(n=ge(n))?ls(n):void 0,e=t?t[0]:n.charAt(0),r=t?as(t,1).join(""):n.slice(1);return e[i]()+r}}var uo=hh("toUpperCase");function sl(i){return function(n){return i==null?void 0:i[n]}}var Dv=sl({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),Nv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ov=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Lv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bv="\\u2700-\\u27bf",ph="a-z\\xdf-\\xf6\\xf8-\\xff",dh="A-Z\\xc0-\\xd6\\xd8-\\xde",fh="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gh="["+fh+"]",vh="\\d+",zv="[\\u2700-\\u27bf]",yh="["+ph+"]",mh="[^\\ud800-\\udfff"+fh+vh+Bv+ph+dh+"]",bh="(?:\\ud83c[\\udde6-\\uddff]){2}",Ch="[\\ud800-\\udbff][\\udc00-\\udfff]",co="["+dh+"]",wh="(?:"+yh+"|"+mh+")",Rv="(?:"+co+"|"+mh+")",xh="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Eh="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ah="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ph="[\\ufe0e\\ufe0f]?",Vv=Ph+Ah+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",bh,Ch].join("|")+")"+Ph+Ah+")*"),jv="(?:"+[zv,bh,Ch].join("|")+")"+Vv,Iv=RegExp([co+"?"+yh+"+"+xh+"(?="+[gh,co,"$"].join("|")+")",Rv+"+"+Eh+"(?="+[gh,co+wh,"$"].join("|")+")",co+"?"+wh+"+"+xh,co+"+"+Eh,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vh,jv].join("|"),"g");function _v(i,n,t){return i=ge(i),(n=t?void 0:n)===void 0?function(e){return Fv.test(e)}(i)?function(e){return e.match(Iv)||[]}(i):function(e){return e.match(Lv)||[]}(i):i.match(n)||[]}var Gv=RegExp("['\u2019]","g");function us(i){return function(n){return function(t,e,r,o){var s=-1,a=t==null?0:t.length;for(o&&a&&(r=t[++s]);++s<a;)r=e(r,t[s],s,t);return r}(_v(function(t){return(t=ge(t))&&t.replace(Nv,Dv).replace(Ov,"")}(n).replace(Gv,"")),i,"")}}var Ko=us(function(i,n,t){return n=n.toLowerCase(),i+(t?function(e){return uo(ge(e).toLowerCase())}(n):n)});function cs(i,n,t){return i==i&&(t!==void 0&&(i=i<=t?i:t),n!==void 0&&(i=i>=n?i:n)),i}function Re(i,n,t){return t===void 0&&(t=n,n=void 0),t!==void 0&&(t=(t=ar(t))==t?t:0),n!==void 0&&(n=(n=ar(n))==n?n:0),cs(ar(i),n,t)}function bn(i){var n=this.__data__=new qn(i);this.size=n.size}bn.prototype.clear=function(){this.__data__=new qn,this.size=0},bn.prototype.delete=function(i){var n=this.__data__,t=n.delete(i);return this.size=n.size,t},bn.prototype.get=function(i){return this.__data__.get(i)},bn.prototype.has=function(i){return this.__data__.has(i)},bn.prototype.set=function(i,n){var t=this.__data__;if(t instanceof qn){var e=t.__data__;if(!Yo||e.length<199)return e.push([i,n]),this.size=++t.size,this;t=this.__data__=new $n(e)}return t.set(i,n),this.size=t.size,this};var Mh=typeof c=="object"&&c&&!c.nodeType&&c,Sh=Mh&&!0&&E&&!E.nodeType&&E,kh=Sh&&Sh.exports===Mh?Qe.Buffer:void 0,Th=kh?kh.allocUnsafe:void 0;function Dh(i,n){if(n)return i.slice();var t=i.length,e=Th?Th(t):new i.constructor(t);return i.copy(e),e}function Nh(){return[]}var Hv=Object.prototype.propertyIsEnumerable,Oh=Object.getOwnPropertySymbols,al=Oh?function(i){return i==null?[]:(i=Object(i),function(n,t){for(var e=-1,r=n==null?0:n.length,o=0,s=[];++e<r;){var a=n[e];t(a,e,n)&&(s[o++]=a)}return s}(Oh(i),function(n){return Hv.call(i,n)}))}:Nh,Lh=Object.getOwnPropertySymbols?function(i){for(var n=[];i;)nl(n,al(i)),i=rl(i);return n}:Nh;function Fh(i,n,t){var e=n(i);return Ee(i)?e:nl(e,t(i))}function ll(i){return Fh(i,ao,al)}function Uv(i){return Fh(i,Un,Lh)}var ul=Mr(Qe,"DataView"),cl=Mr(Qe,"Promise"),ho=Mr(Qe,"Set"),Bh="[object Map]",zh="[object Promise]",Rh="[object Set]",Vh="[object WeakMap]",jh="[object DataView]",qv=Pr(ul),$v=Pr(Yo),Wv=Pr(cl),Xv=Pr(ho),Yv=Pr(Wa),Nr=un;(ul&&Nr(new ul(new ArrayBuffer(1)))!=jh||Yo&&Nr(new Yo)!=Bh||cl&&Nr(cl.resolve())!=zh||ho&&Nr(new ho)!=Rh||Wa&&Nr(new Wa)!=Vh)&&(Nr=function(i){var n=un(i),t=n=="[object Object]"?i.constructor:void 0,e=t?Pr(t):"";if(e)switch(e){case qv:return jh;case $v:return Bh;case Wv:return zh;case Xv:return Rh;case Yv:return Vh}return n});var po=Nr,Jv=Object.prototype.hasOwnProperty,hs=Qe.Uint8Array;function hl(i){var n=new i.constructor(i.byteLength);return new hs(n).set(new hs(i)),n}var Zv=/\w*$/,Ih=ln?ln.prototype:void 0,_h=Ih?Ih.valueOf:void 0;function Gh(i,n){var t=n?hl(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}function Kv(i,n,t){var e,r,o,s=i.constructor;switch(n){case"[object ArrayBuffer]":return hl(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return function(a,l){var u=l?hl(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.byteLength)}(i,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Gh(i,t);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return(o=new(r=i).constructor(r.source,Zv.exec(r))).lastIndex=r.lastIndex,o;case"[object Set]":return new s;case"[object Symbol]":return e=i,_h?Object(_h.call(e)):{}}}function Hh(i){return typeof i.constructor!="function"||es(i)?{}:J0(rl(i))}var Uh=ur&&ur.isMap,Qv=Uh?so(Uh):function(i){return je(i)&&po(i)=="[object Map]"},qh=ur&&ur.isSet,ty=qh?so(qh):function(i){return je(i)&&po(i)=="[object Set]"},$h="[object Arguments]",Wh="[object Function]",Xh="[object Object]",ne={};function Qo(i,n,t,e,r,o){var s,a=1&n,l=2&n,u=4&n;if(t&&(s=r?t(i,e,r,o):t(i)),s!==void 0)return s;if(!ie(i))return i;var h=Ee(i);if(h){if(s=function(w){var P=w.length,x=new w.constructor(P);return P&&typeof w[0]=="string"&&Jv.call(w,"index")&&(x.index=w.index,x.input=w.input),x}(i),!a)return Ic(i,s)}else{var d=po(i),f=d==Wh||d=="[object GeneratorFunction]";if(io(i))return Dh(i,a);if(d==Xh||d==$h||f&&!r){if(s=l||f?{}:Hh(i),!a)return l?function(w,P){return kr(w,Lh(w),P)}(i,function(w,P){return w&&kr(P,Un(P),w)}(s,i)):function(w,P){return kr(w,al(w),P)}(i,function(w,P){return w&&kr(P,ao(P),w)}(s,i))}else{if(!ne[d])return r?i:{};s=Kv(i,d,a)}}o||(o=new bn);var v=o.get(i);if(v)return v;o.set(i,s),ty(i)?i.forEach(function(w){s.add(Qo(w,n,t,w,i,o))}):Qv(i)&&i.forEach(function(w,P){s.set(P,Qo(w,n,t,P,i,o))});var b=h?void 0:(u?l?Uv:ll:l?Un:ao)(i);return function(w,P){for(var x=-1,S=w==null?0:w.length;++x<S&&P(w[x],x,w)!==!1;);}(b||i,function(w,P){b&&(w=i[P=w]),Za(s,P,Qo(w,n,t,P,i,o))}),s}ne[$h]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object DataView]"]=ne["[object Boolean]"]=ne["[object Date]"]=ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Map]"]=ne["[object Number]"]=ne[Xh]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object Symbol]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Error]"]=ne[Wh]=ne["[object WeakMap]"]=!1;function fo(i){return Qo(i,4)}function se(i){return Qo(i,5)}function go(i){var n=-1,t=i==null?0:i.length;for(this.__data__=new $n;++n<t;)this.add(i[n])}function ey(i,n){for(var t=-1,e=i==null?0:i.length;++t<e;)if(n(i[t],t,i))return!0;return!1}function pl(i,n){return i.has(n)}go.prototype.add=go.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},go.prototype.has=function(i){return this.__data__.has(i)};function Yh(i,n,t,e,r,o){var s=1&t,a=i.length,l=n.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(i),h=o.get(n);if(u&&h)return u==n&&h==i;var d=-1,f=!0,v=2&t?new go:void 0;for(o.set(i,n),o.set(n,i);++d<a;){var b=i[d],w=n[d];if(e)var P=s?e(w,b,d,n,i,o):e(b,w,d,i,n,o);if(P!==void 0){if(P)continue;f=!1;break}if(v){if(!ey(n,function(x,S){if(!pl(v,S)&&(b===x||r(b,x,t,e,o)))return v.push(S)})){f=!1;break}}else if(b!==w&&!r(b,w,t,e,o)){f=!1;break}}return o.delete(i),o.delete(n),f}function ny(i){var n=-1,t=Array(i.size);return i.forEach(function(e,r){t[++n]=[r,e]}),t}function dl(i){var n=-1,t=Array(i.size);return i.forEach(function(e){t[++n]=e}),t}var Jh=ln?ln.prototype:void 0,fl=Jh?Jh.valueOf:void 0,ry=Object.prototype.hasOwnProperty,Zh="[object Arguments]",Kh="[object Array]",ps="[object Object]",Qh=Object.prototype.hasOwnProperty;function oy(i,n,t,e,r,o){var s=Ee(i),a=Ee(n),l=s?Kh:po(i),u=a?Kh:po(n),h=(l=l==Zh?ps:l)==ps,d=(u=u==Zh?ps:u)==ps,f=l==u;if(f&&io(i)){if(!io(n))return!1;s=!0,h=!1}if(f&&!h)return o||(o=new bn),s||ns(i)?Yh(i,n,t,e,r,o):function(x,S,D,N,V,y,H){switch(D){case"[object DataView]":if(x.byteLength!=S.byteLength||x.byteOffset!=S.byteOffset)return!1;x=x.buffer,S=S.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=S.byteLength||!y(new hs(x),new hs(S)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Sr(+x,+S);case"[object Error]":return x.name==S.name&&x.message==S.message;case"[object RegExp]":case"[object String]":return x==S+"";case"[object Map]":var I=ny;case"[object Set]":var X=1&N;if(I||(I=dl),x.size!=S.size&&!X)return!1;var J=H.get(x);if(J)return J==S;N|=2,H.set(x,S);var Z=Yh(I(x),I(S),N,V,y,H);return H.delete(x),Z;case"[object Symbol]":if(fl)return fl.call(x)==fl.call(S)}return!1}(i,n,l,t,e,r,o);if(!(1&t)){var v=h&&Qh.call(i,"__wrapped__"),b=d&&Qh.call(n,"__wrapped__");if(v||b){var w=v?i.value():i,P=b?n.value():n;return o||(o=new bn),r(w,P,t,e,o)}}return!!f&&(o||(o=new bn),function(x,S,D,N,V,y){var H=1&D,I=ll(x),X=I.length;if(X!=ll(S).length&&!H)return!1;for(var J=X;J--;){var Z=I[J];if(!(H?Z in S:ry.call(S,Z)))return!1}var it=y.get(x),ct=y.get(S);if(it&&ct)return it==S&&ct==x;var et=!0;y.set(x,S),y.set(S,x);for(var lt=H;++J<X;){var ht=x[Z=I[J]],at=S[Z];if(N)var gt=H?N(at,ht,Z,S,x,y):N(ht,at,Z,x,S,y);if(!(gt===void 0?ht===at||V(ht,at,D,N,y):gt)){et=!1;break}lt||(lt=Z=="constructor")}if(et&&!lt){var yt=x.constructor,ft=S.constructor;yt==ft||!("constructor"in x)||!("constructor"in S)||typeof yt=="function"&&yt instanceof yt&&typeof ft=="function"&&ft instanceof ft||(et=!1)}return y.delete(x),y.delete(S),et}(i,n,t,e,r,o))}function ds(i,n,t,e,r){return i===n||(i==null||n==null||!je(i)&&!je(n)?i!=i&&n!=n:oy(i,n,t,e,ds,r))}function tp(i){return i==i&&!ie(i)}function ep(i,n){return function(t){return t!=null&&t[i]===n&&(n!==void 0||i in Object(t))}}function iy(i){var n=function(t){for(var e=ao(t),r=e.length;r--;){var o=e[r],s=t[o];e[r]=[o,s,tp(s)]}return e}(i);return n.length==1&&n[0][2]?ep(n[0][0],n[0][1]):function(t){return t===i||function(e,r,o,s){var a=o.length,l=a,u=!s;if(e==null)return!l;for(e=Object(e);a--;){var h=o[a];if(u&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++a<l;){var d=(h=o[a])[0],f=e[d],v=h[1];if(u&&h[2]){if(f===void 0&&!(d in e))return!1}else{var b=new bn;if(s)var w=s(f,v,d,e,r,b);if(!(w===void 0?ds(v,f,3,s,b):w))return!1}}return!0}(t,i,n)}}function sy(i,n){return i!=null&&n in Object(i)}function np(i,n,t){for(var e=-1,r=(n=is(n,i)).length,o=!1;++e<r;){var s=Jo(n[e]);if(!(o=i!=null&&t(i,s)))break;i=i[s]}return o||++e!=r?o:!!(r=i==null?0:i.length)&&Ka(r)&&Ki(s,r)&&(Ee(i)||oo(i))}function rp(i,n){return i!=null&&np(i,n,sy)}function ay(i,n){return tl(i)&&tp(n)?ep(Jo(i),n):function(t){var e=function(r,o,s){var a=r==null?void 0:ss(r,o);return a===void 0?s:a}(t,i);return e===void 0&&e===n?rp(t,i):ds(n,e,3)}}function op(i){return function(n){return n==null?void 0:n[i]}}function ly(i){return tl(i)?op(Jo(i)):function(n){return function(t){return ss(t,n)}}(i)}function gl(i){return typeof i=="function"?i:i==null?Ar:typeof i=="object"?Ee(i)?ay(i[0],i[1]):iy(i):ly(i)}function uy(i,n,t,e){for(var r=-1,o=i==null?0:i.length;++r<o;){var s=i[r];n(e,s,t(s),i)}return e}var vl=function(i,n,t){for(var e=-1,r=Object(i),o=t(i),s=o.length;s--;){var a=o[++e];if(n(r[a],a,r)===!1)break}return i},ip=function(i,n){return function(t,e){if(t==null)return t;if(!Hn(t))return i(t,e);for(var r=t.length,o=n?r:-1,s=Object(t);(n?o--:++o<r)&&e(s[o],o,s)!==!1;);return t}}(function(i,n){return i&&vl(i,n,ao)});function cy(i,n,t,e){return ip(i,function(r,o,s){n(e,r,t(r),s)}),e}var yl=function(){return Qe.Date.now()},hy=Math.max,py=Math.min;function ml(i,n,t){var e,r,o,s,a,l,u=0,h=!1,d=!1,f=!0;if(typeof i!="function")throw new TypeError("Expected a function");function v(D){var N=e,V=r;return e=r=void 0,u=D,s=i.apply(V,N)}function b(D){return u=D,a=setTimeout(P,n),h?v(D):s}function w(D){var N=D-l;return l===void 0||N>=n||N<0||d&&D-u>=o}function P(){var D=yl();if(w(D))return x(D);a=setTimeout(P,function(N){var V=n-(N-l);return d?py(V,o-(N-u)):V}(D))}function x(D){return a=void 0,f&&e?v(D):(e=r=void 0,s)}function S(){var D=yl(),N=w(D);if(e=arguments,r=this,l=D,N){if(a===void 0)return b(l);if(d)return clearTimeout(a),a=setTimeout(P,n),v(l)}return a===void 0&&(a=setTimeout(P,n)),s}return n=ar(n)||0,ie(t)&&(h=!!t.leading,o=(d="maxWait"in t)?hy(ar(t.maxWait)||0,n):o,f="trailing"in t?!!t.trailing:f),S.cancel=function(){a!==void 0&&clearTimeout(a),u=0,e=l=r=a=void 0},S.flush=function(){return a===void 0?s:x(yl())},S}var sp=Object.prototype,dy=sp.hasOwnProperty,ap=lr(function(i,n){i=Object(i);var t=-1,e=n.length,r=e>2?n[2]:void 0;for(r&&Tr(n[0],n[1],r)&&(e=1);++t<e;)for(var o=n[t],s=Un(o),a=-1,l=s.length;++a<l;){var u=s[a],h=i[u];(h===void 0||Sr(h,sp[u])&&!dy.call(i,u))&&(i[u]=o[u])}return i});function bl(i,n,t){(t!==void 0&&!Sr(i[n],t)||t===void 0&&!(n in i))&&Qi(i,n,t)}function fs(i){return je(i)&&Hn(i)}function Cl(i,n){if((n!=="constructor"||typeof i[n]!="function")&&n!="__proto__")return i[n]}function fy(i,n,t,e,r,o,s){var a=Cl(i,t),l=Cl(n,t),u=s.get(l);if(u)bl(i,t,u);else{var h,d=o?o(a,l,t+"",i,n,s):void 0,f=d===void 0;if(f){var v=Ee(l),b=!v&&io(l),w=!v&&!b&&ns(l);d=l,v||b||w?Ee(a)?d=a:fs(a)?d=Ic(a):b?(f=!1,d=Dh(l,!0)):w?(f=!1,d=Gh(l,!0)):d=[]:qe(l)||oo(l)?(d=a,oo(a)?d=kr(h=a,Un(h)):ie(a)&&!$o(a)||(d=Hh(l))):f=!1}f&&(s.set(l,d),r(d,l,e,o,s),s.delete(l)),bl(i,t,d)}}function gs(i,n,t,e,r){i!==n&&vl(n,function(o,s){if(r||(r=new bn),ie(o))fy(i,n,s,t,gs,e,r);else{var a=e?e(Cl(i,s),o,s+"",i,n,r):void 0;a===void 0&&(a=o),bl(i,s,a)}},Un)}function lp(i,n,t,e,r,o){return ie(i)&&ie(n)&&(o.set(n,i),gs(i,n,void 0,lp,o),o.delete(n)),i}var gy=ts(function(i,n,t,e){gs(i,n,t,e)}),wl=lr(function(i){return i.push(void 0,lp),Xa(gy,void 0,i)}),up=lr(function(i,n){return function(t,e,r){if(typeof t!="function")throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,r)},e)}(i,1,n)});function cp(i,n,t){for(var e=-1,r=i==null?0:i.length;++e<r;)if(t(n,i[e]))return!0;return!1}var hp=lr(function(i,n){return fs(i)?function(t,e,r,o){var s=-1,a=Hc,l=!0,u=t.length,h=[],d=e.length;if(!u)return h;r&&(e=ro(e,so(r))),o?(a=cp,l=!1):e.length>=200&&(a=pl,l=!1,e=new go(e));t:for(;++s<u;){var f=t[s],v=r==null?f:r(f);if(f=o||f!==0?f:0,l&&v==v){for(var b=d;b--;)if(e[b]===v)continue t;h.push(f)}else a(e,v,o)||h.push(f)}return h}(i,Zo(n,1,fs,!0)):[]}),vy=sl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),pp=/[&<>"']/g,yy=RegExp(pp.source);function dp(i){return(i=ge(i))&&yy.test(i)?i.replace(pp,vy):i}var fp,my=Object.prototype.hasOwnProperty,xl=(fp=function(i,n,t){my.call(i,t)?i[t].push(n):Qi(i,t,[n])},function(i,n){var t=Ee(i)?uy:cy,e={};return t(i,fp,gl(n),e)});function by(i,n){return i>n}var Cy=Object.prototype.hasOwnProperty;function wy(i,n){return i!=null&&Cy.call(i,n)}function vo(i,n){return i!=null&&np(i,n,wy)}var xy=Math.max,Ey=Math.min;function gp(i){return typeof i=="string"||!Ee(i)&&je(i)&&un(i)=="[object String]"}var Ay=Object.prototype.hasOwnProperty;function El(i){if(i==null)return!0;if(Hn(i)&&(Ee(i)||typeof i=="string"||typeof i.splice=="function"||io(i)||ns(i)||oo(i)))return!i.length;var n=po(i);if(n=="[object Map]"||n=="[object Set]")return!i.size;if(es(i))return!eh(i).length;for(var t in i)if(Ay.call(i,t))return!1;return!0}function Cn(i,n){return ds(i,n)}var Py=Qe.isFinite;function vp(i){return typeof i=="number"&&i==mn(i)}function ti(i){return typeof i=="number"||je(i)&&un(i)=="[object Number]"}var yp=ur&&ur.isRegExp,mp=yp?so(yp):function(i){return je(i)&&un(i)=="[object RegExp]"},My=9007199254740991,Al=us(function(i,n,t){return i+(t?" ":"")+n.toLowerCase()}),bp=hh("toLowerCase");function Cp(i){return i&&i.length?function(n,t,e){for(var r=-1,o=n.length;++r<o;){var s=n[r],a=t(s);if(a!=null&&(l===void 0?a==a&&!On(a):e(a,l)))var l=a,u=s}return u}(i,Ar,by):void 0}var Jt=ts(function(i,n,t){gs(i,n,t)});function Sy(i,n,t,e){if(!ie(i))return i;for(var r=-1,o=(n=is(n,i)).length,s=o-1,a=i;a!=null&&++r<o;){var l=Jo(n[r]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return i;if(r!=s){var h=a[l];(u=e?e(h,l,a):void 0)===void 0&&(u=ie(h)?h:Ki(n[r+1])?[]:{})}Za(a,l,u),a=a[l]}return i}function ky(i,n){if(i!==n){var t=i!==void 0,e=i===null,r=i==i,o=On(i),s=n!==void 0,a=n===null,l=n==n,u=On(n);if(!a&&!u&&!o&&i>n||o&&s&&l&&!a&&!u||e&&s&&l||!t&&l||!r)return 1;if(!e&&!o&&!u&&i<n||u&&t&&r&&!e&&!o||a&&t&&r||!s&&r||!l)return-1}return 0}function Ty(i,n,t){n=n.length?ro(n,function(r){return Ee(r)?function(o){return ss(o,r.length===1?r[0]:r)}:r}):[Ar];var e=-1;return n=ro(n,so(gl)),function(r,o){var s=r.length;for(r.sort(o);s--;)r[s]=r[s].value;return r}(function(r,o){var s=-1,a=Hn(r)?Array(r.length):[];return ip(r,function(l,u,h){a[++s]=o(l,u,h)}),a}(i,function(r,o,s){return{criteria:ro(n,function(a){return a(r)}),index:++e,value:r}}),function(r,o){return function(s,a,l){for(var u=-1,h=s.criteria,d=a.criteria,f=h.length,v=l.length;++u<f;){var b=ky(h[u],d[u]);if(b)return u>=v?b:b*(l[u]=="desc"?-1:1)}return s.index-a.index}(r,o,t)})}var Dy=Math.floor;function Pl(i,n){var t="";if(!i||n<1||n>9007199254740991)return t;do n%2&&(t+=i),(n=Dy(n/2))&&(i+=i);while(n);return t}var Ny=op("length"),Oy="[\\ud800-\\udfff]",Ml="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sl="\\ud83c[\\udffb-\\udfff]",wp="[^\\ud800-\\udfff]",xp="(?:\\ud83c[\\udde6-\\uddff]){2}",Ep="[\\ud800-\\udbff][\\udc00-\\udfff]",Ap="(?:"+Ml+"|"+Sl+")?",Pp="[\\ufe0e\\ufe0f]?",Ly=Pp+Ap+("(?:\\u200d(?:"+[wp,xp,Ep].join("|")+")"+Pp+Ap+")*"),Fy="(?:"+[wp+Ml+"?",Ml,xp,Ep,Oy].join("|")+")",Mp=RegExp(Sl+"(?="+Sl+")|"+Fy+Ly,"g");function ei(i){return lo(i)?function(n){for(var t=Mp.lastIndex=0;Mp.test(n);)++t;return t}(i):Ny(i)}var By=Math.ceil;function vs(i,n){var t=(n=n===void 0?" ":sr(n)).length;if(t<2)return t?Pl(n,i):n;var e=Pl(n,By(i/ei(n)));return lo(n)?as(ls(e),0,i).join(""):e.slice(0,i)}var zy=Math.ceil,Ry=Math.floor,Vy=/^\s+/,jy=Qe.parseInt;function Iy(i,n){return function(t,e,r){for(var o=-1,s=e.length,a={};++o<s;){var l=e[o],u=ss(t,l);r(u,l)&&Sy(a,is(l,t),u)}return a}(i,n,function(t,e){return rp(i,e)})}var kl=function(i){return Gc(qc(i,void 0,bv),i+"")}(function(i,n){return i==null?{}:Iy(i,n)}),ys=lr(function(i,n){if(i==null)return[];var t=n.length;return t>1&&Tr(i,n[0],n[1])?n=[]:t>2&&Tr(n[0],n[1],n[2])&&(n=[n[0]]),Ty(i,Zo(n,1),[])}),_y=Math.floor,Gy=Math.min;function Sp(i,n,t,e){var r=0,o=i==null?0:i.length;if(o===0)return 0;for(var s=(n=t(n))!=n,a=n===null,l=On(n),u=n===void 0;r<o;){var h=_y((r+o)/2),d=t(i[h]),f=d!==void 0,v=d===null,b=d==d,w=On(d);if(s)var P=e||b;else P=u?b&&(e||f):a?b&&f&&(e||!v):l?b&&f&&!v&&(e||!w):!v&&!w&&(e?d<=n:d<n);P?r=h+1:o=h}return Gy(o,4294967294)}function kp(i,n){return function(t,e,r){var o=0,s=t==null?o:t.length;if(typeof e=="number"&&e==e&&s<=2147483647){for(;o<s;){var a=o+s>>>1,l=t[a];l!==null&&!On(l)&&(r?l<=e:l<e)?o=a+1:s=a}return s}return Sp(t,e,Ar,r)}(i,n)}function Tp(i,n,t){return Sp(i,n,gl(t))}var Dp=us(function(i,n,t){return i+(t?" ":"")+uo(n)}),Np=Object.prototype,Hy=Np.hasOwnProperty;function Op(i,n,t,e){return i===void 0||Sr(i,Np[t])&&!Hy.call(e,t)?n:i}var Uy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function qy(i){return"\\"+Uy[i]}var Lp=/<%=([\s\S]+?)%>/g,Fp={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Lp,variable:"",imports:{_:{escape:dp}}},$y=/\b__p \+= '';/g,Wy=/\b(__p \+=) '' \+/g,Xy=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yy=/[()=,{}\[\]\/\s]/,Jy=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ms=/($^)/,Zy=/['\n\r\u2028\u2029\\]/g,Bp=Object.prototype.hasOwnProperty;function Or(i,n,t){var e=Fp.imports._.templateSettings||Fp;t&&Tr(i,n,t)&&(n=void 0),i=ge(i),n=nh({},n,e,Op);var r,o,s=nh({},n.imports,e.imports,Op),a=ao(s),l=function(P,x){return ro(x,function(S){return P[S]})}(s,a),u=0,h=n.interpolate||ms,d="__p += '",f=RegExp((n.escape||ms).source+"|"+h.source+"|"+(h===Lp?Jy:ms).source+"|"+(n.evaluate||ms).source+"|$","g"),v=Bp.call(n,"sourceURL")?"//# sourceURL="+(n.sourceURL+"").replace(/\s/g," ")+`
`:"";i.replace(f,function(P,x,S,D,N,V){return S||(S=D),d+=i.slice(u,V).replace(Zy,qy),x&&(r=!0,d+=`' +
__e(`+x+`) +
'`),N&&(o=!0,d+=`';
`+N+`;
__p += '`),S&&(d+=`' +
((__t = (`+S+`)) == null ? '' : __t) +
'`),u=V+P.length,P}),d+=`';
`;var b=Bp.call(n,"variable")&&n.variable;if(b){if(Yy.test(b))throw new Error("Invalid `variable` option passed into `_.template`")}else d=`with (obj) {
`+d+`
}
`;d=(o?d.replace($y,""):d).replace(Wy,"$1").replace(Xy,"$1;"),d="function("+(b||"obj")+`) {
`+(b?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+d+`return __p
}`;var w=Av(function(){return Function(a,v+"return "+d).apply(void 0,l)});if(w.source=d,ih(w))throw w;return w}var Ky=9007199254740991,Qy=/\w*$/,t2=sl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zp=/&(?:amp|lt|gt|quot|#39);/g,e2=RegExp(zp.source),n2=ho&&1/dl(new ho([,-0]))[1]==1/0?function(i){return new ho(i)}:jc;function Rp(i,n,t){var e=-1,r=Hc,o=i.length,s=!0,a=[],l=a;if(t)s=!1,r=cp;else if(o>=200){var u=n?null:n2(i);if(u)return dl(u);s=!1,r=pl,l=new go}else l=n?[]:a;t:for(;++e<o;){var h=i[e],d=n?n(h):h;if(h=t||h!==0?h:0,s&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue t;n&&l.push(d),a.push(h)}else r(l,d,t)||(l!==a&&l.push(d),a.push(h))}return a}var Tl=lr(function(i){return Rp(Zo(i,1,fs,!0))});function Dl(i){return i&&i.length?Rp(i):[]}var r2=0;function Vp(i){var n=++r2;return ge(i)+n}var o2=us(function(i,n,t){return i+(t?" ":"")+n.toUpperCase()}),Nl=function(i){return!Array.isArray(i)&&i-parseFloat(i)+1>=0},i2=Object.freeze({__proto__:null,isWindow:function(i){return i&&i===i.window},isNumeric:Nl,isNull:function(i){return i===null},isNil:function(i){return i==null},isUndefined:function(i){return i===void 0},isString:gp,isNumber:ti,isBoolean:function(i){return i===!0||i===!1||je(i)&&un(i)=="[object Boolean]"},isObject:ie,isArray:Ee,isArrayLike:Hn,isFunction:$o});function jp(i,n){for(var t={},e=[],r=0,o=i.length;r<o;r+=1){var s=i[r],a=s[n];a?t[a]=r:e.push(s)}return{keyIndex:t,free:e}}var s2=Object.freeze({__proto__:null,isArray:Ee,isArrayLike:Hn,uniq:Dl,union:Tl,sortedIndex:kp,sortedIndexBy:Tp,sortBy:ys,groupBy:xl,difference:hp,max:Cp,diff:function(i,n,t){for(var e,r,o=jp(i,t),s=jp(n,t),a=s.free,l=o.keyIndex,u=s.keyIndex,h=[],d=[],f=0,v=0;f<i.length;){if(r=(e=i[f])[t])if(u.hasOwnProperty(r)){var b=u[r];d.push(n[b])}else d.push(null);else{var w=a[v+=1];d.push(w||null)}f+=1}var P=d.slice(0);for(f=0;f<P.length;)P[f]===null?(V(f),H(f)):f+=1;for(var x=f=0;f<n.length;){r=(e=n[f])[t];var S=P[x];if(S)if(r===S[t])x+=1;else if(l.hasOwnProperty(r)){var D=P[x+1];D&&(D[t]===r?(V(f),H(x),x+=1):y(f,e))}else y(f,e);else y(f,e);f+=1}for(var N=P.length-x;(x+=1)<P.length;)V((N-=1)+f);function V(I){var X={index:I,type:0,item:null};h.push(X)}function y(I,X){var J={index:I,item:X,type:1};h.push(J)}function H(I){P.splice(I,1)}return{moves:h}}});function Ol(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];n.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(r){r!=="constructor"&&Object.defineProperty(i.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})})}var a2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t])};function Ip(i,n){function t(){this.constructor=i}a2(i,n),i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var l2=/^\s*class\s+/.test(""+function(){})||/^\s*class\s*\{/.test(""+function(){});function bs(i,n){var t;return l2?t=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return B(r,e),r}(n):Ip(t=function(){return n.apply(this,arguments)},n),Object.defineProperty(t,"name",{value:i}),t}function _p(i,n){return i!=null?i:n}function Ll(i){return i==="__proto__"}function Cs(i,n,t){var e;t===void 0&&(t="/");var r=Array.isArray(n)?n:n.split(t);if(r.length)for(e=i;r.length;){var o=r.shift();if(Object(e)!==e||!o||!(o in e))return;e=e[o]}return e}function Lr(i,n,t,e){e===void 0&&(e="/");var r=Array.isArray(n)?n:n.split(e),o=r.pop();if(o&&!Ll(o)){var s=i;r.forEach(function(a){Ll(a)||(s[a]==null&&(s[a]={}),s=s[a])}),s[o]=t}return i}function Fl(i,n,t){t===void 0&&(t="/");var e=Array.isArray(n)?n.slice():n.split(t),r=e.pop();if(r)if(e.length>0){var o=Cs(i,e);o&&delete o[r]}else delete i[r];return i}var u2=Object.freeze({__proto__:null,ensure:_p,getValue:function(i,n,t){var e=i!=null?i[n]:null;return t!==void 0?_p(e,t):e},getNumber:function(i,n,t){var e=i!=null?i[n]:null;return e==null?t:(e=+e,Number.isNaN(e)||!Number.isFinite(e)?t:e)},getBoolean:function(i,n,t){var e=i!=null?i[n]:null;return e==null?t:!!e},isMaliciousProp:Ll,getByPath:Cs,setByPath:Lr,unsetByPath:Fl,flatten:function i(n,t,e){t===void 0&&(t="/");var r={};for(var o in Object.keys(n).forEach(function(s){var a=n[s],l=typeof a=="object"||Array.isArray(a);if(l&&e&&e(a)&&(l=!1),l){var u=i(a,t,e);Object.keys(u).forEach(function(h){r[s+t+h]=u[h]})}else r[s]=a}),n)Object.prototype.hasOwnProperty.call(n,o);return r},has:vo,pick:kl,forIn:function(i,n){return i==null?i:vl(i,typeof(t=n)=="function"?t:Ar,Un);var t},merge:Jt,extend:uv,isEqual:Cn,isEmpty:El,isObject:ie,isPlainObject:qe,clone:fo,cloneDeep:se,defaults:ap,defaultsDeep:wl,applyMixins:Ol,inherit:Ip,createClass:bs}),Fr=function(i){var n=Object.create(null);return function(t){return n[t]||(n[t]=i(t))}},Bl=Fr(function(i){return i.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),ws=Fr(function(i){return Dp(Ko(i)).replace(/ /g,"")}),c2=Fr(function(i){return o2(i).replace(/ /g,"_")}),h2=Fr(function(i){return Al(i).replace(/ /g,".")}),p2=Fr(function(i){return Al(i).replace(/ /g,"/")}),d2=Fr(function(i){return uo(Al(i))}),f2=Fr(function(i){return Dp(Ko(i))});function xs(i){for(var n=2166136261,t=!1,e=i,r=0,o=e.length;r<o;r+=1){var s=e.charCodeAt(r);s>127&&!t&&(s=(e=unescape(encodeURIComponent(e))).charCodeAt(r),t=!0),n^=s,n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24)}return n>>>0}function Es(){for(var i="",n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",t=0,e=n.length;t<e;t+=1){var r=n[t],o=16*Math.random()|0;i+=(r==="x"?o:r==="y"?3&o|8:r).toString(16)}return i}function zl(i,n){n===void 0&&(n={});var t=Ct.parseHTML(i,null,!1);return t.forEach(function(e){var r=e;if(r){var o=r.attributes;if(o)for(var s=0,a=o.length;s<a;s+=1){var l=o.item(s);if(l){var u=l.value.toLowerCase(),h=l.name.toLowerCase();(h.startsWith("on")||u.startsWith("javascript:")||u.startsWith("data:")||u.startsWith("vbscript:"))&&r.removeAttribute(h)}}}}),n.raw?t:Ct("<div/>").append(t).html()}function Gp(i,n,t){for(var e,r=Math.min(2,Math.floor(.34*i.length)),o=Math.floor(.4*i.length)+1,s=!1,a=i.toLowerCase(),l=0,u=n;l<u.length;l++){var h=u[l],d=t(h);if(d!==void 0&&Math.abs(d.length-a.length)<=r){var f=d.toLowerCase();if(f===a){if(d===i)continue;return h}if(s||d.length<3)continue;var v=g2(a,f,o-1);if(v===void 0)continue;v<3?(s=!0,e=h):(o=v,e=h)}}return e}function g2(i,n,t){for(var e=new Array(n.length+1),r=new Array(n.length+1),o=t+1,s=0;s<=n.length;s+=1)e[s]=s;for(s=1;s<=i.length;s+=1){var a=i.charCodeAt(s-1),l=s>t?s-t:1,u=n.length>t+s?t+s:n.length;r[0]=s;for(var h=s,d=1;d<l;d+=1)r[d]=o;for(d=l;d<=u;d+=1){var f=a===n.charCodeAt(d-1)?e[d-1]:Math.min(e[d]+1,r[d-1]+1,e[d-1]+2);r[d]=f,h=Math.min(h,f)}for(d=u+1;d<=n.length;d+=1)r[d]=o;if(h>t)return;var v=e;e=r,r=v}var b=e[n.length];return b>t?void 0:b}var v2=Object.freeze({__proto__:null,isString:gp,toString:ge,escape:dp,unescape:function(i){return(i=ge(i))&&e2.test(i)?i.replace(zp,t2):i},startsWith:function(i,n,t){return i=ge(i),t=t==null?0:cs(mn(t),0,i.length),n=sr(n),i.slice(t,t+n.length)==n},endsWith:function(i,n,t){i=ge(i),n=sr(n);var e=i.length,r=t=t===void 0?e:cs(mn(t),0,e);return(t-=n.length)>=0&&i.slice(t,r)==n},split:function(i,n,t){return t&&typeof t!="number"&&Tr(i,n,t)&&(n=t=void 0),(t=t===void 0?4294967295:t>>>0)?(i=ge(i))&&(typeof n=="string"||n!=null&&!mp(n))&&!(n=sr(n))&&lo(i)?as(ls(i),0,t):i.split(n,t):[]},repeat:function(i,n,t){return n=(t?Tr(i,n,t):n===void 0)?1:mn(n),Pl(ge(i),n)},pad:function(i,n,t){i=ge(i);var e=(n=mn(n))?ei(i):0;if(!n||e>=n)return i;var r=(n-e)/2;return vs(Ry(r),t)+i+vs(zy(r),t)},padEnd:function(i,n,t){i=ge(i);var e=(n=mn(n))?ei(i):0;return n&&e<n?i+vs(n-e,t):i},padStart:function(i,n,t){i=ge(i);var e=(n=mn(n))?ei(i):0;return n&&e<n?vs(n-e,t)+i:i},truncate:function(i,n){var t=30,e="...";if(ie(n)){var r="separator"in n?n.separator:r;t="length"in n?mn(n.length):t,e="omission"in n?sr(n.omission):e}var o=(i=ge(i)).length;if(lo(i)){var s=ls(i);o=s.length}if(t>=o)return i;var a=t-ei(e);if(a<1)return e;var l=s?as(s,0,a).join(""):i.slice(0,a);if(r===void 0)return l+e;if(s&&(a+=l.length-a),mp(r)){if(i.slice(a).search(r)){var u,h=l;for(r.global||(r=RegExp(r.source,ge(Qy.exec(r))+"g")),r.lastIndex=0;u=r.exec(h);)var d=u.index;l=l.slice(0,d===void 0?a:d)}}else if(i.indexOf(sr(r),a)!=a){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+e},template:Or,uniqueId:Vp,eval:function(i){var n=null;try{n=window.eval(i)}catch{}return n},lowerFirst:bp,upperFirst:uo,camelCase:Ko,kebabCase:Bl,pascalCase:ws,constantCase:c2,dotCase:h2,pathCase:p2,sentenceCase:d2,titleCase:f2,hashcode:xs,uuid:Es,sanitizeHTML:zl,getSpellingSuggestion:Gp});function wn(i){return typeof i=="string"&&i.slice(-1)==="%"}function cn(i,n){if(i==null)return 0;var t;if(typeof i=="string"){if(t=parseFloat(i),wn(i)&&(t/=100,Number.isFinite(t)))return t*n}else t=i;return Number.isFinite(t)?t>0&&t<1?t*n:t:0}function Hp(i,n){var t,e=parseFloat(i);if(Number.isNaN(e))return null;if(n==null)t="[A-Za-z]*";else if(Array.isArray(n)){if(n.length===0)return null;t=n.join("|")}else typeof n=="string"&&(t=n);var r=function(o){var s=new RegExp("(?:\\d+(?:\\.\\d+)*)("+o+")$").exec(i);return s?s[1]:null}(t);return r===null?null:{unit:r,value:e}}function $e(i){if(typeof i=="object"){var n=0,t=0,e=0,r=0;return i.vertical!=null&&Number.isFinite(i.vertical)&&(t=r=i.vertical),i.horizontal!=null&&Number.isFinite(i.horizontal)&&(e=n=i.horizontal),i.left!=null&&Number.isFinite(i.left)&&(n=i.left),i.top!=null&&Number.isFinite(i.top)&&(t=i.top),i.right!=null&&Number.isFinite(i.right)&&(e=i.right),i.bottom!=null&&Number.isFinite(i.bottom)&&(r=i.bottom),{top:t,right:e,bottom:r,left:n}}var o=0;return i!=null&&Number.isFinite(i)&&(o=i),{top:o,right:o,bottom:o,left:o}}var y2=Object.freeze({__proto__:null,mod:function(i,n){return(i%n+n)%n},random:function(i,n){if(n==null)n=i==null?1:i,i=0;else if(n<i){var t=i;i=n,n=t}return Math.floor(Math.random()*(n-i+1)+i)},isPercentage:wn,normalizePercentage:cn,parseCssNumeric:Hp,normalizeSides:$e,isNaN:function(i){return ti(i)&&i!=+i},isNumber:ti,isFinite:function(i){return typeof i=="number"&&Py(i)},isInteger:vp,isSafeInteger:function(i){return vp(i)&&i>=-9007199254740991&&i<=My},clamp:Re,inRange:function(i,n,t){return n=Ji(n),t===void 0?(t=n,n=0):t=Ji(t),function(e,r,o){return e>=Ey(r,o)&&e<xy(r,o)}(i=ar(i),n,t)},toFinite:Ji,toNumber:ar,toInteger:mn,toSafeInteger:function(i){return i?cs(mn(i),-9007199254740991,Ky):i===0?i:0},parseInt:function(i,n,t){return t||n==null?n=0:n&&(n=+n),jy(ge(i).replace(Vy,""),n||0)},isNumeric:Nl});function As(i,n,t){if(t)switch(t.length){case 0:return i.call(n);case 1:return i.call(n,t[0]);case 2:return i.call(n,t[0],t[1]);case 3:return i.call(n,t[0],t[1],t[2]);case 4:return i.call(n,t[0],t[1],t[2],t[3]);case 5:return i.call(n,t[0],t[1],t[2],t[3],t[4]);case 6:return i.call(n,t[0],t[1],t[2],t[3],t[4],t[5]);default:return i.apply(n,t)}return i.call(n)}function dt(i,n){for(var t=[],e=2;e<arguments.length;e++)t[e-2]=arguments[e];return As(i,n,t)}function m2(i,n){for(var t=0,e=i.length;t<e;t+=1)if(i[t]===n)return i.push(i.splice(t,1)[0])}function Up(i){return typeof i=="object"&&i.then&&typeof i.then=="function"}function Ps(i){return i!=null&&(i instanceof Promise||Up(i))}function Ms(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var t=[];i.forEach(function(o){Array.isArray(o)?t.push.apply(t,o):t.push(o)});var e=t.some(function(o){return Ps(o)});if(e){var r=t.map(function(o){return Ps(o)?o:Promise.resolve(o!==!1)});return Promise.all(r).then(function(o){return o.reduce(function(s,a){return a!==!1&&s},!0)})}return t.every(function(o){return o!==!1})}function qp(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var t=Ms(i);return typeof t=="boolean"?Promise.resolve(t):t}var Rl=Object.freeze({__proto__:null,isFunction:$o,once:function(i){return function(n,t){var e;if(typeof t!="function")throw new TypeError("Expected a function");return n=mn(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=void 0),e}}(2,i)},noop:jc,debounce:ml,defer:up,apply:As,call:dt,cacher:function(i,n,t){var e=[],r={};return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=!1,l=o.join("\u2400");return l in r?(a=!0,m2(e,l)):(e.length>=1e3&&delete r[e.shift()],e.push(l),r[l]=As(i,n||null,o)),t?t(r[l],a):r[l]}},isAsyncLike:Up,isAsync:Ps,toAsyncBoolean:Ms,toDeferredBoolean:qp}),Vl=/[\t\r\n\f]/g,jl=/\S+/g,yo=function(i){return" "+i+" "};function Br(i){return i&&i.getAttribute&&i.getAttribute("class")||""}function mo(i,n){if(i==null||n==null)return!1;var t=yo(Br(i)),e=yo(n);return i.nodeType===1&&t.replace(Vl," ").includes(e)}function Rt(i,n){if(i!=null&&n!=null){if(typeof n=="function")return Rt(i,n(Br(i)));if(typeof n=="string"&&i.nodeType===1){var t=n.match(jl)||[],e=yo(Br(i)).replace(Vl," "),r=t.reduce(function(o,s){return o.indexOf(yo(s))<0?""+o+s+" ":o},e);e!==(r=r.trim())&&i.setAttribute("class",r)}}}function tn(i,n){if(i!=null){if(typeof n=="function")return tn(i,n(Br(i)));if((!n||typeof n=="string")&&i.nodeType===1){var t=(n||"").match(jl)||[],e=yo(Br(i)).replace(Vl," "),r=t.reduce(function(o,s){var a=yo(s);return o.indexOf(a)>-1?o.replace(a," "):o},e);e!==(r=n?r.trim():"")&&i.setAttribute("class",r)}}}function Il(i,n,t){if(i!=null&&n!=null)if(t==null||typeof n!="string"){if(typeof n=="function")return Il(i,n(Br(i),t),t);typeof n=="string"&&(n.match(jl)||[]).forEach(function(e){mo(i,e)?tn(i,e):Rt(i,e)})}else t?Rt(i,n):tn(i,n)}var b2=0;function $p(){return"v"+(b2+=1)}function ni(i){return i.id!=null&&i.id!==""||(i.id=$p()),i.id}function cr(i){return i!=null&&typeof i.getScreenCTM=="function"&&i instanceof SVGElement}var pe={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Wp="1.1";function _l(i,n){return n===void 0&&(n=document),n.createElement(i)}function Ss(i,n,t){return n===void 0&&(n=pe.xhtml),t===void 0&&(t=document),t.createElementNS(n,i)}function Ie(i,n){return n===void 0&&(n=document),Ss(i,pe.svg,n)}function ri(i){if(i)return Gl('<svg xmlns="'+pe.svg+'" xmlns:xlink="'+pe.xlink+'" version="1.1">'+i+"</svg>",{async:!1}).documentElement;var n=document.createElementNS(pe.svg,"svg");return n.setAttributeNS(pe.xmlns,"xmlns:xlink",pe.xlink),n.setAttribute("version",Wp),n}function Gl(i,n){var t;n===void 0&&(n={});try{var e=new DOMParser;n.async!=null&&(e.async=n.async),t=e.parseFromString(i,n.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+i);return t}function ks(i,n){n===void 0&&(n=!0);var t=i.nodeName;return n?t.toLowerCase():t.toUpperCase()}function Ts(i){for(var n=0,t=i.previousSibling;t;)t.nodeType===1&&(n+=1),t=t.previousSibling;return n}function Xp(i,n){return i.querySelectorAll(n)}function Ds(i,n){return i.querySelector(n)}function Hl(i,n,t){for(var e=i.ownerSVGElement,r=i.parentNode;r&&r!==t&&r!==e;){if(mo(r,n))return r;r=r.parentNode}return null}function Ns(i,n){var t=n&&n.parentNode;return i===t||!!(t&&t.nodeType===1&&16&i.compareDocumentPosition(t))}function Ln(i){i.parentNode&&i.parentNode.removeChild(i)}function Os(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function bo(i,n){(Array.isArray(n)?n:[n]).forEach(function(t){t!=null&&i.appendChild(t)})}function Yp(i,n){var t=i.firstChild;return t?Ls(t,n):bo(i,n)}function Ls(i,n){var t=i.parentNode;t&&(Array.isArray(n)?n:[n]).forEach(function(e){e!=null&&t.insertBefore(e,i)})}function Jp(i,n){n!=null&&n.appendChild(i)}function oi(i){try{return i instanceof HTMLElement}catch{return typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object"}}function Fs(i){return!(!i||!oi(i))&&(!!["a","button"].includes(ks(i))||i.getAttribute("role")==="button"||i.getAttribute("type")==="button"||Fs(i.parentNode))}function Ul(i){if(ks(i)==="input"){var n=i.getAttribute("type");if(n==null||["text","password","number","email","search","tel","url"].includes(n))return!0}return!1}var ql=["viewBox","attributeName","attributeType","repeatCount"];function Zp(i,n){return i.getAttribute(n)}function $l(i,n){var t=Xl(n);t.ns?i.hasAttributeNS(t.ns,t.local)&&i.removeAttributeNS(t.ns,t.local):i.hasAttribute(n)&&i.removeAttribute(n)}function Bs(i,n,t){if(t==null)return $l(i,n);var e=Xl(n);e.ns&&typeof t=="string"?i.setAttributeNS(e.ns,n,t):n==="id"?i.id=""+t:i.setAttribute(n,""+t)}function Wl(i,n){Object.keys(n).forEach(function(t){Bs(i,t,n[t])})}function Vt(i,n,t){if(n==null){for(var e=i.attributes,r={},o=0;o<e.length;o+=1)r[e[o].name]=e[o].value;return r}if(typeof n=="string"&&t===void 0)return i.getAttribute(n);typeof n=="object"?Wl(i,n):Bs(i,n,t)}function Xl(i){if(i.indexOf(":")!==-1){var n=i.split(":");return{ns:pe[n[0]],local:n[1]}}return{ns:null,local:i}}function Co(i){var n={};return Object.keys(i).forEach(function(t){var e=ql.includes(t)?t:Bl(t);n[e]=i[t]}),n}function ii(i){var n={};return i.split(";").forEach(function(t){var e=t.trim();if(e){var r=e.split("=");r.length&&(n[r[0].trim()]=r[1]?r[1].trim():"")}}),n}function zs(i,n){return Object.keys(n).forEach(function(t){if(t==="class")i[t]=i[t]?i[t]+" "+n[t]:n[t];else if(t==="style"){var e=typeof i[t]=="object",r=typeof n[t]=="object",o=void 0,s=void 0;e&&r?(o=i[t],s=n[t]):e?(o=i[t],s=ii(n[t])):r?(o=ii(i[t]),s=n[t]):(o=ii(i[t]),s=ii(n[t])),i[t]=zs(o,s)}else i[t]=n[t]}),i}function Kp(i,n,t){t===void 0&&(t={});for(var e,r,o=t.offset||0,s=[],a=[],l=null,u=0;u<i.length;u+=1){e=a[u]=i[u];for(var h=0,d=n.length;h<d;h+=1){var f=n[h],v=f.start+o,b=f.end+o;u>=v&&u<b&&(typeof e=="string"?e=a[u]={t:i[u],attrs:f.attrs}:e.attrs=zs(zs({},e.attrs),f.attrs),t.includeAnnotationIndices&&(e.annotations==null&&(e.annotations=[]),e.annotations.push(h)))}(r=a[u-1])?ie(e)&&ie(r)?(l=l,JSON.stringify(e.attrs)===JSON.stringify(r.attrs)?l.t+=e.t:(s.push(l),l=e)):ie(e)||ie(r)?(l=l,s.push(l),l=e):l=(l||"")+e:l=e}return l!=null&&s.push(l),s}function Qp(i){return i.replace(/ /g,"\xA0")}var zr,C2=Object.freeze({__proto__:null,annotate:Kp,findAnnotationsAtIndex:function(i,n){return i?i.filter(function(t){return t.start<n&&n<=t.end}):[]},findAnnotationsBetweenIndexes:function(i,n,t){return i?i.filter(function(e){return n>=e.start&&n<e.end||t>e.start&&t<=e.end||e.start>=n&&e.end<t}):[]},shiftAnnotations:function(i,n,t){return i&&i.forEach(function(e){e.start<n&&e.end>=n?e.end+=t:e.start>=n&&(e.start+=t,e.end+=t)}),i},sanitize:Qp});c.JSONExt=void 0,function(i){function n(o){return o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"}function t(o){return Array.isArray(o)}function e(o,s){if(o===s)return!0;if(n(o)||n(s))return!1;var a=t(o),l=t(s);return a===l&&(a&&l?function(u,h){if(u===h)return!0;if(u.length!==h.length)return!1;for(var d=0,f=u.length;d<f;d+=1)if(!e(u[d],h[d]))return!1;return!0}(o,s):function(u,h){if(u===h)return!0;for(var d in u)if(!(d in h))return!1;for(var d in h)if(!(d in u))return!1;for(var d in u)if(!e(u[d],h[d]))return!1;return!0}(o,s))}function r(o){return n(o)?o:t(o)?function(s){for(var a=new Array(s.length),l=0,u=s.length;l<u;l+=1)a[l]=r(s[l]);return a}(o):function(s){var a={};return Object.keys(s).forEach(function(l){a[l]=r(s[l])}),a}(o)}i.emptyObject=Object.freeze({}),i.emptyArray=Object.freeze([]),i.isPrimitive=n,i.isArray=t,i.isObject=function(o){return!n(o)&&!t(o)},i.deepEqual=e,i.deepCopy=r}(c.JSONExt||(c.JSONExt={})),c.DataUri=void 0,function(i){function n(o){var s="data:";return o.substr(0,s.length)===s}function t(o){var s,a=o.replace(/\s/g,""),l=(a=decodeURIComponent(a)).indexOf(","),u=a.slice(0,l),h=u.split(":")[1].split(";")[0],d=a.slice(l+1);s=u.indexOf("base64")>=0?atob(d):unescape(encodeURIComponent(d));for(var f=new Uint8Array(s.length),v=0;v<s.length;v+=1)f[v]=s.charCodeAt(v);return new Blob([f],{type:h})}function e(o,s){var a=window.navigator.msSaveBlob;if(a)a(o,s);else{var l=window.URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download=s,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(l)}}function r(o){var s=parseFloat(o);return Number.isNaN(s)?null:s}i.isDataUrl=n,i.imageToDataUri=function(o,s){if(o&&!n(o)){var a=function(){s(new Error("Failed to load image: "+o))},l=window.FileReader?function(h){if(h.status===200){var d=new FileReader;d.onload=function(f){var v=f.target.result;s(null,v)},d.onerror=a,d.readAsDataURL(h.response)}else a()}:function(h){if(h.status===200){var d=o.split(".").pop()||"png";d==="svg"&&(d="svg+xml");var f="data:image/"+d+";base64,",v=new Uint8Array(h.response),b=f+btoa(function(w){for(var P=[],x=0;x<w.length;x+=32768)P.push(String.fromCharCode.apply(null,w.subarray(x,x+32768)));return P.join("")}(v));s(null,b)}else a()},u=new XMLHttpRequest;u.responseType=window.FileReader?"blob":"arraybuffer",u.open("GET",o,!0),u.addEventListener("error",a),u.addEventListener("load",function(){return l(u)}),u.send()}else setTimeout(function(){return s(null,o)})},i.dataUriToBlob=t,i.downloadBlob=e,i.downloadDataUri=function(o,s){e(t(o),s)},i.svgToDataUrl=function(o,s){s===void 0&&(s={});var a=null,l=function(f){return a==null&&(a=function(v){var b=v.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return b&&b[2]?b[2].replace(/\s+/," ").split(" "):null}(o)),a!=null?r(a[f]):null},u=function(f){var v=o.match(f);return v&&v[2]?r(v[2]):null},h=s.width;if(h==null&&(h=u(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),h==null&&(h=l(2)),h==null)throw new Error("Can not parse width from svg string");var d=s.height;if(d==null&&(d=u(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),d==null&&(d=l(3)),d==null)throw new Error("Can not parse height from svg string");return"data:image/svg+xml,"+encodeURIComponent(o).replace(/'/g,"%27").replace(/"/g,"%22")}}(c.DataUri||(c.DataUri={}));var w2={px:function(i){return i},mm:function(i){return zr*i},cm:function(i){return zr*i*10},in:function(i){return zr*i*25.4},pt:function(i){return zr*(25.4*i/72)},pc:function(i){return zr*(25.4*i/6)}};c.Unit=void 0,function(i){function n(t,e,r){var o=Ct("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:t+(r||""),height:e+(r||"")}).appendTo(document.body),s={width:o.width()||0,height:o.height()||0};return o.remove(),s}i.measure=n,i.toPx=function(t,e){zr==null&&(zr=n("1","1","mm").width);var r=e?w2[e]:null;return r?r(t):t}}(c.Unit||(c.Unit={}));var wo,xn,Rs=function(){var i,n=window;if(n!=null&&(i=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame)!=null&&(i=i.bind(n)),i==null){var t=0;i=function(e){var r=new Date().getTime(),o=Math.max(0,16-(r-t)),s=setTimeout(function(){e(r+o)},o);return t=r+o,s}}return i}(),Vs=((xn=window)!=null&&(wo=xn.cancelAnimationFrame||xn.webkitCancelAnimationFrame||xn.webkitCancelRequestAnimationFrame||xn.msCancelAnimationFrame||xn.msCancelRequestAnimationFrame||xn.oCancelAnimationFrame||xn.oCancelRequestAnimationFrame||xn.mozCancelAnimationFrame||xn.mozCancelRequestAnimationFrame)&&(wo=wo.bind(xn)),wo==null&&(wo=clearTimeout),wo),x2=/-(.)/g,Yl={},td=["Webkit","ms","Moz","O"],ed=document?document.createElement("div").style:{};function nd(i){var n=i.replace(x2,function(e,r){return r.toUpperCase()});if(Yl[n]==null){var t=n.charAt(0).toUpperCase()+n.slice(1);Yl[n]=n in ed?n:function(e){for(var r=0;r<td.length;r+=1){var o=td[r]+e;if(o in ed)return o}return null}(t)}return Yl[n]}function js(i,n){var t=i.ownerDocument&&i.ownerDocument.defaultView&&i.ownerDocument.defaultView.opener?i.ownerDocument.defaultView.getComputedStyle(i,null):window.getComputedStyle(i,null);return t&&n?t.getPropertyValue(n)||t[n]:t}var rd,Jl,E2=(rd=document).selection?function(){rd.selection.empty()}:window.getSelection?function(){var i=window.getSelection();i&&(i.empty?i.empty():i.removeAllRanges&&i.removeAllRanges())}:function(){};function Rr(i,n){return n===void 0&&(n=0),Number.isInteger(i)?i:+i.toFixed(n)}function od(i,n){var t,e;if(n==null?(e=i==null?1:i,t=0):(e=n,t=i==null?0:i),e<t){var r=t;t=e,e=r}return Math.floor(Math.random()*(e-t+1)+t)}function xo(i,n,t){return Number.isNaN(i)?NaN:Number.isNaN(n)||Number.isNaN(t)?0:n<t?i<n?n:i>t?t:i:i<t?t:i>n?n:i}function Zl(i,n){return n*Math.round(i/n)}function id(i,n){return n!=null&&i!=null&&n.x>=i.x&&n.x<=i.x+i.width&&n.y>=i.y&&n.y<=i.y+i.height}function sd(i,n){var t=i.x-n.x,e=i.y-n.y;return t*t+e*e}c.Angle=void 0,(Jl=c.Angle||(c.Angle={})).toDeg=function(i){return 180*i/Math.PI%360},Jl.toRad=function(i,n){return n===void 0&&(n=!1),(n?i:i%360)*Math.PI/180},Jl.normalize=function(i){return i%360+(i<0?360:0)};var si,ai,li,ui,hr=function(){function i(){}return i.prototype.valueOf=function(){return this.toJSON()},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},i}();c.Point=function(i){function n(t,e){var r=i.call(this)||this;return r.x=t==null?0:t,r.y=e==null?0:e,r}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.round=function(t){return t===void 0&&(t=0),this.x=Rr(this.x,t),this.y=Rr(this.y,t),this},n.prototype.add=function(t,e){var r=n.create(t,e);return this.x+=r.x,this.y+=r.y,this},n.prototype.update=function(t,e){var r=n.create(t,e);return this.x=r.x,this.y=r.y,this},n.prototype.translate=function(t,e){var r=n.create(t,e);return this.x+=r.x,this.y+=r.y,this},n.prototype.rotate=function(t,e){var r=n.rotate(this,t,e);return this.x=r.x,this.y=r.y,this},n.prototype.scale=function(t,e,r){r===void 0&&(r=new n);var o=n.create(r);return this.x=o.x+t*(this.x-o.x),this.y=o.y+e*(this.y-o.y),this},n.prototype.closest=function(t){var e=this;if(t.length===1)return n.create(t[0]);var r=null,o=1/0;return t.forEach(function(s){var a=e.squaredDistance(s);a<o&&(r=s,o=a)}),r?n.create(r):null},n.prototype.distance=function(t){return Math.sqrt(this.squaredDistance(t))},n.prototype.squaredDistance=function(t){var e=n.create(t),r=this.x-e.x,o=this.y-e.y;return r*r+o*o},n.prototype.manhattanDistance=function(t){var e=n.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)},n.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01},n.prototype.theta=function(t){t===void 0&&(t=new n);var e=n.create(t),r=-(e.y-this.y),o=e.x-this.x,s=Math.atan2(r,o);return s<0&&(s=2*Math.PI+s),180*s/Math.PI},n.prototype.angleBetween=function(t,e){if(this.equals(t)||this.equals(e))return NaN;var r=this.theta(e)-this.theta(t);return r<0&&(r+=360),r},n.prototype.vectorAngle=function(t){return new n(0,0).angleBetween(this,t)},n.prototype.toPolar=function(t){return this.update(n.toPolar(this,t)),this},n.prototype.changeInAngle=function(t,e,r){return r===void 0&&(r=new n),this.clone().translate(-t,-e).theta(r)-this.theta(r)},n.prototype.adhereToRect=function(t){return id(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this},n.prototype.bearing=function(t){var e=n.create(t),r=c.Angle.toRad(this.y),o=c.Angle.toRad(e.y),s=this.x,a=e.x,l=c.Angle.toRad(a-s),u=Math.sin(l)*Math.cos(o),h=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(l),d=c.Angle.toDeg(Math.atan2(u,h))-22.5;return d<0&&(d+=360),["NE","E","SE","S","SW","W","NW","N"][d=parseInt(d/45,10)]},n.prototype.cross=function(t,e){if(t!=null&&e!=null){var r=n.create(t),o=n.create(e);return(o.x-this.x)*(r.y-this.y)-(o.y-this.y)*(r.x-this.x)}return NaN},n.prototype.dot=function(t){var e=n.create(t);return this.x*e.x+this.y*e.y},n.prototype.diff=function(t,e){if(typeof t=="number")return new n(this.x-t,this.y-e);var r=n.create(t);return new n(this.x-r.x,this.y-r.y)},n.prototype.lerp=function(t,e){var r=n.create(t);return new n((1-e)*this.x+e*r.x,(1-e)*this.y+e*r.y)},n.prototype.normalize=function(t){t===void 0&&(t=1);var e=t/this.magnitude();return this.scale(e,e)},n.prototype.move=function(t,e){var r=n.create(t),o=c.Angle.toRad(r.theta(this));return this.translate(Math.cos(o)*e,-Math.sin(o)*e)},n.prototype.reflection=function(t){return n.create(t).move(this,this.distance(t))},n.prototype.snapToGrid=function(t,e){return this.x=Zl(this.x,t),this.y=Zl(this.y,e==null?t:e),this},n.prototype.equals=function(t){var e=n.create(t);return e!=null&&e.x===this.x&&e.y===this.y},n.prototype.clone=function(){return n.clone(this)},n.prototype.toJSON=function(){return n.toJSON(this)},n.prototype.serialize=function(){return this.x+" "+this.y},n}(hr),(si=c.Point||(c.Point={})).toStringTag="X6.Geometry."+si.name,si.isPoint=function(i){if(i==null)return!1;if(i instanceof si)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===si.toStringTag)&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.toPolar=="function"},function(i){i.isPointLike=function(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"},i.isPointData=function(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}}(c.Point||(c.Point={})),function(i){function n(r){return i.isPoint(r)?new i(r.x,r.y):Array.isArray(r)?new i(r[0],r[1]):new i(r.x,r.y)}function t(r,o){return r===o||r!=null&&o!=null&&r.x===o.x&&r.y===o.y}function e(r,o,s,a){a===void 0&&(a=new i);var l=n(r),u=n(a),h=l.x-u.x,d=l.y-u.y,f=d*o+h*s;return new i(h*o-d*s+u.x,f+u.y)}i.create=function(r,o){return r==null||typeof r=="number"?new i(r,o):n(r)},i.clone=n,i.toJSON=function(r){return i.isPoint(r)?{x:r.x,y:r.y}:Array.isArray(r)?{x:r[0],y:r[1]}:{x:r.x,y:r.y}},i.fromPolar=function(r,o,s){s===void 0&&(s=new i);var a=Math.abs(r*Math.cos(o)),l=Math.abs(r*Math.sin(o)),u=n(s),h=c.Angle.normalize(c.Angle.toDeg(o));return h<90?l=-l:h<180?(a=-a,l=-l):h<270&&(a=-a),new i(u.x+a,u.y+l)},i.toPolar=function(r,o){o===void 0&&(o=new i);var s=n(r),a=n(o),l=s.x-a.x,u=s.y-a.y;return new i(Math.sqrt(l*l+u*u),c.Angle.toRad(a.theta(s)))},i.equals=t,i.equalPoints=function(r,o){if(r==null&&o!=null||r!=null&&o==null||r!=null&&o!=null&&r.length!==o.length)return!1;if(r!=null&&o!=null){for(var s=0,a=r.length;s<a;s+=1)if(!t(r[s],o[s]))return!1}return!0},i.random=function(r,o,s,a){return new i(od(r,o),od(s,a))},i.rotate=function(r,o,s){var a=c.Angle.toRad(c.Angle.normalize(-o)),l=Math.sin(a);return e(r,Math.cos(a),l,s)},i.rotateEx=e}(c.Point||(c.Point={})),c.Rectangle=function(i){function n(t,e,r,o){var s=i.call(this)||this;return s.x=t==null?0:t,s.y=e==null?0:e,s.width=r==null?0:r,s.height=o==null?0:o,s}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){return new c.Point(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new c.Point(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topCenter",{get:function(){return new c.Point(this.x+this.width/2,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new c.Point(this.x+this.width,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"center",{get:function(){return new c.Point(this.x+this.width/2,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new c.Point(this.x,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomCenter",{get:function(){return new c.Point(this.x+this.width/2,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new c.Point(this.x+this.width,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"corner",{get:function(){return new c.Point(this.x+this.width,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightMiddle",{get:function(){return new c.Point(this.x+this.width,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftMiddle",{get:function(){return new c.Point(this.x,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topLine",{get:function(){return new c.Line(this.topLeft,this.topRight)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightLine",{get:function(){return new c.Line(this.topRight,this.bottomRight)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomLine",{get:function(){return new c.Line(this.bottomLeft,this.bottomRight)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftLine",{get:function(){return new c.Line(this.topLeft,this.bottomLeft)},enumerable:!1,configurable:!0}),n.prototype.getOrigin=function(){return this.origin},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopCenter=function(){return this.topCenter},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getCenter=function(){return this.center},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomCenter=function(){return this.bottomCenter},n.prototype.getBottomRight=function(){return this.bottomRight},n.prototype.getCorner=function(){return this.corner},n.prototype.getRightMiddle=function(){return this.rightMiddle},n.prototype.getLeftMiddle=function(){return this.leftMiddle},n.prototype.getTopLine=function(){return this.topLine},n.prototype.getRightLine=function(){return this.rightLine},n.prototype.getBottomLine=function(){return this.bottomLine},n.prototype.getLeftLine=function(){return this.leftLine},n.prototype.bbox=function(t){if(!t)return this.clone();var e=c.Angle.toRad(t),r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),s=this.width*o+this.height*r,a=this.width*r+this.height*o;return new n(this.x+(this.width-s)/2,this.y+(this.height-a)/2,s,a)},n.prototype.round=function(t){return t===void 0&&(t=0),this.x=Rr(this.x,t),this.y=Rr(this.y,t),this.width=Rr(this.width,t),this.height=Rr(this.height,t),this},n.prototype.add=function(t,e,r,o){var s=n.create(t,e,r,o),a=Math.min(this.x,s.x),l=Math.min(this.y,s.y),u=Math.max(this.x+this.width,s.x+s.width),h=Math.max(this.y+this.height,s.y+s.height);return this.x=a,this.y=l,this.width=u-a,this.height=h-l,this},n.prototype.update=function(t,e,r,o){var s=n.create(t,e,r,o);return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this},n.prototype.inflate=function(t,e){var r=t,o=e!=null?e:t;return this.x-=r,this.y-=o,this.width+=2*r,this.height+=2*o,this},n.prototype.snapToGrid=function(t,e){var r=this.origin.snapToGrid(t,e),o=this.corner.snapToGrid(t,e);return this.x=r.x,this.y=r.y,this.width=o.x-r.x,this.height=o.y-r.y,this},n.prototype.translate=function(t,e){var r=c.Point.create(t,e);return this.x+=r.x,this.y+=r.y,this},n.prototype.scale=function(t,e,r){r===void 0&&(r=new c.Point);var o=this.origin.scale(t,e,r);return this.x=o.x,this.y=o.y,this.width*=t,this.height*=e,this},n.prototype.rotate=function(t,e){if(e===void 0&&(e=this.getCenter()),t!==0){var r=c.Angle.toRad(t),o=Math.cos(r),s=Math.sin(r),a=this.getOrigin(),l=this.getTopRight(),u=this.getBottomRight(),h=this.getBottomLeft();a=c.Point.rotateEx(a,o,s,e),l=c.Point.rotateEx(l,o,s,e),u=c.Point.rotateEx(u,o,s,e),h=c.Point.rotateEx(h,o,s,e);var d=new n(a.x,a.y,0,0);d.add(l.x,l.y,0,0),d.add(u.x,u.y,0,0),d.add(h.x,h.y,0,0),this.update(d)}return this},n.prototype.rotate90=function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var e=this.width;return this.width=this.height,this.height=e,this},n.prototype.moveAndExpand=function(t){var e=n.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},n.prototype.getMaxScaleToFit=function(t,e){e===void 0&&(e=this.center);var r=n.clone(t),o=e.x,s=e.y,a=1/0,l=1/0,u=1/0,h=1/0,d=1/0,f=1/0,v=1/0,b=1/0,w=r.topLeft;w.x<o&&(a=(this.x-o)/(w.x-o)),w.y<s&&(d=(this.y-s)/(w.y-s));var P=r.bottomRight;P.x>o&&(l=(this.x+this.width-o)/(P.x-o)),P.y>s&&(f=(this.y+this.height-s)/(P.y-s));var x=r.topRight;x.x>o&&(u=(this.x+this.width-o)/(x.x-o)),x.y<s&&(v=(this.y-s)/(x.y-s));var S=r.bottomLeft;return S.x<o&&(h=(this.x-o)/(S.x-o)),S.y>s&&(b=(this.y+this.height-s)/(S.y-s)),{sx:Math.min(a,l,u,h),sy:Math.min(d,f,v,b)}},n.prototype.getMaxUniformScaleToFit=function(t,e){e===void 0&&(e=this.center);var r=this.getMaxScaleToFit(t,e);return Math.min(r.sx,r.sy)},n.prototype.containsPoint=function(t,e){return id(this,c.Point.create(t,e))},n.prototype.containsRect=function(t,e,r,o){var s=n.create(t,e,r,o),a=this.x,l=this.y,u=this.width,h=this.height,d=s.x,f=s.y,v=s.width,b=s.height;return u!==0&&h!==0&&v!==0&&b!==0&&d>=a&&f>=l&&d+v<=a+u&&f+b<=l+h},n.prototype.intersectsWithLine=function(t){var e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=[],o=[];return e.forEach(function(s){var a=t.intersectsWithLine(s);a!==null&&o.indexOf(a.toString())<0&&(r.push(a),o.push(a.toString()))}),r.length>0?r:null},n.prototype.intersectsWithLineFromCenterToPoint=function(t,e){var r=c.Point.clone(t),o=this.center,s=null;e!=null&&e!==0&&r.rotate(e,o);for(var a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],l=new c.Line(o,r),u=a.length-1;u>=0;u-=1){var h=a[u].intersectsWithLine(l);if(h!==null){s=h;break}}return s&&e!=null&&e!==0&&s.rotate(-e,o),s},n.prototype.intersectsWithRect=function(t,e,r,o){var s=n.create(t,e,r,o);if(!this.isIntersectWithRect(s))return null;var a=this.origin,l=this.corner,u=s.origin,h=s.corner,d=Math.max(a.x,u.x),f=Math.max(a.y,u.y);return new n(d,f,Math.min(l.x,h.x)-d,Math.min(l.y,h.y)-f)},n.prototype.isIntersectWithRect=function(t,e,r,o){var s=n.create(t,e,r,o),a=this.origin,l=this.corner,u=s.origin,h=s.corner;return!(h.x<=a.x||h.y<=a.y||u.x>=l.x||u.y>=l.y)},n.prototype.normalize=function(){var t=this.x,e=this.y,r=this.width,o=this.height;return this.width<0&&(t=this.x+this.width,r=-this.width),this.height<0&&(e=this.y+this.height,o=-this.height),this.x=t,this.y=e,this.width=r,this.height=o,this},n.prototype.union=function(t){var e=n.clone(t),r=this.origin,o=this.corner,s=e.origin,a=e.corner,l=Math.min(r.x,s.x),u=Math.min(r.y,s.y);return new n(l,u,Math.max(o.x,a.x)-l,Math.max(o.y,a.y)-u)},n.prototype.getNearestSideToPoint=function(t){var e=c.Point.clone(t),r=e.x-this.x,o=this.x+this.width-e.x,s=e.y-this.y,a=r,l="left";return o<a&&(a=o,l="right"),s<a&&(a=s,l="top"),this.y+this.height-e.y<a&&(l="bottom"),l},n.prototype.getNearestPointToPoint=function(t){var e=c.Point.clone(t);if(this.containsPoint(e))switch(this.getNearestSideToPoint(e)){case"right":return new c.Point(this.x+this.width,e.y);case"left":return new c.Point(this.x,e.y);case"bottom":return new c.Point(e.x,this.y+this.height);case"top":return new c.Point(e.x,this.y)}return e.adhereToRect(this)},n.prototype.equals=function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.serialize=function(){return this.x+" "+this.y+" "+this.width+" "+this.height},n}(hr),(ai=c.Rectangle||(c.Rectangle={})).toStringTag="X6.Geometry."+ai.name,ai.isRectangle=function(i){if(i==null)return!1;if(i instanceof ai)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===ai.toStringTag)&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.width=="number"&&typeof t.height=="number"&&typeof t.inflate=="function"&&typeof t.moveAndExpand=="function"},function(i){i.isRectangleLike=function(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"&&typeof n.width=="number"&&typeof n.height=="number"}}(c.Rectangle||(c.Rectangle={})),function(i){function n(t){return i.isRectangle(t)?t.clone():Array.isArray(t)?new i(t[0],t[1],t[2],t[3]):new i(t.x,t.y,t.width,t.height)}i.create=function(t,e,r,o){return t==null||typeof t=="number"?new i(t,e,r,o):n(t)},i.clone=n,i.fromSize=function(t){return new i(0,0,t.width,t.height)},i.fromPositionAndSize=function(t,e){return new i(t.x,t.y,e.width,e.height)},i.fromEllipse=function(t){return new i(t.x-t.a,t.y-t.b,2*t.a,2*t.b)}}(c.Rectangle||(c.Rectangle={})),c.Line=function(i){function n(t,e,r,o){var s=i.call(this)||this;return typeof t=="number"&&typeof e=="number"?(s.start=new c.Point(t,e),s.end=new c.Point(r,o)):(s.start=c.Point.create(t),s.end=c.Point.create(e)),s}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"center",{get:function(){return new c.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},enumerable:!1,configurable:!0}),n.prototype.getCenter=function(){return this.center},n.prototype.round=function(t){return t===void 0&&(t=0),this.start.round(t),this.end.round(t),this},n.prototype.translate=function(t,e){return typeof t=="number"?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this},n.prototype.rotate=function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},n.prototype.scale=function(t,e,r){return this.start.scale(t,e,r),this.end.scale(t,e,r),this},n.prototype.length=function(){return Math.sqrt(this.squaredLength())},n.prototype.squaredLength=function(){var t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e},n.prototype.setLength=function(t){var e=this.length();if(!e)return this;var r=t/e;return this.scale(r,r,this.start)},n.prototype.parallel=function(t){var e=this.clone();if(!e.isDifferentiable())return e;var r=e.start,o=e.end,s=r.clone().rotate(270,o),a=o.clone().rotate(90,r);return r.move(a,t),o.move(s,t),e},n.prototype.vector=function(){return new c.Point(this.end.x-this.start.x,this.end.y-this.start.y)},n.prototype.angle=function(){var t=new c.Point(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},n.prototype.bbox=function(){var t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),o=Math.max(this.start.y,this.end.y);return new c.Rectangle(t,e,r-t,o-e)},n.prototype.bearing=function(){return this.start.bearing(this.end)},n.prototype.closestPoint=function(t){return this.pointAt(this.closestPointNormalizedLength(t))},n.prototype.closestPointLength=function(t){return this.closestPointNormalizedLength(t)*this.length()},n.prototype.closestPointTangent=function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},n.prototype.closestPointNormalizedLength=function(t){var e=this.vector().dot(new n(this.start,t).vector()),r=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(r)?0:r},n.prototype.pointAt=function(t){var e=this.start,r=this.end;return t<=0?e.clone():t>=1?r.clone():e.lerp(r,t)},n.prototype.pointAtLength=function(t){var e=this.start,r=this.end,o=!0;t<0&&(o=!1,t=-t);var s=this.length();if(t>=s)return o?r.clone():e.clone();var a=(o?t:s-t)/s;return this.pointAt(a)},n.prototype.divideAt=function(t){var e=this.pointAt(t);return[new n(this.start,e),new n(e,this.end)]},n.prototype.divideAtLength=function(t){var e=this.pointAtLength(t);return[new n(this.start,e),new n(e,this.end)]},n.prototype.containsPoint=function(t){var e=this.start,r=this.end;if(e.cross(t,r)!==0)return!1;var o=this.length();return!(new n(e,t).length()>o)&&!(new n(t,r).length()>o)},n.prototype.intersect=function(t,e){var r=t.intersectsWithLine(this,e);return r?Array.isArray(r)?r:[r]:null},n.prototype.intersectsWithLine=function(t){var e=new c.Point(this.end.x-this.start.x,this.end.y-this.start.y),r=new c.Point(t.end.x-t.start.x,t.end.y-t.start.y),o=e.x*r.y-e.y*r.x,s=new c.Point(t.start.x-this.start.x,t.start.y-this.start.y),a=s.x*r.y-s.y*r.x,l=s.x*e.y-s.y*e.x;if(o===0||a*o<0||l*o<0)return null;if(o>0){if(a>o||l>o)return null}else if(a<o||l<o)return null;return new c.Point(this.start.x+a*e.x/o,this.start.y+a*e.y/o)},n.prototype.isDifferentiable=function(){return!this.start.equals(this.end)},n.prototype.pointOffset=function(t){var e=c.Point.clone(t),r=this.start,o=this.end;return((o.x-r.x)*(e.y-r.y)-(o.y-r.y)*(e.x-r.x))/this.length()},n.prototype.pointSquaredDistance=function(t,e){var r=c.Point.create(t,e);return this.closestPoint(r).squaredDistance(r)},n.prototype.pointDistance=function(t,e){var r=c.Point.create(t,e);return this.closestPoint(r).distance(r)},n.prototype.tangentAt=function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,o=this.pointAt(t),s=new n(e,r);return s.translate(o.x-e.x,o.y-e.y),s},n.prototype.tangentAtLength=function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,o=this.pointAtLength(t),s=new n(e,r);return s.translate(o.x-e.x,o.y-e.y),s},n.prototype.relativeCcw=function(t,e){var r=c.Point.create(t,e),o=r.x-this.start.x,s=r.y-this.start.y,a=this.end.x-this.start.x,l=this.end.y-this.start.y,u=o*l-s*a;return u===0&&(u=o*a+s*l)>0&&(u=(o-=a)*a+(s-=l)*l)<0&&(u=0),u<0?-1:u>0?1:0},n.prototype.equals=function(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},n.prototype.clone=function(){return new n(this.start,this.end)},n.prototype.toJSON=function(){return{start:this.start.toJSON(),end:this.end.toJSON()}},n.prototype.serialize=function(){return[this.start.serialize(),this.end.serialize()].join(" ")},n}(hr),(li=c.Line||(c.Line={})).toStringTag="X6.Geometry."+li.name,li.isLine=function(i){if(i==null)return!1;if(i instanceof li)return!0;var n=i[Symbol.toStringTag],t=i;try{if((n==null||n===li.toStringTag)&&c.Point.isPoint(t.start)&&c.Point.isPoint(t.end)&&typeof t.vector=="function"&&typeof t.bearing=="function"&&typeof t.parallel=="function"&&typeof t.intersect=="function")return!0}catch{return!1}return!1},c.Ellipse=function(i){function n(t,e,r,o){var s=i.call(this)||this;return s.x=t==null?0:t,s.y=e==null?0:e,s.a=r==null?0:r,s.b=o==null?0:o,s}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"center",{get:function(){return new c.Point(this.x,this.y)},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){return c.Rectangle.fromEllipse(this)},n.prototype.getCenter=function(){return this.center},n.prototype.inflate=function(t,e){var r=t,o=e!=null?e:t;return this.a+=2*r,this.b+=2*o,this},n.prototype.normalizedDistance=function(t,e){var r=c.Point.create(t,e),o=r.x-this.x,s=r.y-this.y,a=this.a,l=this.b;return o*o/(a*a)+s*s/(l*l)},n.prototype.containsPoint=function(t,e){return this.normalizedDistance(t,e)<=1},n.prototype.intersectsWithLine=function(t){var e=[],r=this.a,o=this.b,s=t.start,a=t.end,l=t.vector(),u=s.diff(new c.Point(this.x,this.y)),h=new c.Point(l.x/(r*r),l.y/(o*o)),d=new c.Point(u.x/(r*r),u.y/(o*o)),f=l.dot(h),v=l.dot(d),b=v*v-f*(u.dot(d)-1);if(b<0)return null;if(b>0){var w=Math.sqrt(b),P=(-v-w)/f,x=(-v+w)/f;if((P<0||P>1)&&(x<0||x>1))return null;P>=0&&P<=1&&e.push(s.lerp(a,P)),x>=0&&x<=1&&e.push(s.lerp(a,x))}else{var S=-v/f;if(!(S>=0&&S<=1))return null;e.push(s.lerp(a,S))}return e},n.prototype.intersectsWithLineFromCenterToPoint=function(t,e){e===void 0&&(e=0);var r=c.Point.clone(t);e&&r.rotate(e,this.getCenter());var o,s=r.x-this.x,a=r.y-this.y;if(s===0)return o=this.bbox().getNearestPointToPoint(r),e?o.rotate(-e,this.getCenter()):o;var l=a/s,u=l*l,h=this.a*this.a,d=this.b*this.b,f=Math.sqrt(1/(1/h+u/d)),v=l*(f=s<0?-f:f);return o=new c.Point(this.x+f,this.y+v),e?o.rotate(-e,this.getCenter()):o},n.prototype.tangentTheta=function(t){var e,r,o=c.Point.clone(t),s=o.x,a=o.y,l=this.a,u=this.b,h=this.bbox().center,d=h.x,f=h.y,v=s>h.x+l/2,b=s<h.x-l/2;return v||b?e=l*l/(s-d)-l*l*(a-f)*((r=s>h.x?a-30:a+30)-f)/(u*u*(s-d))+d:r=u*u/(a-f)-u*u*(s-d)*((e=a>h.y?s+30:s-30)-d)/(l*l*(a-f))+f,new c.Point(e,r).theta(o)},n.prototype.scale=function(t,e){return this.a*=t,this.b*=e,this},n.prototype.rotate=function(t,e){var r=c.Rectangle.fromEllipse(this);r.rotate(t,e);var o=n.fromRect(r);return this.a=o.a,this.b=o.b,this.x=o.x,this.y=o.y,this},n.prototype.translate=function(t,e){var r=c.Point.create(t,e);return this.x+=r.x,this.y+=r.y,this},n.prototype.equals=function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},n.prototype.clone=function(){return new n(this.x,this.y,this.a,this.b)},n.prototype.toJSON=function(){return{x:this.x,y:this.y,a:this.a,b:this.b}},n.prototype.serialize=function(){return this.x+" "+this.y+" "+this.a+" "+this.b},n}(hr),function(i){i.toStringTag="X6.Geometry."+i.name,i.isEllipse=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.a=="number"&&typeof e.b=="number"&&typeof e.inflate=="function"&&typeof e.normalizedDistance=="function"}}(c.Ellipse||(c.Ellipse={})),function(i){function n(t){return i.isEllipse(t)?t.clone():Array.isArray(t)?new i(t[0],t[1],t[2],t[3]):new i(t.x,t.y,t.a,t.b)}i.create=function(t,e,r,o){return t==null||typeof t=="number"?new i(t,e,r,o):n(t)},i.parse=n,i.fromRect=function(t){var e=t.center;return new i(e.x,e.y,t.width/2,t.height/2)}}(c.Ellipse||(c.Ellipse={})),c.Polyline=function(i){function n(t){var e=i.call(this)||this;if(t!=null){if(typeof t=="string")return n.parse(t);e.points=t.map(function(r){return c.Point.create(r)})}else e.points=[];return e}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this.points.length===0?null:this.points[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.points.length===0?null:this.points[this.points.length-1]},enumerable:!1,configurable:!0}),n.prototype.scale=function(t,e,r){return r===void 0&&(r=new c.Point),this.points.forEach(function(o){return o.scale(t,e,r)}),this},n.prototype.rotate=function(t,e){return this.points.forEach(function(r){return r.rotate(t,e)}),this},n.prototype.translate=function(t,e){var r=c.Point.create(t,e);return this.points.forEach(function(o){return o.translate(r.x,r.y)}),this},n.prototype.bbox=function(){if(this.points.length===0)return new c.Rectangle;for(var t=1/0,e=-1/0,r=1/0,o=-1/0,s=this.points,a=0,l=s.length;a<l;a+=1){var u=s[a],h=u.x,d=u.y;h<t&&(t=h),h>e&&(e=h),d<r&&(r=d),d>o&&(o=d)}return new c.Rectangle(t,r,e-t,o-r)},n.prototype.closestPoint=function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},n.prototype.closestPointLength=function(t){var e=this.points,r=e.length;if(r===0||r===1)return 0;for(var o=0,s=0,a=1/0,l=0,u=r-1;l<u;l+=1){var h=new c.Line(e[l],e[l+1]),d=h.length(),f=h.closestPointNormalizedLength(t),v=h.pointAt(f).squaredDistance(t);v<a&&(a=v,s=o+f*d),o+=d}return s},n.prototype.closestPointNormalizedLength=function(t){var e=this.closestPointLength(t);if(e===0)return 0;var r=this.length();return r===0?0:e/r},n.prototype.closestPointTangent=function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},n.prototype.containsPoint=function(t){if(this.points.length===0)return!1;for(var e=c.Point.clone(t),r=e.x,o=e.y,s=this.points,a=s.length,l=a-1,u=0,h=0;h<a;h+=1){var d=s[l],f=s[h];if(e.equals(d))return!0;var v=new c.Line(d,f);if(v.containsPoint(t))return!0;if(o<=d.y&&o>f.y||o>d.y&&o<=f.y){var b=d.x-r>f.x-r?d.x-r:f.x-r;if(b>=0){var w=new c.Point(r+b,o),P=new c.Line(t,w);v.intersectsWithLine(P)&&(u+=1)}}l=h}return u%2==1},n.prototype.intersectsWithLine=function(t){for(var e=[],r=0,o=this.points.length-1;r<o;r+=1){var s=this.points[r],a=this.points[r+1],l=t.intersectsWithLine(new c.Line(s,a));l&&e.push(l)}return e.length>0?e:null},n.prototype.isDifferentiable=function(){for(var t=0,e=this.points.length-1;t<e;t+=1){var r=this.points[t],o=this.points[t+1];if(new c.Line(r,o).isDifferentiable())return!0}return!1},n.prototype.length=function(){for(var t=0,e=0,r=this.points.length-1;e<r;e+=1){var o=this.points[e],s=this.points[e+1];t+=o.distance(s)}return t},n.prototype.pointAt=function(t){var e=this.points,r=e.length;if(r===0)return null;if(r===1||t<=0)return e[0].clone();if(t>=1)return e[r-1].clone();var o=this.length()*t;return this.pointAtLength(o)},n.prototype.pointAtLength=function(t){var e=this.points,r=e.length;if(r===0)return null;if(r===1)return e[0].clone();var o=!0;t<0&&(o=!1,t=-t);for(var s=0,a=0,l=r-1;a<l;a+=1){var u=o?a:l-1-a,h=e[u],d=e[u+1],f=new c.Line(h,d),v=h.distance(d);if(t<=s+v)return f.pointAtLength((o?1:-1)*(t-s));s+=v}return(o?e[r-1]:e[0]).clone()},n.prototype.tangentAt=function(t){var e=this.points.length;if(e===0||e===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length()*t;return this.tangentAtLength(r)},n.prototype.tangentAtLength=function(t){var e=this.points,r=e.length;if(r===0||r===1)return null;var o,s=!0;t<0&&(s=!1,t=-t);for(var a=0,l=0,u=r-1;l<u;l+=1){var h=s?l:u-1-l,d=e[h],f=e[h+1],v=new c.Line(d,f),b=d.distance(f);if(v.isDifferentiable()){if(t<=a+b)return v.tangentAtLength((s?1:-1)*(t-a));o=v}a+=b}if(o){var w=s?1:0;return o.tangentAt(w)}return null},n.prototype.simplify=function(t){t===void 0&&(t={});var e=this.points;if(e.length<3)return this;for(var r=t.threshold||0,o=0;e[o+2];){var s=o+1,a=o+2,l=e[o],u=e[s],h=e[a];new c.Line(l,h).closestPoint(u).distance(u)<=r?e.splice(s,1):o+=1}return this},n.prototype.toHull=function(){var t=this.points,e=t.length;if(e===0)return new n;for(var r=t[0],o=1;o<e;o+=1)(t[o].y<r.y||t[o].y===r.y&&t[o].x>r.x)&&(r=t[o]);var s=[];for(o=0;o<e;o+=1){var a=r.theta(t[o]);a===0&&(a=360),s.push([t[o],o,a])}if(s.sort(function(ct,et){var lt=ct[2]-et[2];return lt===0&&(lt=et[1]-ct[1]),lt}),s.length>2){var l=s[s.length-1];s.unshift(l)}for(var u,h={},d=[],f=function(ct){return ct[0].toString()+"@"+ct[1]};s.length!==0;){var v=s.pop(),b=v[0];if(!h[f(v)])for(var w=!1;!w;)if(d.length<2)d.push(v),w=!0;else{var P=d.pop(),x=P[0],S=d.pop(),D=S[0],N=D.cross(x,b);if(N<0)d.push(S),d.push(P),d.push(v),w=!0;else if(N===0){var V=x.angleBetween(D,b);Math.abs(V-180)<1e-10||x.equals(b)||D.equals(x)?(h[f(P)]=x,d.push(S)):Math.abs((V+1)%360-1)<1e-10&&(d.push(S),s.push(P))}else h[f(P)]=x,d.push(S)}}d.length>2&&d.pop();for(var y=-1,H=(o=0,d.length);o<H;o+=1){var I=d[o][1];(u===void 0||I<u)&&(u=I,y=o)}var X=[];if(y>0){var J=d.slice(y),Z=d.slice(0,y);X=J.concat(Z)}else X=d;var it=[];for(o=0,H=X.length;o<H;o+=1)it.push(X[o][0]);return new n(it)},n.prototype.equals=function(t){var e=this;return t!=null&&t.points.length===this.points.length&&t.points.every(function(r,o){return r.equals(e.points[o])})},n.prototype.clone=function(){return new n(this.points.map(function(t){return t.clone()}))},n.prototype.toJSON=function(){return this.points.map(function(t){return t.toJSON()})},n.prototype.serialize=function(){return this.points.map(function(t){return t.x+", "+t.y}).join(" ")},n}(hr),function(i){i.toStringTag="X6.Geometry."+i.name,i.isPolyline=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.toHull=="function"&&typeof e.simplify=="function"}}(c.Polyline||(c.Polyline={})),function(i){i.parse=function(n){var t=n.trim();if(t==="")return new i;for(var e=[],r=t.split(/\s*,\s*|\s+/),o=0,s=r.length;o<s;o+=2)e.push({x:+r[o],y:+r[o+1]});return new i(e)}}(c.Polyline||(c.Polyline={})),c.Curve=function(i){function n(t,e,r,o){var s=i.call(this)||this;return s.PRECISION=3,s.start=c.Point.create(t),s.controlPoint1=c.Point.create(e),s.controlPoint2=c.Point.create(r),s.end=c.Point.create(o),s}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){for(var t,e,r,o,s,a,l,u,h,d,f,v=this.start,b=this.controlPoint1,w=this.controlPoint2,P=this.end,x=v.x,S=v.y,D=b.x,N=b.y,V=w.x,y=w.y,H=P.x,I=P.y,X=[],J=[],Z=[[],[]],it=0;it<2;it+=1)if(it===0?(e=6*x-12*D+6*V,t=-3*x+9*D-9*V+3*H,r=3*D-3*x):(e=6*S-12*N+6*y,t=-3*S+9*N-9*y+3*I,r=3*N-3*S),Math.abs(t)<1e-12){if(Math.abs(e)<1e-12)continue;(o=-r/e)>0&&o<1&&J.push(o)}else l=e*e-4*r*t,u=Math.sqrt(l),l<0||((s=(-e+u)/(2*t))>0&&s<1&&J.push(s),(a=(-e-u)/(2*t))>0&&a<1&&J.push(a));for(var ct=J.length,et=ct;ct;)h=(f=1-(o=J[ct-=1]))*f*f*x+3*f*f*o*D+3*f*o*o*V+o*o*o*H,Z[0][ct]=h,d=f*f*f*S+3*f*f*o*N+3*f*o*o*y+o*o*o*I,Z[1][ct]=d,X[ct]={X:h,Y:d};J[et]=0,J[et+1]=1,X[et]={X:x,Y:S},X[et+1]={X:H,Y:I},Z[0][et]=x,Z[1][et]=S,Z[0][et+1]=H,Z[1][et+1]=I,J.length=et+2,Z[0].length=et+2,Z[1].length=et+2,X.length=et+2;var lt=Math.min.apply(null,Z[0]),ht=Math.min.apply(null,Z[1]),at=Math.max.apply(null,Z[0]),gt=Math.max.apply(null,Z[1]);return new c.Rectangle(lt,ht,at-lt,gt-ht)},n.prototype.closestPoint=function(t,e){return e===void 0&&(e={}),this.pointAtT(this.closestPointT(t,e))},n.prototype.closestPointLength=function(t,e){e===void 0&&(e={});var r=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,r),r)},n.prototype.closestPointNormalizedLength=function(t,e){e===void 0&&(e={});var r=this.getOptions(e),o=this.closestPointLength(t,r);if(!o)return 0;var s=this.length(r);return s===0?0:o/s},n.prototype.closestPointT=function(t,e){e===void 0&&(e={});var r=this.getPrecision(e),o=this.getDivisions(e),s=Math.pow(10,-r),a=null,l=0,u=0,h=0,d=0,f=0,v=null,b=o.length,w=b>0?1/b:0;for(o.forEach(function(I,X){var J=I.start.distance(t),Z=I.end.distance(t),it=J+Z;(v==null||it<v)&&(a=I,l=X*w,u=(X+1)*w,h=J,d=Z,v=it,f=I.endpointDistance())});;){var P=h?Math.abs(h-d)/h:0,x=d!=null?Math.abs(h-d)/d:0;if(P<s||x<s||!h||h<f*s||!d||d<f*s)return h<=d?l:u;var S=a.divide(.5);w/=2;var D=S[0].start.distance(t),N=S[0].end.distance(t),V=D+N,y=S[1].start.distance(t),H=S[1].end.distance(t);V<=y+H?(a=S[0],u-=w,h=D,d=N):(a=S[1],l+=w,h=y,d=H)}},n.prototype.closestPointTangent=function(t,e){return e===void 0&&(e={}),this.tangentAtT(this.closestPointT(t,e))},n.prototype.containsPoint=function(t,e){return e===void 0&&(e={}),this.toPolyline(e).containsPoint(t)},n.prototype.divideAt=function(t,e){if(e===void 0&&(e={}),t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var r=this.tAt(t,e);return this.divideAtT(r)},n.prototype.divideAtLength=function(t,e){e===void 0&&(e={});var r=this.tAtLength(t,e);return this.divideAtT(r)},n.prototype.divide=function(t){return this.divideAtT(t)},n.prototype.divideAtT=function(t){var e=this.start,r=this.controlPoint1,o=this.controlPoint2,s=this.end;if(t<=0)return[new n(e,e,e,e),new n(e,r,o,s)];if(t>=1)return[new n(e,r,o,s),new n(s,s,s,s)];var a=this.getSkeletonPoints(t),l=a.startControlPoint1,u=a.startControlPoint2,h=a.divider,d=a.dividerControlPoint1,f=a.dividerControlPoint2;return[new n(e,l,u,h),new n(h,d,f,s)]},n.prototype.endpointDistance=function(){return this.start.distance(this.end)},n.prototype.getSkeletonPoints=function(t){var e=this.start,r=this.controlPoint1,o=this.controlPoint2,s=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:o.clone()};if(t>=1)return{startControlPoint1:r.clone(),startControlPoint2:o.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};var a=new c.Line(e,r).pointAt(t),l=new c.Line(r,o).pointAt(t),u=new c.Line(o,s).pointAt(t),h=new c.Line(a,l).pointAt(t),d=new c.Line(l,u).pointAt(t);return{startControlPoint1:a,startControlPoint2:h,divider:new c.Line(h,d).pointAt(t),dividerControlPoint1:d,dividerControlPoint2:u}},n.prototype.getSubdivisions=function(t){t===void 0&&(t={});var e=this.getPrecision(t),r=[new n(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(e===0)return r;for(var o=this.endpointDistance(),s=Math.pow(10,-e),a=0,l=function(){a+=1;var h=[];r.forEach(function(f){var v=f.divide(.5);h.push(v[0],v[1])});var d=h.reduce(function(f,v){return f+v.endpointDistance()},0);if(a>1&&(d!==0?(d-o)/d:0)<s)return{value:h};r=h,o=d};;){var u=l();if(typeof u=="object")return u.value}},n.prototype.length=function(t){return t===void 0&&(t={}),this.getDivisions(t).reduce(function(e,r){return e+r.endpointDistance()},0)},n.prototype.lengthAtT=function(t,e){if(e===void 0&&(e={}),t<=0)return 0;var r=e.precision===void 0?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:r})},n.prototype.pointAt=function(t,e){if(e===void 0&&(e={}),t<=0)return this.start.clone();if(t>=1)return this.end.clone();var r=this.tAt(t,e);return this.pointAtT(r)},n.prototype.pointAtLength=function(t,e){e===void 0&&(e={});var r=this.tAtLength(t,e);return this.pointAtT(r)},n.prototype.pointAtT=function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},n.prototype.isDifferentiable=function(){var t=this.start,e=this.controlPoint1,r=this.controlPoint2,o=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(o))},n.prototype.tangentAt=function(t,e){if(e===void 0&&(e={}),!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var r=this.tAt(t,e);return this.tangentAtT(r)},n.prototype.tangentAtLength=function(t,e){if(e===void 0&&(e={}),!this.isDifferentiable())return null;var r=this.tAtLength(t,e);return this.tangentAtT(r)},n.prototype.tangentAtT=function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);var e=this.getSkeletonPoints(t),r=e.startControlPoint2,o=e.dividerControlPoint1,s=e.divider,a=new c.Line(r,o);return a.translate(s.x-r.x,s.y-r.y),a},n.prototype.getPrecision=function(t){return t===void 0&&(t={}),t.precision==null?this.PRECISION:t.precision},n.prototype.getDivisions=function(t){if(t===void 0&&(t={}),t.subdivisions!=null)return t.subdivisions;var e=this.getPrecision(t);return this.getSubdivisions({precision:e})},n.prototype.getOptions=function(t){return t===void 0&&(t={}),{precision:this.getPrecision(t),subdivisions:this.getDivisions(t)}},n.prototype.tAt=function(t,e){if(e===void 0&&(e={}),t<=0)return 0;if(t>=1)return 1;var r=this.getOptions(e),o=this.length(r)*t;return this.tAtLength(o,r)},n.prototype.tAtLength=function(t,e){e===void 0&&(e={});var r=!0;t<0&&(r=!1,t=-t);for(var o,s,a=this.getPrecision(e),l=this.getDivisions(e),u={precision:a,subdivisions:l},h=null,d=0,f=0,v=0,b=l.length,w=b>0?1/b:0,P=0;P<b;P+=1){var x=r?P:b-1-P,S=l[P],D=S.endpointDistance();if(t<=v+D){h=S,o=x*w,s=(x+1)*w,d=r?t-v:D+v-t,f=r?D+v-t:t-v;break}v+=D}if(h==null)return r?1:0;for(var N=this.length(u),V=Math.pow(10,-a);;){if((N!==0?d/N:0)<V)return o;if((N!==0?f/N:0)<V)return s;var y=void 0,H=void 0,I=h.divide(.5);w/=2;var X=I[0].endpointDistance(),J=I[1].endpointDistance();d<=X?(h=I[0],s-=w,H=X-(y=d)):(h=I[1],o+=w,H=J-(y=d-X)),d=y,f=H}},n.prototype.toPoints=function(t){t===void 0&&(t={});var e=this.getDivisions(t),r=[e[0].start.clone()];return e.forEach(function(o){return r.push(o.end.clone())}),r},n.prototype.toPolyline=function(t){return t===void 0&&(t={}),new c.Polyline(this.toPoints(t))},n.prototype.scale=function(t,e,r){return this.start.scale(t,e,r),this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},n.prototype.rotate=function(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this},n.prototype.translate=function(t,e){return typeof t=="number"?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this},n.prototype.equals=function(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)},n.prototype.clone=function(){return new n(this.start,this.controlPoint1,this.controlPoint2,this.end)},n.prototype.toJSON=function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}},n.prototype.serialize=function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")},n}(hr),(ui=c.Curve||(c.Curve={})).toStringTag="X6.Geometry."+ui.name,ui.isCurve=function(i){if(i==null)return!1;if(i instanceof ui)return!0;var n=i[Symbol.toStringTag],t=i;try{if((n==null||n===ui.toStringTag)&&c.Point.isPoint(t.start)&&c.Point.isPoint(t.controlPoint1)&&c.Point.isPoint(t.controlPoint2)&&c.Point.isPoint(t.end)&&typeof t.toPoints=="function"&&typeof t.toPolyline=="function")return!0}catch{return!1}return!1},function(i){function n(t){var e=t.length,r=[],o=[],s=2;r[0]=t[0]/s;for(var a=1;a<e;a+=1)o[a]=1/s,s=(a<e-1?4:3.5)-o[a],r[a]=(t[a]-r[a-1])/s;for(a=1;a<e;a+=1)r[e-a-1]-=o[e-a]*r[e-a];return r}i.throughPoints=function(t){if(t==null||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var e=function(u){var h=u.map(function(S){return c.Point.clone(S)}),d=[],f=[],v=h.length-1;if(v===1)return d[0]=new c.Point((2*h[0].x+h[1].x)/3,(2*h[0].y+h[1].y)/3),f[0]=new c.Point(2*d[0].x-h[0].x,2*d[0].y-h[0].y),[d,f];for(var b=[],w=1;w<v-1;w+=1)b[w]=4*h[w].x+2*h[w+1].x;b[0]=h[0].x+2*h[1].x,b[v-1]=(8*h[v-1].x+h[v].x)/2;var P=n(b);for(w=1;w<v-1;w+=1)b[w]=4*h[w].y+2*h[w+1].y;b[0]=h[0].y+2*h[1].y,b[v-1]=(8*h[v-1].y+h[v].y)/2;var x=n(b);for(w=0;w<v;w+=1)d.push(new c.Point(P[w],x[w])),w<v-1?f.push(new c.Point(2*h[w+1].x-P[w+1],2*h[w+1].y-x[w+1])):f.push(new c.Point((h[v].x+P[v-1])/2,(h[v].y+x[v-1])/2));return[d,f]}(t),r=[],o=0,s=e[0].length;o<s;o+=1){var a=new c.Point(e[0][o].x,e[0][o].y),l=new c.Point(e[1][o].x,e[1][o].y);r.push(new i(t[o],a,l,t[o+1]))}return r}}(c.Curve||(c.Curve={}));var ci=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isVisible=!0,t.isSegment=!0,t.isSubpathStart=!1,t}return B(n,i),Object.defineProperty(n.prototype,"end",{get:function(){return this.endPoint},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end},enumerable:!1,configurable:!0}),n.prototype.closestPointT=function(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")},n.prototype.lengthAtT=function(t,e){if(t<=0)return 0;var r=this.length();return t>=1?r:r*t},n.prototype.divideAtT=function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")},n.prototype.pointAtT=function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")},n.prototype.tangentAtT=function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")},n}(hr),Fn=function(i){function n(t,e){var r=i.call(this)||this;return c.Line.isLine(t)?r.endPoint=t.end.clone().round(2):r.endPoint=c.Point.create(t,e).round(2),r}return B(n,i),Object.defineProperty(n.prototype,"type",{get:function(){return"L"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"line",{get:function(){return new c.Line(this.start,this.end)},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){return this.line.bbox()},n.prototype.closestPoint=function(t){return this.line.closestPoint(t)},n.prototype.closestPointLength=function(t){return this.line.closestPointLength(t)},n.prototype.closestPointNormalizedLength=function(t){return this.line.closestPointNormalizedLength(t)},n.prototype.closestPointTangent=function(t){return this.line.closestPointTangent(t)},n.prototype.length=function(){return this.line.length()},n.prototype.divideAt=function(t){var e=this.line.divideAt(t);return[new n(e[0]),new n(e[1])]},n.prototype.divideAtLength=function(t){var e=this.line.divideAtLength(t);return[new n(e[0]),new n(e[1])]},n.prototype.getSubdivisions=function(){return[]},n.prototype.pointAt=function(t){return this.line.pointAt(t)},n.prototype.pointAtLength=function(t){return this.line.pointAtLength(t)},n.prototype.tangentAt=function(t){return this.line.tangentAt(t)},n.prototype.tangentAtLength=function(t){return this.line.tangentAtLength(t)},n.prototype.isDifferentiable=function(){return this.previousSegment!=null&&!this.start.equals(this.end)},n.prototype.clone=function(){return new n(this.end)},n.prototype.scale=function(t,e,r){return this.end.scale(t,e,r),this},n.prototype.rotate=function(t,e){return this.end.rotate(t,e),this},n.prototype.translate=function(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this},n.prototype.equals=function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)},n.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}},n.prototype.serialize=function(){var t=this.end;return this.type+" "+t.x+" "+t.y},n}(ci);(function(i){i.create=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length,r=n[0];if(c.Line.isLine(r))return new i(r);if(c.Point.isPointLike(r))return e===1?new i(r):n.map(function(u){return new i(u)});if(e===2)return new i(+n[0],+n[1]);for(var o=[],s=0;s<e;s+=2){var a=+n[s],l=+n[s+1];o.push(new i(a,l))}return o}})(Fn||(Fn={}));var Is=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"end",{get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return"Z"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"line",{get:function(){return new c.Line(this.start,this.end)},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){return this.line.bbox()},n.prototype.closestPoint=function(t){return this.line.closestPoint(t)},n.prototype.closestPointLength=function(t){return this.line.closestPointLength(t)},n.prototype.closestPointNormalizedLength=function(t){return this.line.closestPointNormalizedLength(t)},n.prototype.closestPointTangent=function(t){return this.line.closestPointTangent(t)},n.prototype.length=function(){return this.line.length()},n.prototype.divideAt=function(t){var e=this.line.divideAt(t);return[e[1].isDifferentiable()?new Fn(e[0]):this.clone(),new Fn(e[1])]},n.prototype.divideAtLength=function(t){var e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new Fn(e[0]):this.clone(),new Fn(e[1])]},n.prototype.getSubdivisions=function(){return[]},n.prototype.pointAt=function(t){return this.line.pointAt(t)},n.prototype.pointAtLength=function(t){return this.line.pointAtLength(t)},n.prototype.tangentAt=function(t){return this.line.tangentAt(t)},n.prototype.tangentAtLength=function(t){return this.line.tangentAtLength(t)},n.prototype.isDifferentiable=function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},n.prototype.scale=function(){return this},n.prototype.rotate=function(){return this},n.prototype.translate=function(){return this},n.prototype.equals=function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)},n.prototype.clone=function(){return new n},n.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}},n.prototype.serialize=function(){return this.type},n}(ci);(function(i){i.create=function(){return new i}})(Is||(Is={}));var _s=function(i){function n(t,e){var r=i.call(this)||this;return r.isVisible=!1,r.isSubpathStart=!0,c.Line.isLine(t)||c.Curve.isCurve(t)?r.endPoint=t.end.clone().round(2):r.endPoint=c.Point.create(t,e).round(2),r}return B(n,i),Object.defineProperty(n.prototype,"start",{get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return"M"},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){return null},n.prototype.closestPoint=function(){return this.end.clone()},n.prototype.closestPointLength=function(){return 0},n.prototype.closestPointNormalizedLength=function(){return 0},n.prototype.closestPointT=function(){return 1},n.prototype.closestPointTangent=function(){return null},n.prototype.length=function(){return 0},n.prototype.lengthAtT=function(){return 0},n.prototype.divideAt=function(){return[this.clone(),this.clone()]},n.prototype.divideAtLength=function(){return[this.clone(),this.clone()]},n.prototype.getSubdivisions=function(){return[]},n.prototype.pointAt=function(){return this.end.clone()},n.prototype.pointAtLength=function(){return this.end.clone()},n.prototype.pointAtT=function(){return this.end.clone()},n.prototype.tangentAt=function(){return null},n.prototype.tangentAtLength=function(){return null},n.prototype.tangentAtT=function(){return null},n.prototype.isDifferentiable=function(){return!1},n.prototype.scale=function(t,e,r){return this.end.scale(t,e,r),this},n.prototype.rotate=function(t,e){return this.end.rotate(t,e),this},n.prototype.translate=function(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this},n.prototype.clone=function(){return new n(this.end)},n.prototype.equals=function(t){return this.type===t.type&&this.end.equals(t.end)},n.prototype.toJSON=function(){return{type:this.type,end:this.end.toJSON()}},n.prototype.serialize=function(){var t=this.end;return this.type+" "+t.x+" "+t.y},n}(ci);(function(i){i.create=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length,r=n[0];if(c.Line.isLine(r))return new i(r);if(c.Curve.isCurve(r))return new i(r);if(c.Point.isPointLike(r)){if(e===1)return new i(r);for(var o=[],s=0;s<e;s+=1)s===0?o.push(new i(n[s])):o.push(new Fn(n[s]));return o}if(e===2)return new i(+n[0],+n[1]);var a=[];for(s=0;s<e;s+=2){var l=+n[s],u=+n[s+1];s===0?a.push(new i(l,u)):a.push(new Fn(l,u))}return a}})(_s||(_s={}));var Gs=function(i){function n(t,e,r,o,s,a){var l=i.call(this)||this;return c.Curve.isCurve(t)?(l.controlPoint1=t.controlPoint1.clone().round(2),l.controlPoint2=t.controlPoint2.clone().round(2),l.endPoint=t.end.clone().round(2)):typeof t=="number"?(l.controlPoint1=new c.Point(t,e).round(2),l.controlPoint2=new c.Point(r,o).round(2),l.endPoint=new c.Point(s,a).round(2)):(l.controlPoint1=c.Point.create(t).round(2),l.controlPoint2=c.Point.create(e).round(2),l.endPoint=c.Point.create(r).round(2)),l}return B(n,i),Object.defineProperty(n.prototype,"type",{get:function(){return"C"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"curve",{get:function(){return new c.Curve(this.start,this.controlPoint1,this.controlPoint2,this.end)},enumerable:!1,configurable:!0}),n.prototype.bbox=function(){return this.curve.bbox()},n.prototype.closestPoint=function(t){return this.curve.closestPoint(t)},n.prototype.closestPointLength=function(t){return this.curve.closestPointLength(t)},n.prototype.closestPointNormalizedLength=function(t){return this.curve.closestPointNormalizedLength(t)},n.prototype.closestPointTangent=function(t){return this.curve.closestPointTangent(t)},n.prototype.length=function(){return this.curve.length()},n.prototype.divideAt=function(t,e){e===void 0&&(e={});var r=this.curve.divideAt(t,e);return[new n(r[0]),new n(r[1])]},n.prototype.divideAtLength=function(t,e){e===void 0&&(e={});var r=this.curve.divideAtLength(t,e);return[new n(r[0]),new n(r[1])]},n.prototype.divideAtT=function(t){var e=this.curve.divideAtT(t);return[new n(e[0]),new n(e[1])]},n.prototype.getSubdivisions=function(){return[]},n.prototype.pointAt=function(t){return this.curve.pointAt(t)},n.prototype.pointAtLength=function(t){return this.curve.pointAtLength(t)},n.prototype.tangentAt=function(t){return this.curve.tangentAt(t)},n.prototype.tangentAtLength=function(t){return this.curve.tangentAtLength(t)},n.prototype.isDifferentiable=function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,r=this.controlPoint2,o=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(o))},n.prototype.scale=function(t,e,r){return this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},n.prototype.rotate=function(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this},n.prototype.translate=function(t,e){return typeof t=="number"?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this},n.prototype.equals=function(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)},n.prototype.clone=function(){return new n(this.controlPoint1,this.controlPoint2,this.end)},n.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}},n.prototype.serialize=function(){var t=this.controlPoint1,e=this.controlPoint2,r=this.end;return[this.type,t.x,t.y,e.x,e.y,r.x,r.y].join(" ")},n}(ci);function Hs(i,n,t){return{x:i*Math.cos(t)-n*Math.sin(t),y:i*Math.sin(t)+n*Math.cos(t)}}function ad(i,n,t,e,r,o){var s=.3333333333333333,a=2/3;return[s*i+a*t,s*n+a*e,s*r+a*t,s*o+a*e,r,o]}function ld(i,n,t,e,r,o,s,a,l,u){var h,d,f,v,b,w=120*Math.PI/180,P=Math.PI/180*(+r||0),x=[];if(u)d=u[0],f=u[1],v=u[2],b=u[3];else{i=(h=Hs(i,n,-P)).x,n=h.y;var S=(i-(a=(h=Hs(a,l,-P)).x))/2,D=(n-(l=h.y))/2,N=S*S/(t*t)+D*D/(e*e);N>1&&(t*=N=Math.sqrt(N),e*=N);var V=t*t,y=e*e,H=(o===s?-1:1)*Math.sqrt(Math.abs((V*y-V*D*D-y*S*S)/(V*D*D+y*S*S)));v=H*t*D/e+(i+a)/2,b=H*-e*S/t+(n+l)/2,d=Math.asin((n-b)/e),f=Math.asin((l-b)/e),d=i<v?Math.PI-d:d,f=a<v?Math.PI-f:f,d<0&&(d=2*Math.PI+d),f<0&&(f=2*Math.PI+f),s&&d>f&&(d-=2*Math.PI),!s&&f>d&&(f-=2*Math.PI)}var I=f-d;if(Math.abs(I)>w){var X=f,J=a,Z=l;f=d+w*(s&&f>d?1:-1),x=ld(a=v+t*Math.cos(f),l=b+e*Math.sin(f),t,e,r,0,s,J,Z,[f,X,v,b])}I=f-d;var it=Math.cos(d),ct=Math.sin(d),et=Math.cos(f),lt=Math.sin(f),ht=Math.tan(I/4),at=4/3*(t*ht),gt=4/3*(e*ht),yt=[i,n],ft=[i+at*ct,n-gt*it],Et=[a+at*lt,l-gt*et],Ft=[a,l];if(ft[0]=2*yt[0]-ft[0],ft[1]=2*yt[1]-ft[1],u)return[ft,Et,Ft].concat(x);for(var re=[],Qt=(x=[ft,Et,Ft].concat(x).join().split(",")).length,zt=0;zt<Qt;zt+=1)re[zt]=zt%2?Hs(+x[zt-1],+x[zt],P).y:Hs(+x[zt],+x[zt+1],P).x;return re}function A2(i){var n=function(b){if(!b)return null;var w=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,P=new RegExp("([a-z])["+w+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+w+"]*,?["+w+"]*)+)","ig"),x=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+w+"]*,?["+w+"]*","ig"),S={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},D=[];return b.replace(P,function(N,V,y){var H=[],I=V.toLowerCase();y.replace(x,function(J,Z){return Z&&H.push(+Z),J}),I==="m"&&H.length>2&&(D.push(W([V],H.splice(0,2),!0)),I="l",V=V==="m"?"l":"L");for(var X=S[I];H.length>=X&&(D.push(W([V],H.splice(0,X),!0)),X););return N}),D}(i);if(!n||!n.length)return[["M",0,0]];for(var t=0,e=0,r=0,o=0,s=[],a=0,l=n.length;a<l;a+=1){var u=[];s.push(u);var h=n[a],d=h[0];if(d!==d.toUpperCase())switch(u[0]=d.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+t,u[7]=+h[7]+e;break;case"V":u[1]=+h[1]+e;break;case"H":u[1]=+h[1]+t;break;case"M":r=+h[1]+t,o=+h[2]+e;for(var f=1,v=h.length;f<v;f+=1)u[f]=+h[f]+(f%2?t:e);break;default:for(f=1,v=h.length;f<v;f+=1)u[f]=+h[f]+(f%2?t:e)}else for(f=0,v=h.length;f<v;f+=1)u[f]=h[f];switch(u[0]){case"Z":t=+r,e=+o;break;case"H":t=u[1];break;case"V":e=u[1];break;case"M":r=u[u.length-2],o=u[u.length-1],t=u[u.length-2],e=u[u.length-1];break;default:t=u[u.length-2],e=u[u.length-1]}}return s}function P2(i){var n=A2(i),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function e(f,v,b){var w,P;if(!f)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(f[0]in{T:1,Q:1}||(v.qx=null,v.qy=null),f[0]){case"M":v.X=f[1],v.Y=f[2];break;case"A":return parseFloat(f[1])===0||parseFloat(f[2])===0?["L",f[6],f[7]]:["C"].concat(ld.apply(0,[v.x,v.y].concat(f.slice(1))));case"S":return b==="C"||b==="S"?(w=2*v.x-v.bx,P=2*v.y-v.by):(w=v.x,P=v.y),["C",w,P].concat(f.slice(1));case"T":return b==="Q"||b==="T"?(v.qx=2*v.x-v.qx,v.qy=2*v.y-v.qy):(v.qx=v.x,v.qy=v.y),["C"].concat(ad(v.x,v.y,v.qx,v.qy,f[1],f[2]));case"Q":return v.qx=f[1],v.qy=f[2],["C"].concat(ad(v.x,v.y,f[1],f[2],f[3],f[4]));case"H":return["L"].concat(f[1],v.y);case"V":return["L"].concat(v.x,f[1])}return f}function r(f,v){if(f[v].length>7){f[v].shift();for(var b=f[v];b.length;)o[v]="A",v+=1,f.splice(v,0,["C"].concat(b.splice(0,6)));f.splice(v,1),a=n.length}}for(var o=[],s="",a=n.length,l=0;l<a;l+=1){var u="";n[l]&&(u=n[l][0]),u!=="C"&&(o[l]=u,l>0&&(s=o[l-1])),n[l]=e(n[l],t,s),o[l]!=="A"&&u==="C"&&(o[l]="C"),r(n,l);var h=n[l],d=h.length;t.x=h[d-2],t.y=h[d-1],t.bx=parseFloat(h[d-4])||t.x,t.by=parseFloat(h[d-3])||t.y}return n[0][0]&&n[0][0]==="M"||n.unshift(["M",0,0]),n}function M2(i){return P2(i).map(function(n){return n.map(function(t){return typeof t=="string"?t:Rr(t,2)})}).join(",").split(",").join(" ")}(function(i){i.create=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length,r=n[0];if(c.Curve.isCurve(r))return new i(r);if(c.Point.isPointLike(r)){if(e===3)return new i(n[0],n[1],n[2]);for(var o=[],s=0;s<e;s+=3)o.push(new i(n[s],n[s+1],n[s+2]));return o}if(e===6)return new i(n[0],n[1],n[2],n[3],n[4],n[5]);var a=[];for(s=0;s<e;s+=6)a.push(new i(n[s],n[s+1],n[s+2],n[s+3],n[s+4],n[s+5]));return a}})(Gs||(Gs={}));var S2=new RegExp("^[\\s\\dLMCZz,.]*$");function k2(i){return typeof i=="string"&&S2.test(i)}function Kl(i,n){return(i%n+n)%n}function ud(i,n){n===void 0&&(n={});var t=[];return i&&i.length&&i.forEach(function(e){Array.isArray(e)?t.push({x:e[0],y:e[1]}):t.push({x:e.x,y:e.y})}),function(e,r,o,s,a){var l=[],u=e[e.length-1],h=r!=null&&r>0,d=r||0;if(s&&h){var f=(e=e.slice())[0],v=new c.Point(u.x+(f.x-u.x)/2,u.y+(f.y-u.y)/2);e.splice(0,0,v)}var b=e[0],w=1;for(o?l.push("M",b.x,b.y):l.push("L",b.x,b.y);w<(s?e.length:e.length-1);){var P=e[Kl(w,e.length)],x=b.x-P.x,S=b.y-P.y;if(h&&(x!==0||S!==0)&&(a==null||a.indexOf(w-1)<0)){var D=Math.sqrt(x*x+S*S),N=x*Math.min(d,D/2)/D,V=S*Math.min(d,D/2)/D,y=P.x+N,H=P.y+V;l.push("L",y,H);for(var I=e[Kl(w+1,e.length)];w<e.length-2&&Math.round(I.x-P.x)===0&&Math.round(I.y-P.y)===0;)I=e[Kl(w+2,e.length)],w+=1;x=I.x-P.x,S=I.y-P.y,D=Math.max(1,Math.sqrt(x*x+S*S));var X=x*Math.min(d,D/2)/D,J=S*Math.min(d,D/2)/D,Z=P.x+X,it=P.y+J;l.push("Q",P.x,P.y,Z,it),P=new c.Point(Z,it)}else l.push("L",P.x,P.y);b=P,w+=1}return s?l.push("Z"):l.push("L",u.x,u.y),l.map(function(ct){return typeof ct=="string"?ct:+ct.toFixed(3)}).join(" ")}(t,n.round,n.initialMove==null||n.initialMove,n.close,n.exclude)}function Us(i,n,t,e,r,o,s,a,l){if(r===void 0&&(r=0),o===void 0&&(o=0),s===void 0&&(s=0),t===0||e===0)return[];a-=i,l-=n,t=Math.abs(t),e=Math.abs(e);var u,h=-a/2,d=-l/2,f=Math.cos(r*Math.PI/180),v=Math.sin(r*Math.PI/180),b=f*h+v*d,w=-1*v*h+f*d,P=b*b,x=w*w,S=t*t,D=e*e,N=P/S+x/D;if(N>1)t=Math.sqrt(N)*t,e=Math.sqrt(N)*e,u=0;else{var V=1;o===s&&(V=-1),u=V*Math.sqrt((S*D-S*x-D*P)/(S*x+D*P))}var y=u*t*w/e,H=-1*u*e*b/t,I=f*y-v*H+a/2,X=v*y+f*H+l/2,J=Math.atan2((w-H)/e,(b-y)/t)-Math.atan2(0,1),Z=J>=0?J:2*Math.PI+J,it=(J=Math.atan2((-w-H)/e,(-b-y)/t)-Math.atan2((w-H)/e,(b-y)/t))>=0?J:2*Math.PI+J;s===0&&it>0?it-=2*Math.PI:s!==0&&it<0&&(it+=2*Math.PI);for(var ct=2*it/Math.PI,et=Math.ceil(ct<0?-1*ct:ct),lt=it/et,ht=8/3*Math.sin(lt/4)*Math.sin(lt/4)/Math.sin(lt/2),at=f*t,gt=f*e,yt=v*t,ft=v*e,Et=Math.cos(Z),Ft=Math.sin(Z),re=-ht*(at*Ft+ft*Et),Qt=-ht*(yt*Ft-gt*Et),zt=0,Xt=0,Bt=[],Yt=0;Yt<et;Yt+=1){Z+=lt,zt=at*(Et=Math.cos(Z))-ft*(Ft=Math.sin(Z))+I,Xt=yt*Et+gt*Ft+X;var Pe=-ht*(at*Ft+ft*Et),Gt=-ht*(yt*Ft-gt*Et),Zt=6*Yt;Bt[Zt]=Number(re+i),Bt[Zt+1]=Number(Qt+n),Bt[Zt+2]=Number(zt-Pe+i),Bt[Zt+3]=Number(Xt-Gt+n),Bt[Zt+4]=Number(zt+i),Bt[Zt+5]=Number(Xt+n),re=zt+Pe,Qt=Xt+Gt}return Bt.map(function(fn){return+fn.toFixed(2)})}function T2(i,n,t,e,r,o,s,a,l){r===void 0&&(r=0),o===void 0&&(o=0),s===void 0&&(s=0);var u=[],h=Us(i,n,t,e,r,o,s,a,l);if(h!=null)for(var d=0,f=h.length;d<f;d+=6)u.push("C",h[d],h[d+1],h[d+2],h[d+3],h[d+4],h[d+5]);return u.join(" ")}function D2(i,n,t){for(var e,r=t.eol,o=t.baseSize,s=t.lineHeight,a=0,l={},u=n.length-1,h=0;h<=u;h+=1){var d=n[h],f=null;if(typeof d=="object"){var v=d.attrs,b=c.Vector.create("tspan",v);e=b.node;var w=d.t;r&&h===u&&(w+=r),e.textContent=w;var P=v.class;P&&b.addClass(P),t.includeAnnotationIndices&&b.attr("annotations",d.annotations.join(",")),(f=parseFloat(v["font-size"]))===void 0&&(f=o),f&&f>a&&(a=f)}else r&&h===u&&(d+=r),e=document.createTextNode(d||" "),o&&o>a&&(a=o);i.appendChild(e)}return a&&(l.maxFontSize=a),s?l.lineHeight=s:a&&(l.lineHeight=1.2*a),l}c.Path=function(i){function n(t){var e=i.call(this)||this;if(e.PRECISION=3,e.segments=[],Array.isArray(t))if(c.Line.isLine(t[0])||c.Curve.isCurve(t[0])){var r=null;t.forEach(function(o,s){s===0&&e.appendSegment(n.createSegment("M",o.start)),r==null||r.end.equals(o.start)||e.appendSegment(n.createSegment("M",o.start)),c.Line.isLine(o)?e.appendSegment(n.createSegment("L",o.end)):c.Curve.isCurve(o)&&e.appendSegment(n.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o})}else t.forEach(function(o){o.isSegment&&e.appendSegment(o)});else t!=null&&(c.Line.isLine(t)?(e.appendSegment(n.createSegment("M",t.start)),e.appendSegment(n.createSegment("L",t.end))):c.Curve.isCurve(t)?(e.appendSegment(n.createSegment("M",t.start)),e.appendSegment(n.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):c.Polyline.isPolyline(t)?t.points&&t.points.length&&t.points.forEach(function(o,s){var a=s===0?n.createSegment("M",o):n.createSegment("L",o);e.appendSegment(a)}):t.isSegment&&e.appendSegment(t));return e}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=0;r<e;r+=1){var o=t[r];if(o.isVisible)return o.start}return t[e-1].end},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=e-1;r>=0;r-=1){var o=t[r];if(o.isVisible)return o.end}return t[e-1].end},enumerable:!1,configurable:!0}),n.prototype.moveTo=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.appendSegment((t=_s.create).call.apply(t,W([null],e,!1)))},n.prototype.lineTo=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.appendSegment((t=Fn.create).call.apply(t,W([null],e,!1)))},n.prototype.curveTo=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.appendSegment((t=Gs.create).call.apply(t,W([null],e,!1)))},n.prototype.arcTo=function(t,e,r,o,s,a,l){var u=this.end||new c.Point,h=typeof a=="number"?Us(u.x,u.y,t,e,r,o,s,a,l):Us(u.x,u.y,t,e,r,o,s,a.x,a.y);if(h!=null)for(var d=0,f=h.length;d<f;d+=6)this.curveTo(h[d],h[d+1],h[d+2],h[d+3],h[d+4],h[d+5]);return this},n.prototype.quadTo=function(t,e,r,o){var s=this.end||new c.Point,a=["M",s.x,s.y];if(typeof t=="number")a.push("Q",t,e,r,o);else{var l=e;a.push("Q",t.x,t.y,l.x,l.y)}var u=n.parse(a.join(" "));return this.appendSegment(u.segments.slice(1)),this},n.prototype.close=function(){return this.appendSegment(Is.create())},n.prototype.drawPoints=function(t,e){e===void 0&&(e={});var r=ud(t,e),o=n.parse(r);o&&o.segments&&this.appendSegment(o.segments)},n.prototype.bbox=function(){var t,e=this.segments,r=e.length;if(r===0)return null;for(var o=0;o<r;o+=1){var s=e[o];if(s.isVisible){var a=s.bbox();a!=null&&(t=t?t.union(a):a)}}if(t!=null)return t;var l=e[r-1];return new c.Rectangle(l.end.x,l.end.y,0,0)},n.prototype.appendSegment=function(t){var e,r=this.segments.length,o=r!==0?this.segments[r-1]:null;if(Array.isArray(t))for(var s=0,a=t.length;s<a;s+=1){var l=t[s];e=this.prepareSegment(l,o,null),this.segments.push(e),o=e}else t!=null&&t.isSegment&&(e=this.prepareSegment(t,o,null),this.segments.push(e));return this},n.prototype.insertSegment=function(t,e){var r,o=this.segments.length;if(t<0&&(t=o+t+1),t>o||t<0)throw new Error("Index out of range.");var s=null,a=null;if(o!==0&&(t>=1?a=(s=this.segments[t-1]).nextSegment:(s=null,a=this.segments[0])),Array.isArray(e))for(var l=0,u=e.length;l<u;l+=1){var h=e[l];r=this.prepareSegment(h,s,a),this.segments.splice(t+l,0,r),s=r}else r=this.prepareSegment(e,s,a),this.segments.splice(t,0,r);return this},n.prototype.removeSegment=function(t){var e=this.fixIndex(t),r=this.segments.splice(e,1)[0],o=r.previousSegment,s=r.nextSegment;return o&&(o.nextSegment=s),s&&(s.previousSegment=o),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s),r},n.prototype.replaceSegment=function(t,e){var r,o=this.fixIndex(t),s=this.segments[o],a=s.previousSegment,l=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(e)){this.segments.splice(t,1);for(var h=0,d=e.length;h<d;h+=1){var f=e[h];r=this.prepareSegment(f,a,l),this.segments.splice(t+h,0,r),a=r,u&&r.isSubpathStart&&(u=!1)}}else r=this.prepareSegment(e,a,l),this.segments.splice(o,1,r),u&&r.isSubpathStart&&(u=!1);u&&l&&this.updateSubpathStartSegment(l)},n.prototype.getSegment=function(t){var e=this.fixIndex(t);return this.segments[e]},n.prototype.fixIndex=function(t){var e=this.segments.length;if(e===0)throw new Error("Path has no segments.");for(var r=t;r<0;)r=e+r;if(r>=e||r<0)throw new Error("Index out of range.");return r},n.prototype.segmentAt=function(t,e){e===void 0&&(e={});var r=this.segmentIndexAt(t,e);return r?this.getSegment(r):null},n.prototype.segmentAtLength=function(t,e){e===void 0&&(e={});var r=this.segmentIndexAtLength(t,e);return r?this.getSegment(r):null},n.prototype.segmentIndexAt=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;var r=xo(t,0,1),o=this.getOptions(e),s=this.length(o)*r;return this.segmentIndexAtLength(s,o)},n.prototype.segmentIndexAtLength=function(t,e){e===void 0&&(e={});var r=this.segments.length;if(r===0)return null;var o=!0;t<0&&(o=!1,t=-t);for(var s=this.getPrecision(e),a=this.getSubdivisions(e),l=0,u=null,h=0;h<r;h+=1){var d=o?h:r-1-h,f=this.segments[d],v=a[d],b=f.length({precision:s,subdivisions:v});if(f.isVisible){if(t<=l+b)return d;u=d}l+=b}return u},n.prototype.getSegmentSubdivisions=function(t){t===void 0&&(t={});for(var e=this.getPrecision(t),r=[],o=0,s=this.segments.length;o<s;o+=1){var a=this.segments[o].getSubdivisions({precision:e});r.push(a)}return r},n.prototype.updateSubpathStartSegment=function(t){for(var e=t.previousSegment,r=t;r&&!r.isSubpathStart;)r.subpathStartSegment=e!=null?e.subpathStartSegment:null,e=r,r=r.nextSegment},n.prototype.prepareSegment=function(t,e,r){t.previousSegment=e,t.nextSegment=r,e!=null&&(e.nextSegment=t),r!=null&&(r.previousSegment=t);var o=t;return t.isSubpathStart&&(t.subpathStartSegment=t,o=r),o!=null&&this.updateSubpathStartSegment(o),t},n.prototype.closestPoint=function(t,e){e===void 0&&(e={});var r=this.closestPointT(t,e);return r?this.pointAtT(r):null},n.prototype.closestPointLength=function(t,e){e===void 0&&(e={});var r=this.getOptions(e),o=this.closestPointT(t,r);return o?this.lengthAtT(o,r):0},n.prototype.closestPointNormalizedLength=function(t,e){e===void 0&&(e={});var r=this.getOptions(e),o=this.closestPointLength(t,r);if(o===0)return 0;var s=this.length(r);return s===0?0:o/s},n.prototype.closestPointT=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;for(var r,o=this.getPrecision(e),s=this.getSubdivisions(e),a=1/0,l=0,u=this.segments.length;l<u;l+=1){var h=this.segments[l],d=s[l];if(h.isVisible){var f=h.closestPointT(t,{precision:o,subdivisions:d}),v=sd(h.pointAtT(f),t);v<a&&(r={segmentIndex:l,value:f},a=v)}}return r||{segmentIndex:this.segments.length-1,value:1}},n.prototype.closestPointTangent=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;for(var r,o=this.getPrecision(e),s=this.getSubdivisions(e),a=1/0,l=0,u=this.segments.length;l<u;l+=1){var h=this.segments[l],d=s[l];if(h.isDifferentiable()){var f=h.closestPointT(t,{precision:o,subdivisions:d}),v=sd(h.pointAtT(f),t);v<a&&(r=h.tangentAtT(f),a=v)}}return r||null},n.prototype.containsPoint=function(t,e){e===void 0&&(e={});var r=this.toPolylines(e);if(!r)return!1;for(var o=0,s=0,a=r.length;s<a;s+=1)r[s].containsPoint(t)&&(o+=1);return o%2==1},n.prototype.pointAt=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var r=this.getOptions(e),o=this.length(r)*t;return this.pointAtLength(o,r)},n.prototype.pointAtLength=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;if(t===0)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var o,s=this.getPrecision(e),a=this.getSubdivisions(e),l=0,u=0,h=this.segments.length;u<h;u+=1){var d=r?u:h-1-u,f=this.segments[d],v=a[d],b=f.length({precision:s,subdivisions:v});if(f.isVisible){if(t<=l+b)return f.pointAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:v});o=f}l+=b}return o?r?o.end:o.start:this.segments[this.segments.length-1].end.clone()},n.prototype.pointAtT=function(t){var e=this.segments,r=e.length;if(r===0)return null;var o=t.segmentIndex;if(o<0)return e[0].pointAtT(0);if(o>=r)return e[r-1].pointAtT(1);var s=xo(t.value,0,1);return e[o].pointAtT(s)},n.prototype.divideAt=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;var r=xo(t,0,1),o=this.getOptions(e),s=this.length(o)*r;return this.divideAtLength(s,o)},n.prototype.divideAtLength=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s,a,l,u,h=this.getPrecision(e),d=this.getSubdivisions(e),f=0,v=0,b=this.segments.length;v<b;v+=1){var w=r?v:b-1-v,P=this.getSegment(w),x={precision:h,subdivisions:d[w]},S=P.length(x);if(P.isDifferentiable()&&(a=P,l=w,t<=f+S)){s=w,o=P.divideAtLength((r?1:-1)*(t-f),x);break}f+=S}if(!a)return null;o||(s=l,u=r?1:0,o=a.divideAtT(u));var D=this.clone(),N=s;D.replaceSegment(N,o);var V=N,y=N+1,H=N+2;o[0].isDifferentiable()||(D.removeSegment(V),y-=1,H-=1);var I=D.getSegment(y).start;D.insertSegment(y,n.createSegment("M",I)),H+=1,o[1].isDifferentiable()||(D.removeSegment(H-1),H-=1);var X=H-V-1;for(v=H,b=D.segments.length;v<b;v+=1){var J=this.getSegment(v-X);if((P=D.getSegment(v)).type==="Z"&&!J.subpathStartSegment.end.equals(P.subpathStartSegment.end)){var Z=n.createSegment("L",J.end);D.replaceSegment(v,Z)}}return[new n(D.segments.slice(0,y)),new n(D.segments.slice(y))]},n.prototype.intersectsWithLine=function(t,e){e===void 0&&(e={});var r=this.toPolylines(e);if(r==null)return null;for(var o=null,s=0,a=r.length;s<a;s+=1){var l=r[s],u=t.intersect(l);u&&(o==null&&(o=[]),Array.isArray(u)?o.push.apply(o,u):o.push(u))}return o},n.prototype.isDifferentiable=function(){for(var t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1},n.prototype.isValid=function(){var t=this.segments;return t.length===0||t[0].type==="M"},n.prototype.length=function(t){if(t===void 0&&(t={}),this.segments.length===0)return 0;for(var e=this.getSubdivisions(t),r=0,o=0,s=this.segments.length;o<s;o+=1){var a=this.segments[o],l=e[o];r+=a.length({subdivisions:l})}return r},n.prototype.lengthAtT=function(t,e){e===void 0&&(e={});var r=this.segments.length;if(r===0)return 0;var o=t.segmentIndex;if(o<0)return 0;var s=xo(t.value,0,1);o>=r&&(o=r-1,s=1);for(var a=this.getPrecision(e),l=this.getSubdivisions(e),u=0,h=0;h<o;h+=1){var d=this.segments[h],f=l[h];u+=d.length({precision:a,subdivisions:f})}var v=this.segments[o],b=l[o];return u+=v.lengthAtT(s,{precision:a,subdivisions:b})},n.prototype.tangentAt=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;var r=xo(t,0,1),o=this.getOptions(e),s=this.length(o)*r;return this.tangentAtLength(s,o)},n.prototype.tangentAtLength=function(t,e){if(e===void 0&&(e={}),this.segments.length===0)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s=this.getPrecision(e),a=this.getSubdivisions(e),l=0,u=0,h=this.segments.length;u<h;u+=1){var d=r?u:h-1-u,f=this.segments[d],v=a[d],b=f.length({precision:s,subdivisions:v});if(f.isDifferentiable()){if(t<=l+b)return f.tangentAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:v});o=f}l+=b}if(o){var w=r?1:0;return o.tangentAtT(w)}return null},n.prototype.tangentAtT=function(t){var e=this.segments.length;if(e===0)return null;var r=t.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=e)return this.segments[e-1].tangentAtT(1);var o=xo(t.value,0,1);return this.segments[r].tangentAtT(o)},n.prototype.getPrecision=function(t){return t===void 0&&(t={}),t.precision==null?this.PRECISION:t.precision},n.prototype.getSubdivisions=function(t){if(t===void 0&&(t={}),t.segmentSubdivisions==null){var e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions},n.prototype.getOptions=function(t){return t===void 0&&(t={}),{precision:this.getPrecision(t),segmentSubdivisions:this.getSubdivisions(t)}},n.prototype.toPoints=function(t){t===void 0&&(t={});var e=this.segments,r=e.length;if(r===0)return null;for(var o=this.getSubdivisions(t),s=[],a=[],l=0;l<r;l+=1){var u=e[l];if(u.isVisible){var h=o[l];h.length>0?h.forEach(function(d){return a.push(d.start)}):a.push(u.start)}else a.length>0&&(a.push(e[l-1].end),s.push(a),a=[])}return a.length>0&&(a.push(this.end),s.push(a)),s},n.prototype.toPolylines=function(t){t===void 0&&(t={});var e=this.toPoints(t);return e?e.map(function(r){return new c.Polyline(r)}):null},n.prototype.scale=function(t,e,r){return this.segments.forEach(function(o){return o.scale(t,e,r)}),this},n.prototype.rotate=function(t,e){return this.segments.forEach(function(r){return r.rotate(t,e)}),this},n.prototype.translate=function(t,e){return typeof t=="number"?this.segments.forEach(function(r){return r.translate(t,e)}):this.segments.forEach(function(r){return r.translate(t)}),this},n.prototype.clone=function(){var t=new n;return this.segments.forEach(function(e){return t.appendSegment(e.clone())}),t},n.prototype.equals=function(t){if(t==null)return!1;var e=this.segments,r=t.segments,o=e.length;if(r.length!==o)return!1;for(var s=0;s<o;s+=1){var a=e[s],l=r[s];if(a.type!==l.type||!a.equals(l))return!1}return!0},n.prototype.toJSON=function(){return this.segments.map(function(t){return t.toJSON()})},n.prototype.serialize=function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(t){return t.serialize()}).join(" ")},n.prototype.toString=function(){return this.serialize()},n}(hr),function(i){i.toStringTag="X6.Geometry."+i.name,i.isPath=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return!(t!=null&&t!==i.toStringTag||!Array.isArray(e.segments)||typeof e.moveTo!="function"||typeof e.lineTo!="function"||typeof e.curveTo!="function")}}(c.Path||(c.Path={})),function(i){function n(t){for(var e,r,o,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(t==="M")return(e=_s.create).call.apply(e,W([null],s,!1));if(t==="L")return(r=Fn.create).call.apply(r,W([null],s,!1));if(t==="C")return(o=Gs.create).call.apply(o,W([null],s,!1));if(t==="z"||t==="Z")return Is.create();throw new Error('Invalid path segment type "'+t+'"')}i.parse=function(t){if(!t)return new i;var e=new i,r=i.normalize(t).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(r!=null)for(var o=0,s=r.length;o<s;o+=1){var a=r[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(a!=null){var l=a[0],u=a.slice(1).map(function(d){return+d}),h=n.call.apply(n,W([null,l],u,!1));e.appendSegment(h)}}return e},i.createSegment=n}(c.Path||(c.Path={})),function(i){i.normalize=M2,i.isValid=k2,i.drawArc=T2,i.drawPoints=ud,i.arcToCurves=Us}(c.Path||(c.Path={})),c.Vector=function(){function i(n,t,e){if(!n)throw new TypeError("Invalid element to create vector");var r;if(i.isVector(n))r=n.node;else if(typeof n=="string")if(n.toLowerCase()==="svg")r=ri();else if(n[0]==="<"){var o=ri(n);r=document.importNode(o.firstChild,!0)}else r=document.createElementNS(pe.svg,n);else r=n;this.node=r,t&&this.setAttributes(t),e&&this.append(e)}return Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.node.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this.node.id},set:function(n){this.node.id=n},enumerable:!1,configurable:!0}),i.prototype.transform=function(n,t){return n==null?Vr(this.node):(Vr(this.node,n,t),this)},i.prototype.translate=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e={}),n==null?uu(this.node):(uu(this.node,n,t,e),this)},i.prototype.rotate=function(n,t,e,r){return r===void 0&&(r={}),n==null?Ws(this.node):(Ws(this.node,n,t,e,r),this)},i.prototype.scale=function(n,t){return n==null?Xn(this.node):(Xn(this.node,n,t),this)},i.prototype.getTransformToElement=function(n){var t=i.toNode(n);return Wn(this.node,t)},i.prototype.removeAttribute=function(n){return $l(this.node,n),this},i.prototype.getAttribute=function(n){return Zp(this.node,n)},i.prototype.setAttribute=function(n,t){return Bs(this.node,n,t),this},i.prototype.setAttributes=function(n){return Wl(this.node,n),this},i.prototype.attr=function(n,t){return n==null?Vt(this.node):typeof n=="string"&&t===void 0?Vt(this.node,n):(typeof n=="object"?Vt(this.node,n):Vt(this.node,n,t),this)},i.prototype.svg=function(){return this.node instanceof SVGSVGElement?this:i.create(this.node.ownerSVGElement)},i.prototype.defs=function(){var n=this.svg()||this,t=n.node.getElementsByTagName("defs")[0];return t?i.create(t):i.create("defs").appendTo(n)},i.prototype.text=function(n,t){return t===void 0&&(t={}),Ql(this.node,n,t),this},i.prototype.tagName=function(){return ks(this.node)},i.prototype.clone=function(){return i.create(this.node.cloneNode(!0))},i.prototype.remove=function(){return Ln(this.node),this},i.prototype.empty=function(){return Os(this.node),this},i.prototype.append=function(n){return bo(this.node,i.toNodes(n)),this},i.prototype.appendTo=function(n){return Jp(this.node,i.isVector(n)?n.node:n),this},i.prototype.prepend=function(n){return Yp(this.node,i.toNodes(n)),this},i.prototype.before=function(n){return Ls(this.node,i.toNodes(n)),this},i.prototype.replace=function(n){return this.node.parentNode&&this.node.parentNode.replaceChild(i.toNode(n),this.node),i.create(n)},i.prototype.first=function(){return this.node.firstChild?i.create(this.node.firstChild):null},i.prototype.last=function(){return this.node.lastChild?i.create(this.node.lastChild):null},i.prototype.get=function(n){var t=this.node.childNodes[n];return t?i.create(t):null},i.prototype.indexOf=function(n){return Array.prototype.slice.call(this.node.childNodes).indexOf(i.toNode(n))},i.prototype.find=function(n){var t=[],e=Xp(this.node,n);if(e)for(var r=0,o=e.length;r<o;r+=1)t.push(i.create(e[r]));return t},i.prototype.findOne=function(n){var t=Ds(this.node,n);return t?i.create(t):null},i.prototype.findParentByClass=function(n,t){var e=Hl(this.node,n,t);return e?i.create(e):null},i.prototype.matches=function(n){var t=this.node;this.node.matches;var e=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return e&&e.call(t,n)},i.prototype.contains=function(n){return Ns(this.node,i.isVector(n)?n.node:n)},i.prototype.wrap=function(n){var t=i.create(n),e=this.node.parentNode;return e!=null&&e.insertBefore(t.node,this.node),t.append(this)},i.prototype.parent=function(n){var t=this;if(t.node.parentNode==null)return null;if(t=i.create(t.node.parentNode),n==null)return t;do if(typeof n=="string"?t.matches(n):t instanceof n)return t;while(t=i.create(t.node.parentNode));return t},i.prototype.children=function(){for(var n=this.node.childNodes,t=[],e=0;e<n.length;e+=1)n[e].nodeType===1&&t.push(i.create(n[e]));return t},i.prototype.eachChild=function(n,t){for(var e=this.children(),r=0,o=e.length;r<o;r+=1)n.call(e[r],e[r],r,e),t&&e[r].eachChild(n,t);return this},i.prototype.index=function(){return Ts(this.node)},i.prototype.hasClass=function(n){return mo(this.node,n)},i.prototype.addClass=function(n){return Rt(this.node,n),this},i.prototype.removeClass=function(n){return tn(this.node,n),this},i.prototype.toggleClass=function(n,t){return Il(this.node,n,t),this},i.prototype.toLocalPoint=function(n,t){return Pd(this.node,n,t)},i.prototype.toGeometryShape=function(){return lu(this.node)},i.prototype.translateCenterToPoint=function(n){var t=this.getBBox({target:this.svg()}).getCenter();return this.translate(n.x-t.x,n.y-t.y),this},i.prototype.translateAndAutoOrient=function(n,t,e){return Xs(this.node,n,t,e),this},i.prototype.animate=function(n){return Md(this.node,n)},i.prototype.animateTransform=function(n){return Sd(this.node,n)},i.prototype.animateAlongPath=function(n,t){return Dd(this.node,n,t)},i.prototype.normalizePath=function(){return this.tagName()==="path"&&this.attr("d",c.Path.normalize(this.attr("d"))),this},i.prototype.bbox=function(n,t){return Ad(this.node,n,t)},i.prototype.getBBox=function(n){return n===void 0&&(n={}),ye(this.node,{recursive:n.recursive,target:n.target?i.toNode(n.target):null})},i.prototype.sample=function(n){return n===void 0&&(n=1),this.node instanceof SVGPathElement?eu(this.node,n):[]},i.prototype.toPath=function(){return i.create(ru(this.node))},i.prototype.toPathData=function(){return ou(this.node)},i}(),function(i){function n(r){if(r==null)return!1;if(r instanceof i)return!0;var o=r[Symbol.toStringTag],s=r;return(o==null||o===i.toStringTag)&&s.node instanceof SVGElement&&typeof s.animate=="function"&&typeof s.sample=="function"&&typeof s.normalizePath=="function"&&typeof s.toPath=="function"}function t(r,o,s){return new i(r,o,s)}function e(r){return n(r)?r.node:r}i.toStringTag="X6."+i.name,i.isVector=n,i.create=t,i.createVectors=function(r){if(r[0]==="<"){for(var o=ri(r),s=[],a=0,l=o.childNodes.length;a<l;a+=1){var u=o.childNodes[a];s.push(t(document.importNode(u,!0)))}return s}return[t(r)]},i.toNode=e,i.toNodes=function(r){return Array.isArray(r)?r.map(function(o){return e(o)}):[e(r)]}}(c.Vector||(c.Vector={}));var cd=/em$/;function qs(i,n){var t=parseFloat(i);return cd.test(i)?t*n:t}function Ql(i,n,t){t===void 0&&(t={}),n=Qp(n);var e=t.eol,r=t.textPath,o=t.textVerticalAnchor,s=o==="middle"||o==="bottom"||o==="top",a=t.x;a===void 0&&(a=i.getAttribute("x")||0);var l=t.includeAnnotationIndices,u=t.annotations;u&&!Array.isArray(u)&&(u=[u]);var h=t.lineHeight,d=h==="auto",f=d?"1.5em":h||"1em";Os(i),Vt(i,{"xml:space":"preserve",display:n||t.displayEmpty?null:"none"});var v,b,w=Vt(i,"font-size"),P=parseFloat(w);P||(P=16,!s&&!u||w||Vt(i,"font-size",""+P)),r?(typeof r=="string"&&(r={d:r}),v=function(et,lt){var ht=c.Vector.create(lt),at=c.Vector.create("textPath"),gt=et.d;if(gt&&et["xlink:href"]===void 0){var yt=c.Vector.create("path").attr("d",gt).appendTo(ht.defs());at.attr("xlink:href","#"+yt.id)}return typeof et=="object"&&at.attr(et),at.node}(r,i)):v=document.createDocumentFragment();for(var x,S=0,D=n.split(`
`),N=[],V=D.length-1,y=0;y<=V;y+=1){b=f;var H="v-line",I=Ie("tspan"),X=void 0,J=D[y];if(J)if(u){var Z=(X=D2(I,Kp(J,u,{offset:-S,includeAnnotationIndices:l}),{eol:y!==V&&e,baseSize:P,lineHeight:d?null:f,includeAnnotationIndices:l})).lineHeight;Z&&d&&y!==0&&(b=Z),y===0&&(x=.8*X.maxFontSize)}else e&&y!==V&&(J+=e),I.textContent=J;else{I.textContent="-",H+=" v-empty-line";var it=I.style;it.fillOpacity=0,it.strokeOpacity=0,u&&(X={})}X&&N.push(X),y>0&&I.setAttribute("dy",b),(y>0||r)&&I.setAttribute("x",a),I.className.baseVal=H,v.appendChild(I),S+=J.length+1}if(s)if(u)b=function(et,lt,ht,at){if(!Array.isArray(lt))return 0;var gt=lt.length;if(!gt)return 0;for(var yt=lt[0],ft=qs(yt.maxFontSize,ht)||ht,Et=0,Ft=qs(at,ht),re=1;re<gt;re+=1)Et+=qs((yt=lt[re]).lineHeight,ht)||Ft;var Qt,zt=qs(yt.maxFontSize,ht)||ht;switch(et){case"middle":Qt=ft/2-.15*zt-Et/2;break;case"bottom":Qt=-.25*zt-Et;break;default:case"top":Qt=.8*ft}return Qt}(o,N,P,f);else if(o==="top")b="0.8em";else{var ct=void 0;switch(V>0?(ct=parseFloat(f)||1,ct*=V,cd.test(f)||(ct/=P)):ct=0,o){case"middle":b=.3-ct/2+"em";break;case"bottom":b=-ct-.3+"em"}}else o===0?b="0em":o?b=o:(b=0,i.getAttribute("y")==null&&i.setAttribute("y",""+(x||"0.8em")));v.firstChild.setAttribute("dy",b),i.appendChild(v)}function tu(i,n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=n.width,o=n.height,s=e.svgDocument||Ie("svg"),a=Ie("text"),l=Ie("tspan"),u=document.createTextNode("");Vt(a,t),a.appendChild(l),a.style.opacity="0",a.style.display="block",l.style.display="block",l.appendChild(u),s.appendChild(a);var h=s.parentNode==null;h&&document.body.appendChild(s);for(var d,f,v,b=e.eol||`
`,w=e.separator||" ",P=e.hyphen?new RegExp(e.hyphen):/[^\w\d]/,x=e.breakWord!==!1,S=[],D={},N=[],V=function(re,Qt,zt,Xt){var Bt=[],Yt=[];if(Qt!=null){var Pe=re.split(Qt);if(Bt.push.apply(Bt,Pe),typeof Qt=="string")for(var Gt=0,Zt=Pe.length-1;Gt<Zt;Gt+=1)Yt.push(Qt);else{var fn=re.match(new RegExp(Qt,"g"));for(Gt=0,Zt=Pe.length-1;Gt<Zt;Gt+=1)Yt.push(fn?fn[Gt]:"")}}else{var de="";for(Gt=0,Zt=re.length;Gt<Zt;Gt+=1){var At=re[Gt];At===" "?(Bt.push(de),Yt.push(" "),de=""):At.match(/[^\x00-\xff]/)?(de.length&&(Bt.push(de),Yt.push("")),Bt.push(At),Yt.push(""),de=""):de+=At}de.length&&Bt.push(de)}for(Gt=0;Gt<Bt.length;Gt+=1)if((de=Bt[Gt]).indexOf(zt)>=0&&de.length>1){for(var Le=0,Iu=(Pe=de.split(zt)).length-1;Le<Iu;Le+=1)Pe.splice(2*Le+1,0,zt);var Aa=Pe.filter(function(Pa){return Pa!==""});Bt.splice.apply(Bt,W([Gt,1],Aa,!1)),(fn=Aa.map(function(){return""})).pop(),Yt.splice.apply(Yt,W([Gt,0],fn,!1))}for(Gt=0;Gt<Bt.length;Gt+=1){var Yr=(de=Bt[Gt]).search(Xt);Yr>0&&Yr<de.length-1&&(Bt.splice(Gt,1,de.substring(0,Yr+1),de.substring(Yr+1)),Yt.splice(Gt,0,""))}return{words:Bt,separators:Yt}}(i,e.separator,b,P),y=V.words,H=V.separators,I=0,X=0,J=y.length;I<J;I+=1){var Z=y[I];if(Z)if(Z!==b){if(N[X]!=null?(v=H[I-1]||"",u.data=""+N[X]+v+Z):u.data=Z,l.getComputedTextLength()<=r)N[X]=u.data,D[X]=H[I],d&&(S[X]=!0,X+=1,d=0);else{if(x){if(!N[X]||d){var it=!!d,ct=Z.length===1;if(d=Z.length-1,it||ct){if(ct){if(!N[X]){N=[];break}y.splice(I,2,Z+y[I+1]),H.splice(I+1,1),S[X]=!0,X+=1,J-=1,I-=1;continue}y[I]=Z.substring(0,d),y[I+1]=Z.substring(d)+y[I+1]}else y.splice(I,1,Z.substring(0,d),Z.substring(d)),H.splice(I,0,""),J+=1,X&&!S[X-1]&&(X-=1);I-=1;continue}}else if(!N[X]){N[X]=Z,S[X]=!0,X+=1;continue}X+=1,I-=1}if(o!=null){if(f==null){var et=void 0;f=(et=t.lineHeight==="auto"?{value:1.5,unit:"em"}:Hp(t.lineHeight,["em"])||{value:1,unit:"em"}).value,et.unit==="em"&&(c.Platform.IS_FIREFOX?f*=l.getBBox().height:f*=a.getBBox().height)}if(f*N.length>o){var lt=Math.floor(o/f)-1,ht=N[lt],at=N[lt+1];if(N.splice(lt+1),ht==null)break;var gt=e.ellipsis;if(!gt)break;typeof gt!="string"&&(gt="\u2026");var yt=ht;at&&x&&(yt+=v+at);var ft=yt.length,Et=void 0,Ft=void 0;do{if(Ft=yt[ft],Et=yt.substring(0,ft),Ft?Ft.match(w)&&(Et+=Ft):Et+=D[lt],Et+=gt,u.data=Et,l.getComputedTextLength()<=r){N[lt]=Et;break}ft-=1}while(ft>=0);break}}}else S[X]=!0,N[X+=1]=""}return Ln(h?s:a),N.join(b)}var $s=.551784;function ze(i,n,t){t===void 0&&(t=NaN);var e=i.getAttribute(n);if(e==null)return t;var r=parseFloat(e);return Number.isNaN(r)?t:r}function eu(i,n){n===void 0&&(n=1);for(var t,e=i.getTotalLength(),r=[],o=0;o<e;)t=i.getPointAtLength(o),r.push({distance:o,x:t.x,y:t.y}),o+=n;return r}function hd(i){return["M",ze(i,"x1"),ze(i,"y1"),"L",ze(i,"x2"),ze(i,"y2")].join(" ")}function pd(i){var n=hi(i);return n.length===0?null:fd(n)+" Z"}function dd(i){var n=hi(i);return n.length===0?null:fd(n)}function fd(i){return"M "+i.map(function(n){return n.x+" "+n.y}).join(" L")}function hi(i){var n=[],t=i.points;if(t)for(var e=0,r=t.numberOfItems;e<r;e+=1)n.push(t.getItem(e));return n}function gd(i){var n=ze(i,"cx",0),t=ze(i,"cy",0),e=ze(i,"r"),r=e*$s;return["M",n,t-e,"C",n+r,t-e,n+e,t-r,n+e,t,"C",n+e,t+r,n+r,t+e,n,t+e,"C",n-r,t+e,n-e,t+r,n-e,t,"C",n-e,t-r,n-r,t-e,n,t-e,"Z"].join(" ")}function vd(i){var n=ze(i,"cx",0),t=ze(i,"cy",0),e=ze(i,"rx"),r=ze(i,"ry")||e,o=e*$s,s=r*$s;return["M",n,t-r,"C",n+o,t-r,n+e,t-s,n+e,t,"C",n+e,t+s,n+o,t+r,n,t+r,"C",n-o,t+r,n-e,t+s,n-e,t,"C",n-e,t-s,n-o,t-r,n,t-r,"Z"].join(" ")}function yd(i){return nu({x:ze(i,"x",0),y:ze(i,"y",0),width:ze(i,"width",0),height:ze(i,"height",0),rx:ze(i,"rx",0),ry:ze(i,"ry",0)})}function nu(i){var n=i.x,t=i.y,e=i.width,r=i.height,o=Math.min(i.rx||i["top-rx"]||0,e/2),s=Math.min(i.rx||i["bottom-rx"]||0,e/2),a=Math.min(i.ry||i["top-ry"]||0,r/2),l=Math.min(i.ry||i["bottom-ry"]||0,r/2);return(o||s||a||l?["M",n,t+a,"v",r-a-l,"a",s,l,0,0,0,s,l,"h",e-2*s,"a",s,l,0,0,0,s,-l,"v",-(r-l-a),"a",o,a,0,0,0,-o,-a,"h",-(e-2*o),"a",o,a,0,0,0,-o,a,"Z"]:["M",n,t,"H",n+e,"V",t+r,"H",n,"V",t,"Z"]).join(" ")}function ru(i){var n=Ie("path");Vt(n,Vt(i));var t=ou(i);return t&&n.setAttribute("d",t),n}function ou(i){var n=i.tagName.toLowerCase();switch(n){case"path":return i.getAttribute("d");case"line":return hd(i);case"polygon":return pd(i);case"polyline":return dd(i);case"ellipse":return vd(i);case"circle":return gd(i);case"rect":return yd(i)}throw new Error('"'+n+'" cannot be converted to svg path element.')}function md(i,n,t,e){var r=2*Math.PI-1e-6,o=i,s=n,a=t,l=e;if(l<a){var u=a;a=l,l=u}var h=l-a,d=h<Math.PI?"0":"1",f=Math.cos(a),v=Math.sin(a),b=Math.cos(l),w=Math.sin(l);return h>=r?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*f+","+s*v+"A"+s+","+s+" 0 "+d+",1 "+s*b+","+s*w+"L"+o*b+","+o*w+"A"+o+","+o+" 0 "+d+",0 "+o*f+","+o*v+"Z":"M"+s*f+","+s*v+"A"+s+","+s+" 0 "+d+",1 "+s*b+","+s*w+"L0,0Z"}var pi=Ie("svg"),N2=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,bd=/[ ,]+/,O2=/^(\w+)\((.*)\)/;function iu(i,n){var t=pi.createSVGPoint();return t.x=i,t.y=n,t}function ve(i){var n=pi.createSVGMatrix();if(i!=null){var t=i,e=n;for(var r in t)e[r]=t[r]}return n}function Eo(i){return i!=null?(i instanceof DOMMatrix||(i=ve(i)),pi.createSVGTransformFromMatrix(i)):pi.createSVGTransform()}function Ao(i){var n=ve(),t=i!=null&&i.match(N2);if(!t)return n;for(var e=0,r=t.length;e<r;e+=1){var o=t[e].match(O2);if(o){var s=void 0,a=void 0,l=void 0,u=void 0,h=void 0,d=ve(),f=o[2].split(bd);switch(o[1].toLowerCase()){case"scale":s=parseFloat(f[0]),a=f[1]===void 0?s:parseFloat(f[1]),d=d.scaleNonUniform(s,a);break;case"translate":l=parseFloat(f[0]),u=parseFloat(f[1]),d=d.translate(l,u);break;case"rotate":h=parseFloat(f[0]),l=parseFloat(f[1])||0,u=parseFloat(f[2])||0,d=l!==0||u!==0?d.translate(l,u).rotate(h).translate(-l,-u):d.rotate(h);break;case"skewx":h=parseFloat(f[0]),d=d.skewX(h);break;case"skewy":h=parseFloat(f[0]),d=d.skewY(h);break;case"matrix":d.a=parseFloat(f[0]),d.b=parseFloat(f[1]),d.c=parseFloat(f[2]),d.d=parseFloat(f[3]),d.e=parseFloat(f[4]),d.f=parseFloat(f[5]);break;default:continue}n=n.multiply(d)}}return n}function pr(i){var n=i||{};return"matrix("+(n.a!=null?n.a:1)+","+(n.b!=null?n.b:0)+","+(n.c!=null?n.c:0)+","+(n.d!=null?n.d:1)+","+(n.e!=null?n.e:0)+","+(n.f!=null?n.f:0)+")"}function di(i){var n,t,e;if(i){var r=bd;if(i.trim().indexOf("matrix")>=0){var o=au(Ao(i));n=[o.translateX,o.translateY],t=[o.rotation],e=[o.scaleX,o.scaleY];var s=[];n[0]===0&&n[1]===0||s.push("translate("+n.join(",")+")"),e[0]===1&&e[1]===1||s.push("scale("+e.join(",")+")"),t[0]!==0&&s.push("rotate("+t[0]+")"),i=s.join(" ")}else{var a=i.match(/translate\((.*?)\)/);a&&(n=a[1].split(r));var l=i.match(/rotate\((.*?)\)/);l&&(t=l[1].split(r));var u=i.match(/scale\((.*?)\)/);u&&(e=u[1].split(r))}}var h=e&&e[0]?parseFloat(e[0]):1;return{raw:i||"",translation:{tx:n&&n[0]?parseInt(n[0],10):0,ty:n&&n[1]?parseInt(n[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:h,sy:e&&e[1]?parseFloat(e[1]):h}}}function su(i,n){return{x:n.x*i.a+n.y*i.c+0,y:n.x*i.b+n.y*i.d+0}}function au(i){var n=su(i,{x:0,y:1}),t=su(i,{x:1,y:0}),e=180/Math.PI*Math.atan2(n.y,n.x)-90;return{skewX:e,skewY:180/Math.PI*Math.atan2(t.y,t.x),translateX:i.e,translateY:i.f,scaleX:Math.sqrt(i.a*i.a+i.b*i.b),scaleY:Math.sqrt(i.c*i.c+i.d*i.d),rotation:e}}function Cd(i){var n,t,e,r;return i?(n=i.a==null?1:i.a,r=i.d==null?1:i.d,t=i.b,e=i.c):n=r=1,{sx:t?Math.sqrt(n*n+t*t):n,sy:e?Math.sqrt(e*e+r*r):r}}function wd(i){var n={x:0,y:1};return i&&(n=su(i,n)),{angle:c.Angle.normalize(c.Angle.toDeg(Math.atan2(n.y,n.x))-90)}}function xd(i){return{tx:i&&i.e||0,ty:i&&i.f||0}}function En(i,n){var t=iu(i.x,i.y).matrixTransform(n);return new c.Point(t.x,t.y)}function Ed(i,n){return new c.Line(En(i.start,n),En(i.end,n))}function _e(i,n){var t=pi.createSVGPoint();t.x=i.x,t.y=i.y;var e=t.matrixTransform(n);t.x=i.x+i.width,t.y=i.y;var r=t.matrixTransform(n);t.x=i.x+i.width,t.y=i.y+i.height;var o=t.matrixTransform(n);t.x=i.x,t.y=i.y+i.height;var s=t.matrixTransform(n),a=Math.min(e.x,r.x,o.x,s.x),l=Math.max(e.x,r.x,o.x,s.x),u=Math.min(e.y,r.y,o.y,s.y),h=Math.max(e.y,r.y,o.y,s.y);return new c.Rectangle(a,u,l-a,h-u)}function Ad(i,n,t){var e,r=i.ownerSVGElement;if(!r)return new c.Rectangle(0,0,0,0);try{e=i.getBBox()}catch{e={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}return n?c.Rectangle.create(e):_e(e,Wn(i,t||r))}function ye(i,n){var t;if(n===void 0&&(n={}),!i.ownerSVGElement||!cr(i)){if(oi(i)){var e=Nd(i),r=e.left,o=e.top,s=e.width,a=e.height;return new c.Rectangle(r,o,s,a)}return new c.Rectangle(0,0,0,0)}var l=n.target;if(!n.recursive){try{t=i.getBBox()}catch{t={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}return l?_e(t,Wn(i,l)):c.Rectangle.create(t)}var u=i.childNodes,h=u.length;if(h===0)return ye(i,{target:l});l||(l=i);for(var d=0;d<h;d+=1){var f=u[d],v=void 0;v=f.childNodes.length===0?ye(f,{target:l}):ye(f,{target:l,recursive:!0}),t=t?t.union(v):v}return t}function Wn(i,n){if(cr(n)&&cr(i)){var t=n.getScreenCTM(),e=i.getScreenCTM();if(t&&e)return t.inverse().multiply(e)}return ve()}function Pd(i,n,t){var e=i instanceof SVGSVGElement?i:i.ownerSVGElement,r=e.createSVGPoint();r.x=n,r.y=t;try{var o=e.getScreenCTM(),s=r.matrixTransform(o.inverse()),a=Wn(i,e).inverse();return s.matrixTransform(a)}catch{return r}}function lu(i){var n=function(r){var o=i.getAttribute(r),s=o?parseFloat(o):0;return Number.isNaN(s)?0:s};switch(i instanceof SVGElement&&i.nodeName.toLowerCase()){case"rect":return new c.Rectangle(n("x"),n("y"),n("width"),n("height"));case"circle":return new c.Ellipse(n("cx"),n("cy"),n("r"),n("r"));case"ellipse":return new c.Ellipse(n("cx"),n("cy"),n("rx"),n("ry"));case"polyline":var t=hi(i);return new c.Polyline(t);case"polygon":return(t=hi(i)).length>1&&t.push(t[0]),new c.Polyline(t);case"path":var e=i.getAttribute("d");return c.Path.isValid(e)||(e=c.Path.normalize(e)),c.Path.parse(e);case"line":return new c.Line(n("x1"),n("y1"),n("x2"),n("y2"))}return ye(i)}function Md(i,n){return kd(i,n,"animate")}function Sd(i,n){return kd(i,n,"animateTransform")}function kd(i,n,t){var e=Ie(t);i.appendChild(e);try{return Td(e,n)}catch{}return function(){}}function Td(i,n){var t=n.start,e=n.complete,r=n.repeat;Vt(i,z(n,["start","complete","repeat"])),t&&i.addEventListener("beginEvent",t),e&&i.addEventListener("endEvent",e),r&&i.addEventListener("repeatEvent",r);var o=i;return setTimeout(function(){o.beginElement()}),function(){return o.endElement()}}function Dd(i,n,t){var e=ni(t),r=Ie("animateMotion"),o=Ie("mpath");Vt(o,{"xlink:href":"#"+e}),r.appendChild(o),i.appendChild(r);try{return Td(r,n)}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var s=r;s.animators=[];var a=window,l=s.getAttribute("id");l&&(a.id2anim[l]=s);for(var u=a.getTargets(s),h=0,d=u.length;h<d;h+=1){var f=u[h],v=new a.Animator(s,f,h);a.animators.push(v),s.animators[h]=v,v.register()}}}return function(){}}function Nd(i){var n=0,t=0,e=0,r=0;if(i){for(var o=i;o;)n+=o.offsetLeft,t+=o.offsetTop,(o=o.offsetParent)&&(n+=parseInt(js(o,"borderLeft"),10),t+=parseInt(js(o,"borderTop"),10));e=i.offsetWidth,r=i.offsetHeight}return{left:n,top:t,width:e,height:r}}function Vr(i,n,t){if(t===void 0&&(t={}),n==null)return Ao(Vt(i,"transform"));if(t.absolute)i.setAttribute("transform",pr(n));else{var e=i.transform,r=Eo(n);e.baseVal.appendItem(r)}}function uu(i,n,t,e){t===void 0&&(t=0),e===void 0&&(e={});var r=Vt(i,"transform"),o=di(r);if(n==null)return o.translation;r=(r=o.raw).replace(/translate\([^)]*\)/g,"").trim();var s="translate("+(e.absolute?n:o.translation.tx+n)+","+(e.absolute?t:o.translation.ty+t)+")";i.setAttribute("transform",(s+" "+r).trim())}function Ws(i,n,t,e,r){r===void 0&&(r={});var o=Vt(i,"transform"),s=di(o);if(n==null)return s.rotation;o=(o=s.raw).replace(/rotate\([^)]*\)/g,"").trim(),n%=360;var a="rotate("+(r.absolute?n:s.rotation.angle+n)+(t!=null&&e!=null?","+t+","+e:"")+")";i.setAttribute("transform",(o+" "+a).trim())}function Xn(i,n,t){var e=Vt(i,"transform"),r=di(e);if(n==null)return r.scale;t=t==null?n:t,e=(e=r.raw).replace(/scale\([^)]*\)/g,"").trim();var o="scale("+n+","+t+")";i.setAttribute("transform",(e+" "+o).trim())}function Xs(i,n,t,e){var r=c.Point.create(n),o=c.Point.create(t);e||(e=i instanceof SVGSVGElement?i:i.ownerSVGElement);var s=Xn(i);i.setAttribute("transform","");var a=ye(i,{target:e}).scale(s.sx,s.sy),l=Eo();l.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var u=Eo(),h=r.angleBetween(o,r.clone().translate(1,0));h&&u.setRotate(h,0,0);var d=Eo(),f=r.clone().move(o,a.width/2);d.setTranslate(2*r.x-f.x,2*r.y-f.y);var v=Wn(i,e),b=Eo();b.setMatrix(d.matrix.multiply(u.matrix.multiply(l.matrix.multiply(v.scale(s.sx,s.sy))))),i.setAttribute("transform",pr(b.matrix))}var cu=function(){function i(n,t,e){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=c.Platform.isEventSupported("wheel")?"wheel":"mousewheel",this.target=n,this.onWheelCallback=t,this.onWheelGuard=e,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return i.prototype.enable=function(){c.Platform.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):Ct(this.target).on("mousewheel",this.onWheel)},i.prototype.disable=function(){c.Platform.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):Ct(this.target).off("mousewheel")},i.prototype.onWheel=function(n){var t,e=this;(this.onWheelGuard==null||this.onWheelGuard(n))&&(this.deltaX+=n.deltaX,this.deltaY+=n.deltaY,n.preventDefault(),this.deltaX===0&&this.deltaY===0||(n.stopPropagation(),t=!0),t===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(function(){e.didWheel(n)})))},i.prototype.didWheel=function(n){this.animationFrameId=0,this.onWheelCallback(n,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0},i}(),L2=c.Vector.isVector,F2=c.Vector.create,B2=c.Vector.createVectors,z2=Object.freeze({__proto__:null,requestAnimationFrame:Rs,cancelAnimationFrame:Vs,CASE_SENSITIVE_ATTR:ql,getAttribute:Zp,removeAttribute:$l,setAttribute:Bs,setAttributes:Wl,attr:Vt,qualifyAttr:Xl,kebablizeAttrs:Co,styleToObject:ii,mergeAttrs:zs,uniqueId:$p,ensureId:ni,isSVGGraphicsElement:cr,ns:pe,svgVersion:Wp,createElement:_l,createElementNS:Ss,createSvgElement:Ie,createSvgDocument:ri,parseXML:Gl,tagName:ks,index:Ts,find:Xp,findOne:Ds,findParentByClass:Hl,contains:Ns,remove:Ln,empty:Os,append:bo,prepend:Yp,before:Ls,appendTo:Jp,isHTMLElement:oi,clickable:Fs,isInputElement:Ul,getClass:Br,hasClass:mo,addClass:Rt,removeClass:tn,toggleClass:Il,setPrefixedStyle:function(i,n,t){var e=nd(n);e!=null&&(i[e]=t),i[n]=t},getComputedStyle:js,hasScrollbars:function(i){var n=js(i);return n!=null&&(n.overflow==="scroll"||n.overflow==="auto")},getVendorPrefixedName:nd,clearSelection:E2,text:Ql,breakText:tu,KAPPA:$s,sample:eu,lineToPathData:hd,polygonToPathData:pd,polylineToPathData:dd,getPointsFromSvgElement:hi,circleToPathData:gd,ellipseToPathData:vd,rectangleToPathData:yd,rectToPathData:nu,toPath:ru,toPathData:ou,createSlicePathData:md,bbox:Ad,getBBox:ye,getBBoxByElementAttr:function(i){for(var n=i,t=n?n.tagName.toLowerCase():"";t==="g";)t=(n=n.firstElementChild)?n.tagName.toLowerCase():"";var e,r,o=function(s){var a=n.getAttribute(s),l=a?parseFloat(a):0;return Number.isNaN(l)?0:l};switch(t){case"rect":r=new c.Rectangle(o("x"),o("y"),o("width"),o("height"));break;case"circle":e=o("r"),r=new c.Rectangle(o("cx")-e,o("cy")-e,2*e,2*e)}return r},getMatrixByElementAttr:function(i,n){var t=ve();if(cr(n)&&cr(i)){for(var e=i,r=[];e&&e!==n;){var o=Ao(e.getAttribute("transform")||null);r.push(o),e=e.parentNode}r.reverse().forEach(function(s){t=t.multiply(s)})}return t},getTransformToElement:Wn,toLocalPoint:Pd,toGeometryShape:lu,getIntersection:function(i,n,t){var e=i instanceof SVGSVGElement?i:i.ownerSVGElement,r=ye(t=t||e),o=r.getCenter();if(!r.intersectsWithLineFromCenterToPoint(n))return null;var s=null,a=i.tagName.toLowerCase();if(a==="rect"){var l=new c.Rectangle(parseFloat(i.getAttribute("x")||"0"),parseFloat(i.getAttribute("y")||"0"),parseFloat(i.getAttribute("width")||"0"),parseFloat(i.getAttribute("height")||"0")),u=Wn(i,t),h=au(u),d=e.createSVGTransform();d.setRotate(-h.rotation,o.x,o.y);var f=_e(l,d.matrix.multiply(u));s=c.Rectangle.create(f).intersectsWithLineFromCenterToPoint(n,h.rotation)}else if(a==="path"||a==="polygon"||a==="polyline"||a==="circle"||a==="ellipse"){for(var v=eu(a==="path"?i:ru(i)),b=1/0,w=[],P=0,x=v.length;P<x;P+=1){var S=v[P],D=iu(S.x,S.y);D=D.matrixTransform(Wn(i,t));var N=c.Point.create(D),V=N.distance(o),y=1.1*N.distance(n),H=V+y;H<b?(b=H,w=[{sample:S,refDistance:y}]):H<b+1&&w.push({sample:S,refDistance:y})}w.sort(function(I,X){return I.refDistance-X.refDistance}),w[0]&&(s=c.Point.create(w[0].sample))}return s},animate:Md,animateTransform:Sd,animateAlongPath:Dd,getBoundingOffsetRect:Nd,createSVGPoint:iu,createSVGMatrix:ve,createSVGTransform:Eo,transformStringToMatrix:Ao,matrixToTransformString:pr,parseTransformString:di,decomposeMatrix:au,matrixToScale:Cd,matrixToRotation:wd,matrixToTranslation:xd,transformPoint:En,transformLine:Ed,transformPolyline:function(i,n){var t=i instanceof c.Polyline?i.points:i;return Array.isArray(t)||(t=[]),new c.Polyline(t.map(function(e){return En(e,n)}))},transformRectangle:_e,transform:Vr,translate:uu,rotate:Ws,scale:Xn,translateAndAutoOrient:Xs,MouseWheelHandle:cu,isVector:L2,createVector:F2,createVectors:B2});function Od(i,n){var t=this;n===void 0&&(n=60);var e=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e&&clearTimeout(e),e=window.setTimeout(function(){i.apply(t,r)},n)}}var Ys,fi,Js,hu,pu,du,fu,Ld,gu,R2=typeof ResizeObserver<"u"?function(i){var n=null,t=[],e=Od(function(){t.forEach(function(o){o(i)})}),r=function(){n&&(n.disconnect(),t=[],n=null)};return{element:i,bind:function(o){var s;n||((s=new ResizeObserver(e)).observe(i),e(),n=s),t.indexOf(o)===-1&&t.push(o)},destroy:r,unbind:function(o){var s=t.indexOf(o);s!==-1&&t.splice(s,1),t.length===0&&n&&r()}}}:function(i){var n=null,t=[],e=Od(function(){t.forEach(function(o){return o(i)})}),r=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",e),n.parentNode.removeChild(n),n=null,t=[])};return{element:i,bind:function(o){n||(n=function(){getComputedStyle(i).position==="static"&&(i.style.position="relative");var s=document.createElement("object");return s.onload=function(){s.contentDocument.defaultView.addEventListener("resize",e),e()},s.style.display="block",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%",s.style.overflow="hidden",s.style.pointerEvents="none",s.style.zIndex="-1",s.style.opacity="0",s.setAttribute("tabindex","-1"),s.type="text/html",i.appendChild(s),s.data="about:blank",s}()),t.indexOf(o)===-1&&t.push(o)},destroy:r,unbind:function(o){var s=t.indexOf(o);s!==-1&&t.splice(s,1),t.length===0&&n&&r()}}};c.SizeSensor=void 0,function(i){var n=new WeakMap;function t(e){var r=n.get(e);return r||(r=R2(e),n.set(e,r),r)}i.bind=function(e,r){var o=t(e);return o.bind(r),function(){return o.unbind(r)}},i.clear=function(e){(function(r){r.destroy(),n.delete(r.element)})(t(e))}}(c.SizeSensor||(c.SizeSensor={})),c.Scheduler=void 0,Ys=c.Scheduler||(c.Scheduler={}),fi=[],Js=[],hu=0,pu=function(){return performance.now()},du=function(i){return i[0]},fu=function(i){return Js.push(i)===1&&Ld()},Ld=function(){var i=function(){var r,o;return(o=(r=Js.splice(0,Js.length))[0])===null||o===void 0?void 0:o.call(r)};if(typeof MessageChannel<"u"){var n=new MessageChannel,t=n.port1,e=n.port2;return t.onmessage=i,function(){return e.postMessage(null)}}return function(){return setTimeout(i)}}(),gu=function(){hu=pu()+16.666666666666668;for(var i=du(fi);i&&!Ys.shouldYield();){var n=i.callback,t=i.data;i.callback=null;var e=n&&n(t);e?i.callback=e:fi.shift(),i=du(fi)}i&&fu(gu)},Ys.scheduleTask=function(i,n){var t={callback:i,data:n};fi.push(t),fu(gu)},Ys.shouldYield=function(){var i,n;return((n=(i=navigator)===null||i===void 0?void 0:i.scheduling)===null||n===void 0?void 0:n.isInputPending())||pu()>=hu};var ae=function(){function i(n){this.options=A({},n),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object.defineProperty(i.prototype,"names",{get:function(){return Object.keys(this.data)},enumerable:!1,configurable:!0}),i.prototype.register=function(n,t,e){var r=this;if(e===void 0&&(e=!1),typeof n!="object"){!this.exist(n)||e||c.Platform.isApplyingHMR()||this.onDuplicated(n);var o=this.options.process,s=o?dt(o,this,n,t):t;return this.data[n]=s,s}Object.keys(n).forEach(function(a){r.register(a,n[a],t)})},i.prototype.unregister=function(n){var t=n?this.data[n]:null;return delete this.data[n],t},i.prototype.get=function(n){return n?this.data[n]:null},i.prototype.exist=function(n){return!!n&&this.data[n]!=null},i.prototype.onDuplicated=function(n){try{throw this.options.onConflict&&dt(this.options.onConflict,this,n),new Error(uo(this.options.type)+" with name '"+n+"' already registered.")}catch(t){throw t}},i.prototype.onNotFound=function(n,t){throw new Error(this.getSpellingSuggestion(n,t))},i.prototype.getSpellingSuggestion=function(n,t){var e=this.getSpellingSuggestionForName(n),r=t?t+" "+bp(this.options.type):this.options.type;return uo(r)+" with name '"+n+"' does not exist."+(e?" Did you mean '"+e+"'?":"")},i.prototype.getSpellingSuggestionForName=function(n){return Gp(n,Object.keys(this.data),function(t){return t})},i}();(function(i){i.create=function(n){return new i(n)}})(ae||(ae={}));var Fd,Bd,V2={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},zd={position:Zs("x","width","origin")},Rd={position:Zs("y","height","origin")},j2={position:Zs("x","width","corner")},I2={position:Zs("y","height","corner")},Vd={set:dr("width","width")},jd={set:dr("height","height")},_2={set:dr("rx","width")},G2={set:dr("ry","height")},Id={set:(Fd=dr("r","width"),Bd=dr("r","height"),function(i,n){var t=n.refBBox;return dt(t.height>t.width?Fd:Bd,this,i,n)})},H2={set:function(i,n){var t=n.refBBox,e=parseFloat(i),r=wn(i);r&&(e/=100);var o,s=Math.sqrt(t.height*t.height+t.width*t.width);return Number.isFinite(e)&&(o=r||e>=0&&e<=1?e*s:Math.max(e+s,0)),{r:o}}},U2={set:dr("cx","width")},q2={set:dr("cy","height")},_d={set:Ud({resetOffset:!0})},$2={set:Ud({resetOffset:!1})},Gd={set:qd({resetOffset:!0})},W2={set:qd({resetOffset:!1})},X2=Id,Y2=_d,J2=Gd,Z2=zd,K2=Rd,Q2=Vd,tm=jd;function Zs(i,n,t){return function(e,r){var o=r.refBBox;if(e==null)return null;var s,a=parseFloat(e),l=wn(e);if(l&&(a/=100),Number.isFinite(a)){var u=o[t];s=l||a>0&&a<1?u[i]+o[n]*a:u[i]+a}var h=new c.Point;return h[i]=s||0,h}}function dr(i,n){return function(t,e){var r=e.refBBox,o=parseFloat(t),s=wn(t);s&&(o/=100);var a={};if(Number.isFinite(o)){var l=s||o>=0&&o<=1?o*r[n]:Math.max(o+r[n],0);a[i]=l}return a}}function Hd(i,n){var t="x6-shape",e=n&&n.resetOffset;return function(r,o){var s=o.view,a=o.elem,l=o.refBBox,u=s.$(a),h=u.data(t);if(!h||h.value!==r){var d=i(r);h={value:r,shape:d,shapeBBox:d.bbox()},u.data(t,h)}var f=h.shape.clone(),v=h.shapeBBox.clone(),b=v.getOrigin(),w=l.getOrigin();v.x=w.x,v.y=w.y;var P=l.getMaxScaleToFit(v,w),x=v.width===0||l.width===0?1:P.sx,S=v.height===0||l.height===0?1:P.sy;return f.scale(x,S,b),e&&f.translate(-b.x,-b.y),f}}function Ud(i){var n=Hd(function(t){return c.Path.parse(t)},i);return function(t,e){return{d:n(t,e).serialize()}}}function qd(i){var n=Hd(function(t){return new c.Polyline(t)},i);return function(t,e){return{points:n(t,e).serialize()}}}var em={qualify:qe,set:function(i,n){return"url(#"+n.view.graph.defineGradient(i)+")"}},nm={qualify:qe,set:function(i,n){var t=n.view,e=t.cell,r=A({},i);if(e.isEdge()&&r.type==="linearGradient"){var o=t,s=o.sourcePoint,a=o.targetPoint;r.id="gradient-"+r.type+"-"+e.id,r.attrs=A(A({},r.attrs),{x1:s.x,y1:s.y,x2:a.x,y2:a.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(r.id)}return"url(#"+t.graph.defineGradient(r)+")"}},$d={qualify:function(i,n){var t=n.attrs;return t.textWrap==null||!qe(t.textWrap)},set:function(i,n){var t=n.view,e=n.elem,r=n.attrs,o="x6-text",s=t.$(e),a=s.data(o),l=function(w){try{return JSON.parse(w)}catch{return w}},u={x:r.x,eol:r.eol,annotations:l(r.annotations),textPath:l(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:(r["display-empty"]||r.displayEmpty)==="true",lineHeight:r["line-height"]||r.lineHeight},h=r["font-size"]||r.fontSize,d=JSON.stringify([i,u]);if(h&&e.setAttribute("font-size",h),a==null||a!==d){var f=u.textPath;if(f!=null&&typeof f=="object"){var v=f.selector;if(typeof v=="string"){var b=t.find(v)[0];b instanceof SVGPathElement&&(ni(b),u.textPath=A({"xlink:href":"#"+b.id},f))}}Ql(e,""+i,u),s.data(o,d)}}},rm={qualify:qe,set:function(i,n){var t=n.view,e=n.elem,r=n.attrs,o=n.refBBox,s=i,a=s.width||0;wn(a)?o.width*=parseFloat(a)/100:a<=0?o.width+=a:o.width=a;var l,u=s.height||0;wn(u)?o.height*=parseFloat(u)/100:u<=0?o.height+=u:o.height=u;var h=s.text;h==null&&(h=r.text),l=h!=null?tu(""+h,o,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{svgDocument:t.graph.view.svg,ellipsis:s.ellipsis,hyphen:s.hyphen,breakWord:s.breakWord}):"",dt($d.set,this,l,{view:t,elem:e,attrs:r,refBBox:o,cell:t.cell})}},Po=function(i,n){return n.attrs.text!==void 0},om={qualify:Po},im={qualify:Po},sm={qualify:Po},am={qualify:Po},lm={qualify:Po},um={qualify:Po},cm={qualify:function(i,n){return n.elem instanceof SVGElement},set:function(i,n){var t=n.view,e=n.elem,r="x6-title",o=""+i,s=t.$(e),a=s.data(r);if(a==null||a!==o){s.data(r,o);var l=e.firstChild;if(l&&l.tagName.toUpperCase()==="TITLE")l.textContent=o;else{var u=document.createElementNS(e.namespaceURI,"title");u.textContent=o,e.insertBefore(u,l)}}}},hm={offset:Wd("x","width","right")},pm={offset:Wd("y","height","bottom")};function Wd(i,n,t){return function(e,r){var o,s=r.refBBox,a=new c.Point;return o=e==="middle"?s[n]/2:e===t?s[n]:typeof e=="number"&&Number.isFinite(e)?e>-1&&e<1?-s[n]*e:-e:wn(e)?s[n]*parseFloat(e)/100:0,a[i]=-(s[i]+o),a}}var dm={qualify:qe,set:function(i,n){var t=n.view,e=n.elem;t.$(e).css(i)}},fm={qualify:qe,set:function(i,n){return"url(#"+n.view.graph.defineFilter(i)+")"}};function fr(i,n,t){var e,r;typeof n=="object"?(e=n.x,r=n.y):(e=n,r=t);var o=c.Path.parse(i),s=o.bbox();if(s){var a=-s.height/2-s.y,l=-s.width/2-s.x;typeof e=="number"&&(l-=e),typeof r=="number"&&(a-=r),o.translate(l,a)}return o.serialize()}function Xd(i,n,t,e,r){e===void 0&&(e=3/4),r===void 0&&(r={});var o=i.size||10,s=i.width||o,a=i.height||o,l=new c.Path,u={};if(n)l.moveTo(s,0).lineTo(0,a/2).lineTo(s,a),u.fill="none";else{if(l.moveTo(0,a/2),l.lineTo(s,0),!t){var h=Re(e,0,1);l.lineTo(s*h,a/2)}l.lineTo(s,a),l.close()}return A(A(A({},u),r),{tagName:"path",d:fr(l.serialize(),{x:i.offset!=null?i.offset:-s/2})})}var Yn,Yd=function(i){var n=i.r,t=z(i,["r"]),e=n||5;return A(A({cx:e},t),{tagName:"circle",r:e})},gm=Object.freeze({__proto__:null,block:function(i){return Xd({size:i.size,width:i.width,height:i.height,offset:i.offset},i.open===!0,!0,void 0,z(i,["size","width","height","offset","open"]))},classic:function(i){return Xd({size:i.size,width:i.width,height:i.height,offset:i.offset},!1,!1,i.factor,z(i,["size","width","height","offset","factor"]))},diamond:function(i){var n=i.size,t=i.width,e=i.height,r=i.offset,o=z(i,["size","width","height","offset"]),s=n||10,a=t||s,l=e||s,u=new c.Path;return u.moveTo(0,l/2).lineTo(a/2,0).lineTo(a,l/2).lineTo(a/2,l).close(),A(A({},o),{tagName:"path",d:fr(u.serialize(),r==null?-a/2:r)})},path:function(i){var n=i.d,t=i.offsetX,e=i.offsetY,r=z(i,["d","offsetX","offsetY"]);return A(A({},r),{tagName:"path",d:fr(n,t,e)})},cross:function(i){var n=i.size,t=i.width,e=i.height,r=i.offset,o=z(i,["size","width","height","offset"]),s=n||10,a=t||s,l=e||s,u=new c.Path;return u.moveTo(0,0).lineTo(a,l).moveTo(0,l).lineTo(a,0),A(A({},o),{tagName:"path",fill:"none",d:fr(u.serialize(),r||-a/2)})},async:function(i){var n=i.width,t=i.height,e=i.offset,r=i.open,o=i.flip,s=z(i,["width","height","offset","open","flip"]),a=t||6,l=n||10,u=r===!0,h=o===!0,d=A(A({},s),{tagName:"path"});h&&(a=-a);var f=new c.Path;return f.moveTo(0,a).lineTo(l,0),u?d.fill="none":(f.lineTo(l,a),f.close()),d.d=fr(f.serialize(),{x:e||-l/2,y:a/2}),d},circle:Yd,circlePlus:function(i){var n=i.r,t=z(i,["r"]),e=n||5,r=new c.Path;return r.moveTo(e,0).lineTo(e,2*e),r.moveTo(0,e).lineTo(2*e,e),{children:[A(A({},Yd({r:e})),{fill:"none"}),A(A({},t),{tagName:"path",d:fr(r.serialize(),-e)})]}},ellipse:function(i){var n=i.rx,t=i.ry,e=z(i,["rx","ry"]),r=n||5,o=t||5;return A(A({cx:r},e),{tagName:"ellipse",rx:r,ry:o})}});function vu(i){return typeof i=="string"||qe(i)}(function(i){i.presets=gm,i.registry=ae.create({type:"marker"}),i.registry.register(i.presets,!0)})(Yn||(Yn={})),function(i){i.normalize=fr}(Yn||(Yn={}));var vm={qualify:vu,set:function(i,n){return yu("marker-start",i,n.view,n.attrs)}},ym={qualify:vu,set:function(i,n){return yu("marker-end",i,n.view,n.attrs,{transform:"rotate(180)"})}},mm={qualify:vu,set:function(i,n){return yu("marker-mid",i,n.view,n.attrs)}};function yu(i,n,t,e,r){var o;r===void 0&&(r={});var s=typeof n=="string"?{name:n}:n,a=s.name,l=s.args,u=z(s,["name","args"]),h=u;if(a&&typeof a=="string"){var d=Yn.registry.get(a);if(!d)return Yn.registry.onNotFound(a);h=d(A(A({},u),l))}var f=A(A(A({},function(v,b){var w={},P=v.stroke;typeof P=="string"&&(w.stroke=P,w.fill=P);var x=v.strokeOpacity;if(x==null&&(x=v["stroke-opacity"]),x==null&&(x=v.opacity),x!=null&&(w["stroke-opacity"]=x,w["fill-opacity"]=x),b!=="marker-mid"){var S=parseFloat(v.strokeWidth||v["stroke-width"]);if(Number.isFinite(S)&&S>1){var D=Math.ceil(S/2);w.refX=b==="marker-start"?D:-D}}return w}(e,i)),r),h);return(o={})[i]="url(#"+t.graph.defineMarker(f)+")",o}var gi=function(i,n){return n.view.cell.isEdge()},bm={qualify:gi,set:function(i,n){var t,e,r,o,s,a=n.view,l=i.reverse||!1,u=i.stubs||0;if(Number.isFinite(u)&&u!==0)if(l){var h;v=void 0,d=a.getConnectionLength()||0,u<0?(v=(d+u)/2,h=-u):(v=u,h=d-2*u),s=(o=(r=(e=(t=(f=a.getConnection())==null?void 0:f.divideAtLength(v))===null||t===void 0?void 0:t[1])===null||e===void 0?void 0:e.divideAtLength(h))===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.serialize()}else{var d,f,v=void 0;if(u<0?v=((d=a.getConnectionLength()||0)+u)/2:v=u,f=a.getConnection()){var b=f.divideAtLength(v),w=f.divideAtLength(-v);b&&w&&(s=b[0].serialize()+" "+w[1].serialize())}}return{d:s||a.getConnectionPathData()}}},Jd={qualify:gi,set:Ks("getTangentAtLength",{rotate:!0})},Cm={qualify:gi,set:Ks("getTangentAtLength",{rotate:!1})},Zd={qualify:gi,set:Ks("getTangentAtRatio",{rotate:!0})},wm={qualify:gi,set:Ks("getTangentAtRatio",{rotate:!1})},xm=Jd,Em=Zd;function Ks(i,n){var t={x:1,y:0};return function(e,r){var o,s,a=r.view,l=a[i](Number(e));return l?(s=n.rotate?l.vector().vectorAngle(t):0,o=l.start):(o=a.path.start,s=0),s===0?{transform:"translate("+o.x+","+o.y+"')"}:{transform:"translate("+o.x+","+o.y+"') rotate("+s+")"}}}var An,Am=Object.freeze({__proto__:null,ref:{},refX:zd,refY:Rd,refDx:j2,refDy:I2,refWidth:Vd,refHeight:jd,refRx:_2,refRy:G2,refRInscribed:Id,refRCircumscribed:H2,refCx:U2,refCy:q2,refDResetOffset:_d,refDKeepOffset:$2,refPointsResetOffset:Gd,refPointsKeepOffset:W2,refR:X2,refD:Y2,refPoints:J2,refX2:Z2,refY2:K2,refWidth2:Q2,refHeight2:tm,fill:em,stroke:nm,text:$d,textWrap:rm,lineHeight:om,textVerticalAnchor:im,textPath:sm,annotations:am,eol:lm,displayEmpty:um,title:cm,xAlign:hm,yAlign:pm,resetOffset:{offset:function(i,n){var t=n.refBBox;return i?{x:-t.x,y:-t.y}:{x:0,y:0}}},style:dm,html:{set:function(i,n){var t=n.view,e=n.elem;t.$(e).html(""+i)}},filter:fm,port:{set:function(i){return i!=null&&typeof i=="object"&&i.id?i.id:i}},sourceMarker:vm,targetMarker:ym,vertexMarker:mm,connection:bm,atConnectionLengthKeepGradient:Jd,atConnectionLengthIgnoreGradient:Cm,atConnectionRatioKeepGradient:Zd,atConnectionRatioIgnoreGradient:wm,atConnectionLength:xm,atConnectionRatio:Em});(function(i){i.isValidDefinition=function(n,t,e){return!!(n!=null&&(typeof n=="string"||typeof n.qualify!="function"||dt(n.qualify,this,t,e)))}})(An||(An={})),function(i){i.presets=A(A({},V2),Am),i.registry=ae.create({type:"attribute definition"}),i.registry.register(i.presets,!0)}(An||(An={}));var Pm={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,n){var t=n.thickness*n.sx,e=n.thickness*n.sy;Vt(i,{width:t,height:e,rx:t,ry:e,fill:n.color})}},Mm={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;Vt(i,{width:t,height:t,rx:t,ry:t,fill:n.color})}},Sm={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,n){var t=n.width,e=n.height,r=n.thickness;Vt(i,{d:t-r>=0&&e-r>=0?["M",t,0,"H0 M0 0 V0",e].join(" "):"M 0 0 0 0",stroke:n.color,"stroke-width":n.thickness})}},km=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,n){var t=n.width,e=n.height,r=n.thickness;Vt(i,{d:t-r>=0&&e-r>=0?["M",t,0,"H0 M0 0 V0",e].join(" "):"M 0 0 0 0",stroke:n.color,"stroke-width":n.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(i,n){var t,e=n.factor||1,r=n.width*e,o=n.height*e,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",n.width=r,n.height=o,Vt(i,{d:t,stroke:n.color,"stroke-width":n.thickness})}}],Tm=Object.freeze({__proto__:null,dot:Pm,fixedDot:Mm,mesh:Sm,doubleMesh:km}),Jn=function(){function i(){this.patterns={},this.root=c.Vector.create(ri(),{width:"100%",height:"100%"},[Ie("defs")]).node}return i.prototype.add=function(n,t){var e=this.root.childNodes[0];e&&e.appendChild(t),this.patterns[n]=t,c.Vector.create("rect",{width:"100%",height:"100%",fill:"url(#"+n+")"}).appendTo(this.root)},i.prototype.get=function(n){return this.patterns[n]},i.prototype.has=function(n){return this.patterns[n]!=null},i}();function mu(i,n){return i!=null?i:n}function Ne(i,n){return i!=null&&Number.isFinite(i)?i:n}(function(i){i.presets=Tm,i.registry=ae.create({type:"grid"}),i.registry.register(i.presets,!0)})(Jn||(Jn={}));var jr,Dm=Object.freeze({__proto__:null,outline:function(i){i===void 0&&(i={});var n=mu(i.color,"blue"),t=Ne(i.width,1),e=Ne(i.margin,2);return(`
    <filter>
      <feFlood flood-color="`+n+'" flood-opacity="'+Ne(i.opacity,1)+`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`+(e+t)+`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`+e+`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()},highlight:function(i){i===void 0&&(i={});var n=mu(i.color,"red"),t=Ne(i.blur,0),e=Ne(i.width,1);return(`
      <filter>
        <feFlood flood-color="`+n+'" flood-opacity="'+Ne(i.opacity,1)+`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`+e+`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`+t+`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()},blur:function(i){i===void 0&&(i={});var n=Ne(i.x,2);return(`
    <filter>
      <feGaussianBlur stdDeviation="`+(i.y!=null&&Number.isFinite(i.y)?[n,i.y]:n)+`"/>
    </filter>
  `).trim()},dropShadow:function(i){i===void 0&&(i={});var n=Ne(i.dx,0),t=Ne(i.dy,0),e=mu(i.color,"black"),r=Ne(i.blur,4),o=Ne(i.opacity,1);return"SVGFEDropShadowElement"in window?(`<filter>
         <feDropShadow stdDeviation="`+r+'" dx="'+n+'" dy="'+t+'" flood-color="'+e+'" flood-opacity="'+o+`" />
       </filter>`).trim():(`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`+r+`" />
         <feOffset dx="`+n+'" dy="'+t+`" result="offsetblur" />
         <feFlood flood-color="`+e+`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`+o+`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()},grayScale:function(i){i===void 0&&(i={});var n=Ne(i.amount,1),t=.7152-.7152*(1-n);return(`
    <filter>
      <feColorMatrix type="matrix" values="`+(.2126+.7874*(1-n))+" "+t+" "+(.0722-.0722*(1-n))+" 0 0 "+(.2126-.2126*(1-n))+" "+(.7152+.2848*(1-n))+" "+(.0722-.0722*(1-n))+" 0 0 "+(.2126-.2126*(1-n))+" "+t+" "+(.0722+.9278*(1-n))+` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()},sepia:function(i){i===void 0&&(i={});var n=Ne(i.amount,1);return(`
      <filter>
        <feColorMatrix type="matrix" values="`+(.393+.607*(1-n))+" "+(.769-.769*(1-n))+" "+(.189-.189*(1-n))+" 0 0 "+(.349-.349*(1-n))+" "+(.686+.314*(1-n))+" "+(.168-.168*(1-n))+" 0 0 "+(.272-.272*(1-n))+" "+(.534-.534*(1-n))+" "+(.131+.869*(1-n))+` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()},saturate:function(i){return i===void 0&&(i={}),(`
      <filter>
        <feColorMatrix type="saturate" values="`+(1-Ne(i.amount,1))+`"/>
      </filter>
    `).trim()},hueRotate:function(i){return i===void 0&&(i={}),(`
      <filter>
        <feColorMatrix type="hueRotate" values="`+Ne(i.angle,0)+`"/>
      </filter>
    `).trim()},invert:function(i){i===void 0&&(i={});var n=Ne(i.amount,1),t=1-n;return(`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`+n+" "+t+`"/>
          <feFuncG type="table" tableValues="`+n+" "+t+`"/>
          <feFuncB type="table" tableValues="`+n+" "+t+`"/>
        </feComponentTransfer>
      </filter>
    `).trim()},brightness:function(i){i===void 0&&(i={});var n=Ne(i.amount,1);return(`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`+n+`"/>
        <feFuncG type="linear" slope="`+n+`"/>
        <feFuncB type="linear" slope="`+n+`"/>
      </feComponentTransfer>
    </filter>
  `).trim()},contrast:function(i){i===void 0&&(i={});var n=Ne(i.amount,1),t=.5-n/2;return(`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`+n+'" intercept="'+t+`"/>
        <feFuncG type="linear" slope="`+n+'" intercept="'+t+`"/>
        <feFuncB type="linear" slope="`+n+'" intercept="'+t+`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}});(function(i){i.presets=Dm,i.registry=ae.create({type:"filter"}),i.registry.register(i.presets,!0)})(jr||(jr={}));var Mo,Kd=function(i){var n=document.createElement("canvas"),t=i.width,e=i.height;n.width=2*t,n.height=e;var r=n.getContext("2d");return r.drawImage(i,0,0,t,e),r.translate(2*t,0),r.scale(-1,1),r.drawImage(i,0,0,t,e),n},Qd=function(i){var n=document.createElement("canvas"),t=i.width,e=i.height;n.width=t,n.height=2*e;var r=n.getContext("2d");return r.drawImage(i,0,0,t,e),r.translate(0,2*e),r.scale(1,-1),r.drawImage(i,0,0,t,e),n},tf=function(i){var n=document.createElement("canvas"),t=i.width,e=i.height;n.width=2*t,n.height=2*e;var r=n.getContext("2d");return r.drawImage(i,0,0,t,e),r.setTransform(-1,0,0,-1,n.width,n.height),r.drawImage(i,0,0,t,e),r.setTransform(-1,0,0,1,n.width,0),r.drawImage(i,0,0,t,e),r.setTransform(1,0,0,-1,0,n.height),r.drawImage(i,0,0,t,e),n},Nm=Object.freeze({__proto__:null,flipX:Kd,flipY:Qd,flipXY:tf,watermark:function(i,n){var t=i.width,e=i.height,r=document.createElement("canvas");r.width=3*t,r.height=3*e;for(var o=r.getContext("2d"),s=n.angle!=null?-n.angle:-20,a=c.Angle.toRad(s),l=r.width/4,u=r.height/4,h=0;h<4;h+=1)for(var d=0;d<4;d+=1)(h+d)%2>0&&(o.setTransform(1,0,0,1,(2*h-1)*l,(2*d-1)*u),o.rotate(a),o.drawImage(i,-t/2,-e/2,t,e));return r}});(function(i){i.presets=A({},Nm),i.presets["flip-x"]=Kd,i.presets["flip-y"]=Qd,i.presets["flip-xy"]=tf,i.registry=ae.create({type:"background pattern"}),i.registry.register(i.presets,!0)})(Mo||(Mo={}));var We={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(i){We.trackable=i}};c.Util=void 0,function(i){i.snapToGrid=Zl,i.normalizeMarker=fr,i.prefix=function(n){return We.prefixCls+"-"+n}}(c.Util||(c.Util={})),function(i){i.makeTree=function(n,t,e,r){var o=this;r===void 0&&(r=[]);var s=typeof t.children=="function"?t.children(n):n[t.children||"children"];return e||(e=t.createNode(n),r.push(e)),Array.isArray(s)&&s.forEach(function(a){var l=t.createNode(a),u=t.createEdge(e,l);r.push(l,u),o.makeTree(a,t,l,r)}),r}}(c.Util||(c.Util={}));var gr,ef=c.Util.prefix("highlighted"),Om={highlight:function(i,n,t){Rt(n,t&&t.className||ef)},unhighlight:function(i,n,t){tn(n,t&&t.className||ef)}},nf=c.Util.prefix("highlight-opacity"),Lm={highlight:function(i,n){Rt(n,nf)},unhighlight:function(i,n){tn(n,nf)}},Fm={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},Bm={highlight:function(i,n,t){var e=gr.getHighlighterId(n,t);if(!gr.hasCache(e)){t=wl({},t,Fm);var r,o,s=c.Vector.create(n);try{r=s.toPathData()}catch{o=s.bbox(!0),r=nu(A(A({},t),o))}var a=Ie("path");if(Vt(a,A({d:r,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?Co(t.attrs):null)),i.isEdgeElement(n))Vt(a,"d",i.getConnectionPathData());else{var l=s.getTransformToElement(i.container),u=t.padding;if(u){o==null&&(o=s.bbox(!0));var h=o.x+o.width/2,d=o.y+o.height/2;o=_e(o,l);var f=Math.max(o.width,1),v=Math.max(o.height,1),b=(f+u)/f,w=(v+u)/v,P=ve({a:b,b:0,c:0,d:w,e:h-b*h,f:d-w*d});l=l.multiply(P)}Vr(a,l)}Rt(a,c.Util.prefix("highlight-stroke"));var x=i.cell,S=function(){return gr.removeHighlighter(e)};x.on("removed",S),x.model&&x.model.on("reseted",S),i.container.appendChild(a),gr.setCache(e,a)}},unhighlight:function(i,n,t){gr.removeHighlighter(gr.getHighlighterId(n,t))}};(function(i){i.getHighlighterId=function(t,e){return ni(t),t.id+JSON.stringify(e)};var n={};i.setCache=function(t,e){n[t]=e},i.hasCache=function(t){return n[t]!=null},i.removeHighlighter=function(t){var e=n[t];e&&(Ln(e),delete n[t])}})(gr||(gr={}));var Bn,zm=Object.freeze({__proto__:null,className:Om,opacity:Lm,stroke:Bm});function bu(i,n){return n===void 0&&(n={}),new c.Point(cn(n.x,i.width),cn(n.y,i.height))}function Cu(i,n,t){return A({angle:n,position:i.toJSON()},t)}(function(i){i.check=function(n,t){if(typeof t.highlight!="function")throw new Error("Highlighter '"+n+"' is missing required `highlight()` method");if(typeof t.unhighlight!="function")throw new Error("Highlighter '"+n+"' is missing required `unhighlight()` method")}})(Bn||(Bn={})),function(i){i.presets=zm,i.registry=ae.create({type:"highlighter"}),i.registry.register(i.presets,!0)}(Bn||(Bn={}));function rf(i,n,t,e){var r=n.getCenter(),o=n.getTopCenter(),s=n.width/n.height,a=c.Ellipse.fromRect(n),l=i.length;return i.map(function(u,h){var d=t+e(h,l),f=o.clone().rotate(-d,r).scale(s,1,r),v=u.compensateRotate?-a.tangentTheta(f):0;return(u.dx||u.dy)&&f.translate(u.dx||0,u.dy||0),u.dr&&f.move(r,u.dr),Cu(f.round(),v,u)})}function vi(i,n,t,e){var r=new c.Line(n,t),o=i.length;return i.map(function(s,a){var l=s.strict,u=z(s,["strict"]),h=l||e.strict?(a+1)/(o+1):(a+.5)/o,d=r.pointAt(h);return(u.dx||u.dy)&&d.translate(u.dx||0,u.dy||0),Cu(d.round(),0,u)})}var vr,Rm=Object.freeze({__proto__:null,absolute:function(i,n){return i.map(function(t){var e=t.x,r=t.y,o=t.angle;return Cu(bu(n,{x:e,y:r}),o||0)})},ellipse:function(i,n,t){var e=t.start||0,r=t.step||20;return rf(i,n,e,function(o,s){return(o+.5-s/2)*r})},ellipseSpread:function(i,n,t){var e=t.start||0,r=t.step||360/i.length;return rf(i,n,e,function(o){return o*r})},line:function(i,n,t){return vi(i,bu(n,t.start||n.getOrigin()),bu(n,t.end||n.getCorner()),t)},left:function(i,n,t){return vi(i,n.getTopLeft(),n.getBottomLeft(),t)},right:function(i,n,t){return vi(i,n.getTopRight(),n.getBottomRight(),t)},top:function(i,n,t){return vi(i,n.getTopLeft(),n.getTopRight(),t)},bottom:function(i,n,t){return vi(i,n.getBottomLeft(),n.getBottomRight(),t)}});(function(i){i.presets=Rm,i.registry=ae.create({type:"port layout"}),i.registry.register(i.presets,!0)})(vr||(vr={}));var Vm={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function yr(i,n){var t=n||{},e=t.x,r=t.y,o=t.angle,s=t.attrs;return wl({},{angle:o,attrs:s,position:{x:e,y:r}},i,Vm)}function of(i,n,t,e){var r,o,s,a,l=e.offset!=null?e.offset:15,u=n.getCenter().theta(i),h=af(n),d=0;return u<h[1]||u>h[2]?(r=".3em",o=l,s=0,a="start"):u<h[0]?(r="0",o=0,s=-l,t?(d=-90,a="start"):a="middle"):u<h[3]?(r=".3em",o=-l,s=0,a="end"):(r=".6em",o=0,s=l,t?(d=90,a="start"):a="middle"),yr({position:{x:Math.round(o),y:Math.round(s)},angle:d,attrs:{".":{y:r,"text-anchor":a}}},e)}function sf(i,n,t,e){var r,o,s,a,l=e.offset!=null?e.offset:15,u=n.getCenter().theta(i),h=af(n),d=0;return u<h[1]||u>h[2]?(r=".3em",o=-l,s=0,a="end"):u<h[0]?(r=".6em",o=0,s=l,t?(d=90,a="start"):a="middle"):u<h[3]?(r=".3em",o=l,s=0,a="start"):(r="0em",o=0,s=-l,t?(d=-90,a="start"):a="middle"),yr({position:{x:Math.round(o),y:Math.round(s)},angle:d,attrs:{".":{y:r,"text-anchor":a}}},e)}function af(i){var n=i.getCenter(),t=n.theta(i.getTopLeft()),e=n.theta(i.getBottomLeft()),r=n.theta(i.getBottomRight());return[t,n.theta(i.getTopRight()),r,e]}function lf(i,n,t){var e,r=t.offset!=null?t.offset:20,o=new c.Point(0,0),s=-i.theta(o),a=".3em",l=s;return(s+90)%180==0?(e=n?"end":"middle",n||s!==-270||(a="0em")):s>-270&&s<-90?(e="start",l=s-180):e="end",yr({position:i.clone().move(o,r).diff(i).round().round().toJSON(),angle:n?l:0,attrs:{".":{y:a,"text-anchor":e}}},t)}var Ir,jm=Object.freeze({__proto__:null,manual:function(i,n,t){return yr({position:n.getTopLeft()},t)},left:function(i,n,t){return yr({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t)},right:function(i,n,t){return yr({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t)},top:function(i,n,t){return yr({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t)},bottom:function(i,n,t){return yr({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t)},outside:function(i,n,t){return of(i,n,!1,t)},outsideOriented:function(i,n,t){return of(i,n,!0,t)},inside:function(i,n,t){return sf(i,n,!1,t)},insideOriented:function(i,n,t){return sf(i,n,!0,t)},radial:function(i,n,t){return lf(i.diff(n.getCenter()),!1,t)},radialOriented:function(i,n,t){return lf(i.diff(n.getCenter()),!0,t)}});(function(i){i.presets=jm,i.registry=ae.create({type:"port label layout"}),i.registry.register(i.presets,!0)})(Ir||(Ir={})),c.Color=function(){function i(n,t,e,r){return n==null?this.set(255,255,255,1):typeof n=="number"?this.set(n,t,e,r):typeof n=="string"?i.fromString(n)||this:Array.isArray(n)?this.set(n):void this.set(n.r,n.g,n.b,n.a==null?1:n.a)}return i.prototype.blend=function(n,t,e){this.set(n.r+(t.r-n.r)*e,n.g+(t.g-n.g)*e,n.b+(t.b-n.b)*e,n.a+(t.a-n.a)*e)},i.prototype.lighten=function(n){var t=i.lighten(this.toArray(),n);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]},i.prototype.darken=function(n){this.lighten(-n)},i.prototype.set=function(n,t,e,r){var o=Array.isArray(n)?n[0]:n,s=Array.isArray(n)?n[1]:t,a=Array.isArray(n)?n[2]:e,l=Array.isArray(n)?n[3]:r;return this.r=Math.round(Re(o,0,255)),this.g=Math.round(Re(s,0,255)),this.b=Math.round(Re(a,0,255)),this.a=l==null?1:Re(l,0,1),this},i.prototype.toHex=function(){var n=this;return"#"+["r","g","b"].map(function(t){var e=n[t].toString(16);return e.length<2?"0"+e:e}).join("")},i.prototype.toRGBA=function(){return this.toArray()},i.prototype.toHSLA=function(){return i.rgba2hsla(this.r,this.g,this.b,this.a)},i.prototype.toCSS=function(n){var t=this.r+","+this.g+","+this.b+",";return n?"rgb("+t+")":"rgba("+t+","+this.a+")"},i.prototype.toGrey=function(){return i.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)},i.prototype.toArray=function(){return[this.r,this.g,this.b,this.a]},i.prototype.toString=function(){return this.toCSS()},i}(),function(i){function n(h){return new i(W(W([],a(h),!0),[1],!1))}function t(h){var d=h.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(d){var f=d[1].split(/\s*,\s*/).map(function(v){return parseInt(v,10)});return new i(f)}return null}function e(h,d,f){f<0&&++f,f>1&&--f;var v=6*f;return v<1?h+(d-h)*v:2*f<1?d:3*f<2?h+(d-h)*(2/3-f)*6:h}function r(h){var d=h.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(d){var f=d[2].split(/\s*,\s*/),v=(parseFloat(f[0])%360+360)%360/360,b=parseFloat(f[1])/100,w=parseFloat(f[2])/100,P=f[3]==null?1:parseInt(f[3],10);return new i(o(v,b,w,P))}return null}function o(h,d,f,v){var b=Array.isArray(h)?h[0]:h,w=Array.isArray(h)?h[1]:d,P=Array.isArray(h)?h[2]:f,x=Array.isArray(h)?h[3]:v,S=P<=.5?P*(w+1):P+w-P*w,D=2*P-S;return[256*e(D,S,b+1/3),256*e(D,S,b),256*e(D,S,b-1/3),x==null?1:x]}function s(h){return new i(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),h?void 0:parseFloat(Math.random().toFixed(2)))}function a(h){var d=h.indexOf("#")===0?h:"#"+h,f=Number("0x"+d.substr(1));if(d.length!==4&&d.length!==7||Number.isNaN(f))throw new Error("Invalid hex color.");var v=d.length===4?4:8,b=(1<<v)-1,w=["b","g","r"].map(function(){var P=f&b;return f>>=v,v===4?17*P:P});return[w[2],w[1],w[0]]}function l(h,d,f){var v=function(b){return b.length<2?"0"+b:b};return""+v(h.toString(16))+v(d.toString(16))+v(f.toString(16))}function u(h,d){if(typeof h=="string"){var f=h[0]==="#",v=parseInt(f?h.substr(1):h,16),b=Re((v>>16)+d,0,255),w=Re((v>>8&255)+d,0,255);return(f?"#":"")+(Re((255&v)+d,0,255)|w<<8|b<<16).toString(16)}var P=a(u(l(h[0],h[1],h[2]),d));return[P[0],P[1],P[2],h[3]]}i.fromArray=function(h){return new i(h)},i.fromHex=n,i.fromRGBA=t,i.fromHSLA=r,i.fromString=function(h){if(h.startsWith("#"))return n(h);if(h.startsWith("rgb"))return t(h);var d=i.named[h];return d?n(d):r(h)},i.makeGrey=function(h,d){return i.fromArray([h,h,h,d])},i.rgba2hsla=function(h,d,f,v){var b=Array.isArray(h)?h[0]:h,w=Array.isArray(h)?h[1]:d,P=Array.isArray(h)?h[2]:f,x=Array.isArray(h)?h[3]:v,S=Math.max(b,w,P),D=Math.min(b,w,P),N=(S+D)/2,V=0,y=0;if(D!==S){var H=S-D;switch(y=N>.5?H/(2-S-D):H/(S+D),S){case b:V=(w-P)/H+(w<P?6:0);break;case w:V=(P-b)/H+2;break;case P:V=(b-w)/H+4}V/=6}return[V,y,N,x==null?1:x]},i.hsla2rgba=o,i.random=s,i.randomHex=function(){for(var h="#",d=0;d<6;d+=1)h+="0123456789ABCDEF"[Math.floor(16*Math.random())];return h},i.randomRGBA=function(h){return s(h).toString()},i.invert=function(h,d){if(typeof h=="string"){var f=h[0]==="#",v=a(h),b=v[0],w=v[1],P=v[2];return d?.299*b+.587*w+.114*P>186?"#000000":"#ffffff":(f?"#":"")+l(255-b,255-w,255-P)}var x=h[0],S=h[1],D=h[2],N=h[3];return d?.299*x+.587*S+.114*D>186?[0,0,0,N]:[255,255,255,N]:[255-x,255-S,255-D,N]},i.lighten=function(h,d){return u(h,d)},i.darken=function(h,d){return u(h,-d)}}(c.Color||(c.Color={})),(c.Color||(c.Color={})).named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var yi,uf=function(){function i(){this.listeners={}}return i.prototype.on=function(n,t,e){return t==null||(this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(t,e)),this},i.prototype.once=function(n,t,e){var r=this,o=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.off(n,o),yi.call([t,e],s)};return this.on(n,o,this)},i.prototype.off=function(n,t,e){if(!(n||t||e))return this.listeners={},this;var r=this.listeners;return(n?[n]:Object.keys(r)).forEach(function(o){var s=r[o];if(s)if(t||e)for(var a=s.length-2;a>=0;a-=2)t&&s[a]!==t||e&&s[a+1]!==e||s.splice(a,2);else delete r[o]}),this},i.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=!0;if(n!=="*"){var o=this.listeners[n];o!=null&&(r=yi.call(W([],o,!0),t))}var s=this.listeners["*"];return s!=null?Ms([r,yi.call(W([],s,!0),W([n],t,!0))]):r},i.prototype.emit=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.trigger.apply(this,W([n],t,!1))},i}();(function(i){i.call=function(n,t){for(var e=[],r=0;r<n.length;r+=2){var o=As(n[r],n[r+1],Array.isArray(t)?t:[t]);e.push(o)}return Ms(e)}})(yi||(yi={})),c.Disposable=function(){function i(){}return Object.defineProperty(i.prototype,"disposed",{get:function(){return this._disposed===!0},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this._disposed=!0},i}(),(c.Disposable||(c.Disposable={})).dispose=function(){return function(i,n,t){var e=t.value,r=i.__proto__;t.value=function(){this.disposed||(e.call(this),r.dispose.call(this))}}};var cf,Im=function(){function i(n){this.callback=n}return Object.defineProperty(i.prototype,"disposed",{get:function(){return!this.callback},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){if(this.callback){var n=this.callback;this.callback=null,n()}},i}();c.DisposableSet=function(){function i(){this.isDisposed=!1,this.items=new Set}return Object.defineProperty(i.prototype,"disposed",{get:function(){return this.isDisposed},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(n){n.dispose()}),this.items.clear())},i.prototype.contains=function(n){return this.items.has(n)},i.prototype.add=function(n){this.items.add(n)},i.prototype.remove=function(n){this.items.delete(n)},i.prototype.clear=function(){this.items.clear()},i}(),(cf=c.DisposableSet||(c.DisposableSet={})).from=function(i){var n=new cf;return i.forEach(function(t){n.add(t)}),n},c.Basecoat=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n}(uf),(c.Basecoat||(c.Basecoat={})).dispose=c.Disposable.dispose,Ol(c.Basecoat,c.Disposable);var So,Qs,wu,xu,Eu=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"disabled",{get:function(){return this._disabled===!0},enumerable:!1,configurable:!0}),n.prototype.enable=function(){delete this._disabled},n.prototype.disable=function(){this._disabled=!0},n}(c.Basecoat),ta=function(i){function n(){var t=i.call(this)||this;return t.clear(),t}return B(n,i),n.prototype.clear=function(){this.map=new WeakMap,this.arr=[]},n.prototype.has=function(t){return this.map.has(t)},n.prototype.get=function(t){return this.map.get(t)},n.prototype.set=function(t,e){this.map.set(t,e),this.arr.push(t)},n.prototype.delete=function(t){var e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);var r=this.map.get(t);return this.map.delete(t),r},n.prototype.each=function(t){var e=this;this.arr.forEach(function(r){var o=e.map.get(r);t(o,r)})},n.prototype.dispose=function(){this.clear()},_([c.Disposable.dispose()],n.prototype,"dispose",null),n}(c.Disposable);c.PriorityQueue=function(){function i(n){n===void 0&&(n={}),this.comparator=n.comparator||i.defaultComparator,this.index={},this.data=n.data||[],this.heapify()}return i.prototype.isEmpty=function(){return this.data.length===0},i.prototype.insert=function(n,t,e){var r={priority:n,value:t},o=this.data.length-1;return e&&(r.id=e,this.index[e]=o),this.data.push(r),this.bubbleUp(o),this},i.prototype.peek=function(){return this.data[0]?this.data[0].value:null},i.prototype.peekPriority=function(){return this.data[0]?this.data[0].priority:null},i.prototype.updatePriority=function(n,t){var e=this.index[n];if(e===void 0)throw new Error("Node with id '"+n+"' was not found in the heap.");var r=this.data,o=r[e].priority,s=this.comparator(t,o);s<0?(r[e].priority=t,this.bubbleUp(e)):s>0&&(r[e].priority=t,this.bubbleDown(e))},i.prototype.remove=function(){var n=this.data,t=n[0],e=n.pop();return delete this.index[n.length],n.length>0&&(n[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),t?t.value:null},i.prototype.heapify=function(){for(var n=0;n<this.data.length;n+=1)this.bubbleUp(n)},i.prototype.bubbleUp=function(n){for(var t,e,r=this.data,o=n;o>0&&(e=o-1>>>1,this.comparator(r[o].priority,r[e].priority)<0);){t=r[e],r[e]=r[o];var s=r[o].id;s!=null&&(this.index[s]=e),r[o]=t,(s=r[o].id)!=null&&(this.index[s]=o),o=e}},i.prototype.bubbleDown=function(n){for(var t=this.data,e=t.length-1,r=n;;){var o=1+(r<<1),s=o+1,a=r;if(o<=e&&this.comparator(t[o].priority,t[a].priority)<0&&(a=o),s<=e&&this.comparator(t[s].priority,t[a].priority)<0&&(a=s),a===r)break;var l=t[a];t[a]=t[r];var u=t[r].id;u!=null&&(this.index[u]=a),t[r]=l,(u=t[r].id)!=null&&(this.index[u]=r),r=a}},i}(),(c.PriorityQueue||(c.PriorityQueue={})).defaultComparator=function(i,n){return i-n},c.Dijkstra=void 0,(c.Dijkstra||(c.Dijkstra={})).run=function(i,n,t){t===void 0&&(t=function(f,v){return 1});var e={},r={},o={},s=new c.PriorityQueue;for(e[n]=0,Object.keys(i).forEach(function(f){f!==n&&(e[f]=1/0),s.insert(e[f],f,f)});!s.isEmpty();){var a=s.remove();o[a]=!0;for(var l=i[a]||[],u=0;u<l.length;u+=1){var h=l[u];if(!o[h]){var d=e[a]+t(a,h);d<e[h]&&(e[h]=d,r[h]=a,s.updatePriority(h,d))}}}return r},c.Timing=void 0,(So=c.Timing||(c.Timing={})).linear=function(i){return i},So.quad=function(i){return i*i},So.cubic=function(i){return i*i*i},So.inout=function(i){if(i<=0)return 0;if(i>=1)return 1;var n=i*i,t=n*i;return 4*(i<.5?t:3*(i-n)+t-.75)},So.exponential=function(i){return Math.pow(2,10*(i-1))},So.bounce=function(i){for(var n=0,t=1;;n+=t,t/=2)if(i>=(7-4*n)/11){var e=(11-6*n-11*i)/4;return-e*e+t*t}},function(i){i.decorators={reverse:function(n){return function(t){return 1-n(1-t)}},reflect:function(n){return function(t){return .5*(t<.5?n(2*t):2-n(2-2*t))}},clamp:function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),function(r){var o=n(r);return o<t?t:o>e?e:o}},back:function(n){return n===void 0&&(n=1.70158),function(t){return t*t*((n+1)*t-n)}},elastic:function(n){return n===void 0&&(n=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*n/3*t)}}}}(c.Timing||(c.Timing={})),function(i){function n(e){var r,o=e/1;return o<1/2.75?7.5625*o*o:o<2/2.75?7.5625*(r=o-1.5/2.75)*r+.75:o<2.5/2.75?7.5625*(r=o-2.25/2.75)*r+.9375:7.5625*(r=o-2.625/2.75)*r+.984375}function t(e){return 1-n(1-e)}i.easeInSine=function(e){return-1*Math.cos(e*(Math.PI/2))+1},i.easeOutSine=function(e){return Math.sin(e*(Math.PI/2))},i.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},i.easeInQuad=function(e){return e*e},i.easeOutQuad=function(e){return e*(2-e)},i.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},i.easeInCubic=function(e){return e*e*e},i.easeOutCubic=function(e){var r=e-1;return r*r*r+1},i.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},i.easeInQuart=function(e){return e*e*e*e},i.easeOutQuart=function(e){var r=e-1;return 1-r*r*r*r},i.easeInOutQuart=function(e){var r=e-1;return e<.5?8*e*e*e*e:1-8*r*r*r*r},i.easeInQuint=function(e){return e*e*e*e*e},i.easeOutQuint=function(e){var r=e-1;return 1+r*r*r*r*r},i.easeInOutQuint=function(e){var r=e-1;return e<.5?16*e*e*e*e*e:1+16*r*r*r*r*r},i.easeInExpo=function(e){return e===0?0:Math.pow(2,10*(e-1))},i.easeOutExpo=function(e){return e===1?1:1-Math.pow(2,-10*e)},i.easeInOutExpo=function(e){if(e===0||e===1)return e;var r=2*e,o=r-1;return r<1?.5*Math.pow(2,10*o):.5*(2-Math.pow(2,-10*o))},i.easeInCirc=function(e){var r=e/1;return-1*(Math.sqrt(1-r*e)-1)},i.easeOutCirc=function(e){var r=e-1;return Math.sqrt(1-r*r)},i.easeInOutCirc=function(e){var r=2*e,o=r-2;return r<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-o*o)+1)},i.easeInBack=function(e,r){return r===void 0&&(r=1.70158),e*e*((r+1)*e-r)},i.easeOutBack=function(e,r){r===void 0&&(r=1.70158);var o=e/1-1;return o*o*((r+1)*o+r)+1},i.easeInOutBack=function(e,r){r===void 0&&(r=1.70158);var o=2*e,s=o-2,a=1.525*r;return o<1?.5*o*o*((a+1)*o-a):.5*(s*s*((a+1)*s+a)+2)},i.easeInElastic=function(e,r){if(r===void 0&&(r=.7),e===0||e===1)return e;var o=e/1-1,s=1-r,a=s/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*o)*Math.sin((o-a)*(2*Math.PI)/s)},i.easeOutElastic=function(e,r){r===void 0&&(r=.7);var o=1-r,s=2*e;if(e===0||e===1)return e;var a=o/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*s)*Math.sin((s-a)*(2*Math.PI)/o)+1},i.easeInOutElastic=function(e,r){r===void 0&&(r=.65);var o=1-r;if(e===0||e===1)return e;var s=2*e,a=s-1,l=o/(2*Math.PI)*Math.asin(1);return s<1?Math.pow(2,10*a)*Math.sin((a-l)*(2*Math.PI)/o)*-.5:Math.pow(2,-10*a)*Math.sin((a-l)*(2*Math.PI)/o)*.5+1},i.easeOutBounce=n,i.easeInBounce=t,i.easeInOutBounce=function(e){return e<.5?.5*t(2*e):.5*n(2*e-1)+.5}}(c.Timing||(c.Timing={})),c.Interp=void 0,(Qs=c.Interp||(c.Interp={})).number=function(i,n){var t=n-i;return function(e){return i+t*e}},Qs.object=function(i,n){var t=Object.keys(i);return function(e){for(var r={},o=t.length-1;o!==-1;o-=1){var s=t[o];r[s]=i[s]+(n[s]-i[s])*e}return r}},Qs.unit=function(i,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=t.exec(i),r=t.exec(n),o=r?r[1]:"",s=e?+e[1]:0,a=r?+r[1]:0,l=o.indexOf("."),u=l>0?o[1].length-l-1:0,h=a-s,d=e?e[2]:"";return function(f){return(s+h*f).toFixed(u)+d}},Qs.color=function(i,n){var t=parseInt(i.slice(1),16),e=parseInt(n.slice(1),16),r=255&t,o=(255&e)-r,s=65280&t,a=(65280&e)-s,l=16711680&t,u=(16711680&e)-l;return function(h){return"#"+(1<<24|r+o*h&255|s+a*h&65280|l+u*h&16711680).toString(16).slice(1)}},c.LocalStorage=void 0,function(i){var n=We.prefixCls+".storage";function t(l,u,h){l&&up(function(){l(u,h)})}function e(l,u){localStorage.setItem(l,JSON.stringify(u))}function r(l){var u=localStorage.getItem(l);return u?JSON.parse(u):null}function o(l){var u=r(a(l));return u?(u.keys==null&&(u.keys=[]),u):{keys:[]}}function s(l,u){return n+"."+l+".docs."+u}function a(l){return n+"."+l+".index"}i.insert=function(l,u,h){var d=u.id||Vp("doc-"),f=o(l);f.keys.push(d),e(s(l,d),u),e(a(l),f),t(h,null,A(A({},u),{id:d}))},i.find=function(l,u,h){var d=o(l),f=[];if(u==null)d.keys.forEach(function(b){var w=r(s(l,b));w?f.push(w):t(h,new Error("No document found for an ID '"+b+"' from index."))}),t(h,null,f);else if(u.id){var v=r(s(l,u.id));t(h,null,v?[v]:[])}else t(h,null,[])},i.remove=function(l,u,h){var d=o(l);if(u==null)d.keys.forEach(function(v){localStorage.removeItem(s(l,v))}),localStorage.removeItem(a(l)),t(h,null);else if(u.id){var f=d.keys.indexOf(u.id);f>=0&&d.keys.splice(f,1),localStorage.removeItem(s(l,u.id)),e(a(l),d),t(h,null)}}}(c.LocalStorage||(c.LocalStorage={})),c.View=function(i){function n(){var t=i.call(this)||this;return t.cid=xu.uniqueId(),n.views[t.cid]=t,t}return B(n,i),Object.defineProperty(n.prototype,"priority",{get:function(){return 2},enumerable:!1,configurable:!0}),n.prototype.confirmUpdate=function(t,e){return 0},n.prototype.$=function(t){return n.$(t)},n.prototype.empty=function(t){return t===void 0&&(t=this.container),this.$(t).empty(),this},n.prototype.unmount=function(t){return t===void 0&&(t=this.container),this.$(t).remove(),this},n.prototype.remove=function(t){return t===void 0&&(t=this.container),t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete n.views[this.cid]),this.unmount(t),this},n.prototype.onRemove=function(){},n.prototype.setClass=function(t,e){e===void 0&&(e=this.container),e.classList.value=Array.isArray(t)?t.join(" "):t},n.prototype.addClass=function(t,e){return e===void 0&&(e=this.container),this.$(e).addClass(Array.isArray(t)?t.join(" "):t),this},n.prototype.removeClass=function(t,e){return e===void 0&&(e=this.container),this.$(e).removeClass(Array.isArray(t)?t.join(" "):t),this},n.prototype.setStyle=function(t,e){return e===void 0&&(e=this.container),this.$(e).css(t),this},n.prototype.setAttrs=function(t,e){return e===void 0&&(e=this.container),t!=null&&e!=null&&(e instanceof SVGElement?Vt(e,t):this.$(e).attr(t)),this},n.prototype.findAttr=function(t,e){e===void 0&&(e=this.container);for(var r=e;r&&r.nodeType===1;){var o=r.getAttribute(t);if(o!=null)return o;if(r===this.container)return null;r=r.parentNode}return null},n.prototype.find=function(t,e,r){return e===void 0&&(e=this.container),r===void 0&&(r=this.selectors),n.find(t,e,r).elems},n.prototype.findOne=function(t,e,r){e===void 0&&(e=this.container),r===void 0&&(r=this.selectors);var o=this.find(t,e,r);return o.length>0?o[0]:null},n.prototype.findByAttr=function(t,e){e===void 0&&(e=this.container);for(var r=e;r&&r.getAttribute;){var o=r.getAttribute(t);if((o!=null||r===this.container)&&o!=="false")return r;r=r.parentNode}return null},n.prototype.getSelector=function(t,e){var r;if(t===this.container)return typeof e=="string"&&(r="> "+e),r;if(t){var o=Ts(t)+1;r=t.tagName.toLowerCase()+":nth-child("+o+")",e&&(r+=" > "+e),r=this.getSelector(t.parentNode,r)}return r},n.prototype.prefixClassName=function(t){return c.Util.prefix(t)},n.prototype.delegateEvents=function(t,e){var r=this;if(t==null)return this;e||this.undelegateEvents();var o=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(function(s){var a=s.match(o);if(a!=null){var l=r.getEventHandler(t[s]);typeof l=="function"&&r.delegateEvent(a[1],a[2],l)}}),this},n.prototype.undelegateEvents=function(){return this.$(this.container).off(this.getEventNamespace()),this},n.prototype.delegateDocumentEvents=function(t,e){return this.addEventListeners(document,t,e),this},n.prototype.undelegateDocumentEvents=function(){return this.removeEventListeners(document),this},n.prototype.delegateEvent=function(t,e,r){return this.$(this.container).on(t+this.getEventNamespace(),e,r),this},n.prototype.undelegateEvent=function(t,e,r){var o=t+this.getEventNamespace();return e==null?this.$(this.container).off(o):typeof e=="string"?this.$(this.container).off(o,e,r):this.$(this.container).off(o,e),this},n.prototype.addEventListeners=function(t,e,r){var o=this;if(e==null)return this;var s=this.getEventNamespace(),a=this.$(t);return Object.keys(e).forEach(function(l){var u=o.getEventHandler(e[l]);typeof u=="function"&&a.on(l+s,r,u)}),this},n.prototype.removeEventListeners=function(t){return t!=null&&this.$(t).off(this.getEventNamespace()),this},n.prototype.getEventNamespace=function(){return"."+We.prefixCls+"-event-"+this.cid},n.prototype.getEventHandler=function(t){var e,r=this;if(typeof t=="string"){var o=this[t];typeof o=="function"&&(e=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o.call.apply(o,W([r],s,!1))})}else e=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return t.call.apply(t,W([r],s,!1))};return e},n.prototype.getEventTarget=function(t,e){e===void 0&&(e={});var r=t.target,o=t.type,s=t.clientX,a=s===void 0?0:s,l=t.clientY,u=l===void 0?0:l;return e.fromPoint||o==="touchmove"||o==="touchend"?document.elementFromPoint(a,u):r},n.prototype.stopPropagation=function(t){return this.setEventData(t,{propagationStopped:!0}),this},n.prototype.isPropagationStopped=function(t){return this.getEventData(t).propagationStopped===!0},n.prototype.getEventData=function(t){return this.eventData(t)},n.prototype.setEventData=function(t,e){return this.eventData(t,e)},n.prototype.eventData=function(t,e){if(t==null)throw new TypeError("Event object required");var r=t.data,o="__"+this.cid+"__";return e==null?r==null?{}:r[o]||{}:(r==null&&(r=t.data={}),r[o]==null?r[o]=A({},e):r[o]=A(A({},r[o]),e),r[o])},n.prototype.normalizeEvent=function(t){return n.normalizeEvent(t)},n}(c.Basecoat),function(i){function n(t){return Ct(t)}i.$=n,i.createElement=function(t,e){return e?Ie(t||"g"):Ss(t||"div")},i.find=function(t,e,r){if(!t||t===".")return{elems:[e]};if(r){var o=r[t];if(o)return{elems:Array.isArray(o)?o:[o]}}return We.useCSSSelector?{isCSSSelector:!0,elems:n(e).find(t).toArray()}:{elems:[]}},i.normalizeEvent=function(t){var e=t,r=t.originalEvent,o=r&&r.changedTouches&&r.changedTouches[0];if(o){for(var s in t)o[s]===void 0&&(o[s]=t[s]);e=o}var a=e.target;if(a){var l=a.correspondingUseElement;l&&(e.target=l)}return e}}(c.View||(c.View={})),(wu=c.View||(c.View={})).views={},wu.getView=function(i){return wu.views[i]||null},function(i){var n=0;i.uniqueId=function(){var t="v"+n;return n+=1,t}}(xu||(xu={}));function hf(i,n){return n===0?"0%":Math.round(i/n*100)+"%"}function pf(i){return function(n,t,e,r){return t.isEdgeElement(e)?function(o,s,a,l,u){var h=a.getConnection();if(!h)return s;var d=h.closestPointLength(u);if(o){var f=h.length();s.anchor={name:"ratio",args:{ratio:d/f}}}else s.anchor={name:"length",args:{length:d}};return s}(i,n,t,0,r):function(o,s,a,l,u){var h=a.cell,d=h.getAngle(),f=a.getUnrotatedBBoxOfElement(l),v=h.getBBox().getCenter(),b=c.Point.create(u).rotate(d,v),w=b.x-f.x,P=b.y-f.y;return o&&(w=hf(w,f.width),P=hf(P,f.height)),s.anchor={name:"topLeft",args:{dx:w,dy:P,rotate:!0}},s}(i,n,t,e,r)}}var _r,_m=pf(!0),Gm=pf(!1),Hm=Object.freeze({__proto__:null,noop:function(i){return i},pinRelative:_m,pinAbsolute:Gm});(function(i){i.presets=Hm,i.registry=ae.create({type:"connection strategy"}),i.registry.register(i.presets,!0)})(_r||(_r={}));var Au,Um=function(){function i(n){this.view=n,this.clean()}return i.prototype.clean=function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new ta,this.pathCache={}},i.prototype.get=function(n){return this.elemCache.has(n)||this.elemCache.set(n,{}),this.elemCache.get(n)},i.prototype.getData=function(n){var t=this.get(n);return t.data||(t.data={}),t.data},i.prototype.getMatrix=function(n){var t=this.get(n);if(t.matrix==null){var e=this.view.rotatableNode||this.view.container;t.matrix=Wn(n,e)}return ve(t.matrix)},i.prototype.getShape=function(n){var t=this.get(n);return t.shape==null&&(t.shape=lu(n)),t.shape.clone()},i.prototype.getBoundingRect=function(n){var t=this.get(n);return t.boundingRect==null&&(t.boundingRect=ye(n)),t.boundingRect.clone()},i}();c.Markup=void 0,function(i){function n(o){return o!=null&&typeof o=="string"}function t(o){return(""+o).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}function e(o,s){s===void 0&&(s={ns:pe.svg});for(var a=document.createDocumentFragment(),l={},u={},h=[{markup:Array.isArray(o)?o:[o],parent:a,ns:s.ns}],d=function(){var f=h.pop(),v=f.ns||pe.svg,b=f.markup,w=f.parent;b.forEach(function(P){var x=P.tagName;if(!x)throw new TypeError("Invalid tagName");P.ns&&(v=P.ns);var S=v===pe.svg,D=v?Ss(x,v):_l(x),N=P.attrs;N&&(S?Vt(D,Co(N)):Ct(D).attr(N));var V=P.style;V&&Ct(D).css(V);var y=P.className;y!=null&&D.setAttribute("class",Array.isArray(y)?y.join(" "):y),P.textContent&&(D.textContent=P.textContent);var H=P.selector;if(H!=null){if(u[H])throw new TypeError("Selector must be unique");u[H]=D}if(P.groupSelector){var I=P.groupSelector;Array.isArray(I)||(I=[I]),I.forEach(function(J){l[J]||(l[J]=[]),l[J].push(D)})}w.appendChild(D);var X=P.children;Array.isArray(X)&&h.push({ns:v,markup:X,parent:D})})};h.length>0;)d();return Object.keys(l).forEach(function(f){if(u[f])throw new Error("Ambiguous group selector");u[f]=l[f]}),{fragment:a,selectors:u,groups:l}}function r(o){return o instanceof SVGElement?Ie("g"):_l("div")}i.isJSONMarkup=function(o){return o!=null&&!n(o)},i.isStringMarkup=n,i.clone=function(o){return o==null||n(o)?o:se(o)},i.sanitize=t,i.parseStringMarkup=function(o){var s=document.createDocumentFragment();return zl(t(o),{raw:!0}).forEach(function(a){s.appendChild(a)}),{fragment:s,selectors:{},groups:{}}},i.parseJSONMarkup=e,i.renderMarkup=function(o){if(n(o)){var s=c.Vector.createVectors(o),a=s.length;if(a===1)return{elem:s[0].node};if(a>1){var l=r(s[0].node);return s.forEach(function(f){l.appendChild(f.node)}),{elem:l}}return{}}var u=e(o),h=u.fragment,d=null;return h.childNodes.length>1?(d=r(h.firstChild)).appendChild(h):d=h.firstChild,{elem:d,selectors:u.selectors}},i.parseLabelStringMarkup=function(o){for(var s=c.Vector.createVectors(o),a=document.createDocumentFragment(),l=0,u=s.length;l<u;l+=1){var h=s[l].node;a.appendChild(h)}return{fragment:a,selectors:{}}}}(c.Markup||(c.Markup={})),function(i){function n(e,r,o){if(e!=null){var s=void 0,a=e.tagName.toLowerCase();if(e===r)return s=typeof o=="string"?"> "+a+" > "+o:"> "+a;var l=e.parentNode;return l&&l.childNodes.length>1?s=a+":nth-child("+(Ts(e)+1)+")":s=a,o&&(s+=" > "+o),n(e.parentNode,r,s)}return o}function t(e,r,o){if(e.nodeName==="#text")return null;var s=null,a=null,l=null,u=!1,h={tagName:e.tagName};if(e.attributes){l={};for(var d=0,f=e.attributes.length;d<f;d+=1){var v=e.attributes[d],b=v.nodeName,w=v.nodeValue;b==="selector"?s=w:b==="groupSelector"?a=w:b==="class"?h.attrs={class:w}:l[b]=w}}return s==null&&(u=!0,s=n(e,r)),e.namespaceURI&&(h.ns=e.namespaceURI),h.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?h.ns=pe.xhtml:o&&(h.ns=o)),s&&(h.selector=s),a!=null&&(h.groupSelector=a),{markup:h,attrs:l,isCSSSelector:u}}i.getSelector=n,i.xml2json=function(e){var r=Gl(i.sanitize(e),{mimeType:"image/svg+xml"}),o=Array.prototype.slice.call(r.childNodes),s={},a=new WeakMap,l=function(u,h,d){var f=t(u,h,d);if(f!=null){var v=f.markup,b=f.attrs,w=f.isCSSSelector;if(a.set(u,v),v.selector&&b!=null&&(Object.keys(b).length&&(s[v.selector]=b),w&&delete v.selector),u.childNodes&&u.childNodes.length>0)for(var P=0,x=u.childNodes.length;P<x;P+=1){var S=u.childNodes[P],D=l(S,h,v.ns);D&&(v.children==null&&(v.children=[]),v.children.push(D))}return v}var N=a.get(u.parentNode);N&&u.textContent&&(N.textContent=u.textContent)};return{markup:o.map(function(u){return l(u,u)}).filter(function(u){return u!=null}),attrs:s}}}(c.Markup||(c.Markup={})),(Au=c.Markup||(c.Markup={})).getPortContainerMarkup=function(){return"g"},Au.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},Au.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}},function(i){i.getEdgeMarkup=function(){return i.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)},i.getEdgeToolMarkup=function(){return i.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)},i.getEdgeVertexMarkup=function(){return i.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)},i.getEdgeArrowheadMarkup=function(){return i.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}}(c.Markup||(c.Markup={})),function(i){i.getForeignObjectMarkup=function(n){return n===void 0&&(n=!1),{tagName:"foreignObject",selector:"fo",children:[{ns:pe.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:pe.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:n?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(c.Markup||(c.Markup={}));var ea=function(){function i(n){this.view=n}return Object.defineProperty(i.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),i.prototype.getDefinition=function(n){return this.cell.getAttrDefinition(n)},i.prototype.processAttrs=function(n,t){var e,r,o,s,a,l=this,u=[];return Object.keys(t).forEach(function(h){var d=t[h],f=l.getDefinition(h),v=dt(An.isValidDefinition,l.view,f,d,{elem:n,attrs:t,cell:l.cell,view:l.view});if(f&&v)typeof f=="string"?(e==null&&(e={}),e[f]=d):d!==null&&u.push({name:h,definition:f});else{e==null&&(e={});var b=ql.includes(h)?h:Bl(h);e[b]=d}}),u.forEach(function(h){var d=h.name,f=h.definition,v=t[d];typeof f.set=="function"&&(!oi(n)&&i.DELAY_ATTRS.includes(d)?(a==null&&(a={}),a[d]=v):(r==null&&(r={}),r[d]=v)),typeof f.offset=="function"&&(o==null&&(o={}),o[d]=v),typeof f.position=="function"&&(s==null&&(s={}),s[d]=v)}),{raw:t,normal:e,set:r,offset:o,position:s,delay:a}},i.prototype.mergeProcessedAttrs=function(n,t){n.set=A(A({},n.set),t.set),n.position=A(A({},n.position),t.position),n.offset=A(A({},n.offset),t.offset);var e=n.normal&&n.normal.transform;e!=null&&t.normal&&(t.normal.transform=e),n.normal=t.normal},i.prototype.findAttrs=function(n,t,e,r){var o=[],s=new ta;return Object.keys(n).forEach(function(a){var l=n[a];if(qe(l)){var u=c.View.find(a,t,r),h=u.isCSSSelector,d=u.elems;e[a]=d;for(var f=0,v=d.length;f<v;f+=1){var b=d[f],w=r&&r[a]===b,P=s.get(b);if(P){P.array||(o.push(b),P.array=!0,P.attrs=[P.attrs],P.priority=[P.priority]);var x=P.attrs,S=P.priority;if(w)x.unshift(l),S.unshift(-1);else{var D=kp(S,h?-1:v);x.splice(D,0,l),S.splice(D,0,v)}}else s.set(b,{elem:b,attrs:l,priority:w?-1:v,array:!1})}}}),o.forEach(function(a){var l=s.get(a),u=l.attrs;l.attrs=u.reduceRight(function(h,d){return Jt(h,d)},{})}),s},i.prototype.updateRelativeAttrs=function(n,t,e,r){var o=this,s=t.raw||{},a=t.normal||{},l=t.set,u=t.position,h=t.offset,d=t.delay,f=function(){return{elem:n,cell:o.cell,view:o.view,attrs:s,refBBox:e.clone()}};if(l!=null&&Object.keys(l).forEach(function(I){var X=l[I],J=o.getDefinition(I);if(J!=null){var Z=dt(J.set,o.view,X,f());typeof Z=="object"?a=A(A({},a),Z):Z!=null&&(a[I]=Z)}}),oi(n))this.view.setAttrs(a,n);else{var v=a.transform,b=Ao(v?""+v:null),w=new c.Point(b.e,b.f);v&&(delete a.transform,b.e=0,b.f=0);var P=1,x=1;if(u||h){var S=this.view.getScaleOfElement(n,r.scalableNode);P=S.sx,x=S.sy}var D=!1;u!=null&&Object.keys(u).forEach(function(I){var X=u[I],J=o.getDefinition(I);if(J!=null){var Z=dt(J.position,o.view,X,f());Z!=null&&(D=!0,w.translate(c.Point.create(Z).scale(P,x)))}}),this.view.setAttrs(a,n);var N=!1;if(h!=null){var V=this.view.getBoundingRectOfElement(n);if(V.width>0&&V.height>0){var y=_e(V,b).scale(1/P,1/x);Object.keys(h).forEach(function(I){var X=h[I],J=o.getDefinition(I);if(J!=null){var Z=dt(J.offset,o.view,X,{elem:n,cell:o.cell,view:o.view,attrs:s,refBBox:y});Z!=null&&(N=!0,w.translate(c.Point.create(Z).scale(P,x)))}})}}(v!=null||D||N)&&(w.round(1),b.e=w.x,b.f=w.y,n.setAttribute("transform",pr(b)));var H=function(){d!=null&&Object.keys(d).forEach(function(I){var X,J=d[I],Z=o.getDefinition(I);if(Z!=null){var it=dt(Z.set,o.view,J,f());typeof it=="object"?o.view.setAttrs(it,n):it!=null&&o.view.setAttrs(((X={})[I]=it,X),n)}})};r.forceSync?H():c.Scheduler.scheduleTask(H)}},i.prototype.update=function(n,t,e){var r=this,o={},s=this.findAttrs(e.attrs||t,n,o,e.selectors),a=e.attrs?this.findAttrs(t,n,o,e.selectors):s,l=[];s.each(function(d){var f=d.elem,v=d.attrs,b=r.processAttrs(f,v);if(b.set==null&&b.position==null&&b.offset==null&&b.delay==null)r.view.setAttrs(b.normal,f);else{var w=a.get(f),P=w?w.attrs:null,x=P&&v.ref==null?P.ref:v.ref,S=void 0;if(x){if(!(S=(o[x]||r.view.find(x,n,e.selectors))[0]))throw new Error('"'+x+'" reference does not exist.')}else S=null;var D={node:f,refNode:S,attributes:P,processedAttributes:b},N=l.findIndex(function(V){return V.refNode===f});N>-1?l.splice(N,0,D):l.push(D)}});var u,h=new ta;l.forEach(function(d){var f,v,b=d.node,w=d.refNode,P=w!=null&&e.rotatableNode!=null&&Ns(e.rotatableNode,w);if(w&&(f=h.get(w)),!f){var x=P?e.rotatableNode:n;f=w?ye(w,{target:x}):e.rootBBox,w&&h.set(w,f)}e.attrs&&d.attributes?(v=r.processAttrs(b,d.attributes),r.mergeProcessedAttrs(v,d.processedAttributes)):v=d.processedAttributes;var S=f;P&&e.rotatableNode!=null&&!e.rotatableNode.contains(b)&&(u||(u=Ao(Vt(e.rotatableNode,"transform"))),S=_e(f,u)),l.find(function(D){return D.refNode===b})&&(e.forceSync=!0),r.updateRelativeAttrs(b,v,S,e)})},i}();(function(i){i.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(ea||(ea={}));var df,mi,ff=function(){function i(n,t,e){e===void 0&&(e=[]),this.view=n;var r={},o={},s=0;Object.keys(t).forEach(function(l){var u=t[l];Array.isArray(u)||(u=[u]),u.forEach(function(h){var d=r[h];d||(s+=1,d=r[h]=1<<s),o[l]|=d})});var a=e;if(Array.isArray(a)||(a=[a]),a.forEach(function(l){r[l]||(s+=1,r[l]=1<<s)}),s>25)throw new Error("Maximum number of flags exceeded.");this.flags=r,this.attrs=o,this.bootstrap=e}return Object.defineProperty(i.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),i.prototype.getFlag=function(n){var t=this.flags;return t==null?0:Array.isArray(n)?n.reduce(function(e,r){return e|t[r]},0):0|t[n]},i.prototype.hasAction=function(n,t){return n&this.getFlag(t)},i.prototype.removeAction=function(n,t){return n^n&this.getFlag(t)},i.prototype.getBootstrapFlag=function(){return this.getFlag(this.bootstrap)},i.prototype.getChangedFlag=function(){var n=this,t=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){n.cell.hasChanged(e)&&(t|=n.attrs[e])}),t},i}();function gf(i,n,t,e){return dt(_r.presets.pinRelative,this.graph,{},n,t,i,this.cell,e,{}).anchor}function vf(i,n){return n?i.cell.getBBox():i.cell.isEdge()?i.getConnection().bbox():i.getUnrotatedBBoxOfElement(i.container)}c.CellView=function(i){function n(t,e){e===void 0&&(e={});var r=i.call(this)||this;return r.cell=t,r.options=r.ensureOptions(e),r.graph=r.options.graph,r.attr=new ea(r),r.flag=new ff(r,r.options.actions,r.options.bootstrap),r.cache=new Um(r),r.setContainer(r.ensureContainer()),r.setup(),r.$(r.container).data("view",r),r.init(),r}return B(n,i),n.getDefaults=function(){return this.defaults},n.config=function(t){this.defaults=this.getOptions(t)},n.getOptions=function(t){var e=function(h,d){return d!=null?Dl(W(W([],Array.isArray(h)?h:[h],!0),Array.isArray(d)?d:[d],!0)):Array.isArray(h)?W([],h,!0):[h]},r=se(this.getDefaults()),o=t.bootstrap,s=t.actions,a=t.events,l=t.documentEvents,u=z(t,["bootstrap","actions","events","documentEvents"]);return o&&(r.bootstrap=e(r.bootstrap,o)),s&&Object.keys(s).forEach(function(h){var d=s[h],f=r.actions[h];d&&f?r.actions[h]=e(f,d):d&&(r.actions[h]=e(d))}),a&&(r.events=A(A({},r.events),a)),t.documentEvents&&(r.documentEvents=A(A({},r.documentEvents),l)),Jt(r,u)},Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.onRemove=function(){this.removeTools()},Object.defineProperty(n.prototype,"priority",{get:function(){return this.options.priority},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rootSelector",{get:function(){return this.options.rootSelector},enumerable:!1,configurable:!0}),n.prototype.getConstructor=function(){return this.constructor},n.prototype.ensureOptions=function(t){return this.getConstructor().getOptions(t)},n.prototype.getContainerTagName=function(){return this.options.isSvgElement?"g":"div"},n.prototype.getContainerStyle=function(){},n.prototype.getContainerAttrs=function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}},n.prototype.getContainerClassName=function(){return this.prefixClassName("cell")},n.prototype.ensureContainer=function(){return c.View.createElement(this.getContainerTagName(),this.options.isSvgElement)},n.prototype.setContainer=function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);var e=this.getContainerAttrs();e!=null&&this.setAttrs(e,t);var r=this.getContainerStyle();r!=null&&this.setStyle(r,t);var o=this.getContainerClassName();o!=null&&this.addClass(o,t)}return this},n.prototype.isNodeView=function(){return!1},n.prototype.isEdgeView=function(){return!1},n.prototype.render=function(){return this},n.prototype.confirmUpdate=function(t,e){return 0},n.prototype.getBootstrapFlag=function(){return this.flag.getBootstrapFlag()},n.prototype.getFlag=function(t){return this.flag.getFlag(t)},n.prototype.hasAction=function(t,e){return this.flag.hasAction(t,e)},n.prototype.removeAction=function(t,e){return this.flag.removeAction(t,e)},n.prototype.handleAction=function(t,e,r,o){if(this.hasAction(t,e)){r();var s=[e];return o&&(typeof o=="string"?s.push(o):s.push.apply(s,o)),this.removeAction(t,s)}return t},n.prototype.setup=function(){var t=this;this.cell.on("changed",function(e){var r=e.options;return t.onAttrsChange(r)})},n.prototype.onAttrsChange=function(t){var e=this.flag.getChangedFlag();!t.updated&&e&&(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,e,this.priority,t))},n.prototype.parseJSONMarkup=function(t,e){var r=c.Markup.parseJSONMarkup(t),o=r.selectors,s=this.rootSelector;if(e&&s){if(o[s])throw new Error("Invalid root selector");o[s]=e}return r},n.prototype.can=function(t){var e=this.graph.options.interacting;if(typeof e=="function"&&(e=dt(e,this.graph,this)),typeof e=="object"){var r=e[t];return typeof r=="function"&&(r=dt(r,this.graph,this)),r!==!1}return typeof e=="boolean"&&e},n.prototype.cleanCache=function(){return this.cache.clean(),this},n.prototype.getCache=function(t){return this.cache.get(t)},n.prototype.getDataOfElement=function(t){return this.cache.getData(t)},n.prototype.getMatrixOfElement=function(t){return this.cache.getMatrix(t)},n.prototype.getShapeOfElement=function(t){return this.cache.getShape(t)},n.prototype.getScaleOfElement=function(t,e){var r,o;if(e&&e.contains(t)){var s=Xn(e);r=1/s.sx,o=1/s.sy}else r=1,o=1;return{sx:r,sy:o}},n.prototype.getBoundingRectOfElement=function(t){return this.cache.getBoundingRect(t)},n.prototype.getBBoxOfElement=function(t){var e=this.getBoundingRectOfElement(t),r=this.getMatrixOfElement(t),o=this.getRootRotatedMatrix();return _e(e,this.getRootTranslatedMatrix().multiply(o).multiply(r))},n.prototype.getUnrotatedBBoxOfElement=function(t){var e=this.getBoundingRectOfElement(t),r=this.getMatrixOfElement(t);return _e(e,this.getRootTranslatedMatrix().multiply(r))},n.prototype.getBBox=function(t){var e;if(t===void 0&&(t={}),t.useCellGeometry){var r=this.cell,o=r.isNode()?r.getAngle():0;e=r.getBBox().bbox(o)}else e=this.getBBoxOfElement(this.container);return this.graph.localToGraph(e)},n.prototype.getRootTranslatedMatrix=function(){var t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return ve().translate(e.x,e.y)},n.prototype.getRootRotatedMatrix=function(){var t=ve(),e=this.cell,r=e.isNode()?e.getAngle():0;if(r){var o=e.getBBox(),s=o.width/2,a=o.height/2;t=t.translate(s,a).rotate(r).translate(-s,-a)}return t},n.prototype.findMagnet=function(t){return t===void 0&&(t=this.container),this.findByAttr("magnet",t)},n.prototype.updateAttrs=function(t,e,r){r===void 0&&(r={}),r.rootBBox==null&&(r.rootBBox=new c.Rectangle),r.selectors==null&&(r.selectors=this.selectors),this.attr.update(t,e,r)},n.prototype.isEdgeElement=function(t){return this.cell.isEdge()&&(t==null||t===this.container)},n.prototype.prepareHighlight=function(t,e){e===void 0&&(e={});var r=t&&this.$(t)[0]||this.container;return e.partial=r===this.container,r},n.prototype.highlight=function(t,e){e===void 0&&(e={});var r=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:r,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:r,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:r,options:e,view:this,node:this.cell,cell:this.cell}),this},n.prototype.unhighlight=function(t,e){e===void 0&&(e={});var r=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:r,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:r,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:r,options:e,view:this,edge:this.cell,cell:this.cell}),this},n.prototype.notifyUnhighlight=function(t,e){},n.prototype.getEdgeTerminal=function(t,e,r,o,s){var a=this.cell,l=this.findAttr("port",t),u=t.getAttribute("data-selector"),h={cell:a.id};return u!=null&&(h.magnet=u),l!=null?(h.port=l,a.isNode()&&(a.hasPort(l)||u!=null||(h.selector=this.getSelector(t)))):u==null&&this.container!==t&&(h.selector=this.getSelector(t)),this.customizeEdgeTerminal(h,t,e,r,o,s)},n.prototype.customizeEdgeTerminal=function(t,e,r,o,s,a){var l=s.getStrategy()||this.graph.options.connecting.strategy;if(l){var u=typeof l=="string"?l:l.name,h=typeof l=="string"?{}:l.args||{},d=_r.registry;if(u){var f=d.get(u);if(f==null)return d.onNotFound(u);var v=dt(f,this.graph,t,this,e,new c.Point(r,o),s,a,h);if(v)return v}}return t},n.prototype.getMagnetFromEdgeTerminal=function(t){var e,r=this.cell,o=this.container,s=t.port,a=t.magnet;return s!=null&&r.isNode()&&r.hasPort(s)?e=this.findPortElem(s,a)||o:(a||(a=t.selector),a||s==null||(a='[port="'+s+'"]'),e=this.findOne(a,o,this.selectors)),e},n.prototype.animate=function(t,e){var r=typeof t=="string"?this.findOne(t):t;if(r==null)throw new Error("Invalid animation element.");var o=r.parentNode,s=c.Vector.create(r);o||s.appendTo(this.graph.view.stage);var a=e.complete;return e.complete=function(l){o||Ln(r),a&&a(l)},s.animate(e)},n.prototype.animateTransform=function(t,e){var r=typeof t=="string"?this.findOne(t):t;if(r==null)throw new Error("Invalid animation element.");var o=r.parentNode,s=c.Vector.create(r);o||s.appendTo(this.graph.view.stage);var a=e.complete;return e.complete=function(l){o||Ln(r),a&&a(l)},s.animateTransform(e)},n.prototype.hasTools=function(t){var e=this.tools;return e!=null&&(t==null||e.name===t)},n.prototype.addTools=function(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){var e=c.ToolsView.isToolsView(t)?t:new c.ToolsView(t);this.tools=e,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),e.config({view:this}),e.mount()}return this},n.prototype.updateTools=function(t){return t===void 0&&(t={}),this.tools&&this.tools.update(t),this},n.prototype.removeTools=function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this},n.prototype.hideTools=function(){return this.tools&&this.tools.hide(),this},n.prototype.showTools=function(){return this.tools&&this.tools.show(),this},n.prototype.renderTools=function(){var t=this.cell.getTools();return this.addTools(t),this},n.prototype.notify=function(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this},n.prototype.getEventArgs=function(t,e,r){var o=this,s=o.cell;return e==null||r==null?{e:t,view:o,cell:s}:{e:t,x:e,y:r,view:o,cell:s}},n.prototype.onClick=function(t,e,r){this.notify("cell:click",this.getEventArgs(t,e,r))},n.prototype.onDblClick=function(t,e,r){this.notify("cell:dblclick",this.getEventArgs(t,e,r))},n.prototype.onContextMenu=function(t,e,r){this.notify("cell:contextmenu",this.getEventArgs(t,e,r))},n.prototype.onMouseDown=function(t,e,r){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,r))},n.prototype.onMouseUp=function(t,e,r){this.notify("cell:mouseup",this.getEventArgs(t,e,r)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)},n.prototype.onMouseMove=function(t,e,r){this.notify("cell:mousemove",this.getEventArgs(t,e,r))},n.prototype.onMouseOver=function(t){this.notify("cell:mouseover",this.getEventArgs(t))},n.prototype.onMouseOut=function(t){this.notify("cell:mouseout",this.getEventArgs(t))},n.prototype.onMouseEnter=function(t){this.notify("cell:mouseenter",this.getEventArgs(t))},n.prototype.onMouseLeave=function(t){this.notify("cell:mouseleave",this.getEventArgs(t))},n.prototype.onMouseWheel=function(t,e,r,o){this.notify("cell:mousewheel",A({delta:o},this.getEventArgs(t,e,r)))},n.prototype.onCustomEvent=function(t,e,r,o){this.notify("cell:customevent",A({name:e},this.getEventArgs(t,r,o))),this.notify(e,A({},this.getEventArgs(t,r,o)))},n.prototype.onMagnetMouseDown=function(t,e,r,o){},n.prototype.onMagnetDblClick=function(t,e,r,o){},n.prototype.onMagnetContextMenu=function(t,e,r,o){},n.prototype.onLabelMouseDown=function(t,e,r){},n.prototype.checkMouseleave=function(t){var e=this.graph;e.renderer.isAsync()&&e.renderer.dumpView(this);var r=this.getEventTarget(t,{fromPoint:!0}),o=e.renderer.findViewByElem(r);o!==this&&(this.onMouseLeave(t),o&&o.onMouseEnter(t))},n.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},n}(c.View),(df=c.CellView||(c.CellView={})).Flag=ff,df.Attr=ea,function(i){i.toStringTag="X6."+i.name,i.isCellView=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"}}(c.CellView||(c.CellView={})),function(i){i.priority=function(n){return function(t){t.config({priority:n})}},i.bootstrap=function(n){return function(t){t.config({bootstrap:n})}}}(c.CellView||(c.CellView={})),function(i){i.registry=ae.create({type:"view"})}(c.CellView||(c.CellView={})),c.ToolsView=function(i){function n(t){t===void 0&&(t={});var e=i.call(this)||this;return e.svgContainer=e.createContainer(!0,t),e.htmlContainer=e.createContainer(!1,t),e.config(t),e}return B(n,i),Object.defineProperty(n.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.createContainer=function(t,e){var r=t?c.View.createElement("g",!0):c.View.createElement("div",!1);return Rt(r,this.prefixClassName("cell-tools")),e.className&&Rt(r,e.className),r},n.prototype.config=function(t){if(this.options=A(A({},this.options),t),!c.CellView.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(Rt(this.svgContainer,this.prefixClassName("edge-tools")),Rt(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(Rt(this.svgContainer,this.prefixClassName("node-tools")),Rt(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];var r=[];e.forEach(function(d){n.ToolItem.isToolItem(d)?d.name==="vertices"?r.unshift(d):r.push(d):(typeof d=="object"?d.name:d)==="vertices"?r.unshift(d):r.push(d)});for(var o=0;o<r.length;o+=1){var s=r[o],a=void 0;if(n.ToolItem.isToolItem(s))a=s;else{var l=typeof s=="object"?s.name:s,u=typeof s=="object"&&s.args||{};if(l){if(this.cell.isNode()){if(!(h=Gr.registry.get(l)))return Gr.registry.onNotFound(l);a=new h(u)}else if(this.cell.isEdge()){var h;if(!(h=Hr.registry.get(l)))return Hr.registry.onNotFound(l);a=new h(u)}}}a&&(a.config(this.cellView,this),a.render(),(a.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a))}return this},n.prototype.update=function(t){t===void 0&&(t={});var e=this.tools;return e&&e.forEach(function(r){t.toolId!==r.cid&&r.isVisible()&&r.update()}),this},n.prototype.focus=function(t){var e=this.tools;return e&&e.forEach(function(r){t===r?r.show():r.hide()}),this},n.prototype.blur=function(t){var e=this.tools;return e&&e.forEach(function(r){r===t||r.isVisible()||(r.show(),r.update())}),this},n.prototype.hide=function(){return this.focus(null)},n.prototype.show=function(){return this.blur(null)},n.prototype.remove=function(){var t=this.tools;return t&&(t.forEach(function(e){return e.remove()}),this.tools=null),Ln(this.svgContainer),Ln(this.htmlContainer),i.prototype.remove.call(this)},n.prototype.mount=function(){var t=this.tools,e=this.cellView;if(e&&t){var r=t.some(function(s){return s.options.isSVGElement!==!1}),o=t.some(function(s){return s.options.isSVGElement===!1});r&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),o&&this.graph.container.appendChild(this.htmlContainer)}return this},n}(c.View),(mi=c.ToolsView||(c.ToolsView={})).toStringTag="X6."+mi.name,mi.isToolsView=function(i){if(i==null)return!1;if(i instanceof mi)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===mi.toStringTag)&&t.graph!=null&&t.cell!=null&&typeof t.config=="function"&&typeof t.update=="function"&&typeof t.focus=="function"&&typeof t.blur=="function"&&typeof t.show=="function"&&typeof t.hide=="function"},function(i){var n=function(t){function e(r){r===void 0&&(r={});var o=t.call(this)||this;return o.visible=!0,o.options=o.getOptions(r),o.container=c.View.createElement(o.options.tagName||"g",o.options.isSVGElement!==!1),Rt(o.container,o.prefixClassName("cell-tool")),typeof o.options.className=="string"&&Rt(o.container,o.options.className),o.init(),o}return B(e,t),e.getDefaults=function(){return this.defaults},e.config=function(r){this.defaults=this.getOptions(r)},e.getOptions=function(r){return Jt(se(this.getDefaults()),r)},Object.defineProperty(e.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return e.toStringTag},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.getOptions=function(r){return this.constructor.getOptions(r)},e.prototype.delegateEvents=function(){return this.options.events&&t.prototype.delegateEvents.call(this,this.options.events),this},e.prototype.config=function(r,o){return this.cellView=r,this.parent=o,this.stamp(this.container),this.cell.isEdge()?Rt(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&Rt(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this},e.prototype.render=function(){this.empty();var r=this.options.markup;if(r){var o=c.Markup.isStringMarkup(r)?c.Markup.parseStringMarkup(r):c.Markup.parseJSONMarkup(r);this.container.appendChild(o.fragment),this.childNodes=o.selectors}return this.onRender(),this},e.prototype.onRender=function(){},e.prototype.update=function(){return this},e.prototype.stamp=function(r){r===void 0&&(r=this.container),r&&r.setAttribute("data-cell-id",this.cellView.cell.id)},e.prototype.show=function(){return this.container.style.display="",this.visible=!0,this},e.prototype.hide=function(){return this.container.style.display="none",this.visible=!1,this},e.prototype.isVisible=function(){return!!this.visible},e.prototype.focus=function(){var r=this.options.focusOpacity;return r!=null&&Number.isFinite(r)&&(this.container.style.opacity=""+r),this.parent.focus(this),this},e.prototype.blur=function(){return this.container.style.opacity="",this.parent.blur(this),this},e.prototype.guard=function(r){return this.graph==null||this.cellView==null||this.graph.view.guard(r,this.cellView)},e.defaults={isSVGElement:!0,tagName:"g"},e}(c.View);i.ToolItem=n,function(t){var e=0;t.define=function(r){var o,s=bs((o=r.name)?ws(o):"CustomTool"+(e+=1),this);return s.config(r),s}}(n=i.ToolItem||(i.ToolItem={})),function(t){t.toStringTag="X6."+t.name,t.isToolItem=function(e){if(e==null)return!1;if(e instanceof t)return!0;var r=e[Symbol.toStringTag],o=e;return(r==null||r===t.toStringTag)&&o.graph!=null&&o.cell!=null&&typeof o.config=="function"&&typeof o.update=="function"&&typeof o.focus=="function"&&typeof o.blur=="function"&&typeof o.show=="function"&&typeof o.hide=="function"&&typeof o.isVisible=="function"}}(n=i.ToolItem||(i.ToolItem={}))}(c.ToolsView||(c.ToolsView={}));var mr=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.onRender=function(){Rt(this.container,this.prefixClassName("cell-tool-button")),this.update()},n.prototype.update=function(){return this.updatePosition(),this},n.prototype.updatePosition=function(){var t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();Vr(this.container,t,{absolute:!0})},n.prototype.getNodeMatrix=function(){var t=this.cellView,e=this.options,r=e.x,o=r===void 0?0:r,s=e.y,a=s===void 0?0:s,l=e.offset,u=e.useCellGeometry,h=e.rotate,d=vf(t,u),f=t.cell.getAngle();h||(d=d.bbox(f));var v=0,b=0;typeof l=="number"?(v=l,b=l):typeof l=="object"&&(v=l.x,b=l.y),o=cn(o,d.width),a=cn(a,d.height);var w=ve().translate(d.x+d.width/2,d.y+d.height/2);return h&&(w=w.rotate(f)),w=w.translate(o+v-d.width/2,a+b-d.height/2)},n.prototype.getEdgeMatrix=function(){var t,e,r,o=this.cellView,s=this.options,a=s.offset,l=a===void 0?0:a,u=s.distance,h=u===void 0?0:u,d=s.rotate,f=cn(h,1);(t=f>=0&&f<=1?o.getTangentAtRatio(f):o.getTangentAtLength(f))?(e=t.start,r=t.vector().vectorAngle(new c.Point(1,0))||0):(e=o.getConnection().start,r=0);var v=ve().translate(e.x,e.y).rotate(r);return v=typeof l=="object"?v.translate(l.x||0,l.y||0):v.translate(0,l),d||(v=v.rotate(-r)),v},n.prototype.onMouseDown=function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.onClick;typeof e=="function"&&dt(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}},n}(c.ToolsView.ToolItem);(function(i){i.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(mr||(mr={})),function(i){i.Remove=i.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(n){var t=n.view,e=n.btn;e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})}(mr||(mr={}));var na=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.onRender=function(){if(Rt(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var t=this.options.attrs,e=t.class,r=z(t,["class"]);Vt(this.container,Co(r)),e&&Rt(this.container,e)}this.update()},n.prototype.update=function(){var t=this.cellView,e=this.options,r=e.useCellGeometry,o=e.rotate,s=$e(e.padding),a=vf(t,r).moveAndExpand({x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom}),l=t.cell;if(l.isNode()){var u=l.getAngle();if(u)if(o){var h=l.getBBox().getCenter();Ws(this.container,u,h.x,h.y,{absolute:!0})}else a=a.bbox(u)}return Vt(this.container,a.toJSON()),this},n}(c.ToolsView.ToolItem);(function(i){i.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(na||(na={}));var bi=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.handles=[],t}return B(n,i),Object.defineProperty(n.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),n.prototype.onRender=function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this},n.prototype.update=function(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this},n.prototype.resetHandles=function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach(function(r){t.stopHandleListening(r),r.remove()})},n.prototype.renderHandles=function(){for(var t=this,e=this.vertices,r=0,o=e.length;r<o;r+=1){var s=e[r],a=this.options.createHandle,l=this.options.processHandle,u=a({index:r,graph:this.graph,guard:function(h){return t.guard(h)},attrs:this.options.attrs||{}});l&&l(u),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:u}),u.updatePosition(s.x,s.y),this.stamp(u.container),this.container.appendChild(u.container),this.handles.push(u),this.startHandleListening(u)}},n.prototype.updateHandles=function(){for(var t=this.vertices,e=0,r=t.length;e<r;e+=1){var o=t[e],s=this.handles[e];s&&s.updatePosition(o.x,o.y)}},n.prototype.updatePath=function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())},n.prototype.startHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)},n.prototype.stopHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)},n.prototype.getNeighborPoints=function(t){var e=this.cellView,r=this.vertices,o=t>0?r[t-1]:e.sourceAnchor,s=t<r.length-1?r[t+1]:e.targetAnchor;return{prev:c.Point.create(o),next:c.Point.create(s)}},n.prototype.getMouseEventArgs=function(t){var e=this.normalizeEvent(t),r=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:r.x,y:r.y}},n.prototype.onHandleChange=function(t){var e=t.e;this.focus();var r=this.cellView;if(r.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var o=this.getMouseEventArgs(e),s=o.e,a=o.x,l=o.y;r.notifyMouseDown(s,a,l)}},n.prototype.onHandleChanging=function(t){var e=t.handle,r=t.e,o=this.cellView,s=e.options.index,a=this.getMouseEventArgs(r),l=a.e,u=a.x,h=a.y,d={x:u,y:h};this.snapVertex(d,s),o.cell.setVertexAt(s,d,{ui:!0,toolId:this.cid}),e.updatePosition(d.x,d.y),this.options.stopPropagation||o.notifyMouseMove(l,u,h)},n.prototype.onHandleChanged=function(t){var e=t.e,r=this.options,o=this.cellView;if(r.addable&&this.updatePath(),r.removeRedundancies){o.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var s=this.getMouseEventArgs(e),a=s.e,l=s.x,u=s.y;this.options.stopPropagation||o.notifyMouseUp(a,l,u),o.checkMouseleave(a),r.onChanged&&r.onChanged({edge:o.cell,edgeView:o})}},n.prototype.snapVertex=function(t,e){var r=this.options.snapRadius||0;if(r>0){var o=this.getNeighborPoints(e),s=o.prev,a=o.next;Math.abs(t.x-s.x)<r?t.x=s.x:Math.abs(t.x-a.x)<r&&(t.x=a.x),Math.abs(t.y-s.y)<r?t.y=o.prev.y:Math.abs(t.y-a.y)<r&&(t.y=a.y)}},n.prototype.onHandleRemove=function(t){var e=t.handle,r=t.e;if(this.options.removable){var o=e.options.index,s=this.cellView;s.cell.removeVertexAt(o,{ui:!0}),this.options.addable&&this.updatePath(),s.checkMouseleave(this.normalizeEvent(r))}},n.prototype.onPathMouseDown=function(t){var e=this.cellView;if(!this.guard(t)&&this.options.addable&&e.can("vertexAddable")){t.stopPropagation(),t.preventDefault();var r=this.normalizeEvent(t),o=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var s=e.getVertexIndex(o.x,o.y);this.snapVertex(o,s),e.cell.insertVertex(o,s,{ui:!0,toolId:this.cid}),this.render();var a=this.handles[s];this.eventData(r,{vertexAdded:!0}),a.onMouseDown(r)}},n.prototype.onRemove=function(){this.resetHandles()},n}(c.ToolsView.ToolItem);(function(i){var n=function(t){function e(r){var o=t.call(this)||this;return o.options=r,o.render(),o.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),o}return B(e,t),Object.defineProperty(e.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),e.prototype.render=function(){this.container=c.View.createElement("circle",!0);var r=this.options.attrs;if(typeof r=="function"){var o=i.getDefaults();this.setAttrs(A(A({},o.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))},e.prototype.updatePosition=function(r,o){this.setAttrs({cx:r,cy:o})},e.prototype.onMouseDown=function(r){this.options.guard(r)||(r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this}))},e.prototype.onMouseMove=function(r){this.emit("changing",{e:r,handle:this})},e.prototype.onMouseUp=function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()},e.prototype.onDoubleClick=function(r){this.emit("remove",{e:r,handle:this})},e}(c.View);i.Handle=n})(bi||(bi={})),function(i){var n,t=c.Util.prefix("edge-tool-vertex-path");i.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new i.Handle(e)},markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(n={},n["mousedown ."+t]="onPathMouseDown",n["touchstart ."+t]="onPathMouseDown",n)})}(bi||(bi={}));var Ci=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.handles=[],t}return B(n,i),Object.defineProperty(n.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),n.prototype.update=function(){return this.render(),this},n.prototype.onRender=function(){Rt(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var t=this.cellView,e=W([],this.vertices,!0);e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var r=0,o=e.length;r<o-1;r+=1){var s=e[r],a=e[r+1],l=this.renderHandle(s,a,r);this.stamp(l.container),this.handles.push(l)}return this},n.prototype.renderHandle=function(t,e,r){var o=this,s=this.options.createHandle({index:r,graph:this.graph,guard:function(a){return o.guard(a)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(s),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:s}),this.updateHandle(s,t,e),this.container.appendChild(s.container),this.startHandleListening(s),s},n.prototype.startHandleListening=function(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)},n.prototype.stopHandleListening=function(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)},n.prototype.resetHandles=function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach(function(r){t.stopHandleListening(r),r.remove()})},n.prototype.shiftHandleIndexes=function(t){for(var e=this.handles,r=0,o=e.length;r<o;r+=1)e[r].options.index+=t},n.prototype.resetAnchor=function(t,e){var r=this.cellView.cell,o={ui:!0,toolId:this.cid};e?r.prop([t,"anchor"],e,o):r.removeProp([t,"anchor"],o)},n.prototype.snapHandle=function(t,e,r){var o=t.options.axis,s=t.options.index,a=this.cellView.cell.getVertices(),l=a[s-2]||r.sourceAnchor,u=a[s+1]||r.targetAnchor,h=this.options.snapRadius;return Math.abs(e[o]-l[o])<h?e[o]=l[o]:Math.abs(e[o]-u[o])<h&&(e[o]=u[o]),e},n.prototype.onHandleChanging=function(t){var e=t.handle,r=t.e,o=this.graph,s=this.options,a=this.cellView,l=s.anchor,u=e.options.axis,h=e.options.index-1,d=this.getEventData(r),f=this.normalizeEvent(r),v=o.snapToGrid(f.clientX,f.clientY),b=this.snapHandle(e,v.clone(),d),w=se(this.vertices),P=w[h],x=w[h+1],S=a.sourceView,D=a.sourceBBox,N=!1,V=!1;if(P?h===0?D.containsPoint(P)?(w.shift(),this.shiftHandleIndexes(-1),N=!0):(P[u]=b[u],V=!0):P[u]=b[u]:((P=a.sourceAnchor.toJSON())[u]=b[u],D.containsPoint(P)?N=!0:(w.unshift(P),this.shiftHandleIndexes(1),V=!0)),typeof l=="function"&&S){if(N){var y=d.sourceAnchor.clone();y[u]=b[u];var H=dt(l,a,y,S,a.sourceMagnet||S.container,"source",a,this);this.resetAnchor("source",H)}V&&this.resetAnchor("source",d.sourceAnchorDef)}var I=a.targetView,X=a.targetBBox,J=!1,Z=!1;if(x?h===w.length-2?X.containsPoint(x)?(w.pop(),J=!0):(x[u]=b[u],Z=!0):x[u]=b[u]:((x=a.targetAnchor.toJSON())[u]=b[u],X.containsPoint(x)?J=!0:(w.push(x),Z=!0)),typeof l=="function"&&I){if(J){var it=d.targetAnchor.clone();it[u]=b[u];var ct=dt(l,a,it,I,a.targetMagnet||I.container,"target",a,this);this.resetAnchor("target",ct)}Z&&this.resetAnchor("target",d.targetAnchorDef)}c.Point.equalPoints(w,this.vertices)||this.cellView.cell.setVertices(w,{ui:!0,toolId:this.cid}),this.updateHandle(e,P,x,0),s.stopPropagation||a.notifyMouseMove(f,v.x,v.y)},n.prototype.onHandleChange=function(t){var e=t.handle,r=t.e,o=this.options,s=this.handles,a=this.cellView,l=e.options.index;if(Array.isArray(s)){for(var u=0,h=s.length;u<h;u+=1)u!==l&&s[u].hide();if(this.focus(),this.setEventData(r,{sourceAnchor:a.sourceAnchor.clone(),targetAnchor:a.targetAnchor.clone(),sourceAnchorDef:se(this.cell.prop(["source","anchor"])),targetAnchorDef:se(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!o.stopPropagation){var d=this.normalizeEvent(r),f=this.graph.snapToGrid(d.clientX,d.clientY);a.notifyMouseDown(d,f.x,f.y)}}},n.prototype.onHandleChanged=function(t){var e=t.e,r=this.options,o=this.cellView;r.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var s=this.normalizeEvent(e),a=this.graph.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),r.stopPropagation||o.notifyMouseUp(s,a.x,a.y),o.checkMouseleave(s),r.onChanged&&r.onChanged({edge:o.cell,edgeView:o})},n.prototype.updateHandle=function(t,e,r,o){o===void 0&&(o=0);var s=this.options.precision||0,a=Math.abs(e.x-r.x)<s,l=Math.abs(e.y-r.y)<s;if(a||l){var u=new c.Line(e,r);if(u.length()<this.options.threshold)t.hide();else{var h=u.getCenter(),d=a?"x":"y";h[d]+=o||0;var f=u.vector().vectorAngle(new c.Point(1,0));t.updatePosition(h.x,h.y,f,this.cellView),t.show(),t.options.axis=d}}else t.hide()},n.prototype.onRemove=function(){this.resetHandles()},n}(c.ToolsView.ToolItem);(function(i){var n=function(t){function e(r){var o=t.call(this)||this;return o.options=r,o.render(),o.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),o}return B(e,t),e.prototype.render=function(){this.container=c.View.createElement("rect",!0);var r=this.options.attrs;if(typeof r=="function"){var o=i.getDefaults();this.setAttrs(A(A({},o.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))},e.prototype.updatePosition=function(r,o,s,a){var l=a.getClosestPoint(new c.Point(r,o))||new c.Point(r,o),u=ve().translate(l.x,l.y);if(l.equals({x:r,y:o}))u=u.rotate(s);else{var h=new c.Line(r,o,l.x,l.y).vector().vectorAngle(new c.Point(1,0));h!==0&&(h+=90),u=u.rotate(h)}this.setAttrs({transform:pr(u),cursor:s%180==0?"row-resize":"col-resize"})},e.prototype.onMouseDown=function(r){this.options.guard(r)||(this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data))},e.prototype.onMouseMove=function(r){this.emit("changing",{e:r,handle:this})},e.prototype.onMouseUp=function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()},e.prototype.show=function(){this.container.style.display=""},e.prototype.hide=function(){this.container.style.display="none"},e}(c.View);i.Handle=n})(Ci||(Ci={})),function(i){i.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(n){return new i.Handle(n)},anchor:gf})}(Ci||(Ci={}));var ra=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),n.prototype.onRender=function(){Rt(this.container,this.prefixClassName("edge-tool-"+this.type+"-anchor")),this.toggleArea(!1),this.update()},n.prototype.update=function(){var t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this},n.prototype.updateAnchor=function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var r=this.type,o=this.cellView,s=this.options,a=o.getTerminalAnchor(r),l=o.cell.prop([r,"anchor"]);e.setAttribute("transform","translate("+a.x+", "+a.y+")");var u=l?s.customAnchorAttrs:s.defaultAnchorAttrs;u&&Object.keys(u).forEach(function(h){e.setAttribute(h,u[h])})}}},n.prototype.updateArea=function(){var t=this.childNodes;if(t){var e=t.area;if(e){var r=this.type,o=this.cellView,s=o.getTerminalView(r);if(s){var a=s.cell,l=o.getTerminalMagnet(r),u=this.options.areaPadding||0;Number.isFinite(u)||(u=0);var h=void 0,d=void 0,f=void 0;s.isEdgeElement(l)?(d=0,f=(h=s.getBBox()).getCenter()):(h=s.getUnrotatedBBoxOfElement(l),d=a.getAngle(),f=h.getCenter(),d&&f.rotate(-d,a.getBBox().getCenter())),h.inflate(u),Vt(e,{x:-h.width/2,y:-h.height/2,width:h.width,height:h.height,transform:"translate("+f.x+", "+f.y+") rotate("+d+")"})}}}},n.prototype.toggleArea=function(t){if(this.childNodes){var e=this.childNodes.area;e&&(e.style.display=t?"":"none")}},n.prototype.onMouseDown=function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))},n.prototype.resetAnchor=function(t){var e=this.type,r=this.cell;t?r.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})},n.prototype.onMouseMove=function(t){var e=this.type,r=this.cellView,o=r.getTerminalView(e);if(o!=null){var s,a=this.normalizeEvent(t),l=o.cell,u=r.getTerminalMagnet(e),h=this.graph.clientToLocal(a.clientX,a.clientY),d=this.options.snap;if(typeof d=="function"){var f=dt(d,r,h,o,u,e,r,this);h=c.Point.create(f)}if(this.options.restrictArea)if(o.isEdgeElement(u)){var v=o.getClosestPoint(h);v&&(h=v)}else{var b=o.getUnrotatedBBoxOfElement(u),w=l.getAngle(),P=l.getBBox().getCenter(),x=h.clone().rotate(w,P);b.containsPoint(x)||(h=b.getNearestPointToPoint(x).rotate(-w,P))}var S=this.options.anchor;typeof S=="function"&&(s=dt(S,r,h,o,u,e,r,this)),this.resetAnchor(s),this.update()}},n.prototype.onMouseUp=function(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})},n.prototype.onDblClick=function(){var t=this.options.resetAnchor;t&&this.resetAnchor(t===!0?void 0:t),this.update()},n}(c.ToolsView.ToolItem);(function(i){i.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:gf,snap:function(n,t,e,r,o,s){var a=s.options.snapRadius||0,l=r==="source",u=l?0:-1,h=this.cell.getVertexAt(u)||this.getTerminalAnchor(l?"target":"source");return h&&(Math.abs(h.x-n.x)<a&&(n.x=h.x),Math.abs(h.y-n.y)<a&&(n.y=h.y)),n}})})(ra||(ra={}));var qm=ra.define({name:"source-anchor",type:"source"}),$m=ra.define({name:"target-anchor",type:"target"}),oa=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ratio",{get:function(){return this.options.ratio},enumerable:!1,configurable:!0}),n.prototype.init=function(){if(this.options.attrs){var t=this.options.attrs,e=t.class,r=z(t,["class"]);this.setAttrs(r,this.container),e&&Rt(this.container,e)}},n.prototype.onRender=function(){Rt(this.container,this.prefixClassName("edge-tool-"+this.type+"-arrowhead")),this.update()},n.prototype.update=function(){var t=this.ratio,e=this.cellView,r=e.getTangentAtRatio(t),o=r?r.start:e.getPointAtRatio(t),s=r&&r.vector().vectorAngle(new c.Point(1,0))||0;if(!o)return this;var a=ve().translate(o.x,o.y).rotate(s);return Vr(this.container,a,{absolute:!0}),this},n.prototype.onMouseDown=function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var r=this.graph.snapToGrid(t.clientX,t.clientY),o=e.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:{toolId:this.cid}});this.cellView.setEventData(t,o),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}},n.prototype.onMouseMove=function(t){var e=this.normalizeEvent(t),r=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,r.x,r.y),this.update()},n.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),r=this.cellView,o=this.graph.snapToGrid(e.clientX,e.clientY);r.onMouseUp(e,o.x,o.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})},n}(c.ToolsView.ToolItem);(function(i){i.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(oa||(oa={}));var Gr,Hr,Wm=oa.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Xm=oa.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),ko=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.labelIndex=-1,t.distance=.5,t}return B(n,i),n.prototype.render=function(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this},n.prototype.createElement=function(){var t=this.cell,e=[this.prefixClassName((t.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=c.ToolsView.createElement("div",!1),this.addClass(e,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)},n.prototype.updateEditor=function(){var t=this,e=t.graph,r=t.cell,o=t.editor,s=o.style,a=new c.Point,l=20;if(r.isNode())a=r.getBBox().center,l=r.size().width-4;else if(r.isEdge()){var u=this.options.event,h=u.target,d=h.parentElement;if(d&&mo(d,this.prefixClassName("edge-label"))){var f=d.getAttribute("data-index")||"0";this.labelIndex=parseInt(f,10);var v=di(d.getAttribute("transform")).translation;a=new c.Point(v.tx,v.ty),l=ye(h).width}else{if(!this.options.labelAddable)return this;a=e.clientToLocal(c.Point.create(u.clientX,u.clientY));var b=this.cellView.path.closestPointLength(a);this.distance=b}}a=e.localToGraph(a),s.left=a.x+"px",s.top=a.y+"px",s.minWidth=l+"px";var w=e.scale();s.transform="scale("+w.sx+", "+w.sy+") translate(-50%, -50%)";var P=this.options.attrs;s.fontSize=P.fontSize+"px",s.fontFamily=P.fontFamily,s.color=P.color,s.backgroundColor=P.backgroundColor;var x,S=this.options.getText;return typeof S=="function"&&(x=dt(S,this.cellView,{cell:this.cell,index:this.labelIndex})),o.innerText=x||"",this},n.prototype.onDocumentMouseDown=function(t){if(t.target!==this.editor){var e=this.cell,r=this.editor.innerText.replace(/\n$/,"")||"",o=this.options.setText;typeof o=="function"&&dt(o,this.cellView,{cell:this.cell,value:r,index:this.labelIndex,distance:this.distance}),e.removeTool(e.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}},n.prototype.onDblClick=function(t){t.stopPropagation()},n.prototype.onMouseDown=function(t){t.stopPropagation()},n.prototype.autoFocus=function(){var t=this;setTimeout(function(){t.editor.focus(),t.selectText()})},n.prototype.selectText=function(){if(window.getSelection){var t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}},n}(c.ToolsView.ToolItem);(function(i){i.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(ko||(ko={})),function(i){i.NodeEditor=i.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(n){return n.cell.attr("text/text")},setText:function(n){var t=n.cell,e=n.value;t.attr("text/text",e)}}),i.EdgeEditor=i.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(n){var t=n.cell,e=n.index;return e===-1?"":t.prop("labels/"+e+"/attrs/label/text")},setText:function(n){var t=n.cell,e=n.value,r=n.index,o=n.distance,s=t;r===-1?s.appendLabel({position:{distance:o},attrs:{label:{text:e}}}):e?s.prop("labels/"+r+"/attrs/label/text",e):typeof r=="number"&&s.removeLabelAt(r)}})}(ko||(ko={})),function(i){i.presets={boundary:na,button:mr,"button-remove":mr.Remove,"node-editor":ko.NodeEditor},i.registry=ae.create({type:"node tool",process:function(n,t){if(typeof t=="function")return t;var e=c.ToolsView.ToolItem,r=t.inherit,o=z(t,["inherit"]);if(r){var s=this.get(r);s==null?this.onNotFound(r,"inherited"):e=s}return o.name==null&&(o.name=n),e.define.call(e,o)}}),i.registry.register(i.presets,!0)}(Gr||(Gr={})),function(i){i.presets={boundary:na,vertices:bi,segments:Ci,button:mr,"button-remove":mr.Remove,"source-anchor":qm,"target-anchor":$m,"source-arrowhead":Wm,"target-arrowhead":Xm,"edge-editor":ko.EdgeEditor},i.registry=ae.create({type:"edge tool",process:function(n,t){if(typeof t=="function")return t;var e=c.ToolsView.ToolItem,r=t.inherit,o=z(t,["inherit"]);if(r){var s=this.get(r);s==null?this.onNotFound(r,"inherited"):e=s}return o.name==null&&(o.name=n),e.define.call(e,o)}}),i.registry.register(i.presets,!0)}(Hr||(Hr={}));var Ym=Zn("center"),Jm=Zn("topCenter"),Zm=Zn("bottomCenter"),Km=Zn("leftMiddle"),Qm=Zn("rightMiddle"),t1=Zn("topLeft"),e1=Zn("topRight"),n1=Zn("bottomLeft"),r1=Zn("bottomRight");function Zn(i){return function(n,t,e,r){r===void 0&&(r={});var o=r.rotate?n.getUnrotatedBBoxOfElement(t):n.getBBoxOfElement(t),s=o[i];s.x+=cn(r.dx,o.width),s.y+=cn(r.dy,o.height);var a=n.cell;return r.rotate?s.rotate(-a.getAngle(),a.getBBox().getCenter()):s}}function ia(i){return function(n,t,e,r){if(e instanceof Element){var o=this.graph.renderer.findViewByElem(e),s=void 0;if(o)if(o.isEdgeElement(e)){var a=r.fixedAt!=null?r.fixedAt:"50%";s=yf(o,a)}else s=o.getBBoxOfElement(e).getCenter();else s=new c.Point;return i.call(this,n,t,s,r)}return i.apply(this,arguments)}}function yf(i,n){var t=wn(n),e=typeof n=="string"?parseFloat(n):n;return t?i.getPointAtRatio(e/100):i.getPointAtLength(e)}var Ur,o1=ia(function(i,n,t,e){var r=i.cell.getAngle(),o=i.getBBoxOfElement(n),s=o.getCenter(),a=o.getTopLeft(),l=o.getBottomRight(),u=e.padding;if(Number.isFinite(u)||(u=0),a.y+u<=t.y&&t.y<=l.y-u){var h=t.y-s.y;s.x+=r===0||r===180?0:1*h/Math.tan(c.Angle.toRad(r)),s.y+=h}else if(a.x+u<=t.x&&t.x<=l.x-u){var d=t.x-s.x;s.y+=r===90||r===270?0:d*Math.tan(c.Angle.toRad(r)),s.x+=d}return s}),i1=ia(function(i,n,t,e){var r,o,s=0,a=i.cell;e.rotate?(r=i.getUnrotatedBBoxOfElement(n),o=a.getBBox().getCenter(),s=a.getAngle()):r=i.getBBoxOfElement(n);var l=e.padding;l!=null&&Number.isFinite(l)&&r.inflate(l),e.rotate&&t.rotate(s,o);var u,h=r.getNearestSideToPoint(t);switch(h){case"left":u=r.getLeftMiddle();break;case"right":u=r.getRightMiddle();break;case"top":u=r.getTopCenter();break;case"bottom":u=r.getBottomCenter()}var d=e.direction;return d==="H"?h!=="top"&&h!=="bottom"||(u=t.x<=r.x+r.width?r.getLeftMiddle():r.getRightMiddle()):d==="V"&&(u=t.y<=r.y+r.height?r.getTopCenter():r.getBottomCenter()),e.rotate?u.rotate(-s,o):u}),s1=Object.freeze({__proto__:null,center:Ym,top:Jm,bottom:Zm,left:Km,right:Qm,topLeft:t1,topRight:e1,bottomLeft:n1,bottomRight:r1,orth:o1,nodeCenter:function(i,n,t,e,r){var o=i.cell.getConnectionPoint(this.cell,r);return(e.dx||e.dy)&&o.translate(e.dx||0,e.dy||0),o},midSide:i1});(function(i){i.presets=s1,i.registry=ae.create({type:"node endpoint"}),i.registry.register(i.presets,!0)})(Ur||(Ur={}));var qr,mf=function(i,n,t,e){var r=i.getClosestPoint(t);return r!=null?r:new c.Point},a1=ia(mf),l1=ia(function(i,n,t,e){var r=1e6,o=i.getConnection(),s=i.getConnectionSubdivisions(),a=new c.Line(t.clone().translate(0,r),t.clone().translate(0,-r)),l=new c.Line(t.clone().translate(r,0),t.clone().translate(-r,0)),u=a.intersect(o,{segmentSubdivisions:s}),h=l.intersect(o,{segmentSubdivisions:s}),d=[];return u&&d.push.apply(d,u),h&&d.push.apply(d,h),d.length>0?t.closest(d):e.fallbackAt!=null?yf(i,e.fallbackAt):dt(mf,this,i,n,t,e)}),u1=Object.freeze({__proto__:null,closest:a1,ratio:function(i,n,t,e){var r=e.ratio!=null?e.ratio:.5;return r>1&&(r/=100),i.getPointAtRatio(r)},length:function(i,n,t,e){var r=e.length!=null?e.length:20;return i.getPointAtLength(r)},orth:l1});function sa(i,n,t){var e;if(typeof t=="object"){if(Number.isFinite(t.y)){var r=new c.Line(n,i).parallel(t.y);n=r.start,i=r.end}e=t.x}else e=t;if(e==null||!Number.isFinite(e))return i;var o=i.distance(n);return e===0&&o>0?i:i.move(n,-Math.min(e,o-1))}function aa(i){var n=i.getAttribute("stroke-width");return n===null?0:parseFloat(n)||0}(function(i){i.presets=u1,i.registry=ae.create({type:"edge endpoint"}),i.registry.register(i.presets,!0)})(qr||(qr={}));var bf=function(i,n,t,e){var r=n.getBBoxOfElement(t);e.stroked&&r.inflate(aa(t)/2);var o=i.intersect(r);return sa(o&&o.length?i.start.closest(o):i.end,i.start,e.offset)},$r,c1=Object.freeze({__proto__:null,bbox:bf,rect:function(i,n,t,e,r){var o=n.cell,s=o.isNode()?o.getAngle():0;if(s===0)return dt(bf,this,i,n,t,e,r);var a=n.getUnrotatedBBoxOfElement(t);e.stroked&&a.inflate(aa(t)/2);var l=a.getCenter(),u=i.clone().rotate(s,l),h=u.setLength(1e6).intersect(a);return sa(h&&h.length?u.start.closest(h).rotate(-s,l):i.end,i.start,e.offset)},boundary:function(i,n,t,e){var r,o,s=i.end,a=e.selector;if(!cr(r=typeof a=="string"?n.findOne(a):Array.isArray(a)?Cs(t,a):function(V){if(V==null)return null;var y=V;do{var H=y.tagName;if(typeof H!="string")return null;if((H=H.toUpperCase())==="G")y=y.firstElementChild;else{if(H!=="TITLE")break;y=y.nextElementSibling}}while(y);return y}(t))){if(r===t||!cr(t))return s;r=t}var l,u=n.getShapeOfElement(r),h=n.getMatrixOfElement(r),d=n.getRootTranslatedMatrix(),f=n.getRootRotatedMatrix(),v=d.multiply(f).multiply(h),b=Ed(i,v.inverse()),w=b.start.clone(),P=n.getDataOfElement(r);if(e.insideout===!1){P.shapeBBox==null&&(P.shapeBBox=u.bbox());var x=P.shapeBBox;if(x!=null&&x.containsPoint(w))return s}if(e.extrapolate===!0&&b.setLength(1e6),c.Path.isPath(u)){var S=e.precision||2;P.segmentSubdivisions==null&&(P.segmentSubdivisions=u.getSegmentSubdivisions({precision:S})),l={precision:S,segmentSubdivisions:P.segmentSubdivisions},o=b.intersect(u,l)}else o=b.intersect(u);o?Array.isArray(o)&&(o=w.closest(o)):e.sticky===!0&&(o=c.Rectangle.isRectangle(u)?u.getNearestPointToPoint(w):c.Ellipse.isEllipse(u)?u.intersectsWithLineFromCenterToPoint(w):u.closestPoint(w,l));var D=o?En(o,v):s,N=e.offset||0;return e.stroked!==!1&&(typeof N=="object"?((N=A({},N)).x==null&&(N.x=0),N.x+=aa(r)/2):N+=aa(r)/2),sa(D,i.start,N)},anchor:function(i,n,t,e){var r=e.alignOffset,o=e.align;return o&&function(s,a,l){l===void 0&&(l=0);var u,h,d,f,v=s.start,b=s.end;switch(a){case"left":f="x",u=b,h=v,d=-1;break;case"right":f="x",u=v,h=b,d=1;break;case"top":f="y",u=b,h=v,d=-1;break;case"bottom":f="y",u=v,h=b,d=1;break;default:return}v[f]<b[f]?u[f]=h[f]:h[f]=u[f],Number.isFinite(l)&&(u[f]+=d*l,h[f]+=d*l)}(i,o,r),sa(i.end,i.start,e.offset)}});(function(i){i.presets=c1,i.registry=ae.create({type:"connection point"}),i.registry.register(i.presets,!0)})($r||($r={}));function la(i){return new c.Rectangle(i.x,i.y,0,0)}function ua(i){i===void 0&&(i={});var n=$e(i.padding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function Cf(i,n){return n===void 0&&(n={}),i.sourceBBox.clone().moveAndExpand(ua(n))}function wf(i,n){return n===void 0&&(n={}),i.targetBBox.clone().moveAndExpand(ua(n))}var hn,xf=function(i,n,t){var e=Cf(t,n),r=wf(t,n),o=function(x,S){return S===void 0&&(S={}),x.sourceAnchor?x.sourceAnchor:Cf(x,S).getCenter()}(t,n),s=function(x,S){return S===void 0&&(S={}),x.targetAnchor?x.targetAnchor:wf(x,S).getCenter()}(t,n);e=e.union(la(o)),r=r.union(la(s));var a=i.map(function(x){return c.Point.create(x)});a.unshift(o),a.push(s);for(var l=null,u=[],h=0,d=a.length-1;h<d;h+=1){var f=null,v=a[h],b=a[h+1],w=hn.getBearing(v,b)!=null;if(h===0)h+1===d?e.intersectsWithRect(r.clone().inflate(1))?f=hn.insideNode(v,b,e,r):w||(f=hn.nodeToNode(v,b,e,r)):e.containsPoint(b)?f=hn.insideNode(v,b,e,la(b).moveAndExpand(ua(n))):w||(f=hn.nodeToVertex(v,b,e));else if(h+1===d){var P=w&&hn.getBearing(b,v)===l;r.containsPoint(v)||P?f=hn.insideNode(v,b,la(v).moveAndExpand(ua(n)),r,l):w||(f=hn.vertexToNode(v,b,r,l))}else w||(f=hn.vertexToVertex(v,b,l));f?(u.push.apply(u,f.points),l=f.direction):l=hn.getBearing(v,b),h+1<d&&u.push(b)}return u};(function(i){var n={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function e(l,u,h){var d=new c.Point(l.x,u.y);return h.containsPoint(d)&&(d=new c.Point(u.x,l.y)),d}function r(l,u){return l[u==="W"||u==="E"?"width":"height"]}function o(l,u){return l.x===u.x?l.y>u.y?"N":"S":l.y===u.y?l.x>u.x?"W":"E":null}function s(l,u,h){var d=new c.Point(l.x,u.y),f=new c.Point(u.x,l.y),v=o(l,d),b=o(l,f),w=h?n[h]:null,P=v===h||v!==w&&(b===w||b!==h)?d:f;return{points:[P],direction:o(P,u)}}function a(l,u,h){var d=e(l,u,h);return{points:[d],direction:o(d,u)}}i.getBBoxSize=r,i.getBearing=o,i.vertexToVertex=s,i.nodeToVertex=a,i.vertexToNode=function(l,u,h,d){var f,v=[new c.Point(l.x,u.y),new c.Point(u.x,l.y)],b=v.filter(function(x){return!h.containsPoint(x)}),w=b.filter(function(x){return o(x,l)!==d});if(w.length>0)return{points:[f=(f=w.filter(function(x){return o(l,x)===d}).pop())||w[0]],direction:o(f,u)};f=hp(v,b)[0];var P=c.Point.create(u).move(f,-r(h,d)/2);return{points:[e(P,l,h),P],direction:o(P,u)}},i.nodeToNode=function(l,u,h,d){var f=a(u,l,d),v=f.points[0];if(h.containsPoint(v)){var b=(f=a(l,u,h)).points[0];if(d.containsPoint(b)){var w=c.Point.create(l).move(b,-r(h,o(l,b))/2),P=c.Point.create(u).move(v,-r(d,o(u,v))/2),x=new c.Line(w,P).getCenter(),S=a(l,x,h),D=s(x,u,S.direction);f.points=[S.points[0],D.points[0]],f.direction=D.direction}}return f},i.insideNode=function(l,u,h,d,f){var v,b,w,P,x=h.union(d).inflate(1),S=x.getCenter(),D=S.distance(u)>S.distance(l),N=D?u:l,V=D?l:u;return f?(v=c.Point.fromPolar(x.width+x.height,t[f],N),v=x.getNearestPointToPoint(v).move(v,-1)):v=x.getNearestPointToPoint(N).move(N,1),b=e(v,V,x),v.round().equals(b.round())?(b=c.Point.fromPolar(x.width+x.height,c.Angle.toRad(v.theta(N))+Math.PI/2,V),w=e(v,b=x.getNearestPointToPoint(b).move(V,1).round(),x),P=D?[b,w,v]:[v,w,b]):P=D?[b,v]:[v,b],{points:P,direction:o(D?v:b,u)}}})(hn||(hn={}));var h1={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return br(this.step,this)},directions:function(){var i=br(this.step,this),n=br(this.cost,this);return[{cost:n,offsetX:i,offsetY:0},{cost:n,offsetX:-i,offsetY:0},{cost:n,offsetX:0,offsetY:i},{cost:n,offsetX:0,offsetY:-i}]},penalties:function(){var i=br(this.step,this);return{0:0,45:i/2,90:i/2}},paddingBox:function(){var i=br(this.step,this);return{x:-i,y:-i,width:2*i,height:2*i}},fallbackRouter:xf,draggingRouter:null};function br(i,n){return typeof i=="function"?i.call(n):i}var p1=function(){function i(){this.items=[],this.hash={},this.values={}}return i.prototype.add=function(n,t){var e=this;this.hash[n]?this.items.splice(this.items.indexOf(n),1):this.hash[n]=1,this.values[n]=t;var r=Tp(this.items,n,function(o){return e.values[o]});this.items.splice(r,0,n)},i.prototype.pop=function(){var n=this.items.shift();return n&&(this.hash[n]=2),n},i.prototype.isOpen=function(n){return this.hash[n]===1},i.prototype.isClose=function(n){return this.hash[n]===2},i.prototype.isEmpty=function(){return this.items.length===0},i}(),d1=function(){function i(n){this.options=n,this.mapGridSize=100,this.map={}}return i.prototype.build=function(n,t){var e=this.options,r=e.excludeTerminals.reduce(function(u,h){var d=t[h];if(d){var f=n.getCell(d.cell);f&&u.push(f)}return u},[]),o=[],s=n.getCell(t.getSourceCellId());s&&(o=Tl(o,s.getAncestors().map(function(u){return u.id})));var a=n.getCell(t.getTargetCellId());a&&(o=Tl(o,a.getAncestors().map(function(u){return u.id})));var l=this.mapGridSize;return n.getNodes().reduce(function(u,h){var d=h.shape,f=e.excludeShapes,v=!!d&&f.includes(d),b=r.some(function(I){return I.id===h.id}),w=e.excludeNodes.includes(h),P=o.includes(h.id),x=e.excludeHiddenNodes&&!h.isVisible();if(!(v||b||w||P||x))for(var S=h.getBBox().moveAndExpand(e.paddingBox),D=S.getOrigin().snapToGrid(l),N=S.getCorner().snapToGrid(l),V=D.x;V<=N.x;V+=l)for(var y=D.y;y<=N.y;y+=l){var H=new c.Point(V,y).toString();u[H]==null&&(u[H]=[]),u[H].push(S)}return u},this.map),this},i.prototype.isAccessible=function(n){var t=n.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[t];return!e||e.every(function(r){return!r.containsPoint(n)})},i}();function Ef(i,n){var t=i.sourceBBox.clone();return n&&n.paddingBox?t.moveAndExpand(n.paddingBox):t}function Af(i,n){var t=i.targetBBox.clone();return n&&n.paddingBox?t.moveAndExpand(n.paddingBox):t}function Pf(i,n){return i.sourceAnchor?i.sourceAnchor:Ef(i,n).getCenter()}function Pu(i,n,t,e,r){var o=360/t,s=i.theta(function(l,u,h,d){var f=d.step,v=u.x-l.x,b=u.y-l.y,w=v/h.x,P=b/h.y,x=w*f,S=P*f;return new c.Point(l.x+x,l.y+S)}(i,n,e,r)),a=c.Angle.normalize(s+o/2);return o*Math.floor(a/o)}function Mf(i,n){var t=Math.abs(i-n);return t>180?360-t:t}function Sf(i,n){if(!i)return n;var t=Math.abs(i),e=Math.round(t/n);return e?n+(t-e*n)/e:t}function wi(i,n){return i.round(n)}function ca(i,n,t){return wi(function(e,r){var o=r.source,s=c.Util.snapToGrid(e.x-o.x,r.x)+o.x,a=c.Util.snapToGrid(e.y-o.y,r.y)+o.y;return new c.Point(s,a)}(i.clone(),n),t)}function xi(i){return i.toString()}function Mu(i){return new c.Point(i.x===0?0:Math.abs(i.x)/i.x,i.y===0?0:Math.abs(i.y)/i.y)}function kf(i,n){for(var t=1/0,e=0,r=n.length;e<r;e+=1){var o=i.manhattanDistance(n[e]);o<t&&(t=o)}return t}function Tf(i,n,t,e,r){var o=r.precision,s=r.directionMap,a=i.diff(n.getCenter()),l=Object.keys(s).reduce(function(u,h){if(t.includes(h)){for(var d=s[h],f=new c.Point(i.x+d.x*(Math.abs(a.x)+n.width),i.y+d.y*(Math.abs(a.y)+n.height)),v=new c.Line(i,f).intersect(n)||[],b=void 0,w=null,P=0;P<v.length;P+=1){var x=v[P],S=i.squaredDistance(x);(b==null||S>b)&&(b=S,w=x)}if(w){var D=ca(w,e,o);n.containsPoint(D)&&(D=ca(D.translate(d.x*e.x,d.y*e.y),e,o)),u.push(D)}}return u},[]);return n.containsPoint(i)||l.push(ca(i,e,o)),l}function f1(i,n,t,e,r){for(var o,s=[],a=Mu(r.diff(t)),l=xi(t),u=i[l];u;){var h=Mu((o=n[l]).diff(u));h.equals(a)||(s.unshift(o),a=h),u=i[l=xi(u)]}var d=n[l];return Mu(d.diff(e)).equals(a)||s.unshift(d),s}function g1(i,n,t,e,r){var o,s,a=r.precision;o=c.Rectangle.isRectangle(n)?wi(Pf(i,r).clone(),a):wi(n.clone(),a),s=c.Rectangle.isRectangle(t)?wi(function(Yt,Pe){return Yt.targetAnchor?Yt.targetAnchor:Af(Yt,Pe).getCenter()}(i,r).clone(),a):wi(t.clone(),a);var l,u,h,d,f,v=(l=r.step,h=s,{source:(u=o).clone(),x:Sf(h.x-u.x,l),y:Sf(h.y-u.y,l)}),b=o,w=s;if(d=c.Rectangle.isRectangle(n)?Tf(b,n,r.startDirections,v,r):[b],f=c.Rectangle.isRectangle(t)?Tf(s,t,r.endDirections,v,r):[w],d=d.filter(function(Yt){return e.isAccessible(Yt)}),f=f.filter(function(Yt){return e.isAccessible(Yt)}),d.length>0&&f.length>0){for(var P=new p1,x={},S={},D={},N=0,V=d.length;N<V;N+=1){var y=d[N],H=xi(y);P.add(H,kf(y,f)),x[H]=y,D[H]=0}for(var I=r.previousDirectionAngle,X=I===void 0,J=void 0,Z=void 0,it=function(Yt,Pe){var Gt=Pe.step;return Pe.directions.forEach(function(Zt){Zt.gridOffsetX=Zt.offsetX/Gt*Yt.x,Zt.gridOffsetY=Zt.offsetY/Gt*Yt.y}),Pe.directions}(v,r),ct=it.length,et=f.reduce(function(Yt,Pe){var Gt=xi(Pe);return Yt.push(Gt),Yt},[]),lt=c.Point.equalPoints(d,f),ht=r.maxLoopCount;!P.isEmpty()&&ht>0;){var at=P.pop(),gt=x[at],yt=S[at],ft=D[at],Et=gt.equals(b),Ft=yt==null,re=void 0;if(re=Ft?X?Et?null:Pu(b,gt,ct,v,r):I:Pu(yt,gt,ct,v,r),!(Ft&&lt)&&et.indexOf(at)>=0)return r.previousDirectionAngle=re,f1(S,x,gt,b,w);for(N=0;N<ct;N+=1){var Qt=(J=it[N]).angle;if(Z=Mf(re,Qt),X&&Et||!(Z>r.maxDirectionChange)){var zt=ca(gt.clone().translate(J.gridOffsetX||0,J.gridOffsetY||0),v,a),Xt=xi(zt);if(!P.isClose(Xt)&&e.isAccessible(zt)){if(et.indexOf(Xt)>=0&&!zt.equals(w)&&Mf(Qt,Pu(zt,w,ct,v,r))>r.maxDirectionChange)continue;var Bt=ft+J.cost+(Et?0:r.penalties[Z]);(!P.isOpen(Xt)||Bt<D[Xt])&&(x[Xt]=zt,S[Xt]=gt,D[Xt]=Bt,P.add(Xt,Bt+kf(zt,f)))}}}ht-=1}}return r.fallbackRoute?dt(r.fallbackRoute,this,b,w,r):null}var v1=function(i,n,t){for(var e,r,o=function(N){var V=Object.keys(N).reduce(function(H,I){return H[I]=I==="fallbackRouter"||I==="draggingRouter"||I==="fallbackRoute"?N[I]:br(N[I],N),H},{});if(V.padding){var y=$e(V.padding);V.paddingBox={x:-y.left,y:-y.top,width:y.left+y.right,height:y.top+y.bottom}}return V.directions.forEach(function(H){var I=new c.Point(0,0),X=new c.Point(H.offsetX,H.offsetY);H.angle=c.Angle.normalize(I.theta(X))}),V}(n),s=Ef(t,o),a=Af(t,o),l=Pf(t,o),u=new d1(o).build(t.graph.model,t.cell),h=i.map(function(N){return c.Point.create(N)}),d=[],f=l,v=0,b=h.length;v<=b;v+=1){var w=null;if(e=r||s,(r=h[v])==null){r=a;var P=t.cell;if((P.getSourceCellId()==null||P.getTargetCellId()==null)&&typeof o.draggingRouter=="function"){var x=e===s?l:e,S=r.getOrigin();w=dt(o.draggingRouter,t,x,S,o)}}if(w==null&&(w=g1(t,e,r,u,o)),w===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),dt(o.fallbackRouter,this,i,o,t);var D=w[0];D&&D.equals(f)&&w.shift(),f=w[w.length-1]||f,d.push.apply(d,w)}return d},Df=function(i,n,t){return dt(v1,this,i,A(A({},h1),n),t)},y1={maxDirectionChange:45,directions:function(){var i=br(this.step,this),n=br(this.cost,this),t=Math.ceil(Math.sqrt(i*i<<1));return[{cost:n,offsetX:i,offsetY:0},{cost:t,offsetX:i,offsetY:i},{cost:n,offsetX:0,offsetY:i},{cost:t,offsetX:-i,offsetY:i},{cost:n,offsetX:-i,offsetY:0},{cost:t,offsetX:-i,offsetY:-i},{cost:n,offsetX:0,offsetY:-i},{cost:t,offsetX:i,offsetY:-i}]},fallbackRoute:function(i,n,t){var e=i.theta(n),r=[],o={x:n.x,y:i.y},s={x:i.x,y:n.y};if(e%180>90){var a=o;o=s,s=a}var l=e%90<45?o:s,u=new c.Line(i,l),h=90*Math.ceil(e/90),d=c.Point.fromPolar(u.squaredLength(),c.Angle.toRad(h+135),l),f=new c.Line(n,d),v=u.intersectsWithLine(f),b=v||n,w=v?b:i,P=360/t.directions.length,x=w.theta(n),S=c.Angle.normalize(x+P/2),D=P*Math.floor(S/P);return t.previousDirectionAngle=D,b&&r.push(b.round()),r.push(n),r}};function To(i,n){if(n!=null&&n!==!1){var t=typeof n=="boolean"?0:n;if(t>0){var e=c.Point.create(i[1]).move(i[2],t),r=c.Point.create(i[1]).move(i[0],t);return W(W([e.toJSON()],i,!0),[r.toJSON()],!1)}var o=i[1];return W(W([A({},o)],i,!0),[A({},o)],!1)}return i}var Kn,m1=Object.freeze({__proto__:null,normal:function(i){return W([],i,!0)},oneSide:function(i,n,t){var e,r,o,s=n.side||"bottom",a=$e(n.padding||40),l=t.sourceBBox,u=t.targetBBox,h=l.getCenter(),d=u.getCenter();switch(s){case"top":o=-1,e="y",r="height";break;case"left":o=-1,e="x",r="width";break;case"right":o=1,e="x",r="width";break;case"bottom":default:o=1,e="y",r="height"}return h[e]+=o*(l[r]/2+a[s]),d[e]+=o*(u[r]/2+a[s]),o*(h[e]-d[e])>0?d[e]=h[e]:h[e]=d[e],W(W([h.toJSON()],i,!0),[d.toJSON()],!1)},orth:xf,metro:function(i,n,t){return dt(Df,this,i,A(A({},y1),n),t)},manhattan:Df,er:function(i,n,t){var e,r,o,s=n.offset||32,a=n.min==null?16:n.min,l=0,u=n.direction,h=t.sourceBBox,d=t.targetBBox,f=h.getCenter(),v=d.getCenter();if(typeof s=="number"&&(l=s),u==null){var b=d.left-h.right,w=d.top-h.bottom;b>=0&&w>=0?u=b>=w?"L":"T":b<=0&&w>=0?u=(b=h.left-d.right)>=0&&b>=w?"R":"T":b>=0&&w<=0?u=(w=h.top-d.bottom)>=0?b>=w?"L":"B":"L":(b=h.left-d.right,w=h.top-d.bottom,u=b>=0&&w>=0?b>=w?"R":"B":b<=0&&w>=0?"B":b>=0&&w<=0||Math.abs(b)>Math.abs(w)?"R":"B")}u==="H"?u=v.x-f.x>=0?"L":"R":u==="V"&&(u=v.y-f.y>=0?"T":"B"),s==="center"&&(u==="L"?l=(d.left-h.right)/2:u==="R"?l=(h.left-d.right)/2:u==="T"?l=(d.top-h.bottom)/2:u==="B"&&(l=(h.top-d.bottom)/2));var P=u==="L"||u==="R";if(P){if(v.y===f.y)return W([],i,!0);o=u==="L"?1:-1,e="x",r="width"}else{if(v.x===f.x)return W([],i,!0);o=u==="T"?1:-1,e="y",r="height"}var x=f.clone(),S=v.clone();if(x[e]+=o*(h[r]/2+l),S[e]-=o*(d[r]/2+l),P){var D=x.x,N=S.x,V=h.width/2+a,y=d.width/2+a;v.x>f.x?N<=D&&(x.x=Math.max(N,f.x+V),S.x=Math.min(D,v.x-y)):N>=D&&(x.x=Math.min(N,f.x-V),S.x=Math.max(D,v.x+y))}else{var H=x.y,I=S.y;V=h.height/2+a,y=d.height/2+a,v.y>f.y?I<=H&&(x.y=Math.max(I,f.y+V),S.y=Math.min(H,v.y-y)):I>=H&&(x.y=Math.min(I,f.y-V),S.y=Math.max(H,v.y+y))}return W(W([x.toJSON()],i,!0),[S.toJSON()],!1)},loop:function(i,n,t){var e=n.width||50,r=(n.height||80)/2,o=n.angle||"auto",s=t.sourceAnchor,a=t.targetAnchor,l=t.sourceBBox,u=t.targetBBox;if(s.equals(a)){var h=function(lt){var ht=c.Angle.toRad(lt),at=Math.sin(ht),gt=Math.cos(ht),yt=new c.Point(s.x+gt*e,s.y+at*e),ft=new c.Point(yt.x-gt*r,yt.y-at*r),Et=ft.clone().rotate(-90,yt),Ft=ft.clone().rotate(90,yt);return[Et.toJSON(),yt.toJSON(),Ft.toJSON()]},d=function(lt){var ht=s.clone().move(lt,-1),at=new c.Line(ht,lt);return!l.containsPoint(lt)&&!l.intersectsWithLine(at)},f=[0,90,180,270,45,135,225,315];if(typeof o=="number")return To(h(o),n.merge);if((D=l.getCenter()).equals(s))return To(h(0),n.merge);var v=D.angleBetween(s,D.clone().translate(1,0)),b=h(v);if(d(b[1]))return To(b,n.merge);for(var w=1,P=f.length;w<P;w+=1)if(d((b=h(v+f[w]))[1]))return To(b,n.merge);return To(b,n.merge)}var x=new c.Line(s,a),S=x.parallel(-e),D=S.getCenter(),N=S.start.clone().move(S.end,r),V=S.end.clone().move(S.start,r),y=x.parallel(-1),H=new c.Line(y.start,D),I=new c.Line(y.end,D);if((l.containsPoint(D)||u.containsPoint(D)||l.intersectsWithLine(H)||l.intersectsWithLine(I)||u.intersectsWithLine(H)||u.intersectsWithLine(I))&&(D=(S=x.parallel(e)).getCenter(),N=S.start.clone().move(S.end,r),V=S.end.clone().move(S.start,r)),n.merge){var X=new c.Line(s,a),J=new c.Line(D,X.center).setLength(Number.MAX_SAFE_INTEGER),Z=l.intersectsWithLine(J),it=u.intersectsWithLine(J),ct=Z?Array.isArray(Z)?Z:[Z]:[];it&&(Array.isArray(it)?ct.push.apply(ct,it):ct.push(it));var et=X.center.closest(ct);et?(t.sourceAnchor=et.clone(),t.targetAnchor=et.clone()):(t.sourceAnchor=X.center.clone(),t.targetAnchor=X.center.clone())}return To([N.toJSON(),D.toJSON(),V.toJSON()],n.merge)}});(function(i){i.presets=m1,i.registry=ae.create({type:"router"}),i.registry.register(i.presets,!0)})(Kn||(Kn={}));var Ei,ha,pa=1/3,da=2/3;function Su(i,n,t){t===void 0&&(t=[]);var e=W(W([i],t,!0),[n],!1),r=[];return e.forEach(function(o,s){var a=e[s+1];a!=null&&r.push(new c.Line(o,a))}),r}function Nf(i,n){return new c.Line(i,n).squaredLength()}function Of(i,n,t,e){var r,o=new c.Path;return r=c.Path.createSegment("M",i[0].start),o.appendSegment(r),i.forEach(function(s,a){if(Ei.includes(s)){var l=void 0,u=void 0,h=void 0,d=void 0;if(t==="arc"){l=-90,((u=s.start.diff(s.end)).x<0||u.x===0&&u.y<0)&&(l+=180);var f=s.getCenter(),v=new c.Line(f,s.end).rotate(l,f),b=void 0;h=(b=new c.Line(s.start,f)).pointAt(2/3).rotate(l,s.start),d=v.pointAt(1/3).rotate(-l,v.end),r=c.Path.createSegment("C",h,d,v.end),o.appendSegment(r),b=new c.Line(f,s.end),h=v.pointAt(1/3).rotate(l,v.end),d=b.pointAt(1/3).rotate(-l,s.end),r=c.Path.createSegment("C",h,d,s.end),o.appendSegment(r)}else if(t==="gap")r=c.Path.createSegment("M",s.end),o.appendSegment(r);else if(t==="cubic"){l=s.start.theta(s.end);var w=.6*n,P=1.35*n;((u=s.start.diff(s.end)).x<0||u.x===0&&u.y<0)&&(P*=-1),h=new c.Point(s.start.x+w,s.start.y+P).rotate(l,s.start),d=new c.Point(s.end.x-w,s.end.y+P).rotate(l,s.end),r=c.Path.createSegment("C",h,d,s.end),o.appendSegment(r)}}else{var x=i[a+1];e===0||!x||Ei.includes(x)?(r=c.Path.createSegment("L",s.end),o.appendSegment(r)):function(S,D,N,V,y){var H,I=N.distance(V)/2,X=N.distance(y)/2,J=-Math.min(S,I),Z=-Math.min(S,X),it=N.clone().move(V,J).round(),ct=N.clone().move(y,Z).round(),et=new c.Point(pa*it.x+da*N.x,da*N.y+pa*it.y),lt=new c.Point(pa*ct.x+da*N.x,da*N.y+pa*ct.y);H=c.Path.createSegment("L",it),D.appendSegment(H),H=c.Path.createSegment("C",et,lt,ct),D.appendSegment(H)}(e,o,s.end,s.start,x.end)}}),o}var Cr,b1=Object.freeze({__proto__:null,normal:function(i,n,t,e){e===void 0&&(e={});var r=W(W([i],t,!0),[n],!1),o=new c.Polyline(r),s=new c.Path(o);return e.raw?s:s.serialize()},loop:function(i,n,t,e){e===void 0&&(e={});var r=t.length===3?0:1,o=c.Point.create(t[0+r]),s=c.Point.create(t[2+r]),a=c.Point.create(t[1+r]);if(!c.Point.equals(i,n)){var l=new c.Point((i.x+n.x)/2,(i.y+n.y)/2),u=l.angleBetween(c.Point.create(i).rotate(90,l),a);u>1&&(o.rotate(180-u,l),s.rotate(180-u,l),a.rotate(180-u,l))}var h=`
     M `+i.x+" "+i.y+`
     Q `+o.x+" "+o.y+" "+a.x+" "+a.y+`
     Q `+s.x+" "+s.y+" "+n.x+" "+n.y+`
  `;return e.raw?c.Path.parse(h):h},rounded:function(i,n,t,e){e===void 0&&(e={});var r=new c.Path;r.appendSegment(c.Path.createSegment("M",i));for(var o,s,a=1/3,l=2/3,u=e.radius||10,h=0,d=t.length;h<d;h+=1){var f=c.Point.create(t[h]),v=t[h-1]||i,b=t[h+1]||n;o=s||f.distance(v)/2,s=f.distance(b)/2;var w=-Math.min(u,o),P=-Math.min(u,s),x=f.clone().move(v,w).round(),S=f.clone().move(b,P).round(),D=new c.Point(a*x.x+l*f.x,l*f.y+a*x.y),N=new c.Point(a*S.x+l*f.x,l*f.y+a*S.y);r.appendSegment(c.Path.createSegment("L",x)),r.appendSegment(c.Path.createSegment("C",D,N,S))}return r.appendSegment(c.Path.createSegment("L",n)),e.raw?r:r.serialize()},smooth:function(i,n,t,e){var r;e===void 0&&(e={});var o=e.direction;if(t&&t.length!==0){var s=W(W([i],t,!0),[n],!1),a=c.Curve.throughPoints(s);r=new c.Path(a)}else if((r=new c.Path).appendSegment(c.Path.createSegment("M",i)),o||(o=Math.abs(i.x-n.x)>=Math.abs(i.y-n.y)?"H":"V"),o==="H"){var l=(i.x+n.x)/2;r.appendSegment(c.Path.createSegment("C",l,i.y,l,n.y,n.x,n.y))}else{var u=(i.y+n.y)/2;r.appendSegment(c.Path.createSegment("C",i.x,u,n.x,u,n.x,n.y))}return e.raw?r:r.serialize()},jumpover:function(i,n,t,e){var r=this;e===void 0&&(e={}),Ei=[],ha=[],function(N){var V=N.graph._jumpOverUpdateList;if(V==null&&(V=N.graph._jumpOverUpdateList=[],N.graph.on("cell:mouseup",function(){for(var H=N.graph._jumpOverUpdateList,I=0;I<H.length;I+=1)H[I].update()}),N.graph.on("model:reseted",function(){V=N.graph._jumpOverUpdateList=[]})),V.indexOf(N)<0){V.push(N);var y=function(){return V.splice(V.indexOf(N),1)};N.cell.once("change:connector",y),N.cell.once("removed",y)}}(this);var o=e.size||5,s=e.type||"arc",a=e.radius||0,l=e.ignoreConnectors||["smooth"],u=this.graph,h=u.model.getEdges();if(h.length===1)return Of(Su(i,n,t),o,s,a);var d=this.cell,f=h.indexOf(d),v=u.options.connecting.connector||{},b=h.filter(function(N,V){var y=N.getConnector()||v;return!l.includes(y.name)&&(!(V>f)||y.name!=="jumpover")}),w=b.map(function(N){return u.renderer.findViewByCell(N)}),P=Su(i,n,t),x=w.map(function(N){return N==null?[]:N===r?P:Su(N.sourcePoint,N.targetPoint,N.routePoints)}),S=[];P.forEach(function(N){var V=b.reduce(function(y,H,I){if(H!==d){var X=function(J,Z){var it=[];return Z.forEach(function(ct){var et=J.intersectsWithLine(ct);et&&it.push(et)}),it}(N,x[I]);y.push.apply(y,X)}return y},[]).sort(function(y,H){return Nf(N.start,y)-Nf(N.start,H)});V.length>0?S.push.apply(S,function(y,H,I){return H.reduce(function(X,J,Z){if(ha.includes(J))return X;var it=X.pop()||y,ct=c.Point.create(J).move(it.start,-I),et=c.Point.create(J).move(it.start,+I),lt=H[Z+1];if(lt!=null){var ht=et.distance(lt);ht<=I&&(et=lt.move(it.start,ht),ha.push(lt))}else if(ct.distance(it.end)<2*I+1)return X.push(it),X;if(et.distance(it.start)<2*I+1)return X.push(it),X;var at=new c.Line(ct,et);return Ei.push(at),X.push(new c.Line(it.start,ct),at,new c.Line(et,it.end)),X},[])}(N,V,o)):S.push(N)});var D=Of(S,o,s,a);return Ei=[],ha=[],e.raw?D:D.serialize()}});(function(i){i.presets=b1,i.registry=ae.create({type:"connector"}),i.registry.register(i.presets,!0)})(Cr||(Cr={}));var C1=ae.create,w1=Object.freeze({__proto__:null,create:C1,get Attr(){return An},get Grid(){return Jn},get Filter(){return jr},get Background(){return Mo},get Highlighter(){return Bn},get PortLayout(){return vr},get PortLabelLayout(){return Ir},get NodeTool(){return Gr},get EdgeTool(){return Hr},get Marker(){return Yn},get NodeAnchor(){return Ur},get EdgeAnchor(){return qr},get ConnectionPoint(){return $r},get Router(){return Kn},get Connector(){return Cr},get ConnectionStrategy(){return _r},get Registry(){return ae}}),ku=function(){function i(n){this.cell=n,this.ids={},this.cache={}}return i.prototype.get=function(){return Object.keys(this.ids)},i.prototype.start=function(n,t,e,r){var o=this;e===void 0&&(e={}),r===void 0&&(r="/");var s=this.cell.getPropByPath(n),a=ap(e,i.defaultOptions),l=this.getTiming(a.timing),u=this.getInterp(a.interp,s,t),h=0,d=Array.isArray(n)?n.join(r):n,f=Array.isArray(n)?n:n.split(r),v=function(){var b=new Date().getTime();h===0&&(h=b);var w=(b-h)/a.duration;w<1?o.ids[d]=Rs(v):w=1;var P=u(l(w));o.cell.setPropByPath(f,P),e.progress&&e.progress(A({progress:w,currentValue:P},o.getArgs(d))),w===1&&(o.cell.notify("transition:end",o.getArgs(d)),o.cell.notify("transition:complete",o.getArgs(d)),e.complete&&e.complete(o.getArgs(d)),o.cell.notify("transition:finish",o.getArgs(d)),e.finish&&e.finish(o.getArgs(d)),o.clean(d))};return setTimeout(function(){o.stop(n,void 0,r),o.cache[d]={startValue:s,targetValue:t,options:a},o.ids[d]=Rs(v),o.cell.notify("transition:begin",o.getArgs(d)),o.cell.notify("transition:start",o.getArgs(d)),e.start&&e.start(o.getArgs(d))},e.delay),this.stop.bind(this,n,r,e)},i.prototype.stop=function(n,t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e="/");var o=Array.isArray(n)?n:n.split(e);return Object.keys(this.ids).filter(function(s){return Cn(o,s.split(e).slice(0,o.length))}).forEach(function(s){Vs(r.ids[s]);var a=r.cache[s],l=r.getArgs(s),u=A(A({},a.options),t),h=u.jumpedToEnd;h&&a.targetValue!=null&&(r.cell.setPropByPath(s,a.targetValue),r.cell.notify("transition:end",A({},l)),r.cell.notify("transition:complete",A({},l)),u.complete&&u.complete(A({},l)));var d=A({jumpedToEnd:h},l);r.cell.notify("transition:stop",A({},d)),u.stop&&u.stop(A({},d)),r.cell.notify("transition:finish",A({},l)),u.finish&&u.finish(A({},l)),r.clean(s)}),this},i.prototype.clean=function(n){delete this.ids[n],delete this.cache[n]},i.prototype.getTiming=function(n){return typeof n=="string"?c.Timing[n]:n},i.prototype.getInterp=function(n,t,e){return n?n(t,e):typeof e=="number"?c.Interp.number(t,e):typeof e=="string"?e[0]==="#"?c.Interp.color(t,e):c.Interp.unit(t,e):c.Interp.object(t,e)},i.prototype.getArgs=function(n){var t=this.cache[n];return{path:n,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}},i}();(function(i){i.defaultOptions={delay:10,duration:100,timing:"linear"}})(ku||(ku={}));var Do,x1=function(i){function n(t){t===void 0&&(t={});var e=i.call(this)||this;return e.pending=!1,e.changing=!1,e.data={},e.mutate(se(t)),e.changed={},e}return B(n,i),n.prototype.mutate=function(t,e){var r=this;e===void 0&&(e={});var o=e.unset===!0,s=e.silent===!0,a=[],l=this.changing;this.changing=!0,l||(this.previous=se(this.data),this.changed={});var u=this.data,h=this.previous,d=this.changed;if(Object.keys(t).forEach(function(f){var v=f,b=t[v];Cn(u[v],b)||a.push(v),Cn(h[v],b)?delete d[v]:d[v]=b,o?delete u[v]:u[v]=b}),!s&&a.length>0&&(this.pending=!0,this.pendingOptions=e,a.forEach(function(f){r.emit("change:*",{key:f,options:e,store:r,current:u[f],previous:h[f]})})),l)return this;if(!s)for(;this.pending;)this.pending=!1,this.emit("changed",{current:u,previous:h,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this},n.prototype.get=function(t,e){if(t==null)return this.data;var r=this.data[t];return r==null?e:r},n.prototype.getPrevious=function(t){if(this.previous){var e=this.previous[t];return e==null?void 0:e}},n.prototype.set=function(t,e,r){var o;return t!=null&&(typeof t=="object"?this.mutate(t,e):this.mutate(((o={})[t]=e,o),r)),this},n.prototype.remove=function(t,e){var r,o=void 0,s={};if(typeof t=="string")s[t]=o,r=e;else if(Array.isArray(t))t.forEach(function(l){return s[l]=o}),r=e;else{for(var a in this.data)s[a]=o;r=t}return this.mutate(s,A(A({},r),{unset:!0})),this},n.prototype.getByPath=function(t){return Cs(this.data,t,"/")},n.prototype.setByPath=function(t,e,r){r===void 0&&(r={});var o="/",s=Array.isArray(t)?W([],t,!0):t.split(o),a=Array.isArray(t)?t.join(o):t,l=s[0],u=s.length;if(r.propertyPath=a,r.propertyValue=e,r.propertyPathArray=s,u===1)this.set(l,e,r);else{for(var h={},d=h,f=l,v=1;v<u;v+=1){var b=s[v],w=Number.isFinite(Number(b));d=d[f]=w?[]:{},f=b}Lr(h,s,e,o);var P=se(this.data);r.rewrite&&Fl(P,t,o);var x=Jt(P,h);this.set(l,x[l],r)}return this},n.prototype.removeByPath=function(t,e){var r=Array.isArray(t)?t:t.split("/"),o=r[0];if(r.length===1)this.remove(o,e);else{var s=r.slice(1),a=se(this.get(o));a&&Fl(a,s),this.set(o,a,e)}return this},n.prototype.hasChanged=function(t){return t==null?Object.keys(this.changed).length>0:t in this.changed},n.prototype.getChanges=function(t){if(t==null)return this.hasChanged()?se(this.changed):null;var e,r=this.changing?this.previous:this.data,o={};for(var s in t){var a=t[s];Cn(r[s],a)||(o[s]=a,e=!0)}return e?se(o):null},n.prototype.toJSON=function(){return se(this.data)},n.prototype.clone=function(){return new this.constructor(this.data)},n.prototype.dispose=function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})},_([c.Basecoat.dispose()],n.prototype,"dispose",null),n}(c.Basecoat);c.Cell=function(i){function n(t){t===void 0&&(t={});var e=i.call(this)||this,r=e.constructor.getDefaults(!0),o=Jt({},e.preprocess(r),e.preprocess(t));return e.id=o.id||Es(),e.store=new x1(o),e.animation=new ku(e),e.setup(),e.init(),e.postprocess(t),e}return B(n,i),n.config=function(t){var e,r=this,o=t.markup,s=t.propHooks,a=t.attrHooks,l=z(t,["markup","propHooks","attrHooks"]);o!=null&&(this.markup=o),s&&(this.propHooks=this.propHooks.slice(),Array.isArray(s)?(e=this.propHooks).push.apply(e,s):typeof s=="function"?this.propHooks.push(s):Object.keys(s).forEach(function(u){var h=s[u];typeof h=="function"&&r.propHooks.push(h)})),a&&(this.attrHooks=A(A({},this.attrHooks),a)),this.defaults=Jt({},this.defaults,l)},n.getMarkup=function(){return this.markup},n.getDefaults=function(t){return t?this.defaults:se(this.defaults)},n.getAttrHooks=function(){return this.attrHooks},n.applyPropHooks=function(t,e){return this.propHooks.reduce(function(r,o){return o?dt(o,t,r):r},e)},Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.init=function(){},Object.defineProperty(n.prototype,"model",{get:function(){return this._model},set:function(t){this._model!==t&&(this._model=t)},enumerable:!1,configurable:!0}),n.prototype.preprocess=function(t,e){var r=t.id,o=this.constructor.applyPropHooks(this,t);return r==null&&e!==!0&&(o.id=Es()),o},n.prototype.postprocess=function(t){},n.prototype.setup=function(){var t=this;this.store.on("change:*",function(e){var r=e.key,o=e.current,s=e.previous,a=e.options;t.notify("change:*",{key:r,options:a,current:o,previous:s,cell:t}),t.notify("change:"+r,{options:a,current:o,previous:s,cell:t});var l=r;l!=="source"&&l!=="target"||t.notify("change:terminal",{type:l,current:o,previous:s,options:a,cell:t})}),this.store.on("changed",function(e){var r=e.options;return t.notify("changed",{options:r,cell:t})})},n.prototype.notify=function(t,e){this.trigger(t,e);var r=this.model;return r&&(r.notify("cell:"+t,e),this.isNode()?r.notify("node:"+t,A(A({},e),{node:this})):this.isEdge()&&r.notify("edge:"+t,A(A({},e),{edge:this}))),this},n.prototype.isNode=function(){return!1},n.prototype.isEdge=function(){return!1},n.prototype.isSameStore=function(t){return this.store===t.store},Object.defineProperty(n.prototype,"view",{get:function(){return this.store.get("view")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){return this.store.get("shape","")},enumerable:!1,configurable:!0}),n.prototype.getProp=function(t,e){return t==null?this.store.get():this.store.get(t,e)},n.prototype.setProp=function(t,e,r){if(typeof t=="string")this.store.set(t,e,r);else{var o=this.preprocess(t,!0);this.store.set(Jt({},this.getProp(),o),e),this.postprocess(t)}return this},n.prototype.removeProp=function(t,e){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this},n.prototype.hasChanged=function(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)},n.prototype.getPropByPath=function(t){return this.store.getByPath(t)},n.prototype.setPropByPath=function(t,e,r){var o=this;return r===void 0&&(r={}),this.model&&(t==="children"?this._children=e?e.map(function(s){return o.model.getCell(s)}).filter(function(s){return s!=null}):null:t==="parent"&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,r),this},n.prototype.removePropByPath=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:t.split("/");return r[0]==="attrs"&&(e.dirty=!0),this.store.removeByPath(r,e),this},n.prototype.prop=function(t,e,r){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):e==null?this.removePropByPath(t,r||{}):this.setPropByPath(t,e,r||{}):this.setProp(t,e||{})},n.prototype.previous=function(t){return this.store.getPrevious(t)},Object.defineProperty(n.prototype,"zIndex",{get:function(){return this.getZIndex()},set:function(t){t==null?this.removeZIndex():this.setZIndex(t)},enumerable:!1,configurable:!0}),n.prototype.getZIndex=function(){return this.store.get("zIndex")},n.prototype.setZIndex=function(t,e){return e===void 0&&(e={}),this.store.set("zIndex",t,e),this},n.prototype.removeZIndex=function(t){return t===void 0&&(t={}),this.store.remove("zIndex",t),this},n.prototype.toFront=function(t){t===void 0&&(t={});var e=this.model;if(e){var r,o=e.getMaxZIndex();t.deep?(r=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):r=[this],o=o-r.length+1;var s=e.total(),a=e.indexOf(this)!==s-r.length;a||(a=r.some(function(l,u){return l.getZIndex()!==o+u})),a&&this.batchUpdate("to-front",function(){o+=r.length,r.forEach(function(l,u){l.setZIndex(o+u,t)})})}return this},n.prototype.toBack=function(t){t===void 0&&(t={});var e=this.model;if(e){var r,o=e.getMinZIndex();t.deep?(r=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):r=[this];var s=e.indexOf(this)!==0;s||(s=r.some(function(a,l){return a.getZIndex()!==o+l})),s&&this.batchUpdate("to-back",function(){o-=r.length,r.forEach(function(a,l){a.setZIndex(o+l,t)})})}return this},Object.defineProperty(n.prototype,"markup",{get:function(){return this.getMarkup()},set:function(t){t==null?this.removeMarkup():this.setMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getMarkup=function(){var t=this.store.get("markup");return t==null&&(t=this.constructor.getMarkup()),t},n.prototype.setMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("markup",t,e),this},n.prototype.removeMarkup=function(t){return t===void 0&&(t={}),this.store.remove("markup",t),this},Object.defineProperty(n.prototype,"attrs",{get:function(){return this.getAttrs()},set:function(t){t==null?this.removeAttrs():this.setAttrs(t)},enumerable:!1,configurable:!0}),n.prototype.getAttrs=function(){var t=this.store.get("attrs");return t?A({},t):{}},n.prototype.setAttrs=function(t,e){var r=this;if(e===void 0&&(e={}),t==null)this.removeAttrs(e);else{var o=function(a){return r.store.set("attrs",a,e)};if(e.overwrite===!0)o(t);else{var s=this.getAttrs();e.deep===!1?o(A(A({},s),t)):o(Jt({},s,t))}}return this},n.prototype.replaceAttrs=function(t,e){return e===void 0&&(e={}),this.setAttrs(t,A(A({},e),{overwrite:!0}))},n.prototype.updateAttrs=function(t,e){return e===void 0&&(e={}),this.setAttrs(t,A(A({},e),{deep:!1}))},n.prototype.removeAttrs=function(t){return t===void 0&&(t={}),this.store.remove("attrs",t),this},n.prototype.getAttrDefinition=function(t){if(!t)return null;var e=this.constructor.getAttrHooks()||{},r=e[t]||An.registry.get(t);if(!r){var o=Ko(t);r=e[o]||An.registry.get(o)}return r||null},n.prototype.getAttrByPath=function(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))},n.prototype.setAttrByPath=function(t,e,r){return r===void 0&&(r={}),this.setPropByPath(this.prefixAttrPath(t),e,r),this},n.prototype.removeAttrByPath=function(t,e){return e===void 0&&(e={}),this.removePropByPath(this.prefixAttrPath(t),e),this},n.prototype.prefixAttrPath=function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/"+t},n.prototype.attr=function(t,e,r){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):e==null?this.removeAttrByPath(t,r||{}):this.setAttrByPath(t,e,r||{}):this.setAttrs(t,e||{})},Object.defineProperty(n.prototype,"visible",{get:function(){return this.isVisible()},set:function(t){this.setVisible(t)},enumerable:!1,configurable:!0}),n.prototype.setVisible=function(t,e){return e===void 0&&(e={}),this.store.set("visible",t,e),this},n.prototype.isVisible=function(){return this.store.get("visible")!==!1},n.prototype.show=function(t){return t===void 0&&(t={}),this.isVisible()||this.setVisible(!0,t),this},n.prototype.hide=function(t){return t===void 0&&(t={}),this.isVisible()&&this.setVisible(!1,t),this},n.prototype.toggleVisible=function(t,e){e===void 0&&(e={});var r=typeof t=="boolean"?e:t;return(typeof t=="boolean"?t:!this.isVisible())?this.show(r):this.hide(r),this},Object.defineProperty(n.prototype,"data",{get:function(){return this.getData()},set:function(t){this.setData(t)},enumerable:!1,configurable:!0}),n.prototype.getData=function(){return this.store.get("data")},n.prototype.setData=function(t,e){var r=this;if(e===void 0&&(e={}),t==null)this.removeData(e);else{var o=function(a){return r.store.set("data",a,e)};if(e.overwrite===!0)o(t);else{var s=this.getData();e.deep===!1?o(typeof t=="object"?A(A({},s),t):t):o(Jt({},s,t))}}return this},n.prototype.replaceData=function(t,e){return e===void 0&&(e={}),this.setData(t,A(A({},e),{overwrite:!0}))},n.prototype.updateData=function(t,e){return e===void 0&&(e={}),this.setData(t,A(A({},e),{deep:!1}))},n.prototype.removeData=function(t){return t===void 0&&(t={}),this.store.remove("data",t),this},Object.defineProperty(n.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this.getChildren()},enumerable:!1,configurable:!0}),n.prototype.getParentId=function(){return this.store.get("parent")},n.prototype.getParent=function(){var t=this.getParentId();if(t&&this.model){var e=this.model.getCell(t);return this._parent=e,e}return null},n.prototype.getChildren=function(){var t=this,e=this.store.get("children");if(e&&e.length&&this.model){var r=e.map(function(o){var s;return(s=t.model)===null||s===void 0?void 0:s.getCell(o)}).filter(function(o){return o!=null});return this._children=r,W([],r,!0)}return null},n.prototype.hasParent=function(){return this.parent!=null},n.prototype.isParentOf=function(t){return t!=null&&t.getParent()===this},n.prototype.isChildOf=function(t){return t!=null&&this.getParent()===t},n.prototype.eachChild=function(t,e){return this.children&&this.children.forEach(t,e),this},n.prototype.filterChild=function(t,e){return this.children?this.children.filter(t,e):[]},n.prototype.getChildCount=function(){return this.children==null?0:this.children.length},n.prototype.getChildIndex=function(t){return this.children==null?-1:this.children.indexOf(t)},n.prototype.getChildAt=function(t){return this.children!=null&&t>=0?this.children[t]:null},n.prototype.getAncestors=function(t){t===void 0&&(t={});for(var e=[],r=this.getParent();r;)e.push(r),r=t.deep!==!1?r.getParent():null;return e},n.prototype.getDescendants=function(t){if(t===void 0&&(t={}),t.deep!==!1){if(t.breadthFirst){for(var e=[],r=this.getChildren()||[];r.length>0;){var o=r.shift(),s=o.getChildren();e.push(o),s&&r.push.apply(r,s)}return e}var a=this.getChildren()||[];return a.forEach(function(l){a.push.apply(a,l.getDescendants(t))}),a}return this.getChildren()||[]},n.prototype.isDescendantOf=function(t,e){if(e===void 0&&(e={}),t==null)return!1;if(e.deep!==!1){for(var r=this.getParent();r;){if(r===t)return!0;r=r.getParent()}return!1}return this.isChildOf(t)},n.prototype.isAncestorOf=function(t,e){return e===void 0&&(e={}),t!=null&&t.isDescendantOf(this,e)},n.prototype.contains=function(t){return this.isAncestorOf(t)},n.prototype.getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.getCommonAncestor.apply(n,W([this],t,!1))},n.prototype.setParent=function(t,e){return e===void 0&&(e={}),this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this},n.prototype.setChildren=function(t,e){return e===void 0&&(e={}),this._children=t,t!=null?this.store.set("children",t.map(function(r){return r.id}),e):this.store.remove("children",e),this},n.prototype.unembed=function(t,e){e===void 0&&(e={});var r=this.children;if(r!=null&&t!=null){var o=this.getChildIndex(t);o!==-1&&(r.splice(o,1),t.setParent(null,e),this.setChildren(r,e))}return this},n.prototype.embed=function(t,e){return e===void 0&&(e={}),t.addTo(this,e),this},n.prototype.addTo=function(t,e){return e===void 0&&(e={}),n.isCell(t)?t.addChild(this,e):t.addCell(this,e),this},n.prototype.insertTo=function(t,e,r){return r===void 0&&(r={}),t.insertChild(this,e,r),this},n.prototype.addChild=function(t,e){return e===void 0&&(e={}),this.insertChild(t,void 0,e)},n.prototype.insertChild=function(t,e,r){if(r===void 0&&(r={}),t!=null&&t!==this){var o=t.getParent(),s=this!==o,a=e;if(a==null&&(a=this.getChildCount(),s||(a-=1)),o){var l=o.getChildren();if(l){var u=l.indexOf(t);u>=0&&(t.setParent(null,r),l.splice(u,1),o.setChildren(l,r))}}var h=this.children;if(h==null?(h=[]).push(t):h.splice(a,0,t),t.setParent(this,r),this.setChildren(h,r),s&&this.model){var d=this.model.getIncomingEdges(this),f=this.model.getOutgoingEdges(this);d&&d.forEach(function(v){return v.updateParent(r)}),f&&f.forEach(function(v){return v.updateParent(r)})}this.model&&this.model.addCell(t,r)}return this},n.prototype.removeFromParent=function(t){t===void 0&&(t={});var e=this.getParent();if(e!=null){var r=e.getChildIndex(this);e.removeChildAt(r,t)}return this},n.prototype.removeChild=function(t,e){e===void 0&&(e={});var r=this.getChildIndex(t);return this.removeChildAt(r,e)},n.prototype.removeChildAt=function(t,e){e===void 0&&(e={});var r=this.getChildAt(t);return this.children!=null&&r!=null&&(this.unembed(r,e),r.remove(e)),r},n.prototype.remove=function(t){var e=this;return t===void 0&&(t={}),this.batchUpdate("remove",function(){var r=e.getParent();r&&r.removeChild(e,t),t.deep!==!1&&e.eachChild(function(o){return o.remove(t)}),e.model&&e.model.removeCell(e,t)}),this},n.prototype.transition=function(t,e,r,o){return r===void 0&&(r={}),o===void 0&&(o="/"),this.animation.start(t,e,r,o)},n.prototype.stopTransition=function(t,e,r){return r===void 0&&(r="/"),this.animation.stop(t,e,r),this},n.prototype.getTransitions=function(){return this.animation.get()},n.prototype.translate=function(t,e,r){return this},n.prototype.scale=function(t,e,r,o){return this},n.prototype.addTools=function(t,e,r){var o=Array.isArray(t)?t:[t],s=typeof e=="string"?e:null,a=typeof e=="object"?e:typeof r=="object"?r:{};if(a.reset)return this.setTools({name:s,items:o,local:a.local},a);var l=se(this.getTools());return l==null||s==null||l.name===s?(l==null&&(l={}),l.items||(l.items=[]),l.name=s,l.items=W(W([],l.items,!0),o,!0),this.setTools(A({},l),a)):void 0},n.prototype.setTools=function(t,e){return e===void 0&&(e={}),t==null?this.removeTools():this.store.set("tools",n.normalizeTools(t),e),this},n.prototype.getTools=function(){return this.store.get("tools")},n.prototype.removeTools=function(t){return t===void 0&&(t={}),this.store.remove("tools",t),this},n.prototype.hasTools=function(t){var e=this.getTools();return e!=null&&(t==null||e.name===t)},n.prototype.hasTool=function(t){var e=this.getTools();return e!=null&&e.items.some(function(r){return typeof r=="string"?r===t:r.name===t})},n.prototype.removeTool=function(t,e){e===void 0&&(e={});var r=se(this.getTools());if(r){var o=!1,s=r.items.slice(),a=function(h){s.splice(h,1),o=!0};if(typeof t=="number")a(t);else for(var l=s.length-1;l>=0;l-=1){var u=s[l];(typeof u=="string"?u===t:u.name===t)&&a(l)}o&&(r.items=s,this.setTools(r,e))}return this},n.prototype.getBBox=function(t){return new c.Rectangle},n.prototype.getConnectionPoint=function(t,e){return new c.Point},n.prototype.toJSON=function(t){var e=this;t===void 0&&(t={});var r=A({},this.store.get()),o=Object.prototype.toString,s=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!r.shape){var a=this.constructor;throw new Error("Unable to serialize "+s+' missing "shape" prop, check the '+s+' "'+(a.name||o.call(a))+'"')}var l=this.constructor,u=t.diff===!0,h=r.attrs||{},d=l.getDefaults(!0),f=u?this.preprocess(d,!0):d,v=f.attrs||{},b={};Object.keys(r).forEach(function(x){var S=r[x];if(S!=null&&!Array.isArray(S)&&typeof S=="object"&&!qe(S))throw new Error("Can only serialize "+s+' with plain-object props, but got a "'+o.call(S)+'" type of key "'+x+'" on '+s+' "'+e.id+'"');x!=="attrs"&&x!=="shape"&&u&&Cn(S,f[x])&&delete r[x]}),Object.keys(h).forEach(function(x){var S=h[x],D=v[x];Object.keys(S).forEach(function(N){var V=S[N],y=D?D[N]:null;V==null||typeof V!="object"||Array.isArray(V)?D!=null&&Cn(y,V)||(b[x]==null&&(b[x]={}),b[x][N]=V):Object.keys(V).forEach(function(H){var I=V[H];D!=null&&y!=null&&ie(y)&&Cn(y[H],I)||(b[x]==null&&(b[x]={}),b[x][N]==null&&(b[x][N]={}),b[x][N][H]=I)})})});var w=A(A({},r),{attrs:El(b)?void 0:b});w.attrs==null&&delete w.attrs;var P=w;return P.angle===0&&delete P.angle,se(P)},n.prototype.clone=function(t){if(t===void 0&&(t={}),!t.deep){var e=A({},this.store.get());return t.keepId||delete e.id,delete e.parent,delete e.children,new this.constructor(e)}return n.deepClone(this)[this.id]},n.prototype.findView=function(t){return t.renderer.findViewByCell(this)},n.prototype.startBatch=function(t,e,r){return e===void 0&&(e={}),r===void 0&&(r=this.model),this.notify("batch:start",{name:t,data:e,cell:this}),r&&r.startBatch(t,A(A({},e),{cell:this})),this},n.prototype.stopBatch=function(t,e,r){return e===void 0&&(e={}),r===void 0&&(r=this.model),r&&r.stopBatch(t,A(A({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this},n.prototype.batchUpdate=function(t,e,r){var o=this.model;this.startBatch(t,r,o);var s=e();return this.stopBatch(t,r,o),s},n.prototype.dispose=function(){this.removeFromParent(),this.store.dispose()},n.defaults={},n.attrHooks={},n.propHooks=[],_([c.Basecoat.dispose()],n.prototype,"dispose",null),n}(c.Basecoat),(c.Cell||(c.Cell={})).normalizeTools=function(i){return typeof i=="string"?{items:[i]}:Array.isArray(i)?{items:i}:i.items?i:{items:[i]}},function(i){i.toStringTag="X6."+i.name,i.isCell=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"}}(c.Cell||(c.Cell={})),function(i){i.getCommonAncestor=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(function(o){return o!=null}).map(function(o){return o.getAncestors()}).sort(function(o,s){return o.length-s.length}),r=e.shift();return r.find(function(o){return e.every(function(s){return s.includes(o)})})||null},i.getCellsBBox=function(n,t){t===void 0&&(t={});for(var e=null,r=0,o=n.length;r<o;r+=1){var s=n[r],a=s.getBBox(t);if(a){if(s.isNode()){var l=s.getAngle();l!=null&&l!==0&&(a=a.bbox(l))}e=e==null?a:e.union(a)}}return e},i.deepClone=function(n){var t=W([n],n.getDescendants({deep:!0}),!0);return i.cloneCells(t)},i.cloneCells=function(n){var t=Dl(n),e=t.reduce(function(r,o){return r[o.id]=o.clone(),r},{});return t.forEach(function(r){var o=e[r.id];if(o.isEdge()){var s=o.getSourceCellId(),a=o.getTargetCellId();s&&e[s]&&o.setSource(A(A({},o.getSource()),{cell:e[s].id})),a&&e[a]&&o.setTarget(A(A({},o.getTarget()),{cell:e[a].id}))}var l=r.getParent();l&&e[l.id]&&o.setParent(e[l.id]);var u=r.getChildren();if(u&&u.length){var h=u.reduce(function(d,f){return e[f.id]&&d.push(e[f.id]),d},[]);h.length>0&&o.setChildren(h)}}),e}}(c.Cell||(c.Cell={})),function(i){i.config({propHooks:function(n){var t=n.tools,e=z(n,["tools"]);return t&&(e.tools=i.normalizeTools(t)),e}})}(c.Cell||(c.Cell={})),function(i){var n,t;i.exist=function(e,r){return r?n!=null&&n.exist(e):t!=null&&t.exist(e)},i.setEdgeRegistry=function(e){n=e},i.setNodeRegistry=function(e){t=e}}(Do||(Do={}));var E1=function(){function i(n){this.ports=[],this.groups={},this.init(se(n))}return i.prototype.getPorts=function(){return this.ports},i.prototype.getGroup=function(n){return n!=null?this.groups[n]:null},i.prototype.getPortsByGroup=function(n){return this.ports.filter(function(t){return t.group===n||t.group==null&&n==null})},i.prototype.getPortsLayoutByGroup=function(n,t){var e,r=this,o=this.getPortsByGroup(n),s=n?this.getGroup(n):null,a=s?s.position:null,l=a?a.name:null;if(l!=null){var u=vr.registry.get(l);if(u==null)return vr.registry.onNotFound(l);e=u}else e=vr.presets.left;var h=o.map(function(f){return f&&f.position&&f.position.args||{}}),d=a&&a.args||{};return e(h,t,d).map(function(f,v){var b=o[v];return{portLayout:f,portId:b.id,portSize:b.size,portAttrs:b.attrs,labelSize:b.label.size,labelLayout:r.getPortLabelLayout(b,c.Point.create(f.position),t)}})},i.prototype.init=function(n){var t=this,e=n.groups,r=n.items;e!=null&&Object.keys(e).forEach(function(o){t.groups[o]=t.parseGroup(e[o])}),Array.isArray(r)&&r.forEach(function(o){t.ports.push(t.parsePort(o))})},i.prototype.parseGroup=function(n){return A(A({},n),{label:this.getLabel(n,!0),position:this.getPortPosition(n.position,!0)})},i.prototype.parsePort=function(n){var t=A({},n),e=this.getGroup(n.group)||{};return t.markup=t.markup||e.markup,t.attrs=Jt({},e.attrs,t.attrs),t.position=this.createPosition(e,t),t.label=Jt({},e.label,this.getLabel(t)),t.zIndex=this.getZIndex(e,t),t.size=A(A({},e.size),t.size),t},i.prototype.getZIndex=function(n,t){return typeof t.zIndex=="number"?t.zIndex:typeof n.zIndex=="number"||n.zIndex==="auto"?n.zIndex:"auto"},i.prototype.createPosition=function(n,t){return Jt({name:"left",args:{}},n.position,{args:t.args})},i.prototype.getPortPosition=function(n,t){if(t===void 0&&(t=!1),n==null){if(t)return{name:"left",args:{}}}else{if(typeof n=="string")return{name:n,args:{}};if(Array.isArray(n))return{name:"absolute",args:{x:n[0],y:n[1]}};if(typeof n=="object")return n}return{args:{}}},i.prototype.getPortLabelPosition=function(n,t){if(t===void 0&&(t=!1),n==null){if(t)return{name:"left",args:{}}}else{if(typeof n=="string")return{name:n,args:{}};if(typeof n=="object")return n}return{args:{}}},i.prototype.getLabel=function(n,t){t===void 0&&(t=!1);var e=n.label||{};return e.position=this.getPortLabelPosition(e.position,t),e},i.prototype.getPortLabelLayout=function(n,t,e){var r=n.label.position.name||"left",o=n.label.position.args||{},s=Ir.registry.get(r)||Ir.presets.left;return s?s(t,e,o):null},i}();c.Node=function(i){function n(t){t===void 0&&(t={});var e=i.call(this,t)||this;return e.initPorts(),e}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.preprocess=function(t,e){var r=t.x,o=t.y,s=t.width,a=t.height,l=z(t,["x","y","width","height"]);if(r!=null||o!=null){var u=l.position;l.position=A(A({},u),{x:r!=null?r:u?u.x:0,y:o!=null?o:u?u.y:0})}if(s!=null||a!=null){var h=l.size;l.size=A(A({},h),{width:s!=null?s:h?h.width:0,height:a!=null?a:h?h.height:0})}return i.prototype.preprocess.call(this,l,e)},n.prototype.isNode=function(){return!0},n.prototype.size=function(t,e,r){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,e,r):this.setSize(t,e)},n.prototype.getSize=function(){var t=this.store.get("size");return t?A({},t):{width:1,height:1}},n.prototype.setSize=function(t,e,r){return typeof t=="object"?this.resize(t.width,t.height,e):this.resize(t,e,r),this},n.prototype.resize=function(t,e,r){r===void 0&&(r={}),this.startBatch("resize",r);var o=r.direction;if(o){var s=this.getSize();switch(o){case"left":case"right":e=s.height;break;case"top":case"bottom":t=s.width}var a={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[o],l=c.Angle.normalize(this.getAngle()||0);r.absolute&&(a+=Math.floor((l+45)/90),a%=4);var u=this.getBBox(),h=(a===0?u.getBottomLeft():a===1?u.getCorner():a===2?u.getTopRight():u.getOrigin()).clone().rotate(-l,u.getCenter()),d=Math.sqrt(t*t+e*e)/2,f=a*Math.PI/2;f+=Math.atan(a%2==0?e/t:t/e),f-=c.Angle.toRad(l);var v=c.Point.fromPolar(d,f,h).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},r),this.setPosition(v.x,v.y,r)}else this.store.set("size",{width:t,height:e},r);return this.stopBatch("resize",r),this},n.prototype.scale=function(t,e,r,o){o===void 0&&(o={});var s=this.getBBox().scale(t,e,r==null?void 0:r);return this.startBatch("scale",o),this.setPosition(s.x,s.y,o),this.resize(s.width,s.height,o),this.stopBatch("scale"),this},n.prototype.position=function(t,e,r){return typeof t=="number"?this.setPosition(t,e,r):this.getPosition(t)},n.prototype.getPosition=function(t){if(t===void 0&&(t={}),t.relative){var e=this.getParent();if(e!=null&&e.isNode()){var r=this.getPosition(),o=e.getPosition();return{x:r.x-o.x,y:r.y-o.y}}}var s=this.store.get("position");return s?A({},s):{x:0,y:0}},n.prototype.setPosition=function(t,e,r){var o,s,a;if(r===void 0&&(r={}),typeof t=="object"?(o=t.x,s=t.y,a=e||{}):(o=t,s=e,a=r||{}),a.relative){var l=this.getParent();if(l!=null&&l.isNode()){var u=l.getPosition();o+=u.x,s+=u.y}}if(a.deep){var h=this.getPosition();this.translate(o-h.x,s-h.y,a)}else this.store.set("position",{x:o,y:s},a);return this},n.prototype.translate=function(t,e,r){if(t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r={}),t===0&&e===0)return this;r.translateBy=r.translateBy||this.id;var o=this.getPosition();if(r.restrict!=null&&r.translateBy===this.id){var s=this.getBBox({deep:!0}),a=r.restrict,l=o.x-s.x,u=o.y-s.y,h=Math.max(a.x+l,Math.min(a.x+a.width+l-s.width,o.x+t)),d=Math.max(a.y+u,Math.min(a.y+a.height+u-s.height,o.y+e));t=h-o.x,e=d-o.y}var f={x:o.x+t,y:o.y+e};return r.tx=t,r.ty=e,r.transition?(typeof r.transition!="object"&&(r.transition={}),this.transition("position",f,A(A({},r.transition),{interp:c.Interp.object})),this.eachChild(function(v){var b;!((b=r.exclude)===null||b===void 0)&&b.includes(v)||v.translate(t,e,r)})):(this.startBatch("translate",r),this.store.set("position",f,r),this.eachChild(function(v){var b;!((b=r.exclude)===null||b===void 0)&&b.includes(v)||v.translate(t,e,r)}),this.stopBatch("translate",r)),this},n.prototype.angle=function(t,e){return t==null?this.getAngle():this.rotate(t,e)},n.prototype.getAngle=function(){return this.store.get("angle",0)},n.prototype.rotate=function(t,e){e===void 0&&(e={});var r=this.getAngle();if(e.center){var o=this.getSize(),s=this.getPosition(),a=this.getBBox().getCenter();a.rotate(r-t,e.center);var l=a.x-o.width/2-s.x,u=a.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(s.x+l,s.y+u,e),this.rotate(t,A(A({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(r+t)%360,e);return this},n.prototype.getBBox=function(t){if(t===void 0&&(t={}),t.deep){var e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),c.Cell.getCellsBBox(e)}return c.Rectangle.fromPositionAndSize(this.getPosition(),this.getSize())},n.prototype.getConnectionPoint=function(t,e){var r=this.getBBox(),o=r.getCenter(),s=t.getTerminal(e);if(s==null)return o;var a=s.port;if(!a||!this.hasPort(a))return o;var l=this.getPort(a);if(!l||!l.group)return o;var u=this.getPortsPosition(l.group)[a].position,h=c.Point.create(u).translate(r.getOrigin()),d=this.getAngle();return d&&h.rotate(-d,o),h},n.prototype.fit=function(t){t===void 0&&(t={});var e=(this.getChildren()||[]).filter(function(h){return h.isNode()});if(e.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&e.forEach(function(h){return h.fit(t)});var r=c.Cell.getCellsBBox(e),o=r.x,s=r.y,a=r.width,l=r.height,u=$e(t.padding);return o-=u.left,s-=u.top,a+=u.left+u.right,l+=u.bottom+u.top,this.store.set({position:{x:o,y:s},size:{width:a,height:l}},t),this.stopBatch("fit-embeds"),this},Object.defineProperty(n.prototype,"portContainerMarkup",{get:function(){return this.getPortContainerMarkup()},set:function(t){this.setPortContainerMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultPortContainerMarkup=function(){return this.store.get("defaultPortContainerMarkup")||c.Markup.getPortContainerMarkup()},n.prototype.getPortContainerMarkup=function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()},n.prototype.setPortContainerMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("portContainerMarkup",c.Markup.clone(t),e),this},Object.defineProperty(n.prototype,"portMarkup",{get:function(){return this.getPortMarkup()},set:function(t){this.setPortMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultPortMarkup=function(){return this.store.get("defaultPortMarkup")||c.Markup.getPortMarkup()},n.prototype.getPortMarkup=function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()},n.prototype.setPortMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("portMarkup",c.Markup.clone(t),e),this},Object.defineProperty(n.prototype,"portLabelMarkup",{get:function(){return this.getPortLabelMarkup()},set:function(t){this.setPortLabelMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultPortLabelMarkup=function(){return this.store.get("defaultPortLabelMarkup")||c.Markup.getPortLabelMarkup()},n.prototype.getPortLabelMarkup=function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()},n.prototype.setPortLabelMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("portLabelMarkup",c.Markup.clone(t),e),this},Object.defineProperty(n.prototype,"ports",{get:function(){var t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t},enumerable:!1,configurable:!0}),n.prototype.getPorts=function(){return se(this.ports.items)},n.prototype.getPortsByGroup=function(t){return this.getPorts().filter(function(e){return e.group===t})},n.prototype.getPort=function(t){return se(this.ports.items.find(function(e){return e.id&&e.id===t}))},n.prototype.getPortAt=function(t){return this.ports.items[t]||null},n.prototype.hasPorts=function(){return this.ports.items.length>0},n.prototype.hasPort=function(t){return this.getPortIndex(t)!==-1},n.prototype.getPortIndex=function(t){var e=typeof t=="string"?t:t.id;return e!=null?this.ports.items.findIndex(function(r){return r.id===e}):-1},n.prototype.getPortsPosition=function(t){var e=this.getSize();return this.port.getPortsLayoutByGroup(t,new c.Rectangle(0,0,e.width,e.height)).reduce(function(r,o){var s=o.portLayout;return r[o.portId]={position:A({},s.position),angle:s.angle||0},r},{})},n.prototype.getPortProp=function(t,e){return this.getPropByPath(this.prefixPortPath(t,e))},n.prototype.setPortProp=function(t,e,r,o){if(typeof e=="string"||Array.isArray(e)){var s=this.prefixPortPath(t,e),a=r;return this.setPropByPath(s,a,o)}var l=this.prefixPortPath(t),u=e;return this.setPropByPath(l,u,r)},n.prototype.removePortProp=function(t,e,r){return typeof e=="string"||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),r):this.removePropByPath(this.prefixPortPath(t),e)},n.prototype.portProp=function(t,e,r,o){return e==null?this.getPortProp(t):typeof e=="string"||Array.isArray(e)?arguments.length===2?this.getPortProp(t,e):r==null?this.removePortProp(t,e,o):this.setPortProp(t,e,r,o):this.setPortProp(t,e,r)},n.prototype.prefixPortPath=function(t,e){var r=this.getPortIndex(t);if(r===-1)throw new Error('Unable to find port with id: "'+t+'"');return e==null||e===""?["ports","items",""+r]:Array.isArray(e)?W(["ports","items",""+r],e,!0):"ports/items/"+r+"/"+e},n.prototype.addPort=function(t,e){var r=W([],this.ports.items,!0);return r.push(t),this.setPropByPath("ports/items",r,e),this},n.prototype.addPorts=function(t,e){return this.setPropByPath("ports/items",W(W([],this.ports.items,!0),t,!0),e),this},n.prototype.insertPort=function(t,e,r){var o=W([],this.ports.items,!0);return o.splice(t,0,e),this.setPropByPath("ports/items",o,r),this},n.prototype.removePort=function(t,e){return e===void 0&&(e={}),this.removePortAt(this.getPortIndex(t),e)},n.prototype.removePortAt=function(t,e){if(e===void 0&&(e={}),t>=0){var r=W([],this.ports.items,!0);r.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",r,e)}return this},n.prototype.removePorts=function(t,e){var r;if(Array.isArray(t)){if(r=e||{},t.length){r.rewrite=!0;var o=W([],this.ports.items,!0).filter(function(s){return!t.some(function(a){var l=typeof a=="string"?a:a.id;return s.id===l})});this.setPropByPath("ports/items",o,r)}}else(r=t||{}).rewrite=!0,this.setPropByPath("ports/items",[],r);return this},n.prototype.getParsedPorts=function(){return this.port.getPorts()},n.prototype.getParsedGroups=function(){return this.port.groups},n.prototype.getPortsLayoutByGroup=function(t,e){return this.port.getPortsLayoutByGroup(t,e)},n.prototype.initPorts=function(){var t=this;this.updatePortData(),this.on("change:ports",function(){t.processRemovedPort(),t.updatePortData()})},n.prototype.processRemovedPort=function(){var t=this.ports,e={};t.items.forEach(function(s){s.id&&(e[s.id]=!0)});var r={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(function(s){s.id&&!e[s.id]&&(r[s.id]=!0)});var o=this.model;o&&!El(r)&&(o.getConnectedEdges(this,{incoming:!0}).forEach(function(s){var a=s.getTargetPortId();a&&r[a]&&s.remove()}),o.getConnectedEdges(this,{outgoing:!0}).forEach(function(s){var a=s.getSourcePortId();a&&r[a]&&s.remove()}))},n.prototype.validatePorts=function(){var t=this,e={},r=[];return this.ports.items.forEach(function(o){typeof o!="object"&&r.push("Invalid port "+o+"."),o.id==null&&(o.id=t.generatePortId()),e[o.id]&&r.push("Duplicitied port id."),e[o.id]=!0}),r},n.prototype.generatePortId=function(){return Es()},n.prototype.updatePortData=function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var e=this.port?this.port.getPorts():null;this.port=new E1(this.ports);var r=this.port.getPorts(),o=e?r.filter(function(a){return e.find(function(l){return l.id===a.id})?null:a}):W([],r,!0),s=e?e.filter(function(a){return r.find(function(l){return l.id===a.id})?null:a}):[];o.length>0&&this.notify("ports:added",{added:o,cell:this,node:this}),s.length>0&&this.notify("ports:removed",{removed:s,cell:this,node:this})},n.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},n}(c.Cell),function(i){i.toStringTag="X6."+i.name,i.isNode=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.size=="function"&&typeof e.position=="function"}}(c.Node||(c.Node={})),function(i){i.config({propHooks:function(n){var t=n.ports,e=z(n,["ports"]);return t&&(e.ports=Array.isArray(t)?{items:t}:t),e}})}(c.Node||(c.Node={})),function(i){i.registry=ae.create({type:"node",process:function(n,t){if(Do.exist(n,!0))throw new Error("Node with name '"+n+"' was registered by anthor Edge");if(typeof t=="function")return t.config({shape:n}),t;var e=i,r=t.inherit,o=z(t,["inherit"]);if(r)if(typeof r=="string"){var s=this.get(r);s==null?this.onNotFound(r,"inherited"):e=s}else e=r;o.constructorName==null&&(o.constructorName=n);var a=e.define.call(e,o);return a.config({shape:n}),a}}),Do.setNodeRegistry(i.registry)}(c.Node||(c.Node={})),function(i){var n=0;i.define=function(t){var e,r=t.constructorName,o=t.overwrite,s=z(t,["constructorName","overwrite"]),a=bs((e=r||s.shape)?ws(e):"CustomNode"+(n+=1),this);return a.config(s),s.shape&&i.registry.register(s.shape,a,o),a},i.create=function(t){var e=t.shape||"rect",r=i.registry.get(e);return r?new r(t):i.registry.onNotFound(e)}}(c.Node||(c.Node={}));var Oe=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"label",{get:function(){return this.getLabel()},set:function(t){this.setLabel(t)},enumerable:!1,configurable:!0}),n.prototype.getLabel=function(){return this.getAttrByPath("text/text")},n.prototype.setLabel=function(t,e){return t==null?this.removeLabel():this.setAttrByPath("text/text",t,e),this},n.prototype.removeLabel=function(){return this.removeAttrByPath("text/text"),this},n}(c.Node);function Tu(i){return"basic."+i}function Ai(i){return i===void 0&&(i="xlink:href"),function(n){var t=n.imageUrl,e=n.imageWidth,r=n.imageHeight,o=z(n,["imageUrl","imageWidth","imageHeight"]);if(t!=null||e!=null||r!=null){var s=function(){if(o.attrs){var a=o.attrs.image;t!=null&&(a[i]=t),e!=null&&(a.width=e),r!=null&&(a.height=r),o.attrs.image=a}};o.attrs?(o.attrs.image==null&&(o.attrs.image={}),s()):(o.attrs={image:{}},s())}return o}}function zn(i,n,t){var e;t===void 0&&(t={});var r=Tu(i),o={constructorName:r,attrs:(e={".":{fill:"#ffffff",stroke:"none"}},e[i]={fill:"#ffffff",stroke:"#000000"},e)};return t.ignoreMarkup||(o.markup=function(s,a){return a===void 0&&(a=!1),'<g class="rotatable"><g class="scalable"><'+s+"/></g>"+(a?"":"<text/>")+"</g>"}(i,t.noText===!0)),(t.parent||Oe).define(Jt(o,n,{shape:r}))}(function(i){i.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},i.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},i.config({attrs:{text:A({},i.labelAttr)},propHooks:function(n){var t=n.label,e=z(n,["label"]);return t&&Lr(e,"attrs/text/text",t),e},visible:!0})})(Oe||(Oe={})),zn("rect",{attrs:{rect:{width:100,height:60}}}),zn("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),zn("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),zn("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),zn("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),zn("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Ai()});var Pi,Mi,Lf=zn("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(i){var n=i.d,t=z(i,["d"]);return n!=null&&Lr(t,"attrs/path/d",n),t}});zn("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:Lf,ignoreMarkup:!0}),zn("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:Lf,ignoreMarkup:!0}),c.Edge=function(i){function n(t){return t===void 0&&(t={}),i.call(this,t)||this}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.preprocess=function(t,e){var r=t.source,o=t.sourceCell,s=t.sourcePort,a=t.sourcePoint,l=t.target,u=t.targetCell,h=t.targetPort,d=t.targetPoint,f=z(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),v=function(x){return typeof x=="string"||typeof x=="number"};if(r!=null)if(c.Cell.isCell(r))f.source={cell:r.id};else if(v(r))f.source={cell:r};else if(c.Point.isPoint(r))f.source=r.toJSON();else if(Array.isArray(r))f.source={x:r[0],y:r[1]};else{var b=r.cell;c.Cell.isCell(b)?f.source=A(A({},r),{cell:b.id}):f.source=r}if(o!=null||s!=null){var w=f.source;if(o!=null){var P=v(o)?o:o.id;w?w.cell=P:w=f.source={cell:P}}s!=null&&w&&(w.port=s)}else a!=null&&(f.source=c.Point.create(a).toJSON());return l!=null&&(c.Cell.isCell(l)?f.target={cell:l.id}:v(l)?f.target={cell:l}:c.Point.isPoint(l)?f.target=l.toJSON():Array.isArray(l)?f.target={x:l[0],y:l[1]}:(b=l.cell,c.Cell.isCell(b)?f.target=A(A({},l),{cell:b.id}):f.target=l)),u!=null||h!=null?(w=f.target,u!=null&&(P=v(u)?u:u.id,w?w.cell=P:w=f.target={cell:P}),h!=null&&w&&(w.port=h)):d!=null&&(f.target=c.Point.create(d).toJSON()),i.prototype.preprocess.call(this,f,e)},n.prototype.setup=function(){var t=this;i.prototype.setup.call(this),this.on("change:labels",function(e){return t.onLabelsChanged(e)}),this.on("change:vertices",function(e){return t.onVertexsChanged(e)})},n.prototype.isEdge=function(){return!0},n.prototype.disconnect=function(t){return t===void 0&&(t={}),this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this},Object.defineProperty(n.prototype,"source",{get:function(){return this.getSource()},set:function(t){this.setSource(t)},enumerable:!1,configurable:!0}),n.prototype.getSource=function(){return this.getTerminal("source")},n.prototype.getSourceCellId=function(){return this.source.cell},n.prototype.getSourcePortId=function(){return this.source.port},n.prototype.setSource=function(t,e,r){return r===void 0&&(r={}),this.setTerminal("source",t,e,r)},Object.defineProperty(n.prototype,"target",{get:function(){return this.getTarget()},set:function(t){this.setTarget(t)},enumerable:!1,configurable:!0}),n.prototype.getTarget=function(){return this.getTerminal("target")},n.prototype.getTargetCellId=function(){return this.target.cell},n.prototype.getTargetPortId=function(){return this.target.port},n.prototype.setTarget=function(t,e,r){return r===void 0&&(r={}),this.setTerminal("target",t,e,r)},n.prototype.getTerminal=function(t){return A({},this.store.get(t))},n.prototype.setTerminal=function(t,e,r,o){if(o===void 0&&(o={}),c.Cell.isCell(e))return this.store.set(t,Jt({},r,{cell:e.id}),o),this;var s=e;return c.Point.isPoint(e)||s.x!=null&&s.y!=null?(this.store.set(t,Jt({},r,{x:s.x,y:s.y}),o),this):(this.store.set(t,se(e),o),this)},n.prototype.getSourcePoint=function(){return this.getTerminalPoint("source")},n.prototype.getTargetPoint=function(){return this.getTerminalPoint("target")},n.prototype.getTerminalPoint=function(t){var e=this[t];if(c.Point.isPointLike(e))return c.Point.create(e);var r=this.getTerminalCell(t);return r?r.getConnectionPoint(this,t):new c.Point},n.prototype.getSourceCell=function(){return this.getTerminalCell("source")},n.prototype.getTargetCell=function(){return this.getTerminalCell("target")},n.prototype.getTerminalCell=function(t){if(this.model){var e=t==="source"?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null},n.prototype.getSourceNode=function(){return this.getTerminalNode("source")},n.prototype.getTargetNode=function(){return this.getTerminalNode("target")},n.prototype.getTerminalNode=function(t){for(var e=this,r={};e&&e.isEdge();){if(r[e.id])return null;r[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null},Object.defineProperty(n.prototype,"router",{get:function(){return this.getRouter()},set:function(t){t==null?this.removeRouter():this.setRouter(t)},enumerable:!1,configurable:!0}),n.prototype.getRouter=function(){return this.store.get("router")},n.prototype.setRouter=function(t,e,r){return typeof t=="object"?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},r),this},n.prototype.removeRouter=function(t){return t===void 0&&(t={}),this.store.remove("router",t),this},Object.defineProperty(n.prototype,"connector",{get:function(){return this.getConnector()},set:function(t){t==null?this.removeConnector():this.setConnector(t)},enumerable:!1,configurable:!0}),n.prototype.getConnector=function(){return this.store.get("connector")},n.prototype.setConnector=function(t,e,r){return typeof t=="object"?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},r),this},n.prototype.removeConnector=function(t){return t===void 0&&(t={}),this.store.remove("connector",t)},Object.defineProperty(n.prototype,"strategy",{get:function(){return this.getStrategy()},set:function(t){t==null?this.removeStrategy():this.setStrategy(t)},enumerable:!1,configurable:!0}),n.prototype.getStrategy=function(){return this.store.get("strategy")},n.prototype.setStrategy=function(t,e,r){return typeof t=="object"?this.store.set("strategy",t,e):this.store.set("strategy",{name:t,args:e},r),this},n.prototype.removeStrategy=function(t){return t===void 0&&(t={}),this.store.remove("strategy",t)},n.prototype.getDefaultLabel=function(){var t=this.constructor;return se(this.store.get("defaultLabel")||t.defaultLabel||{})},Object.defineProperty(n.prototype,"labels",{get:function(){return this.getLabels()},set:function(t){this.setLabels(t)},enumerable:!1,configurable:!0}),n.prototype.getLabels=function(){var t=this;return W([],this.store.get("labels",[]),!0).map(function(e){return t.parseLabel(e)})},n.prototype.setLabels=function(t,e){return e===void 0&&(e={}),this.store.set("labels",Array.isArray(t)?t:[t],e),this},n.prototype.insertLabel=function(t,e,r){r===void 0&&(r={});var o=this.getLabels(),s=o.length,a=e!=null&&Number.isFinite(e)?e:s;return a<0&&(a=s+a+1),o.splice(a,0,this.parseLabel(t)),this.setLabels(o,r)},n.prototype.appendLabel=function(t,e){return e===void 0&&(e={}),this.insertLabel(t,-1,e)},n.prototype.getLabelAt=function(t){var e=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(e[t]):null},n.prototype.setLabelAt=function(t,e,r){if(r===void 0&&(r={}),t!=null&&Number.isFinite(t)){var o=this.getLabels();o[t]=this.parseLabel(e),this.setLabels(o,r)}return this},n.prototype.removeLabelAt=function(t,e){e===void 0&&(e={});var r=this.getLabels(),o=t!=null&&Number.isFinite(t)?t:-1,s=r.splice(o,1);return this.setLabels(r,e),s.length?s[0]:null},n.prototype.parseLabel=function(t){return typeof t=="string"?this.constructor.parseStringLabel(t):t},n.prototype.onLabelsChanged=function(t){var e=t.previous,r=t.current,o=e&&r?r.filter(function(a){return e.find(function(l){return a===l||Cn(a,l)})?null:a}):r?W([],r,!0):[],s=e&&r?e.filter(function(a){return r.find(function(l){return a===l||Cn(a,l)})?null:a}):e?W([],e,!0):[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),s.length>0&&this.notify("labels:removed",{removed:s,cell:this,edge:this})},Object.defineProperty(n.prototype,"vertexMarkup",{get:function(){return this.getVertexMarkup()},set:function(t){this.setVertexMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultVertexMarkup=function(){return this.store.get("defaultVertexMarkup")||c.Markup.getEdgeVertexMarkup()},n.prototype.getVertexMarkup=function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()},n.prototype.setVertexMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("vertexMarkup",c.Markup.clone(t),e),this},Object.defineProperty(n.prototype,"vertices",{get:function(){return this.getVertices()},set:function(t){this.setVertices(t)},enumerable:!1,configurable:!0}),n.prototype.getVertices=function(){return W([],this.store.get("vertices",[]),!0)},n.prototype.setVertices=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t];return this.store.set("vertices",r.map(function(o){return c.Point.toJSON(o)}),e),this},n.prototype.insertVertex=function(t,e,r){r===void 0&&(r={});var o=this.getVertices(),s=o.length,a=e!=null&&Number.isFinite(e)?e:s;return a<0&&(a=s+a+1),o.splice(a,0,c.Point.toJSON(t)),this.setVertices(o,r)},n.prototype.appendVertex=function(t,e){return e===void 0&&(e={}),this.insertVertex(t,-1,e)},n.prototype.getVertexAt=function(t){return t!=null&&Number.isFinite(t)?this.getVertices()[t]:null},n.prototype.setVertexAt=function(t,e,r){if(r===void 0&&(r={}),t!=null&&Number.isFinite(t)){var o=this.getVertices();o[t]=e,this.setVertices(o,r)}return this},n.prototype.removeVertexAt=function(t,e){e===void 0&&(e={});var r=this.getVertices(),o=t!=null&&Number.isFinite(t)?t:-1;return r.splice(o,1),this.setVertices(r,e)},n.prototype.onVertexsChanged=function(t){var e=t.previous,r=t.current,o=e&&r?r.filter(function(a){return e.find(function(l){return c.Point.equals(a,l)})?null:a}):r?W([],r,!0):[],s=e&&r?e.filter(function(a){return r.find(function(l){return c.Point.equals(a,l)})?null:a}):e?W([],e,!0):[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),s.length>0&&this.notify("vertexs:removed",{removed:s,cell:this,edge:this})},n.prototype.getDefaultMarkup=function(){return this.store.get("defaultMarkup")||c.Markup.getEdgeMarkup()},n.prototype.getMarkup=function(){return i.prototype.getMarkup.call(this)||this.getDefaultMarkup()},Object.defineProperty(n.prototype,"toolMarkup",{get:function(){return this.getToolMarkup()},set:function(t){this.setToolMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultToolMarkup=function(){return this.store.get("defaultToolMarkup")||c.Markup.getEdgeToolMarkup()},n.prototype.getToolMarkup=function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()},n.prototype.setToolMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("toolMarkup",t,e),this},Object.defineProperty(n.prototype,"doubleToolMarkup",{get:function(){return this.getDoubleToolMarkup()},set:function(t){this.setDoubleToolMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultDoubleToolMarkup=function(){return this.store.get("defaultDoubleToolMarkup")},n.prototype.getDoubleToolMarkup=function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()},n.prototype.setDoubleToolMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("doubleToolMarkup",t,e),this},Object.defineProperty(n.prototype,"arrowheadMarkup",{get:function(){return this.getArrowheadMarkup()},set:function(t){this.setArrowheadMarkup(t)},enumerable:!1,configurable:!0}),n.prototype.getDefaultArrowheadMarkup=function(){return this.store.get("defaultArrowheadMarkup")||c.Markup.getEdgeArrowheadMarkup()},n.prototype.getArrowheadMarkup=function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()},n.prototype.setArrowheadMarkup=function(t,e){return e===void 0&&(e={}),this.store.set("arrowheadMarkup",t,e),this},n.prototype.translate=function(t,e,r){return r===void 0&&(r={}),r.translateBy=r.translateBy||this.id,r.tx=t,r.ty=e,this.applyToPoints(function(o){return{x:(o.x||0)+t,y:(o.y||0)+e}},r)},n.prototype.scale=function(t,e,r,o){return o===void 0&&(o={}),this.applyToPoints(function(s){return c.Point.create(s).scale(t,e,r).toJSON()},o)},n.prototype.applyToPoints=function(t,e){e===void 0&&(e={});var r={},o=this.getSource(),s=this.getTarget();c.Point.isPointLike(o)&&(r.source=t(o)),c.Point.isPointLike(s)&&(r.target=t(s));var a=this.getVertices();return a.length>0&&(r.vertices=a.map(t)),this.store.set(r,e),this},n.prototype.getBBox=function(){return this.getPolyline().bbox()},n.prototype.getConnectionPoint=function(){return this.getPolyline().pointAt(.5)},n.prototype.getPolyline=function(){var t=W(W([this.getSourcePoint()],this.getVertices().map(function(e){return c.Point.create(e)}),!0),[this.getTargetPoint()],!1);return new c.Polyline(t)},n.prototype.updateParent=function(t){var e=null,r=this.getSourceCell(),o=this.getTargetCell(),s=this.getParent();return r&&o&&(e=r===o||r.isDescendantOf(o)?o:o.isDescendantOf(r)?r:c.Cell.getCommonAncestor(r,o)),!s||e&&e.id===s.id||s.unembed(this,t),e&&e.embed(this,t),e},n.prototype.hasLoop=function(t){t===void 0&&(t={});var e=this.getSource(),r=this.getTarget(),o=e.cell,s=r.cell;if(!o||!s)return!1;var a=o===s;if(!a&&t.deep&&this._model){var l=this.getSourceCell(),u=this.getTargetCell();l&&u&&(a=l.isAncestorOf(u,t)||u.isAncestorOf(l,t))}return a},n.prototype.getFragmentAncestor=function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter(function(e){return e!=null});return this.getCommonAncestor.apply(this,t)},n.prototype.isFragmentDescendantOf=function(t){var e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))},n.defaults={},n}(c.Cell),function(i){i.equalTerminals=function(n,t){var e=n,r=t;return e.cell===r.cell&&(e.port===r.port||e.port==null&&r.port==null)}}(c.Edge||(c.Edge={})),function(i){i.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},i.parseStringLabel=function(n){return{attrs:{label:{text:n}}}}}(c.Edge||(c.Edge={})),function(i){i.toStringTag="X6."+i.name,i.isEdge=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.disconnect=="function"&&typeof e.getSource=="function"&&typeof e.getTarget=="function"}}(c.Edge||(c.Edge={})),function(i){i.registry=ae.create({type:"edge",process:function(n,t){if(Do.exist(n,!1))throw new Error("Edge with name '"+n+"' was registered by anthor Node");if(typeof t=="function")return t.config({shape:n}),t;var e=i,r=t.inherit,o=r===void 0?"edge":r,s=z(t,["inherit"]);if(typeof o=="string"){var a=this.get(o||"edge");a==null&&o?this.onNotFound(o,"inherited"):e=a}else e=o;s.constructorName==null&&(s.constructorName=n);var l=e.define.call(e,s);return l.config({shape:n}),l}}),Do.setEdgeRegistry(i.registry)}(c.Edge||(c.Edge={})),function(i){var n=0;i.define=function(t){var e,r=t.constructorName,o=t.overwrite,s=z(t,["constructorName","overwrite"]),a=bs((e=r||s.shape)?ws(e):"CustomEdge"+(n+=1),this);return a.config(s),s.shape&&i.registry.register(s.shape,a,o),a},i.create=function(t){var e=t.shape||"edge",r=i.registry.get(e);return r?new r(t):i.registry.onNotFound(e)}}(c.Edge||(c.Edge={})),function(i){var n="basic.edge";i.config({shape:n,propHooks:function(t){var e=t.label,r=t.vertices,o=z(t,["label","vertices"]);if(e){o.labels==null&&(o.labels=[]);var s=typeof e=="string"?i.parseStringLabel(e):e;o.labels.push(s)}return r&&Array.isArray(r)&&(o.vertices=r.map(function(a){return c.Point.create(a).toJSON()})),o}}),i.registry.register(n,i)}(c.Edge||(c.Edge={})),c.EdgeView=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.POINT_ROUNDING=2,t.markerCache={},t}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.getContainerClassName=function(){return[i.prototype.getContainerClassName.call(this),this.prefixClassName("edge")].join(" ")},Object.defineProperty(n.prototype,"sourceBBox",{get:function(){var t=this.sourceView;if(!t){var e=this.cell.getSource();return new c.Rectangle(e.x,e.y)}var r=this.sourceMagnet;return t.isEdgeElement(r)?new c.Rectangle(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(r||t.container)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetBBox",{get:function(){var t=this.targetView;if(!t){var e=this.cell.getTarget();return new c.Rectangle(e.x,e.y)}var r=this.targetMagnet;return t.isEdgeElement(r)?new c.Rectangle(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(r||t.container)},enumerable:!1,configurable:!0}),n.prototype.isEdgeView=function(){return!0},n.prototype.confirmUpdate=function(t,e){var r=this;e===void 0&&(e={});var o=t;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}var s=this.graph,a=this.sourceView,l=this.targetView;return s&&(a&&!s.renderer.isViewMounted(a)||l&&!s.renderer.isViewMounted(l))?o:this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","vertices","labels","tools","widget"])):(o=this.handleAction(o,"vertices",function(){return r.renderVertexMarkers()}),o=this.handleAction(o,"update",function(){return r.update(null,e)}),o=this.handleAction(o,"labels",function(){return r.onLabelsChange(e)}),o=this.handleAction(o,"tools",function(){r.renderTools(),r.updateToolsPosition()}),o=this.handleAction(o,"widget",function(){return r.renderExternalTools()}))},n.prototype.onLabelsChange=function(t){t===void 0&&(t={}),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()},n.prototype.shouldRerenderLabels=function(t){t===void 0&&(t={});var e=this.cell.previous("labels");if(e==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var r=t.propertyPathArray||[],o=r.length;if(o>1&&e[r[1]]){if(o===2)return typeof t.propertyValue=="object"&&vo(t.propertyValue,"markup");if(r[2]!=="markup")return!1}}return!0},n.prototype.render=function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this},n.prototype.renderMarkup=function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid edge markup.")},n.prototype.renderJSONMarkup=function(t){var e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)},n.prototype.renderStringMarkup=function(t){var e=this.containers,r=c.Vector.createVectors(t);r.forEach(function(o){var s=o.attr("class");s&&(e[Ko(s)]=o.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),bo(this.container,r.map(function(o){return o.node}))},n.prototype.renderLabels=function(){var t=this.cell,e=t.getLabels(),r=e.length,o=this.containers.labels;if(this.labelCache={},this.labelSelectors={},r<=0)return o&&o.parentNode&&o.parentNode.removeChild(o),this;o?this.empty(o):(o=Ie("g"),this.addClass(this.prefixClassName("edge-labels"),o),this.containers.labels=o);for(var s=0,a=e.length;s<a;s+=1){var l=e[s],u=this.normalizeLabelMarkup(this.parseLabelMarkup(l.markup)),h=void 0,d=void 0;if(u)h=u.node,d=u.selectors;else{var f=t.getDefaultLabel(),v=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup));h=v.node,d=v.selectors}h.setAttribute("data-index",""+s),o.appendChild(h);var b=this.rootSelector;if(d[b])throw new Error("Ambiguous label root selector.");d[b]=h,this.labelCache[s]=h,this.labelSelectors[s]=d}return o.parentNode==null&&this.container.appendChild(o),this.updateLabels(),this.customizeLabels(),this},n.prototype.parseLabelMarkup=function(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null},n.prototype.parseLabelStringMarkup=function(t){for(var e=c.Vector.createVectors(t),r=document.createDocumentFragment(),o=0,s=e.length;o<s;o+=1){var a=e[o].node;r.appendChild(a)}return{fragment:r,selectors:{}}},n.prototype.normalizeLabelMarkup=function(t){if(t!=null){var e,r=t.fragment;if(!(r instanceof DocumentFragment&&r.hasChildNodes()))throw new Error("Invalid label markup.");var o=r.childNodes;return(e=o.length>1||o[0].nodeName.toUpperCase()!=="G"?c.Vector.create("g").append(r):c.Vector.create(o[0])).addClass(this.prefixClassName("edge-label")),{node:e.node,selectors:t.selectors}}},n.prototype.updateLabels=function(){if(this.containers.labels)for(var t=this.cell,e=t.labels,r=this.can("edgeLabelMovable"),o=t.getDefaultLabel(),s=0,a=e.length;s<a;s+=1){var l=this.labelCache[s],u=this.labelSelectors[s];l.setAttribute("cursor",r?"move":"default");var h=e[s],d=Jt({},o.attrs,h.attrs);this.updateAttrs(l,d,{selectors:u,rootBBox:h.size?c.Rectangle.fromSize(h.size):void 0})}},n.prototype.mergeLabelAttrs=function(t,e,r){return e===null?null:e===void 0?r===null?null:r===void 0?void 0:t?r:Jt({},r):t?Jt({},r,e):void 0},n.prototype.customizeLabels=function(){if(this.containers.labels)for(var t=this.cell,e=t.labels,r=0,o=e.length;r<o;r+=1){var s=e[r],a=this.labelCache[r],l=this.labelSelectors[r];this.graph.hook.onEdgeLabelRendered({edge:t,label:s,container:a,selectors:l})}},n.prototype.renderTools=function(){var t=this.containers.tools;if(t==null)return this;var e=this.cell.toolMarkup,r=this.$(t).empty();if(c.Markup.isStringMarkup(e)){var o=Or(e),s=c.Vector.create(o());if(r.append(s.node),this.toolCache=s.node,this.options.doubleTools){var a=void 0,l=this.cell.doubleToolMarkup;c.Markup.isStringMarkup(l)?(o=Or(l),a=c.Vector.create(o())):a=s.clone(),r.append(a.node),this.tool2Cache=a.node}}return this},n.prototype.renderExternalTools=function(){var t=this.cell.getTools();return this.addTools(t),this},n.prototype.renderVertexMarkers=function(){var t=this.containers.vertices;if(t==null)return this;var e=this.cell.vertexMarkup,r=this.$(t).empty();if(c.Markup.isStringMarkup(e)){var o=Or(e);this.cell.getVertices().forEach(function(s,a){r.append(c.Vector.create(o(A({index:a},s))).node)})}return this},n.prototype.renderArrowheadMarkers=function(){var t=this.containers.arrowheads;if(t==null)return this;var e=this.cell.arrowheadMarkup,r=this.$(t).empty();if(c.Markup.isStringMarkup(e)){var o=Or(e),s=c.Vector.create(o({end:"source"})).node,a=c.Vector.create(o({end:"target"})).node;this.containers.sourceArrowhead=s,this.containers.targetArrowhead=a,r.append(s,a)}return this},n.prototype.update=function(t,e){e===void 0&&(e={}),this.cleanCache(),this.updateConnection(e);var r=this.cell.getAttrs();return r!=null&&this.updateAttrs(this.container,r,{attrs:t===r?null:t,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(e),this},n.prototype.removeRedundantLinearVertices=function(t){t===void 0&&(t={});var e=this.cell,r=e.getVertices(),o=W(W([this.sourceAnchor],r,!0),[this.targetAnchor],!1),s=o.length,a=new c.Polyline(o);a.simplify({threshold:.01});var l=a.points.map(function(h){return h.toJSON()}),u=l.length;return s===u?0:(e.setVertices(l.slice(1,u-1),t),s-u)},n.prototype.updateConnectionPath=function(){var t=this.containers;if(t.connection){var e=this.getConnectionPathData();t.connection.setAttribute("d",e)}t.connectionWrap&&(e=this.getConnectionPathData(),t.connectionWrap.setAttribute("d",e)),t.sourceMarker&&t.targetMarker&&this.translateAndAutoOrientArrows(t.sourceMarker,t.targetMarker)},n.prototype.getTerminalView=function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '"+t+"'")}},n.prototype.getTerminalAnchor=function(t){switch(t){case"source":return c.Point.create(this.sourceAnchor);case"target":return c.Point.create(this.targetAnchor);default:throw new Error("Unknown terminal type '"+t+"'")}},n.prototype.getTerminalConnectionPoint=function(t){switch(t){case"source":return c.Point.create(this.sourcePoint);case"target":return c.Point.create(this.targetPoint);default:throw new Error("Unknown terminal type '"+t+"'")}},n.prototype.getTerminalMagnet=function(t,e){switch(e===void 0&&(e={}),t){case"source":if(e.raw)return this.sourceMagnet;var r=this.sourceView;return r?this.sourceMagnet||r.container:null;case"target":if(e.raw)return this.targetMagnet;var o=this.targetView;return o?this.targetMagnet||o.container:null;default:throw new Error("Unknown terminal type '"+t+"'")}},n.prototype.updateConnection=function(t){t===void 0&&(t={});var e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){var r=t.tx||0,o=t.ty||0;this.routePoints=new c.Polyline(this.routePoints).translate(r,o).points,this.translateConnectionPoints(r,o),this.path.translate(r,o)}else{var s=e.getVertices(),a=this.findAnchors(s);this.sourceAnchor=a.source,this.targetAnchor=a.target,this.routePoints=this.findRoutePoints(s);var l=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=l.source,this.targetPoint=l.target;var u=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,u.source||this.sourcePoint,u.target||this.targetPoint)}this.cleanCache()},n.prototype.findAnchors=function(t){var e=this.cell,r=e.source,o=e.target,s=t[0],a=t[t.length-1];return o.priority&&!r.priority?this.findAnchorsOrdered("target",a,"source",s):this.findAnchorsOrdered("source",s,"target",a)},n.prototype.findAnchorsOrdered=function(t,e,r,o){var s,a,l,u=this.cell,h=u[t],d=u[r],f=this.getTerminalView(t),v=this.getTerminalView(r),b=this.getTerminalMagnet(t),w=this.getTerminalMagnet(r);if(f){var P=void 0;P=e?c.Point.create(e):v?w:c.Point.create(d),a=this.getAnchor(h.anchor,f,b,P,t)}else a=c.Point.create(h);if(v){var x=c.Point.create(o||a);l=this.getAnchor(d.anchor,v,w,x,r)}else l=c.Point.isPointLike(d)?c.Point.create(d):new c.Point;return(s={})[t]=a,s[r]=l,s},n.prototype.getAnchor=function(t,e,r,o,s){var a,l=e.isEdgeElement(r),u=this.graph.options.connecting,h=typeof t=="string"?{name:t}:t;if(!h){var d=l?(s==="source"?u.sourceEdgeAnchor:u.targetEdgeAnchor)||u.edgeAnchor:(s==="source"?u.sourceAnchor:u.targetAnchor)||u.anchor;h=typeof d=="string"?{name:d}:d}if(!h)throw new Error("Anchor should be specified.");var f=h.name;if(l){if(typeof(v=qr.registry.get(f))!="function")return qr.registry.onNotFound(f);a=dt(v,this,e,r,o,h.args||{},s)}else{var v;if(typeof(v=Ur.registry.get(f))!="function")return Ur.registry.onNotFound(f);a=dt(v,this,e,r,o,h.args||{},s)}return a?a.round(this.POINT_ROUNDING):new c.Point},n.prototype.findRoutePoints=function(t){t===void 0&&(t=[]);var e,r=this.graph.options.connecting.router||Kn.presets.normal,o=this.cell.getRouter()||r;if(typeof o=="function")e=dt(o,this,t,{},this);else{var s=typeof o=="string"?o:o.name,a=typeof o=="string"?{}:o.args||{},l=s?Kn.registry.get(s):Kn.presets.normal;if(typeof l!="function")return Kn.registry.onNotFound(s);e=dt(l,this,t,a,this)}return e==null?t.map(function(u){return c.Point.create(u)}):e.map(function(u){return c.Point.create(u)})},n.prototype.findConnectionPoints=function(t,e,r){var o,s,a=this.cell,l=this.graph.options.connecting,u=a.getSource(),h=a.getTarget(),d=this.sourceView,f=this.targetView,v=t[0],b=t[t.length-1];if(d&&!d.isEdgeElement(this.sourceMagnet)){var w=this.sourceMagnet||d.container,P=v||r,x=new c.Line(P,e),S=u.connectionPoint||l.sourceConnectionPoint||l.connectionPoint;o=this.getConnectionPoint(S,d,w,x,"source")}else o=e;if(f&&!f.isEdgeElement(this.targetMagnet)){var D=this.targetMagnet||f.container,N=h.connectionPoint||l.targetConnectionPoint||l.connectionPoint,V=b||e,y=new c.Line(V,r);s=this.getConnectionPoint(N,f,D,y,"target")}else s=r;return{source:o,target:s}},n.prototype.getConnectionPoint=function(t,e,r,o,s){var a=o.end;if(t==null)return a;var l=typeof t=="string"?t:t.name,u=typeof t=="string"?{}:t.args,h=$r.registry.get(l);if(typeof h!="function")return $r.registry.onNotFound(l);var d=dt(h,this,o,e,r,u||{},s);return d?d.round(this.POINT_ROUNDING):a},n.prototype.updateMarkerAttr=function(t){var e,r=this.cell.getAttrs(),o="."+t+"-marker",s=r&&r[o];s&&this.updateAttrs(this.container,{},{attrs:(e={},e[o]=s,e),selectors:this.selectors})},n.prototype.findMarkerPoints=function(t,e,r){var o,s,a,l=this,u=function(P){for(var x=l.cell.getAttrs(),S=Object.keys(x),D=0,N=S.length;D<N;D+=1){var V=x[S[D]];if(V[P+"Marker"]||V[P+"-marker"]){var y=V.strokeWidth||V["stroke-width"];if(y)return parseFloat(y);break}}return null},h=t[0],d=t[t.length-1],f=this.containers.sourceMarker,v=this.containers.targetMarker,b=this.markerCache;if(f){if(this.updateMarkerAttr("source"),b.sourceBBox=b.sourceBBox||ye(f),b.sourceBBox.width>0){var w=Xn(f);o=e.clone().move(h||r,b.sourceBBox.width*w.sx*-1)}}else(a=u("source"))&&(o=e.clone().move(h||r,-a));return v?(this.updateMarkerAttr("target"),b.targetBBox=b.targetBBox||ye(v),b.targetBBox.width>0&&(w=Xn(v),s=r.clone().move(d||e,b.targetBBox.width*w.sx*-1))):(a=u("target"))&&(s=r.clone().move(d||e,-a)),b.sourcePoint=o||e.clone(),b.targetPoint=s||r.clone(),{source:o,target:s}},n.prototype.findPath=function(t,e,r){var o,s,a,l=this.cell.getConnector()||this.graph.options.connecting.connector;if(typeof l=="string"?o=l:(o=l.name,s=l.args),o){var u=Cr.registry.get(o);if(typeof u!="function")return Cr.registry.onNotFound(o);a=u}else a=Cr.presets.normal;var h=dt(a,this,e,r,t,A(A({},s),{raw:!0}),this);return typeof h=="string"?c.Path.parse(h):h},n.prototype.translateConnectionPoints=function(t,e){var r=this.markerCache;r.sourcePoint&&r.sourcePoint.translate(t,e),r.targetPoint&&r.targetPoint.translate(t,e),this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e)},n.prototype.updateLabelPositions=function(){if(this.containers.labels==null)return this;if(!this.path)return this;var t=this.cell,e=t.getLabels();if(e.length===0)return this;for(var r=t.getDefaultLabel(),o=this.normalizeLabelPosition(r.position),s=0,a=e.length;s<a;s+=1){var l=e[s],u=this.normalizeLabelPosition(l.position),h=Jt({},o,u),d=this.getLabelTransformationMatrix(h);this.labelCache[s].setAttribute("transform",pr(d))}return this},n.prototype.updateToolsPosition=function(){if(this.containers.tools==null)return this;var t="",e=this.options.toolsOffset,r=this.getConnectionLength();if(r!=null){r<this.options.shortLength&&(t="scale(.5)",e/=2);var o=this.getPointAtLength(e);if(o!=null&&Vt(this.toolCache,"transform","translate("+o.x+","+o.y+") "+t),this.options.doubleTools&&r>=this.options.longLength){var s=this.options.doubleToolsOffset||e;(o=this.getPointAtLength(r-s))!=null&&Vt(this.tool2Cache,"transform","translate("+o.x+","+o.y+") "+t),Vt(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&Vt(this.tool2Cache,"visibility","hidden")}return this},n.prototype.updateArrowheadMarkers=function(){var t=this.containers.arrowheads;if(t==null)return this;if(t.style.display==="none")return this;var e=this.containers.sourceArrowhead,r=this.containers.targetArrowhead;if(e&&r){var o=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;Xn(e,o),Xn(r,o),this.translateAndAutoOrientArrows(e,r)}return this},n.prototype.updateTerminalProperties=function(t){var e=this.cell,r=this.graph,o=e[t],s=o&&o.cell,a=t+"View";if(!s)return this[a]=null,this.updateTerminalMagnet(t),!0;var l=r.getCellById(s);if(!l)throw new Error("Edge's "+t+' node with id "'+s+'" not exists');var u=l.findView(r);return!!u&&(this[a]=u,this.updateTerminalMagnet(t),!0)},n.prototype.updateTerminalMagnet=function(t){var e=t+"Magnet",r=this.getTerminalView(t);if(r){var o=r.getMagnetFromEdgeTerminal(this.cell[t]);o===r.container&&(o=null),this[e]=o}else this[e]=null},n.prototype.translateAndAutoOrientArrows=function(t,e){var r=this.routePoints;t&&Xs(t,this.sourcePoint,r[0]||this.targetPoint,this.graph.view.stage),e&&Xs(e,this.targetPoint,r[r.length-1]||this.sourcePoint,this.graph.view.stage)},n.prototype.getLabelPositionAngle=function(t){var e=this.cell.getLabelAt(t);return e&&e.position&&typeof e.position=="object"&&e.position.angle||0},n.prototype.getLabelPositionArgs=function(t){var e=this.cell.getLabelAt(t);if(e&&e.position&&typeof e.position=="object")return e.position.options},n.prototype.getDefaultLabelPositionArgs=function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options},n.prototype.mergeLabelPositionArgs=function(t,e){return t===null?null:t===void 0?e===null?null:e:Jt({},e,t)},n.prototype.addLabel=function(t,e,r,o){var s,a,l,u=0;typeof t!="number"?(s=t.x,a=t.y,typeof e=="number"?(u=e,l=r):l=e):(s=t,a=e,typeof r=="number"?(u=r,l=o):l=r);var h=this.getDefaultLabelPositionArgs(),d=l,f=this.mergeLabelPositionArgs(d,h),v={position:this.getLabelPosition(s,a,u,f)};return this.cell.insertLabel(v,-1,l),-1},n.prototype.addVertex=function(t,e,r){var o=typeof t!="number",s=o?t.x:t,a=o?t.y:e,l=o?e:r,u={x:s,y:a},h=this.getVertexIndex(s,a);return this.cell.insertVertex(u,h,l),h},n.prototype.sendToken=function(t,e,r){var o,s,a,l,u="linear";typeof e=="object"?(o=e.duration,s=e.reversed===!0,a=e.selector,e.rotate===!1?l="":e.rotate===!0?l="auto":e.rotate!=null&&(l=""+e.rotate),e.timing&&(u=e.timing)):(o=e,s=!1,a=null);var h,d={dur:(o=o||1e3)+"ms",repeatCount:"1",calcMode:u,fill:"freeze"};if(l&&(d.rotate=l),s&&(d.keyPoints="1;0",d.keyTimes="0;1"),typeof e=="object"){e.duration,e.reversed,e.selector,e.rotate,e.timing;var f=z(e,["duration","reversed","selector","rotate","timing"]);Object.keys(f).forEach(function(D){d[D]=f[D]})}if(!((h=typeof a=="string"?this.findOne(a,this.container,this.selectors):this.containers.connection?this.containers.connection:this.container.querySelector("path"))instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var v=typeof t=="string"?this.findOne(t):t;if(v==null)throw new Error("Token animation requires a valid token element.");var b=v.parentNode,w=function(){b||Ln(v)},P=c.Vector.create(v);b||P.appendTo(this.graph.view.stage);var x=d.complete;d.complete=function(D){w(),r&&r(),x&&x(D)};var S=P.animateAlongPath(d,h);return function(){w(),S()}},n.prototype.getConnection=function(){return this.path!=null?this.path.clone():null},n.prototype.getConnectionPathData=function(){if(this.path==null)return"";var t=this.cache.pathCache;return vo(t,"data")||(t.data=this.path.serialize()),t.data||""},n.prototype.getConnectionSubdivisions=function(){if(this.path==null)return null;var t=this.cache.pathCache;return vo(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions},n.prototype.getConnectionLength=function(){if(this.path==null)return 0;var t=this.cache.pathCache;return vo(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length},n.prototype.getPointAtLength=function(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getPointAtRatio=function(t){return this.path==null?null:(wn(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))},n.prototype.getTangentAtLength=function(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getTangentAtRatio=function(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getClosestPoint=function(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getClosestPointLength=function(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getClosestPointRatio=function(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},n.prototype.getLabelPosition=function(t,e,r,o){var s,a={distance:0},l=0;typeof r=="number"?(l=r,s=o):s=r,s!=null&&(a.options=s);var u,h,d=s&&s.absoluteOffset,f=!(s&&s.absoluteDistance),v=s&&s.absoluteDistance&&s.reverseDistance,b=this.path,w={segmentSubdivisions:this.getConnectionSubdivisions()},P=new c.Point(t,e),x=b.closestPointT(P,w),S=this.getConnectionLength()||0,D=b.lengthAtT(x,w);if(f&&(D=S>0?D/S:0),v&&(D=-1*(S-D)||1),a.distance=D,d||(u=b.tangentAtT(x)),u)h=u.pointOffset(P);else{var N=b.pointAtT(x),V=P.diff(N);h={x:V.x,y:V.y}}return a.offset=h,a.angle=l,a},n.prototype.normalizeLabelPosition=function(t){return typeof t=="number"?{distance:t}:t},n.prototype.getLabelTransformationMatrix=function(t){var e=this.normalizeLabelPosition(t),r=e.options||{},o=e.angle||0,s=e.distance,a=s>0&&s<=1,l=0,u={x:0,y:0},h=e.offset;h&&(typeof h=="number"?l=h:(h.x!=null&&(u.x=h.x),h.y!=null&&(u.y=h.y)));var d,f=u.x!==0||u.y!==0||l===0,v=r.keepGradient,b=r.ensureLegibility,w=this.path,P={segmentSubdivisions:this.getConnectionSubdivisions()},x=a?s*this.getConnectionLength():s,S=w.tangentAtLength(x,P),D=o;if(S){if(f)(d=S.start).translate(u);else{var N=S.clone();N.rotate(-90,S.start),N.setLength(l),d=N.end}v&&(D=S.angle()+o,b&&(D=c.Angle.normalize((D+90)%180-90)))}else d=w.start,f&&d.translate(u);return ve().translate(d.x,d.y).rotate(D)},n.prototype.getLabelCoordinates=function(t){var e=this.getLabelTransformationMatrix(t);return new c.Point(e.e,e.f)},n.prototype.getVertexIndex=function(t,e){var r=this.cell.getVertices(),o=this.getClosestPointLength(new c.Point(t,e)),s=0;if(o!=null)for(var a=r.length;s<a;s+=1){var l=r[s],u=this.getClosestPointLength(l);if(u!=null&&o<u)break}return s},n.prototype.getEventArgs=function(t,e,r){var o=this,s=o.cell;return e==null||r==null?{e:t,view:o,edge:s,cell:s}:{e:t,x:e,y:r,view:o,edge:s,cell:s}},n.prototype.notifyUnhandledMouseDown=function(t,e,r){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})},n.prototype.notifyMouseDown=function(t,e,r){i.prototype.onMouseDown.call(this,t,e,r),this.notify("edge:mousedown",this.getEventArgs(t,e,r))},n.prototype.notifyMouseMove=function(t,e,r){i.prototype.onMouseMove.call(this,t,e,r),this.notify("edge:mousemove",this.getEventArgs(t,e,r))},n.prototype.notifyMouseUp=function(t,e,r){i.prototype.onMouseUp.call(this,t,e,r),this.notify("edge:mouseup",this.getEventArgs(t,e,r))},n.prototype.onClick=function(t,e,r){i.prototype.onClick.call(this,t,e,r),this.notify("edge:click",this.getEventArgs(t,e,r))},n.prototype.onDblClick=function(t,e,r){i.prototype.onDblClick.call(this,t,e,r),this.notify("edge:dblclick",this.getEventArgs(t,e,r))},n.prototype.onContextMenu=function(t,e,r){i.prototype.onContextMenu.call(this,t,e,r),this.notify("edge:contextmenu",this.getEventArgs(t,e,r))},n.prototype.onMouseDown=function(t,e,r){switch(this.notifyMouseDown(t,e,r),t.target.getAttribute("class")){case"vertex":return void this.startVertexDragging(t,e,r);case"vertex-remove":case"vertex-remove-area":return void this.handleVertexRemoving(t,e,r);case"connection":case"connection-wrap":return void this.handleVertexAdding(t,e,r);case"arrowhead":return void this.startArrowheadDragging(t,e,r);case"source-marker":case"target-marker":return void this.notifyUnhandledMouseDown(t,e,r)}this.startEdgeDragging(t,e,r)},n.prototype.onMouseMove=function(t,e,r){var o=this.getEventData(t);switch(o.action){case"drag-vertex":this.dragVertex(t,e,r);break;case"drag-label":this.dragLabel(t,e,r);break;case"drag-arrowhead":this.dragArrowhead(t,e,r);break;case"drag-edge":this.dragEdge(t,e,r)}return this.notifyMouseMove(t,e,r),o},n.prototype.onMouseUp=function(t,e,r){var o=this.getEventData(t);switch(o.action){case"drag-vertex":this.stopVertexDragging(t,e,r);break;case"drag-label":this.stopLabelDragging(t,e,r);break;case"drag-arrowhead":this.stopArrowheadDragging(t,e,r);break;case"drag-edge":this.stopEdgeDragging(t,e,r)}return this.notifyMouseUp(t,e,r),this.checkMouseleave(t),o},n.prototype.onMouseOver=function(t){i.prototype.onMouseOver.call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))},n.prototype.onMouseOut=function(t){i.prototype.onMouseOut.call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))},n.prototype.onMouseEnter=function(t){i.prototype.onMouseEnter.call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))},n.prototype.onMouseLeave=function(t){i.prototype.onMouseLeave.call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))},n.prototype.onMouseWheel=function(t,e,r,o){i.prototype.onMouseWheel.call(this,t,e,r,o),this.notify("edge:mousewheel",A({delta:o},this.getEventArgs(t,e,r)))},n.prototype.onCustomEvent=function(t,e,r,o){if(Hl(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if(e==="edge:remove")return void this.cell.remove({ui:!0});this.notify("edge:customevent",A({name:e},this.getEventArgs(t,r,o)))}this.notifyMouseDown(t,r,o)}else this.notify("edge:customevent",A({name:e},this.getEventArgs(t,r,o))),i.prototype.onCustomEvent.call(this,t,e,r,o)},n.prototype.onLabelMouseDown=function(t,e,r){this.notifyMouseDown(t,e,r),this.startLabelDragging(t,e,r),this.getEventData(t).stopPropagation&&t.stopPropagation()},n.prototype.startEdgeDragging=function(t,e,r){this.can("edgeMovable")?this.setEventData(t,{x:e,y:r,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(t,e,r)},n.prototype.dragEdge=function(t,e,r){var o=this.getEventData(t);o.moving||(o.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-o.x,r-o.y,{ui:!0}),this.setEventData(t,{x:e,y:r}),this.notify("edge:moving",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})},n.prototype.stopEdgeDragging=function(t,e,r){var o=this.getEventData(t);o.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:r,view:this,cell:this.cell,edge:this.cell})),o.moving=!1},n.prototype.prepareArrowheadDragging=function(t,e){var r=this.getTerminalMagnet(t),o={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:e.isNewEdge===!0,terminalType:t,initialMagnet:r,initialTerminal:fo(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(o),o},n.prototype.createValidateConnectionArgs=function(t){var e,r=[];r[4]=t,r[5]=this;var o=0,s=0;t==="source"?(o=2,e="target"):(s=2,e="source");var a=this.cell[e],l=a.cell;if(l){var u=void 0,h=r[o]=this.graph.renderer.findViewByCell(l);h&&(u=h.getMagnetFromEdgeTerminal(a))===h.container&&(u=void 0),r[o+1]=u}return function(d,f){return r[s]=d,r[s+1]=d.container===f?void 0:f,r}},n.prototype.beforeArrowheadDragging=function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)},n.prototype.afterArrowheadDragging=function(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null),this.container.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)},n.prototype.arrowheadDragging=function(t,e,r,o){var s;o.x=e,o.y=r,o.currentTarget!==t&&(o.currentMagnet&&o.currentView&&o.currentView.unhighlight(o.currentMagnet,{type:"magnetAdsorbed"}),o.currentView=this.graph.renderer.findViewByElem(t),o.currentView?(o.currentMagnet=o.currentView.findMagnet(t),o.currentMagnet&&(s=this.graph.hook).validateConnection.apply(s,W(W([],o.getValidateConnectionArgs(o.currentView,o.currentMagnet),!1),[o.currentView.getEdgeTerminal(o.currentMagnet,e,r,this.cell,o.terminalType)],!1))?o.currentView.highlight(o.currentMagnet,{type:"magnetAdsorbed"}):o.currentMagnet=null):o.currentMagnet=null),o.currentTarget=t,this.cell.prop(o.terminalType,{x:e,y:r},A(A({},o.options),{ui:!0}))},n.prototype.arrowheadDragged=function(t,e,r){var o=t.currentView,s=t.currentMagnet;if(s&&o){o.unhighlight(s,{type:"magnetAdsorbed"});var a=t.terminalType,l=o.getEdgeTerminal(s,e,r,this.cell,a);this.cell.setTerminal(a,l,{ui:!0})}},n.prototype.snapArrowhead=function(t,e,r){var o=this,s=this.graph,a=s.options.connecting,l=a.snap,u=a.allowEdge,h=typeof l=="object"&&l.radius||50,d={x:t-h,y:e-h,width:2*h,height:2*h},f=s.renderer.findViewsInArea(d);if(u){var v=s.renderer.findEdgeViewsInArea(d).filter(function(I){return I!==o});f.push.apply(f,v)}var b,w=r.closestView||null,P=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;var x,S=Number.MAX_SAFE_INTEGER,D=new c.Point(t,e);f.forEach(function(I){var X;I.container.getAttribute("magnet")!=="false"&&(b=I.cell.getBBox().getCenter().distance(D))<h&&b<S&&(P===I.container||(X=s.hook).validateConnection.apply(X,W(W([],r.getValidateConnectionArgs(I,null),!1),[I.getEdgeTerminal(I.container,t,e,o.cell,r.terminalType)],!1)))&&(S=b,r.closestView=I,r.closestMagnet=I.container),I.container.querySelectorAll("[magnet]").forEach(function(J){var Z;if(J.getAttribute("magnet")!=="false"){var it=I.getBBoxOfElement(J);(b=D.distance(it.getCenter()))<h&&b<S&&(P===J||(Z=s.hook).validateConnection.apply(Z,W(W([],r.getValidateConnectionArgs(I,J),!1),[I.getEdgeTerminal(J,t,e,o.cell,r.terminalType)],!1)))&&(S=b,r.closestView=I,r.closestMagnet=J)}})});var N=r.terminalType,V=r.closestView,y=r.closestMagnet,H=P!==y;if(w&&H&&w.unhighlight(P,{type:"magnetAdsorbed"}),V){if(!H)return;V.highlight(y,{type:"magnetAdsorbed"}),x=V.getEdgeTerminal(y,t,e,this.cell,N)}else x={x:t,y:e};this.cell.setTerminal(N,x,{},A(A({},r.options),{ui:!0}))},n.prototype.snapArrowheadEnd=function(t){var e=t.closestView,r=t.closestMagnet;e&&r&&(e.unhighlight(r,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(r)),t.closestView=null,t.closestMagnet=null},n.prototype.finishEmbedding=function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)},n.prototype.fallbackConnection=function(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0})}},n.prototype.notifyConnectionEvent=function(t,e){var r=t.terminalType,o=t.initialTerminal,s=this.cell[r];if(s&&!c.Edge.equalTerminals(o,s)){var a=this.graph,l=o,u=l.cell?a.getCellById(l.cell):null,h=l.port,d=u?a.findViewByCell(u):null,f=u||t.isNewEdge?null:c.Point.create(o).toJSON(),v=s,b=v.cell?a.getCellById(v.cell):null,w=v.port,P=b?a.findViewByCell(b):null,x=b?null:c.Point.create(s).toJSON();this.notify("edge:connected",{e,previousCell:u,previousPort:h,previousView:d,previousPoint:f,currentCell:b,currentView:P,currentPort:w,currentPoint:x,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:r,isNew:t.isNewEdge})}},n.prototype.highlightAvailableMagnets=function(t){var e=this,r=this.graph,o=r.model.getCells();t.marked={};for(var s=function(u,h){var d=r.renderer.findViewByCell(o[u]);if(!d)return"continue";var f=Array.prototype.slice.call(d.container.querySelectorAll("[magnet]"));d.container.getAttribute("magnet")!=="false"&&f.push(d.container);var v=f.filter(function(P){var x;return(x=r.hook).validateConnection.apply(x,W(W([],t.getValidateConnectionArgs(d,P),!1),[d.getEdgeTerminal(P,t.x,t.y,e.cell,t.terminalType)],!1))});if(v.length>0){for(var b=0,w=v.length;b<w;b+=1)d.highlight(v[b],{type:"magnetAvailable"});d.highlight(null,{type:"nodeAvailable"}),t.marked[d.cell.id]=v}},a=0,l=o.length;a<l;a+=1)s(a)},n.prototype.unhighlightAvailableMagnets=function(t){var e=this,r=t.marked||{};Object.keys(r).forEach(function(o){var s=e.graph.renderer.findViewByCell(o);s&&(r[o].forEach(function(a){s.unhighlight(a,{type:"magnetAvailable"})}),s.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null},n.prototype.startArrowheadDragging=function(t,e,r){if(this.can("arrowheadMovable")){var o=t.target.getAttribute("data-terminal"),s=this.prepareArrowheadDragging(o,{x:e,y:r});this.setEventData(t,s)}else this.notifyUnhandledMouseDown(t,e,r)},n.prototype.dragArrowhead=function(t,e,r){var o=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,r,o):this.arrowheadDragging(this.getEventTarget(t),e,r,o)},n.prototype.stopArrowheadDragging=function(t,e,r){var o=this.graph,s=this.getEventData(t);o.options.connecting.snap?this.snapArrowheadEnd(s):this.arrowheadDragged(s,e,r),o.hook.validateEdge(this.cell,s.terminalType,s.initialTerminal)?(this.finishEmbedding(s),this.notifyConnectionEvent(s,t)):this.fallbackConnection(s),this.afterArrowheadDragging(s)},n.prototype.startLabelDragging=function(t,e,r){if(this.can("edgeLabelMovable")){var o=t.currentTarget,s=parseInt(o.getAttribute("data-index"),10),a=this.getLabelPositionAngle(s),l=this.getLabelPositionArgs(s),u=this.getDefaultLabelPositionArgs(),h=this.mergeLabelPositionArgs(l,u);this.setEventData(t,{index:s,positionAngle:a,positionArgs:h,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)},n.prototype.dragLabel=function(t,e,r){var o=this.getEventData(t),s=this.cell.getLabelAt(o.index),a=Jt({},s,{position:this.getLabelPosition(e,r,o.positionAngle,o.positionArgs)});this.cell.setLabelAt(o.index,a)},n.prototype.stopLabelDragging=function(t,e,r){},n.prototype.handleVertexAdding=function(t,e,r){if(this.can("vertexAddable")){var o=this.addVertex({x:e,y:r},{ui:!0});this.setEventData(t,{index:o,action:"drag-vertex"})}else this.notifyUnhandledMouseDown(t,e,r)},n.prototype.handleVertexRemoving=function(t,e,r){if(this.can("vertexDeletable")){var o=t.target,s=parseInt(o.getAttribute("idx"),10);this.cell.removeVertexAt(s)}else this.notifyUnhandledMouseDown(t,e,r)},n.prototype.startVertexDragging=function(t,e,r){if(this.can("vertexMovable")){var o=t.target,s=parseInt(o.getAttribute("idx"),10);this.setEventData(t,{index:s,action:"drag-vertex"})}else this.notifyUnhandledMouseDown(t,e,r)},n.prototype.dragVertex=function(t,e,r){var o=this.getEventData(t);this.cell.setVertexAt(o.index,{x:e,y:r},{ui:!0})},n.prototype.stopVertexDragging=function(t,e,r){},n}(c.CellView),(Pi=c.EdgeView||(c.EdgeView={})).toStringTag="X6."+Pi.name,Pi.isEdgeView=function(i){if(i==null)return!1;if(i instanceof Pi)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===Pi.toStringTag)&&typeof t.isNodeView=="function"&&typeof t.isEdgeView=="function"&&typeof t.confirmUpdate=="function"&&typeof t.update=="function"&&typeof t.getConnection=="function"},c.EdgeView.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),c.EdgeView.registry.register("edge",c.EdgeView,!0),c.NodeView=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.scalableNode=null,t.rotatableNode=null,t.scalableSelector="scalable",t.rotatableSelector="rotatable",t.defaultPortMarkup=c.Markup.getPortMarkup(),t.defaultPortLabelMarkup=c.Markup.getPortLabelMarkup(),t.defaultPortContainerMarkup=c.Markup.getPortContainerMarkup(),t.portsCache={},t}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.getContainerClassName=function(){var t=[i.prototype.getContainerClassName.call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")},n.prototype.updateClassName=function(t){var e=t.target;if(e.hasAttribute("magnet")){var r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?tn(e,r):Rt(e,r)}else r=this.prefixClassName("node-immovable"),this.can("nodeMovable")?this.removeClass(r):this.addClass(r)},n.prototype.isNodeView=function(){return!0},n.prototype.confirmUpdate=function(t,e){var r=this;e===void 0&&(e={});var o=t;return this.hasAction(o,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","resize","translate","rotate","ports","tools"])):(o=this.handleAction(o,"resize",function(){return r.resize(e)},"update"),o=this.handleAction(o,"update",function(){return r.update()},We.useCSSSelector?"ports":null),o=this.handleAction(o,"translate",function(){return r.translate()}),o=this.handleAction(o,"rotate",function(){return r.rotate()}),o=this.handleAction(o,"ports",function(){return r.renderPorts()}),o=this.handleAction(o,"tools",function(){return r.renderTools()})),o},n.prototype.update=function(t){this.cleanCache(),We.useCSSSelector&&this.removePorts();var e=this.cell,r=e.getSize(),o=e.getAttrs();this.updateAttrs(this.container,o,{attrs:t===o?null:t,rootBBox:new c.Rectangle(0,0,r.width,r.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),We.useCSSSelector&&this.renderPorts()},n.prototype.renderMarkup=function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid node markup.")},n.prototype.renderJSONMarkup=function(t){var e=this.parseJSONMarkup(t,this.container),r=function(o){return Array.isArray(o)?o[0]:o};this.selectors=e.selectors,this.rotatableNode=r(this.selectors[this.rotatableSelector]),this.scalableNode=r(this.selectors[this.scalableSelector]),this.container.appendChild(e.fragment)},n.prototype.renderStringMarkup=function(t){bo(this.container,c.Vector.toNodes(c.Vector.createVectors(t))),this.rotatableNode=Ds(this.container,"."+this.rotatableSelector),this.scalableNode=Ds(this.container,"."+this.scalableSelector),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)},n.prototype.render=function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),We.useCSSSelector||this.renderPorts(),this.renderTools(),this},n.prototype.resize=function(t){if(t===void 0&&(t={}),this.scalableNode)return this.updateSize(t);this.cell.getAngle()&&this.rotate(),this.update()},n.prototype.translate=function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()},n.prototype.rotate=function(){if(this.rotatableNode)return this.updateRotation(),void this.update();this.updateTransform()},n.prototype.getTranslationString=function(){var t=this.cell.getPosition();return"translate("+t.x+","+t.y+")"},n.prototype.getRotationString=function(){var t=this.cell.getAngle();if(t){var e=this.cell.getSize();return"rotate("+t+","+e.width/2+","+e.height/2+")"}},n.prototype.updateTransform=function(){var t=this.getTranslationString(),e=this.getRotationString();e&&(t+=" "+e),this.container.setAttribute("transform",t)},n.prototype.updateRotation=function(){if(this.rotatableNode!=null){var t=this.getRotationString();t!=null?this.rotatableNode.setAttribute("transform",t):this.rotatableNode.removeAttribute("transform")}},n.prototype.updateTranslation=function(){this.container.setAttribute("transform",this.getTranslationString())},n.prototype.updateSize=function(t){t===void 0&&(t={});var e=this.cell,r=e.getSize(),o=e.getAngle(),s=this.scalableNode,a=!1;s.getElementsByTagName("path").length>0&&(a=!0);var l=ye(s,{recursive:a}),u=r.width/(l.width||1),h=r.height/(l.height||1);s.setAttribute("transform","scale("+u+","+h+")");var d=this.rotatableNode;if(d!=null){var f=d.getAttribute("transform");if(f){d.setAttribute("transform",f+" rotate("+-o+","+r.width/2+","+r.height/2+")");var v=ye(s,{target:this.graph.view.stage});e.prop("position",{x:v.x,y:v.y},A({updated:!0},t)),this.translate(),this.rotate()}}this.update()},n.prototype.findPortElem=function(t,e){var r=t?this.portsCache[t]:null;if(!r)return null;var o=r.portContentElement,s=r.portContentSelectors||{};return this.findOne(e,o,s)},n.prototype.initializePorts=function(){this.cleanPortsCache()},n.prototype.refreshPorts=function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()},n.prototype.cleanPortsCache=function(){this.portsCache={}},n.prototype.removePorts=function(){var t=this;Object.keys(this.portsCache).forEach(function(e){Ln(t.portsCache[e].portElement)})},n.prototype.renderPorts=function(){var t=this,e=this.getPortsContainer(),r=[];e.childNodes.forEach(function(a){r.push(a)});var o=xl(this.cell.getParsedPorts(),"zIndex"),s="auto";o.auto&&o.auto.forEach(function(a){var l=t.getPortElement(a);e.append(l),r.push(l)}),Object.keys(o).forEach(function(a){if(a!==s){var l=parseInt(a,10);t.appendPorts(o[a],l,r)}}),this.updatePorts()},n.prototype.getPortsContainer=function(){return this.rotatableNode||this.container},n.prototype.appendPorts=function(t,e,r){var o=this,s=t.map(function(a){return o.getPortElement(a)});r[e]||e<0?Ls(r[Math.max(e,0)],s):bo(this.getPortsContainer(),s)},n.prototype.getPortElement=function(t){var e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)},n.prototype.createPortElement=function(t){var e=c.Markup.renderMarkup(this.getPortContainerMarkup()),r=e.elem;if(r==null)throw new Error("Invalid port container markup.");var o=(e=c.Markup.renderMarkup(this.getPortMarkup(t))).elem,s=e.selectors;if(o==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},o);var a,l=(e=c.Markup.renderMarkup(this.getPortLabelMarkup(t.label))).elem,u=e.selectors;if(l==null)throw new Error("Invalid port label markup.");if(s&&u){for(var h in u)if(s[h]&&h!==this.rootSelector)throw new Error("Selectors within port must be unique.");a=A(A({},s),u)}else a=s||u;var d="x6-port";return t.group&&(d+=" x6-port-"+t.group),Rt(r,d),Rt(o,"x6-port-body"),Rt(l,"x6-port-label"),r.appendChild(o),r.appendChild(l),this.portsCache[t.id]={portElement:r,portSelectors:a,portLabelElement:l,portLabelSelectors:u,portContentElement:o,portContentSelectors:s},this.graph.hook.onPortRendered({port:t,node:this.cell,container:r,selectors:a,labelContainer:l,labelSelectors:u,contentContainer:o,contentSelectors:s}),r},n.prototype.updatePorts=function(){var t=this;this.updatePortGroup();var e=this.cell.getParsedGroups();Object.keys(e).forEach(function(r){return t.updatePortGroup(r)})},n.prototype.updatePortGroup=function(t){for(var e=c.Rectangle.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(t,e),o=0,s=r.length;o<s;o+=1){var a=r[o],l=a.portId,u=this.portsCache[l]||{},h=a.portLayout;if(this.applyPortTransform(u.portElement,h),a.portAttrs!=null){var d={selectors:u.portSelectors||{}};a.portSize&&(d.rootBBox=c.Rectangle.fromSize(a.portSize)),this.updateAttrs(u.portElement,a.portAttrs,d)}var f=a.labelLayout;f&&(this.applyPortTransform(u.portLabelElement,f,-(h.angle||0)),f.attrs)&&(d={selectors:u.portLabelSelectors||{}},a.labelSize&&(d.rootBBox=c.Rectangle.fromSize(a.labelSize)),this.updateAttrs(u.portLabelElement,f.attrs,d))}},n.prototype.applyPortTransform=function(t,e,r){r===void 0&&(r=0);var o=e.angle,s=e.position;Vr(t,ve().rotate(r).translate(s.x||0,s.y||0).rotate(o||0),{absolute:!0})},n.prototype.getPortContainerMarkup=function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup},n.prototype.getPortMarkup=function(t){return t.markup||this.cell.portMarkup||this.defaultPortMarkup},n.prototype.getPortLabelMarkup=function(t){return t.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup},n.prototype.getEventArgs=function(t,e,r){var o=this,s=o.cell;return e==null||r==null?{e:t,view:o,node:s,cell:s}:{e:t,x:e,y:r,view:o,node:s,cell:s}},n.prototype.notifyMouseDown=function(t,e,r){i.prototype.onMouseDown.call(this,t,e,r),this.notify("node:mousedown",this.getEventArgs(t,e,r))},n.prototype.notifyMouseMove=function(t,e,r){i.prototype.onMouseMove.call(this,t,e,r),this.notify("node:mousemove",this.getEventArgs(t,e,r))},n.prototype.notifyMouseUp=function(t,e,r){i.prototype.onMouseUp.call(this,t,e,r),this.notify("node:mouseup",this.getEventArgs(t,e,r))},n.prototype.onClick=function(t,e,r){i.prototype.onClick.call(this,t,e,r),this.notify("node:click",this.getEventArgs(t,e,r))},n.prototype.onDblClick=function(t,e,r){i.prototype.onDblClick.call(this,t,e,r),this.notify("node:dblclick",this.getEventArgs(t,e,r))},n.prototype.onContextMenu=function(t,e,r){i.prototype.onContextMenu.call(this,t,e,r),this.notify("node:contextmenu",this.getEventArgs(t,e,r))},n.prototype.onMouseDown=function(t,e,r){if(!this.isPropagationStopped(t)){var o=t.target;Fs(o)||Ul(o)||(this.notifyMouseDown(t,e,r),this.startNodeDragging(t,e,r))}},n.prototype.onMouseMove=function(t,e,r){var o=this.getEventData(t),s=o.action;if(s==="magnet")this.dragMagnet(t,e,r);else{if(s==="move"){var a=o.targetView||this;a.dragNode(t,e,r),a.notify("node:moving",{e:t,x:e,y:r,view:a,cell:a.cell,node:a.cell})}this.notifyMouseMove(t,e,r)}this.setEventData(t,o)},n.prototype.onMouseUp=function(t,e,r){var o=this.getEventData(t),s=o.action;if(s==="magnet")this.stopMagnetDragging(t,e,r);else{var a=t.target;if(Fs(a)||Ul(a))return;this.notifyMouseUp(t,e,r),s==="move"&&(o.targetView||this).stopNodeDragging(t,e,r)}var l=o.targetMagnet;l&&this.onMagnetClick(t,l,e,r),this.checkMouseleave(t)},n.prototype.onMouseOver=function(t){i.prototype.onMouseOver.call(this,t),this.notify("node:mouseover",this.getEventArgs(t))},n.prototype.onMouseOut=function(t){i.prototype.onMouseOut.call(this,t),this.notify("node:mouseout",this.getEventArgs(t))},n.prototype.onMouseEnter=function(t){this.updateClassName(t),i.prototype.onMouseEnter.call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))},n.prototype.onMouseLeave=function(t){i.prototype.onMouseLeave.call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))},n.prototype.onMouseWheel=function(t,e,r,o){i.prototype.onMouseWheel.call(this,t,e,r,o),this.notify("node:mousewheel",A({delta:o},this.getEventArgs(t,e,r)))},n.prototype.onMagnetClick=function(t,e,r,o){this.graph.view.getMouseMovedCount(t)>this.graph.options.clickThreshold||this.notify("node:magnet:click",A({magnet:e},this.getEventArgs(t,r,o)))},n.prototype.onMagnetDblClick=function(t,e,r,o){this.notify("node:magnet:dblclick",A({magnet:e},this.getEventArgs(t,r,o)))},n.prototype.onMagnetContextMenu=function(t,e,r,o){this.notify("node:magnet:contextmenu",A({magnet:e},this.getEventArgs(t,r,o)))},n.prototype.onMagnetMouseDown=function(t,e,r,o){this.startMagnetDragging(t,r,o)},n.prototype.onCustomEvent=function(t,e,r,o){this.notify("node:customevent",A({name:e},this.getEventArgs(t,r,o))),i.prototype.onCustomEvent.call(this,t,e,r,o)},n.prototype.prepareEmbedding=function(t){var e=this.getEventData(t).cell||this.cell,r=this.graph.findViewByCell(e),o=this.graph.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:e,view:r,cell:e,x:o.x,y:o.y,currentParent:e.getParent()})},n.prototype.processEmbedding=function(t,e){var r=this,o=e.cell||this.cell,s=e.graph||this.graph,a=s.options.embedding,l=a.findParent,u=typeof l=="function"?dt(l,s,{view:this,node:this.cell}).filter(function(D){return c.Cell.isCell(D)&&r.cell.id!==D.id&&!D.isDescendantOf(r.cell)}):s.model.getNodesUnderNode(o,{by:l});if(a.frontOnly&&u.length>0){var h=xl(u,"zIndex"),d=Cp(Object.keys(h));d&&(u=h[d])}u=u.filter(function(D){return D.visible});for(var f=null,v=e.candidateEmbedView,b=a.validate,w=u.length-1;w>=0;w-=1){var P=u[w];if(v&&v.cell.id===P.id){f=v;break}var x=P.findView(s);if(dt(b,s,{child:this.cell,parent:x.cell,childView:this,parentView:x})){f=x;break}}this.clearEmbedding(e),f&&f.highlight(null,{type:"embedding"}),e.candidateEmbedView=f;var S=s.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:o,node:o,view:s.findViewByCell(o),x:S.x,y:S.y,currentParent:o.getParent(),candidateParent:f?f.cell:null})},n.prototype.clearEmbedding=function(t){var e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)},n.prototype.finalizeEmbedding=function(t,e){this.graph.startBatch("embedding");var r=e.cell||this.cell,o=e.graph||this.graph,s=o.findViewByCell(r),a=r.getParent(),l=e.candidateEmbedView;if(l?(l.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,a!=null&&a.id===l.cell.id||l.cell.insertChild(r,void 0,{ui:!0})):a&&a.unembed(r,{ui:!0}),o.model.getConnectedEdges(r,{deep:!0}).forEach(function(h){h.updateParent({ui:!0})}),s&&l){var u=o.snapToGrid(t.clientX,t.clientY);s.notify("node:embedded",{e:t,cell:r,x:u.x,y:u.y,node:r,view:o.findViewByCell(r),previousParent:a,currentParent:r.getParent()})}this.graph.stopBatch("embedding")},n.prototype.getDelegatedView=function(){for(var t=this.cell,e=this;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.renderer.findViewByCell(t)}return null},n.prototype.startMagnetDragging=function(t,e,r){if(this.can("magnetConnectable")){t.stopPropagation();var o=t.currentTarget,s=this.graph;this.setEventData(t,{targetMagnet:o}),s.hook.validateMagnet(this,o,t)?(s.options.magnetThreshold<=0&&this.startConnectting(t,o,e,r),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):((mo(o,"x6-port-body")||Ct(o).closest(".x6-port-body").length>0)&&this.stopPropagation(t),this.onMouseDown(t,e,r)),s.view.delegateDragEvents(t,this)}},n.prototype.startConnectting=function(t,e,r,o){this.graph.model.startBatch("add-edge");var s=this.createEdgeFromMagnet(e,r,o);s.notifyMouseDown(t,r,o),s.setEventData(t,s.prepareArrowheadDragging("target",{x:r,y:o,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:s})},n.prototype.createEdgeFromMagnet=function(t,e,r){var o=this.graph,s=o.model,a=o.hook.getDefaultEdge(this,t);return a.setSource(A(A({},a.getSource()),this.getEdgeTerminal(t,e,r,a,"source"))),a.setTarget(A(A({},a.getTarget()),{x:e,y:r})),a.addTo(s,{async:!1,ui:!0}),a.findView(o)},n.prototype.dragMagnet=function(t,e,r){var o=this.getEventData(t),s=o.edgeView;if(s)s.onMouseMove(t,e,r),this.autoScrollGraph(t.clientX,t.clientY);else{var a=this.graph,l=a.options.magnetThreshold,u=this.getEventTarget(t),h=o.targetMagnet;if(l==="onleave"){if(h===u||h.contains(u))return}else if(a.view.getMouseMovedCount(t)<=l)return;this.startConnectting(t,h,e,r)}},n.prototype.stopMagnetDragging=function(t,e,r){var o=this.eventData(t).edgeView;o&&(o.onMouseUp(t,e,r),this.graph.model.stopBatch("add-edge"))},n.prototype.notifyUnhandledMouseDown=function(t,e,r){this.notify("node:unhandled:mousedown",{e:t,x:e,y:r,view:this,cell:this.cell,node:this.cell})},n.prototype.notifyNodeMove=function(t,e,r,o,s){var a=this,l=[s],u=this.graph.selection.widget;if(u&&u.options.movable){var h=this.graph.getSelectedCells();h.includes(s)&&(l=h.filter(function(d){return d.isNode()}))}l.forEach(function(d){a.notify(t,{e,x:r,y:o,cell:d,node:d,view:d.findView(a.graph)})})},n.prototype.startNodeDragging=function(t,e,r){var o=this.getDelegatedView();if(o==null||!o.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,r);this.setEventData(t,{targetView:o,action:"move"});var s=c.Point.create(o.cell.getPosition());o.setEventData(t,{moving:!1,offset:s.diff(e,r),restrict:this.graph.hook.getRestrictArea(o)})},n.prototype.dragNode=function(t,e,r){var o=this.cell,s=this.graph,a=s.getGridSize(),l=this.getEventData(t),u=l.offset,h=l.restrict;l.moving||(l.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,r,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);var d=c.Util.snapToGrid(e+u.x,a),f=c.Util.snapToGrid(r+u.y,a);o.setPosition(d,f,{restrict:h,deep:!0,ui:!0}),s.options.embedding.enabled&&(l.embedding||(this.prepareEmbedding(t),l.embedding=!0),this.processEmbedding(t,l))},n.prototype.stopNodeDragging=function(t,e,r){var o=this.getEventData(t);o.embedding&&this.finalizeEmbedding(t,o),o.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,r,this.cell)),o.moving=!1,o.embedding=!1},n.prototype.autoScrollGraph=function(t,e){var r=this.graph.scroller.widget;r&&r.autoScroll(t,e)},n}(c.CellView),(Mi=c.NodeView||(c.NodeView={})).toStringTag="X6."+Mi.name,Mi.isNodeView=function(i){if(i==null)return!1;if(i instanceof Mi)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===Mi.toStringTag)&&typeof t.isNodeView=="function"&&typeof t.isEdgeView=="function"&&typeof t.confirmUpdate=="function"&&typeof t.update=="function"&&typeof t.findPortElem=="function"&&typeof t.resize=="function"&&typeof t.rotate=="function"&&typeof t.translate=="function"},c.NodeView.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),c.NodeView.registry.register("node",c.NodeView,!0);var Ff=Tu("text"),Bf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n}(zn("text",{view:Ff,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(i){var n=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return B(e,t),e.prototype.confirmUpdate=function(r,o){o===void 0&&(o={});var s=t.prototype.confirmUpdate.call(this,r,o);return this.hasAction(s,"scale")&&(this.resize(),s=this.removeAction(s,"scale")),s},e}(c.NodeView);i.View=n,n.config({actions:{attrs:["scale"]}}),c.NodeView.registry.register(Ff,n)})(Bf||(Bf={}));var Si,Du=function(i){function n(t,e){e===void 0&&(e={});var r=i.call(this)||this;return r.length=0,r.comparator=e.comparator||"zIndex",r.clean(),t&&r.reset(t,{silent:!0}),r}return B(n,i),n.prototype.toJSON=function(){return this.cells.map(function(t){return t.toJSON()})},n.prototype.add=function(t,e,r){var o,s,a,l=this;typeof e=="number"?(s=e,a=A({merge:!1},r)):(s=this.length,a=A({merge:!1},e)),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var u=Array.isArray(t)?t:[t],h=this.comparator&&typeof e!="number"&&a.sort!==!1,d=this.comparator||null,f=!1,v=[],b=[];return u.forEach(function(w){var P=l.get(w);P?a.merge&&!w.isSameStore(P)&&(P.setProp(w.getProp(),r),b.push(P),h&&!f&&(f=d==null||typeof d=="function"?P.hasChanged():typeof d=="string"?P.hasChanged(d):d.some(function(x){return P.hasChanged(x)}))):(v.push(w),l.reference(w))}),v.length&&(h&&(f=!0),(o=this.cells).splice.apply(o,W([s,0],v,!1)),this.length=this.cells.length),f&&this.sort({silent:!0}),a.silent||(v.forEach(function(w,P){var x={cell:w,index:s+P,options:a};l.trigger("added",x),a.dryrun||w.notify("added",A({},x))}),f&&this.trigger("sorted"),(v.length||b.length)&&this.trigger("updated",{added:v,merged:b,removed:[],options:a})),this},n.prototype.remove=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.removeCells(r,e);return!e.silent&&o.length>0&&this.trigger("updated",{options:e,removed:o,added:[],merged:[]}),Array.isArray(t)?o:o[0]},n.prototype.removeCells=function(t,e){for(var r=[],o=0;o<t.length;o+=1){var s=this.get(t[o]);if(s!=null){var a=this.cells.indexOf(s);this.cells.splice(a,1),this.length-=1,delete this.map[s.id],r.push(s),this.unreference(s),e.dryrun||s.remove(),e.silent||(this.trigger("removed",{cell:s,index:a,options:e}),e.dryrun||s.notify("removed",{cell:s,index:a,options:e}))}}return r},n.prototype.reset=function(t,e){var r=this;e===void 0&&(e={});var o=this.cells.slice();if(o.forEach(function(u){return r.unreference(u)}),this.clean(),this.add(t,A({silent:!0},e)),!e.silent){var s=this.cells.slice();this.trigger("reseted",{options:e,previous:o,current:s});var a=[],l=[];s.forEach(function(u){o.some(function(h){return h.id===u.id})||a.push(u)}),o.forEach(function(u){s.some(function(h){return h.id===u.id})||l.push(u)}),this.trigger("updated",{options:e,added:a,removed:l,merged:[]})}return this},n.prototype.push=function(t,e){return this.add(t,this.length,e)},n.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,t)},n.prototype.unshift=function(t,e){return this.add(t,0,e)},n.prototype.shift=function(t){var e=this.at(0);return this.remove(e,t)},n.prototype.get=function(t){if(t==null)return null;var e=typeof t=="string"||typeof t=="number"?t:t.id;return this.map[e]||null},n.prototype.has=function(t){return this.get(t)!=null},n.prototype.at=function(t){return t<0&&(t+=this.length),this.cells[t]||null},n.prototype.first=function(){return this.at(0)},n.prototype.last=function(){return this.at(-1)},n.prototype.indexOf=function(t){return this.cells.indexOf(t)},n.prototype.toArray=function(){return this.cells.slice()},n.prototype.sort=function(t){return t===void 0&&(t={}),this.comparator!=null&&(this.cells=ys(this.cells,this.comparator),t.silent||this.trigger("sorted")),this},n.prototype.clone=function(){return new this.constructor(this.cells.slice(),{comparator:this.comparator})},n.prototype.reference=function(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)},n.prototype.unreference=function(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]},n.prototype.notifyCellEvent=function(t,e){var r=e.cell;this.trigger("cell:"+t,e),r&&(r.isNode()?this.trigger("node:"+t,A(A({},e),{node:r})):r.isEdge()&&this.trigger("edge:"+t,A(A({},e),{edge:r})))},n.prototype.clean=function(){this.length=0,this.cells=[],this.map={}},n}(c.Basecoat);c.Model=function(i){function n(t){t===void 0&&(t=[]);var e=i.call(this)||this;return e.batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new Du(t),e.setup(),e}return B(n,i),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.notify=function(t,e){this.trigger(t,e);var r=this.graph;return r&&(t==="sorted"||t==="reseted"||t==="updated"?r.trigger("model:"+t,e):r.trigger(t,e)),this},n.prototype.setup=function(){var t=this,e=this.collection;e.on("sorted",function(){return t.notify("sorted",null)}),e.on("updated",function(r){return t.notify("updated",r)}),e.on("cell:change:zIndex",function(){return t.sortOnChangeZ()}),e.on("added",function(r){var o=r.cell;t.onCellAdded(o)}),e.on("removed",function(r){var o=r.cell;t.onCellRemoved(o,r.options),t.notify("cell:removed",r),o.isNode()?t.notify("node:removed",A(A({},r),{node:o})):o.isEdge()&&t.notify("edge:removed",A(A({},r),{edge:o}))}),e.on("reseted",function(r){t.onReset(r.current),t.notify("reseted",r)}),e.on("edge:change:source",function(r){var o=r.edge;return t.onEdgeTerminalChanged(o,"source")}),e.on("edge:change:target",function(r){var o=r.edge;t.onEdgeTerminalChanged(o,"target")})},n.prototype.sortOnChangeZ=function(){this.collection.sort()},n.prototype.onCellAdded=function(t){var e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0},n.prototype.onCellRemoved=function(t,e){var r=t.id;if(t.isEdge()){delete this.edges[r];var o,s,a=t.getSource(),l=t.getTarget();a&&a.cell&&(s=(o=this.outgoings[a.cell])?o.indexOf(r):-1)>=0&&(o.splice(s,1),o.length===0&&delete this.outgoings[a.cell]),l&&l.cell&&(s=(o=this.incomings[l.cell])?o.indexOf(r):-1)>=0&&(o.splice(s,1),o.length===0&&delete this.incomings[l.cell])}else delete this.nodes[r];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)},n.prototype.onReset=function(t){var e=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(function(r){return e.onCellAdded(r)})},n.prototype.onEdgeTerminalChanged=function(t,e){var r=e==="source"?this.outgoings:this.incomings,o=t.previous(e);if(o&&o.cell){var s=c.Cell.isCell(o.cell)?o.cell.id:o.cell;(u=(l=r[s])?l.indexOf(t.id):-1)>=0&&(l.splice(u,1),l.length===0&&delete r[s])}var a=t.getTerminal(e);if(a&&a.cell){var l,u,h=c.Cell.isCell(a.cell)?a.cell.id:a.cell;(u=(l=r[h]||[]).indexOf(t.id))===-1&&l.push(t.id),r[h]=l}},n.prototype.prepareCell=function(t,e){return t.model||e&&e.dryrun||(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t},n.prototype.resetCells=function(t,e){var r=this;return e===void 0&&(e={}),t.map(function(o){return r.prepareCell(o,A(A({},e),{dryrun:!0}))}),this.collection.reset(t,e),t.map(function(o){return r.prepareCell(o,{options:e})}),this},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getCells();if(e.length===0)return this;var r=A(A({},t),{clear:!0});return this.batchUpdate("clear",function(){for(var o=e.sort(function(a,l){return(a.isEdge()?1:2)-(l.isEdge()?1:2)});o.length>0;){var s=o.shift();s&&s.remove(r)}},r),this},n.prototype.addNode=function(t,e){e===void 0&&(e={});var r=c.Node.isNode(t)?t:this.createNode(t);return this.addCell(r,e),r},n.prototype.createNode=function(t){return c.Node.create(t)},n.prototype.addEdge=function(t,e){e===void 0&&(e={});var r=c.Edge.isEdge(t)?t:this.createEdge(t);return this.addCell(r,e),r},n.prototype.createEdge=function(t){return c.Edge.create(t)},n.prototype.addCell=function(t,e){var r=this;return e===void 0&&(e={}),Array.isArray(t)?this.addCells(t,e):(this.collection.has(t)||this.addings.has(t)||(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(function(o){return r.addCell(o,e)}),this.addings.delete(t)),this)},n.prototype.addCells=function(t,e){var r=this;e===void 0&&(e={});var o=t.length;if(o===0)return this;var s=A(A({},e),{position:o-1,maxPosition:o-1});return this.startBatch("add",A(A({},s),{cells:t})),t.forEach(function(a){r.addCell(a,s),s.position-=1}),this.stopBatch("add",A(A({},s),{cells:t})),this},n.prototype.removeCell=function(t,e){e===void 0&&(e={});var r=typeof t=="string"?this.getCell(t):t;return r&&this.has(r)?this.collection.remove(r,e):null},n.prototype.updateCellId=function(t,e){this.startBatch("update",{id:e}),t.prop("id",e);var r=t.clone({keepId:!0});return this.addCell(r),this.getConnectedEdges(t).forEach(function(o){var s=o.getSourceCell(),a=o.getTargetCell();s===t&&o.setSource(A(A({},o.getSource()),{cell:e})),a===t&&o.setTarget(A(A({},o.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),r},n.prototype.removeCells=function(t,e){var r=this;return e===void 0&&(e={}),t.length?this.batchUpdate("remove",function(){return t.map(function(o){return r.removeCell(o,e)})}):[]},n.prototype.removeConnectedEdges=function(t,e){e===void 0&&(e={});var r=this.getConnectedEdges(t);return r.forEach(function(o){o.remove(e)}),r},n.prototype.disconnectConnectedEdges=function(t,e){e===void 0&&(e={});var r=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(function(o){var s=o.getSourceCell(),a=o.getTargetCell();s&&s.id===r&&o.setSource({x:0,y:0},e),a&&a.id===r&&o.setTarget({x:0,y:0},e)})},n.prototype.has=function(t){return this.collection.has(t)},n.prototype.total=function(){return this.collection.length},n.prototype.indexOf=function(t){return this.collection.indexOf(t)},n.prototype.getCell=function(t){return this.collection.get(t)},n.prototype.getCells=function(){return this.collection.toArray()},n.prototype.getFirstCell=function(){return this.collection.first()},n.prototype.getLastCell=function(){return this.collection.last()},n.prototype.getMinZIndex=function(){var t=this.collection.first();return t&&t.getZIndex()||0},n.prototype.getMaxZIndex=function(){var t=this.collection.last();return t&&t.getZIndex()||0},n.prototype.getCellsFromCache=function(t){var e=this;return t?Object.keys(t).map(function(r){return e.getCell(r)}).filter(function(r){return r!=null}):[]},n.prototype.getNodes=function(){return this.getCellsFromCache(this.nodes)},n.prototype.getEdges=function(){return this.getCellsFromCache(this.edges)},n.prototype.getOutgoingEdges=function(t){var e=this,r=typeof t=="string"?t:t.id,o=this.outgoings[r];return o?o.map(function(s){return e.getCell(s)}).filter(function(s){return s&&s.isEdge()}):null},n.prototype.getIncomingEdges=function(t){var e=this,r=typeof t=="string"?t:t.id,o=this.incomings[r];return o?o.map(function(s){return e.getCell(s)}).filter(function(s){return s&&s.isEdge()}):null},n.prototype.getConnectedEdges=function(t,e){var r=this;e===void 0&&(e={});var o=[],s=typeof t=="string"?this.getCell(t):t;if(s==null)return o;var a={},l=e.indirect,u=e.incoming,h=e.outgoing;u==null&&h==null&&(u=h=!0);var d=function(w,P){var x=P?r.getOutgoingEdges(w):r.getIncomingEdges(w);if(x!=null&&x.forEach(function(D){a[D.id]||(o.push(D),a[D.id]=!0,l&&(u&&d(D,!1),h&&d(D,!0)))}),l&&w.isEdge()){var S=P?w.getTargetCell():w.getSourceCell();S&&S.isEdge()&&(a[S.id]||(o.push(S),d(S,P)))}};if(h&&d(s,!0),u&&d(s,!1),e.deep){var f=s.getDescendants({deep:!0}),v={};f.forEach(function(w){w.isNode()&&(v[w.id]=!0)});var b=function(w,P){var x=P?r.getOutgoingEdges(w.id):r.getIncomingEdges(w.id);x!=null&&x.forEach(function(S){if(!a[S.id]){var D=S.getSourceCell(),N=S.getTargetCell();if(!e.enclosed&&D&&v[D.id]&&N&&v[N.id])return;o.push(S),a[S.id]=!0}})};f.forEach(function(w){w.isEdge()||(h&&b(w,!0),u&&b(w,!1))})}return o},n.prototype.isBoundary=function(t,e){var r=typeof t=="string"?this.getCell(t):t,o=e?this.getIncomingEdges(r):this.getOutgoingEdges(r);return o==null||o.length===0},n.prototype.getBoundaryNodes=function(t){var e=this,r=[];return Object.keys(this.nodes).forEach(function(o){if(e.isBoundary(o,t)){var s=e.getCell(o);s&&r.push(s)}}),r},n.prototype.getRoots=function(){return this.getBoundaryNodes(!0)},n.prototype.getLeafs=function(){return this.getBoundaryNodes(!1)},n.prototype.isRoot=function(t){return this.isBoundary(t,!0)},n.prototype.isLeaf=function(t){return this.isBoundary(t,!1)},n.prototype.getNeighbors=function(t,e){e===void 0&&(e={});var r=e.incoming,o=e.outgoing;r==null&&o==null&&(r=o=!0);var s=this.getConnectedEdges(t,e).reduce(function(u,h){var d=h.hasLoop(e),f=h.getSourceCell(),v=h.getTargetCell();return r&&f&&f.isNode()&&!u[f.id]&&(!d&&(f===t||e.deep&&f.isDescendantOf(t))||(u[f.id]=f)),o&&v&&v.isNode()&&!u[v.id]&&(!d&&(v===t||e.deep&&v.isDescendantOf(t))||(u[v.id]=v)),u},{});if(t.isEdge()){if(r){var a=t.getSourceCell();a&&a.isNode()&&!s[a.id]&&(s[a.id]=a)}if(o){var l=t.getTargetCell();l&&l.isNode()&&!s[l.id]&&(s[l.id]=l)}}return Object.keys(s).map(function(u){return s[u]})},n.prototype.isNeighbor=function(t,e,r){r===void 0&&(r={});var o=r.incoming,s=r.outgoing;return o==null&&s==null&&(o=s=!0),this.getConnectedEdges(t,r).some(function(a){var l=a.getSourceCell(),u=a.getTargetCell();return!(!o||!l||l.id!==e.id)||!(!s||!u||u.id!==e.id)})},n.prototype.getSuccessors=function(t,e){var r=this;e===void 0&&(e={});var o=[];return this.search(t,function(s,a){s!==t&&r.matchDistance(a,e.distance)&&o.push(s)},A(A({},e),{outgoing:!0})),o},n.prototype.isSuccessor=function(t,e,r){var o=this;r===void 0&&(r={});var s=!1;return this.search(t,function(a,l){if(a===e&&a!==t&&o.matchDistance(l,r.distance))return s=!0,!1},A(A({},r),{outgoing:!0})),s},n.prototype.getPredecessors=function(t,e){var r=this;e===void 0&&(e={});var o=[];return this.search(t,function(s,a){s!==t&&r.matchDistance(a,e.distance)&&o.push(s)},A(A({},e),{incoming:!0})),o},n.prototype.isPredecessor=function(t,e,r){var o=this;r===void 0&&(r={});var s=!1;return this.search(t,function(a,l){if(a===e&&a!==t&&o.matchDistance(l,r.distance))return s=!0,!1},A(A({},r),{incoming:!0})),s},n.prototype.matchDistance=function(t,e){return e==null||(typeof e=="function"?e(t):!(!Array.isArray(e)||!e.includes(t))||t===e)},n.prototype.getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=[];return t.forEach(function(o){o&&(Array.isArray(o)?r.push.apply(r,o):r.push(o))}),c.Cell.getCommonAncestor.apply(c.Cell,r)},n.prototype.getSubGraph=function(t,e){var r=this;e===void 0&&(e={});var o=[],s={},a=[],l=[],u=function(h){s[h.id]||(o.push(h),s[h.id]=h,h.isEdge()&&l.push(h),h.isNode()&&a.push(h))};return t.forEach(function(h){u(h),e.deep&&h.getDescendants({deep:!0}).forEach(function(d){return u(d)})}),l.forEach(function(h){var d=h.getSourceCell(),f=h.getTargetCell();d&&!s[d.id]&&(o.push(d),s[d.id]=d,d.isNode()&&a.push(d)),f&&!s[f.id]&&(o.push(f),s[f.id]=f,f.isNode()&&a.push(f))}),a.forEach(function(h){r.getConnectedEdges(h,e).forEach(function(d){var f=d.getSourceCell(),v=d.getTargetCell();!s[d.id]&&f&&s[f.id]&&v&&s[v.id]&&(o.push(d),s[d.id]=d)})}),o},n.prototype.cloneSubGraph=function(t,e){e===void 0&&(e={});var r=this.getSubGraph(t,e);return this.cloneCells(r)},n.prototype.cloneCells=function(t){return c.Cell.cloneCells(t)},n.prototype.getNodesFromPoint=function(t,e){var r=typeof t=="number"?{x:t,y:e||0}:t;return this.getNodes().filter(function(o){return o.getBBox().containsPoint(r)})},n.prototype.getNodesInArea=function(t,e,r,o,s){var a=typeof t=="number"?new c.Rectangle(t,e,r,o):c.Rectangle.create(t),l=typeof t=="number"?s:e,u=l&&l.strict;return this.getNodes().filter(function(h){var d=h.getBBox();return u?a.containsRect(d):a.isIntersectWithRect(d)})},n.prototype.getEdgesInArea=function(t,e,r,o,s){var a=typeof t=="number"?new c.Rectangle(t,e,r,o):c.Rectangle.create(t),l=typeof t=="number"?s:e,u=l&&l.strict;return this.getEdges().filter(function(h){var d=h.getBBox();return d.width===0?d.inflate(1,0):d.height===0&&d.inflate(0,1),u?a.containsRect(d):a.isIntersectWithRect(d)})},n.prototype.getNodesUnderNode=function(t,e){e===void 0&&(e={});var r=t.getBBox();return(e.by==null||e.by==="bbox"?this.getNodesInArea(r):this.getNodesFromPoint(r[e.by])).filter(function(o){return t.id!==o.id&&!o.isDescendantOf(t)})},n.prototype.getAllCellsBBox=function(){return this.getCellsBBox(this.getCells())},n.prototype.getCellsBBox=function(t,e){return e===void 0&&(e={}),c.Cell.getCellsBBox(t,e)},n.prototype.search=function(t,e,r){r===void 0&&(r={}),r.breadthFirst?this.breadthFirstSearch(t,e,r):this.depthFirstSearch(t,e,r)},n.prototype.breadthFirstSearch=function(t,e,r){r===void 0&&(r={});var o=[],s={},a={};o.push(t),a[t.id]=0;for(var l=function(){var h=o.shift();return h==null||s[h.id]?"continue":(s[h.id]=!0,dt(e,u,h,a[h.id])===!1?"continue":void u.getNeighbors(h,r).forEach(function(d){a[d.id]=a[h.id]+1,o.push(d)}))},u=this;o.length>0;)l()},n.prototype.depthFirstSearch=function(t,e,r){r===void 0&&(r={});var o=[],s={},a={};o.push(t),a[t.id]=0;for(var l=function(){var h=o.pop();if(h==null||s[h.id]||(s[h.id]=!0,dt(e,u,h,a[h.id])===!1))return"continue";var d=u.getNeighbors(h,r),f=o.length;d.forEach(function(v){a[v.id]=a[h.id]+1,o.splice(f,0,v)})},u=this;o.length>0;)l()},n.prototype.getShortestPath=function(t,e,r){r===void 0&&(r={});var o={};this.getEdges().forEach(function(h){var d=h.getSourceCellId(),f=h.getTargetCellId();d&&f&&(o[d]||(o[d]=[]),o[f]||(o[f]=[]),o[d].push(f),r.directed||o[f].push(d))});var s=typeof t=="string"?t:t.id,a=c.Dijkstra.run(o,s,r.weight),l=[],u=typeof e=="string"?e:e.id;for(a[u]&&l.push(u);u=a[u];)l.unshift(u);return l},n.prototype.translate=function(t,e,r){return this.getCells().filter(function(o){return!o.hasParent()}).forEach(function(o){return o.translate(t,e,r)}),this},n.prototype.resize=function(t,e,r){return this.resizeCells(t,e,this.getCells(),r)},n.prototype.resizeCells=function(t,e,r,o){o===void 0&&(o={});var s=this.getCellsBBox(r);if(s){var a=Math.max(t/s.width,0),l=Math.max(e/s.height,0),u=s.getOrigin();r.forEach(function(h){return h.scale(a,l,u,o)})}return this},n.prototype.toJSON=function(t){return t===void 0&&(t={}),n.toJSON(this.getCells(),t)},n.prototype.parseJSON=function(t){return n.fromJSON(t)},n.prototype.fromJSON=function(t,e){e===void 0&&(e={});var r=this.parseJSON(t);return this.resetCells(r,e),this},n.prototype.startBatch=function(t,e){return e===void 0&&(e={}),this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this},n.prototype.stopBatch=function(t,e){return e===void 0&&(e={}),this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this},n.prototype.batchUpdate=function(t,e,r){r===void 0&&(r={}),this.startBatch(t,r);var o=e();return this.stopBatch(t,r),o},n.prototype.hasActiveBatch=function(t){var e=this;return t===void 0&&(t=Object.keys(this.batches)),(Array.isArray(t)?t:[t]).some(function(r){return e.batches[r]>0})},n}(c.Basecoat),(Si=c.Model||(c.Model={})).toStringTag="X6."+Si.name,Si.isModel=function(i){if(i==null)return!1;if(i instanceof Si)return!0;var n=i[Symbol.toStringTag],t=i;return(n==null||n===Si.toStringTag)&&typeof t.addNode=="function"&&typeof t.addEdge=="function"&&t.collection!=null},function(i){i.toJSON=function(n,t){return t===void 0&&(t={}),{cells:n.map(function(e){return e.toJSON(t)})}},i.fromJSON=function(n){var t=[];return Array.isArray(n)?t.push.apply(t,n):(n.cells&&t.push.apply(t,n.cells),n.nodes&&n.nodes.forEach(function(e){e.shape==null&&(e.shape="rect"),t.push(e)}),n.edges&&n.edges.forEach(function(e){e.shape==null&&(e.shape="edge"),t.push(e)})),t.map(function(e){var r=e.shape;if(r){if(c.Node.registry.exist(r))return c.Node.create(e);if(c.Edge.registry.exist(r))return c.Edge.create(e)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(c.Model||(c.Model={}));var Rn=".text-block-content",fa=Tu("text-block"),ga=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"content",{get:function(){return this.getContent()},set:function(t){this.setContent(t)},enumerable:!1,configurable:!0}),n.prototype.getContent=function(){return this.store.get("content","")},n.prototype.setContent=function(t,e){e===void 0&&(e={}),this.store.set("content",t,e)},n.prototype.setup=function(){var t=this;i.prototype.setup.call(this),this.store.on("change:*",function(e){var r=e.key;r==="content"?t.updateContent(t.getContent()):r==="size"&&t.updateSize(t.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())},n.prototype.updateSize=function(t){var e;c.Platform.SUPPORT_FOREIGNOBJECT&&this.setAttrs(((e={foreignObject:A({},t)})[Rn]={style:A({},t)},e))},n.prototype.updateContent=function(t){var e,r;c.Platform.SUPPORT_FOREIGNOBJECT?this.setAttrs(((e={})[Rn]={html:t?zl(t):""},e)):this.setAttrs(((r={})[Rn]={text:t},r))},n}(c.Node);(function(i){var n;i.config({type:fa,view:fa,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',c.Platform.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'+Rn.substr(1)+'" />',"</body>","</foreignObject>"].join(""):'<text class="'+Rn.substr(1)+'"/>',"</g>"].join(""),attrs:(n={".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},n[Rn]={refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}},n)}),c.Node.registry.register(fa,i)})(ga||(ga={})),function(i){var n="content",t=function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return B(r,e),r.prototype.confirmUpdate=function(o,s){s===void 0&&(s={});var a=e.prototype.confirmUpdate.call(this,o,s);return this.hasAction(a,n)&&(this.updateContent(),a=this.removeAction(a,n)),a},r.prototype.update=function(o){if(c.Platform.SUPPORT_FOREIGNOBJECT)e.prototype.update.call(this,o);else{var s=this.cell,a=A({},o||s.getAttrs());delete a[Rn],e.prototype.update.call(this,a),o&&!vo(o,Rn)||this.updateContent(o)}},r.prototype.updateContent=function(o){var s;if(c.Platform.SUPPORT_FOREIGNOBJECT)e.prototype.update.call(this,o);else{var a=this.cell,l=(o||a.getAttrs())[Rn],u=tu(a.getContent(),a.getSize(),l,{svgDocument:this.graph.view.svg}),h=((s={})[Rn]=Jt({},l,{text:u}),s);e.prototype.update.call(this,h)}},r}(c.NodeView);i.View=t,function(e){e.config({bootstrap:["render",n],actions:c.Platform.SUPPORT_FOREIGNOBJECT?{}:{size:n,content:n}}),c.NodeView.registry.register(fa,e)}(t=i.View||(i.View={}))}(ga||(ga={}));var A1=Oe.define({shape:"empty"});function P1(i,n){return n===void 0&&(n="body"),[{tagName:i,selector:n},{tagName:"text",selector:"label"}]}function Qn(i,n,t){var e;t===void 0&&(t={});var r={constructorName:i,markup:P1(i,t.selector),attrs:(e={},e[i]=A({},Oe.bodyAttr),e)};return(t.parent||Oe).define(Jt(r,n,{shape:i}))}var M1=Qn("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),S1=c.Node.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:A(A({},Oe.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:A(A({},Oe.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:A(A({},Oe.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:A(A({},Oe.labelAttr),{refY2:15})}}),k1=Qn("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),T1=Oe.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:A(A({},Oe.bodyAttr),{lateral:10}),top:A(A({},Oe.bodyAttr),{refCx:"50%",refRx:"50%",cy:10,ry:10})},attrHooks:{lateral:{set:function(i,n){var t=n.refBBox,e=wn(i);e&&(i=parseFloat(i)/100);var r=t.x,o=t.y,s=t.width,a=t.height,l=e?a*i:i,u=.551784,h=u*(s/2),d=u*l,f=r+s/2,v=r+s,b=o+l,w=b-l,P=o+a-l,x=o+a;return{d:["M",r,b,"L",r,P,"C",r,P+d,f-h,x,f,x,"C",f+h,x,v,P+d,v,P,"L",v,b,"C",v,b-d,f+h,w,f,w,"C",f-h,w,r,b-d,r,b,"Z"].join(" ")}}}},knob:{enabled:!0,position:function(i){return{x:0,y:i.node.attr("body/lateral")}},onMouseMove:function(i){var n=i.node,t=i.data,e=i.deltaY;if(e!==0){var r=n.getBBox(),o=n.attr("body/lateral");t.round==null&&(t.round=o);var s=r.height/2,a=Re(t.round+e,0,s);a!==o&&n.attr({body:{lateral:a},top:{cy:a,ry:a}})}}}}),D1=Qn("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),va=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"points",{get:function(){return this.getPoints()},set:function(t){this.setPoints(t)},enumerable:!1,configurable:!0}),n.prototype.getPoints=function(){return this.getAttrByPath("body/refPoints")},n.prototype.setPoints=function(t,e){return t==null?this.removePoints():this.setAttrByPath("body/refPoints",n.pointsToString(t),e),this},n.prototype.removePoints=function(){return this.removeAttrByPath("body/refPoints"),this},n}(Oe);(function(i){function n(t){return typeof t=="string"?t:t.map(function(e){return Array.isArray(e)?e.join(","):c.Point.isPointLike(e)?e.x+", "+e.y:""}).join(" ")}i.pointsToString=n,i.config({propHooks:function(t){var e=t.points,r=z(t,["points"]);if(e){var o=n(e);o&&Lr(r,"attrs/body/refPoints",o)}return r}})})(va||(va={}));var N1=Qn("polygon",{},{parent:va}),O1=Qn("polyline",{},{parent:va}),L1=Oe.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(i){var n=i.path,t=z(i,["path"]);return n&&Lr(t,"attrs/body/refD",n),t}}),F1=Oe.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},c.Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:pe.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:A(A({},Oe.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(i){var n=i.text,t=z(i,["text"]);return n&&Lr(t,"attrs/label/text",n),t},attrHooks:{text:{set:function(i,n){var t=n.cell,e=n.view,r=n.refBBox,o=n.elem,s=n.attrs;if(!(o instanceof HTMLElement)){var a=s.style||{},l={text:i,width:-5,height:"100%"},u=A({textVerticalAnchor:"middle"},a);return dt(An.presets.textWrap.set,this,l,{cell:t,view:e,elem:o,refBBox:r,attrs:u}),{fill:a.color||null}}o.textContent=i},position:function(i,n){var t=n.refBBox;if(n.elem instanceof SVGElement)return t.getCenter()}}}}),B1=Qn("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Ai()},{selector:"image"}),z1=Qn("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Ai()}),R1=Qn("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Ai()}),V1=Qn("image-inscribed",{propHooks:Ai(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),Nu=c.Edge.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),j1=c.Edge.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),I1=c.Edge.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Pn=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"html",{get:function(){return this.getHTML()},set:function(t){this.setHTML(t)},enumerable:!1,configurable:!0}),n.prototype.getHTML=function(){return this.store.get("html")},n.prototype.setHTML=function(t,e){return e===void 0&&(e={}),t==null?this.removeHTML(e):this.store.set("html",t,e),this},n.prototype.removeHTML=function(t){return t===void 0&&(t={}),this.store.remove("html",t)},n}(Oe);(function(i){var n=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return B(e,t),e.prototype.init=function(){var r=this;t.prototype.init.call(this),this.cell.on("change:*",function(){r.graph.hook.shouldUpdateHTMLComponent(r.cell)&&r.renderHTMLComponent()})},e.prototype.confirmUpdate=function(r){var o=this,s=t.prototype.confirmUpdate.call(this,r);return this.handleAction(s,e.action,function(){return o.renderHTMLComponent()})},e.prototype.renderHTMLComponent=function(){var r=this.selectors.foContent;if(r){var o=this.$(r).empty(),s=this.graph.hook.getHTMLComponent(this.cell);s&&(typeof s=="string"?o.html(s):o.append(s))}},e}(c.NodeView);i.View=n,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),c.NodeView.registry.register("html-view",t)}(n=i.View||(i.View={}))})(Pn||(Pn={})),function(i){i.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},A({},c.Markup.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),c.Node.registry.register("html",i)}(Pn||(Pn={})),function(i){i.componentRegistry=ae.create({type:"html componnet"})}(Pn||(Pn={}));var _1=Object.freeze({__proto__:null,Empty:A1,Rect:M1,HeaderedRect:S1,Circle:k1,Cylinder:T1,Ellipse:D1,Polygon:N1,Polyline:O1,Path:L1,TextBlock:F1,Image:B1,BorderedImage:z1,EmbeddedImage:R1,InscribedImage:V1,Edge:Nu,ShadowEdge:j1,DoubleEdge:I1,get HTML(){return Pn}}),Ou=function(i){function n(t){var e=i.call(this)||this;return e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=A(A({},n.defaultOptions),t),e.graph.model.on("cell:change:*",e.onModelChanged,e),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),n.prototype.onModelChanged=function(){if(!this.disabled){var t=(new Date().getTime()-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}},n.prototype.save=function(){this.trigger("save")},n.prototype.reset=function(){this.changeCount=0,this.timestamp=new Date().getTime()},n.prototype.dispose=function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)},_([Eu.dispose()],n.prototype,"dispose",null),n}(Eu);(function(i){i.defaultOptions={delay:10,throttle:2,threshold:5}})(Ou||(Ou={}));var pn,Ut=function(i){function n(t){var e=i.call(this)||this;return e.graph=t,e.init(),e}return B(n,i),Object.defineProperty(n.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this.graph.view},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n}(c.Disposable),Wr=function(i){function n(t){var e=i.call(this)||this;e.graph=t;var r=c.Markup.parseJSONMarkup(n.markup),o=r.selectors,s=r.fragment;return e.background=o.background,e.grid=o.grid,e.svg=o.svg,e.defs=o.defs,e.viewport=o.viewport,e.primer=o.primer,e.stage=o.stage,e.decorator=o.decorator,e.overlay=o.overlay,e.container=e.options.container,e.restore=n.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(s),e.delegateEvents(),e}return B(n,i),Object.defineProperty(n.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),n.prototype.delegateEvents=function(){var t=this.constructor;return i.prototype.delegateEvents.call(this,t.events),this},n.prototype.guard=function(t,e){return t.type==="mousedown"&&t.button===2||!(!this.options.guard||!this.options.guard(t,e))||(t.data&&t.data.guarded!==void 0?t.data.guarded:!(e&&e.cell&&c.Cell.isCell(e.cell))&&this.svg!==t.target&&this.container!==t.target&&!Ct.contains(this.svg,t.target))},n.prototype.findView=function(t){return this.graph.renderer.findViewByElem(t)},n.prototype.onDblClick=function(t){this.options.preventDefaultDblClick&&t.preventDefault();var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r)){var o=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onDblClick(e,o.x,o.y):this.graph.trigger("blank:dblclick",{e,x:o.x,y:o.y})}},n.prototype.onClick=function(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){var e=this.normalizeEvent(t),r=this.findView(e.target);if(this.guard(e,r))return;var o=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onClick(e,o.x,o.y):this.graph.trigger("blank:click",{e,x:o.x,y:o.y})}},n.prototype.isPreventDefaultContextMenu=function(t,e){var r=this.options.preventDefaultContextMenu;return typeof r=="function"&&(r=dt(r,this.graph,{view:e})),r},n.prototype.onContextMenu=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(this.isPreventDefaultContextMenu(e,r)&&t.preventDefault(),!this.guard(e,r)){var o=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onContextMenu(e,o.x,o.y):this.graph.trigger("blank:contextmenu",{e,x:o.x,y:o.y})}},n.prototype.delegateDragEvents=function(t,e){t.data==null&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});var r=this.constructor;this.delegateDocumentEvents(r.documentEvents,t.data),this.undelegateEvents()},n.prototype.getMouseMovedCount=function(t){return this.getEventData(t).mouseMovedCount||0},n.prototype.onMouseDown=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r)){this.options.preventDefaultMouseDown&&e.preventDefault();var o=this.graph.snapToGrid(e.clientX,e.clientY);r?r.onMouseDown(e,o.x,o.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:o.x,y:o.y})),this.delegateDragEvents(e,r)}},n.prototype.onMouseMove=function(t){var e=this.getEventData(t),r=e.startPosition;if((!r||r.x!==t.clientX||r.y!==t.clientY)&&(e.mouseMovedCount==null&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,!(e.mouseMovedCount<=this.options.moveThreshold))){var o=this.normalizeEvent(t),s=this.graph.snapToGrid(o.clientX,o.clientY),a=e.currentView;a?a.onMouseMove(o,s.x,s.y):this.graph.trigger("blank:mousemove",{e:o,x:s.x,y:s.y}),this.setEventData(o,e)}},n.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),r=this.graph.snapToGrid(e.clientX,e.clientY),o=this.getEventData(t).currentView;o?o.onMouseUp(e,r.x,r.y):this.graph.trigger("blank:mouseup",{e,x:r.x,y:r.y}),t.isPropagationStopped()||this.onClick(Ct.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},n.prototype.onMouseOver=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r))if(r)r.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}},n.prototype.onMouseOut=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r))if(r)r.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}},n.prototype.onMouseEnter=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r)){var o=this.graph.renderer.findViewByElem(e.relatedTarget);if(r){if(o===r)return;r.onMouseEnter(e)}else{if(o)return;this.graph.trigger("graph:mouseenter",{e})}}},n.prototype.onMouseLeave=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r)){var o=this.graph.renderer.findViewByElem(e.relatedTarget);if(r){if(o===r)return;r.onMouseLeave(e)}else{if(o)return;this.graph.trigger("graph:mouseleave",{e})}}},n.prototype.onMouseWheel=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);if(!this.guard(e,r)){var o=e.originalEvent,s=this.graph.snapToGrid(o.clientX,o.clientY),a=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail));r?r.onMouseWheel(e,s.x,s.y,a):this.graph.trigger("blank:mousewheel",{e,delta:a,x:s.x,y:s.y})}},n.prototype.onCustomEvent=function(t){var e=t.currentTarget,r=e.getAttribute("event")||e.getAttribute("data-event");if(r){var o=this.findView(e);if(o){var s=this.normalizeEvent(t);if(this.guard(s,o))return;var a=this.graph.snapToGrid(s.clientX,s.clientY);o.onCustomEvent(s,r,a.x,a.y)}}},n.prototype.handleMagnetEvent=function(t,e){var r=t.currentTarget,o=r.getAttribute("magnet");if(o&&o.toLowerCase()!=="false"){var s=this.findView(r);if(s){var a=this.normalizeEvent(t);if(this.guard(a,s))return;var l=this.graph.snapToGrid(a.clientX,a.clientY);dt(e,this.graph,s,a,r,l.x,l.y)}}},n.prototype.onMagnetMouseDown=function(t){this.handleMagnetEvent(t,function(e,r,o,s,a){e.onMagnetMouseDown(r,o,s,a)})},n.prototype.onMagnetDblClick=function(t){this.handleMagnetEvent(t,function(e,r,o,s,a){e.onMagnetDblClick(r,o,s,a)})},n.prototype.onMagnetContextMenu=function(t){var e=this.normalizeEvent(t),r=this.findView(e.target);this.isPreventDefaultContextMenu(e,r)&&e.preventDefault(),this.handleMagnetEvent(e,function(o,s,a,l,u){o.onMagnetContextMenu(s,a,l,u)})},n.prototype.onLabelMouseDown=function(t){var e=t.currentTarget,r=this.findView(e);if(r){var o=this.normalizeEvent(t);if(this.guard(o,r))return;var s=this.graph.snapToGrid(o.clientX,o.clientY);r.onLabelMouseDown(o,s.x,s.y)}},n.prototype.onImageDragStart=function(){return!1},n.prototype.dispose=function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View);(function(i){var n=We.prefixCls+"-graph";i.markup=[{ns:pe.xhtml,tagName:"div",selector:"background",className:n+"-background"},{ns:pe.xhtml,tagName:"div",selector:"grid",className:n+"-grid"},{ns:pe.svg,tagName:"svg",selector:"svg",className:n+"-svg",attrs:{width:"100%",height:"100%","xmlns:xlink":pe.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:n+"-svg-viewport",children:[{tagName:"g",selector:"primer",className:n+"-svg-primer"},{tagName:"g",selector:"stage",className:n+"-svg-stage"},{tagName:"g",selector:"decorator",className:n+"-svg-decorator"},{tagName:"g",selector:"overlay",className:n+"-svg-overlay"}]}]}],i.snapshoot=function(t){var e=t.cloneNode();return t.childNodes.forEach(function(r){return e.appendChild(r)}),function(){for(Os(t);t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);for(var r=0,o=e.attributes.length;r<o;r+=1){var s=e.attributes[r];t.setAttribute(s.name,s.value)}e.childNodes.forEach(function(a){return t.appendChild(a)})}}})(Wr||(Wr={})),function(i){var n,t=We.prefixCls;i.events=((n={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"})["mouseenter  ."+t+"-cell"]="onMouseEnter",n["mouseleave  ."+t+"-cell"]="onMouseLeave",n["mouseenter  ."+t+"-cell-tools"]="onMouseEnter",n["mouseleave  ."+t+"-cell-tools"]="onMouseLeave",n["mousedown   ."+t+"-cell [event]"]="onCustomEvent",n["touchstart  ."+t+"-cell [event]"]="onCustomEvent",n["mousedown   ."+t+"-cell [data-event]"]="onCustomEvent",n["touchstart  ."+t+"-cell [data-event]"]="onCustomEvent",n["dblclick    ."+t+"-cell [magnet]"]="onMagnetDblClick",n["contextmenu ."+t+"-cell [magnet]"]="onMagnetContextMenu",n["mousedown   ."+t+"-cell [magnet]"]="onMagnetMouseDown",n["touchstart  ."+t+"-cell [magnet]"]="onMagnetMouseDown",n["dblclick    ."+t+"-cell [data-magnet]"]="onMagnetDblClick",n["contextmenu ."+t+"-cell [data-magnet]"]="onMagnetContextMenu",n["mousedown   ."+t+"-cell [data-magnet]"]="onMagnetMouseDown",n["touchstart  ."+t+"-cell [data-magnet]"]="onMagnetMouseDown",n["dragstart   ."+t+"-cell image"]="onImageDragStart",n["mousedown   ."+t+"-edge ."+t+"-edge-label"]="onLabelMouseDown",n["touchstart  ."+t+"-edge ."+t+"-edge-label"]="onLabelMouseDown",n),i.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Wr||(Wr={})),function(i){i.checkScroller=function(n,t){return function(e,r,o){var s=o.value;o.value=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=this.scroller.widget;if(u==null){var h="Shoule enable scroller to use method '"+r+"'";if(n!==!1)throw console.error(h),new Error(h);return t!==!1&&console.warn(h),this}return s.call.apply(s,W([this],a,!1))}}}}(pn||(pn={}));var Lu=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.init=function(){We.autoInsertCSS&&n.ensure()},n.prototype.dispose=function(){n.clean()},_([n.dispose()],n.prototype,"dispose",null),n}(Ut);(function(i){var n,t=0;i.ensure=function(){if(!((t+=1)>1||c.Platform.isApplyingHMR())){(n=document.createElement("style")).setAttribute("type","text/css"),n.textContent=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;var e=document.querySelector("head");e&&e.insertBefore(n,e.firstChild)}},i.clean=function(){(t-=1)>0||(n&&n.parentNode&&n.parentNode.removeChild(n),n=null)}})(Lu||(Lu={}));var qt,ki=function(){function i(){}return Object.defineProperty(i.prototype,"handleClassName",{get:function(){return qt.handle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pie",{get:function(){return A(A({},i.defaultPieOptions),this.handleOptions.pie)},enumerable:!1,configurable:!0}),i.prototype.initHandles=function(){var n,t=this;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(o){return t.addHandle(o)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=qt.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(o){var s=t.$("<div/>");t.applyAttrs(s,o.attrs),s.addClass(e).addClass(e+"-pos-"+(o.position||"e")).attr("data-name",o.name).appendTo(t.container),t.$pieToggles[o.name]=s})}this.setPieIcons()}if(this.$handleContainer){var r=this.handleOptions.type||"surround";this.$handleContainer.addClass(qt.wrap).addClass(qt.animate).addClass(qt.handle+"-"+r)}this.delegateEvents(((n={})["mousedown ."+qt.handle]="onHandleMouseDown",n["touchstart ."+qt.handle]="onHandleMouseDown",n["mousedown ."+qt.pieToggle]="onPieToggleMouseDown",n["touchstart ."+qt.pieToggle]="onPieToggleMouseDown",n))},i.prototype.onHandleMouseDown=function(n){var t=this.$(n.currentTarget).closest("."+qt.handle).attr("data-action");t&&(n.preventDefault(),n.stopPropagation(),this.setEventData(n,{action:t,clientX:n.clientX,clientY:n.clientY,startX:n.clientX,startY:n.clientY}),n.type==="mousedown"&&n.button===2?this.triggerHandleAction(t,"contextmenu",n):(this.triggerHandleAction(t,"mousedown",n),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},n.data)))},i.prototype.onHandleMouseMove=function(n){var t=this.getEventData(n).action;t&&this.triggerHandleAction(t,"mousemove",n)},i.prototype.onHandleMouseUp=function(n){var t=this.getEventData(n).action;t&&(this.triggerHandleAction(t,"mouseup",n),this.undelegateDocumentEvents())},i.prototype.triggerHandleAction=function(n,t,e,r){e.preventDefault(),e.stopPropagation();var o=this.normalizeEvent(e),s=this.getEventData(o),a=this.graph.snapToGrid(o.clientX,o.clientY),l=this.graph.snapToGrid(s.clientX,s.clientY),u=a.x-l.x,h=a.y-l.y;this.trigger("action:"+n+":"+t,A({e:o,dx:u,dy:h,x:a.x,y:a.y,offsetX:e.clientX-s.startX,offsetY:e.clientY-s.startY},r)),s.clientX=e.clientX,s.clientY=e.clientY},i.prototype.onPieToggleMouseDown=function(n){n.stopPropagation();var t=this.$(n.target).closest("."+qt.pieToggle).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)},i.prototype.setPieIcons=function(){var n=this;this.handleOptions.type==="pie"&&this.$handleContainer.find("."+qt.handle).each(function(t,e){var r=n.$(e),o=r.attr("data-action"),s=qt.pieSlice,a=n.getHandle(o);if(!a||!a.icon){var l=window.getComputedStyle(e,":before").getPropertyValue("content");if(l&&l!=="none"){var u=r.find("."+s+"-txt");u.length&&c.Vector.create(u[0]).text(l.replace(/['"]/g,""))}var h=r.css("background-image");if(h){var d=h.match(/url\(['"]?([^'"]+)['"]?\)/);if(d){var f=d[1],v=r.find("."+s+"-img");v.length>0&&c.Vector.create(v[0]).attr("xlink:href",f)}}}})},i.prototype.getHandleIdx=function(n){return this.handles.findIndex(function(t){return t.name===n})},i.prototype.hasHandle=function(n){return this.getHandleIdx(n)>=0},i.prototype.getHandle=function(n){return this.handles.find(function(t){return t.name===n})},i.prototype.renderHandle=function(n){var t=this.$("<div/>").addClass(qt.handle+" "+qt.handle+"-"+n.name).attr("data-action",n.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(n.name),r=this.pie,o=r.outerRadius,s=r.innerRadius,a=(o+s)/2,l=new c.Point(o,o),u=c.Angle.toRad(r.sliceAngle),h=e*u+c.Angle.toRad(r.startAngle),d=md(s,o,h,h+u),f=c.Vector.create("svg").addClass(qt.pieSlice+"-svg"),v=c.Vector.create("path").addClass(qt.pieSlice).attr("d",d).translate(o,o),b=c.Point.fromPolar(a,-h-u/2,l).toJSON(),w=r.iconSize,P=c.Vector.create("image").attr(b).addClass(qt.pieSlice+"-img");b.y=b.y+w-2;var x=c.Vector.create("text",{"font-size":w}).attr(b).addClass(qt.pieSlice+"-txt");P.attr({width:w,height:w}),P.translate(-w/2,-w/2),x.translate(-w/2,-w/2),f.append([v,P,x]),t.append(f.node)}else t.addClass(qt.handle+"-pos-"+n.position),n.content&&(typeof n.content=="string"?t.html(n.content):t.append(n.content));return this.updateHandleIcon(t,n.icon),this.applyAttrs(t,n.attrs),t},i.prototype.addHandle=function(n){var t=this;if(!this.hasHandle(n.name)){this.handles.push(n);var e=n.events;e&&Object.keys(e).forEach(function(r){var o=e[r],s="action:"+n.name+":"+r;typeof o=="string"?t.on(s,t[o],t):t.on(s,o)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(n))}return this},i.prototype.addHandles=function(n){var t=this;return n.forEach(function(e){return t.addHandle(e)}),this},i.prototype.removeHandles=function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this},i.prototype.removeHandle=function(n){var t=this,e=this.getHandleIdx(n),r=this.handles[e];return r&&(r.events&&Object.keys(r.events).forEach(function(o){t.off("action:"+n+":"+o)}),this.getHandleElem(n).remove(),this.handles.splice(e,1)),this},i.prototype.changeHandle=function(n,t){var e=this.getHandle(n);return e&&(this.removeHandle(n),this.addHandle(A(A({},e),t))),this},i.prototype.toggleHandle=function(n,t){var e=this.getHandle(n);if(e){var r=this.getHandleElem(n),o=qt.handle+"-selected";t===void 0&&(t=!r.hasClass(o)),r.toggleClass(o,t);var s=t?e.iconSelected:e.icon;s&&this.updateHandleIcon(r,s)}return this},i.prototype.selectHandle=function(n){return this.toggleHandle(n,!0)},i.prototype.deselectHandle=function(n){return this.toggleHandle(n,!1)},i.prototype.deselectAllHandles=function(){var n=this;return this.handles.forEach(function(t){return n.deselectHandle(t.name)}),this},i.prototype.getHandleElem=function(n){return this.$handleContainer.find("."+qt.handle+"-"+n)},i.prototype.updateHandleIcon=function(n,t){if(this.handleOptions.type==="pie"){var e=n.find("."+qt.pieSliceImg);this.$(e[0]).attr("xlink:href",t||"")}else n.css("background-image",t?"url("+t+")":"")},i.prototype.isRendered=function(){return this.$handleContainer!=null},i.prototype.isOpen=function(n){return!!this.isRendered()&&(n?this.$pieToggles[n].hasClass(qt.pieToggleOpened):this.$handleContainer.hasClass(""+qt.pieOpended))},i.prototype.toggleState=function(n){var t=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(s){t.$pieToggles[s].removeClass(qt.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:n}),e.removeClass(qt.pieOpended);else{if(this.trigger("pie:open",{name:n}),n){var r=this.pie.toggles,o=r&&r.find(function(s){return s.name===n});o&&e.attr({"data-pie-toggle-name":o.name,"data-pie-toggle-position":o.position}),this.$pieToggles[n].addClass(qt.pieToggleOpened)}e.addClass(qt.pieOpended)}}},i.prototype.applyAttrs=function(n,t){if(t){var e=c.View.$(n);Object.keys(t).forEach(function(r){var o=e.find(r).addBack().filter(r),s=t[r],a=s.class,l=z(s,["class"]);a&&o.addClass(a),o.attr(l)})}},i}();(function(i){i.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(ki||(ki={})),function(i){i.handle=c.View.prototype.prefixClassName("widget-handle"),i.wrap=i.handle+"-wrap",i.animate=i.handle+"-animate",i.pieOpended=i.handle+"-pie-opened",i.pieToggle=i.handle+"-pie-toggle",i.pieToggleOpened=i.handle+"-pie-toggle-opened",i.pieSlice=i.handle+"-pie-slice",i.pieSliceImg=i.handle+"-pie-slice-img"}(qt||(qt={}));var Xr,Ti,Fu=function(i){function n(t){var e=i.call(this)||this,r=t,o=r.view,s=r.cell,a=r.node,l=r.edge,u=r.graph,h=z(r,["view","cell","node","edge","graph"]);o?(e.view=o,e.cell=o.cell,e.graph=o.graph,e.model=e.graph.model):(s||l||a)&&u&&(e.cell=a||l||s,e.view=u.renderer.findViewByCell(e.cell),e.graph=u,e.model=e.graph.model);var d=e.constructor;return t.clearAll!==!1&&d.removeInstances(e.graph),d.register(e),e.init(h),e}return B(n,i),n.ensureCache=function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)},n.register=function(t,e){e==null&&(e=t.graph);var r=this.ensureCache(),o=r[e.view.cid];o==null&&(o=r[e.view.cid]={}),o[t.cid]=t},n.unregister=function(t,e){e==null&&(e=t.graph);var r=this.ensureCache();r[e.view.cid]&&delete r[e.view.cid][t.cid]},n.removeInstances=function(t){var e=this.ensureCache()[t.view.cid];e&&Object.keys(e).forEach(function(r){var o=e[r];o&&o.remove()})},n.getInstances=function(t){return this.ensureCache()[t.view.cid]||{}},n.prototype.init=function(t){},n.prototype.render=function(){return this},n.prototype.startListening=function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)},n.prototype.stopListening=function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)},n.prototype.remove=function(){return this.stopListening(),this.constructor.unregister(this),i.prototype.remove.call(this)},n.prototype.dispose=function(){this.remove()},n.instanceCache=new WeakMap,_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View),Bu=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"node",{get:function(){return this.cell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){var t=this.cell.prop("knob");return Array.isArray(t)?this.options.index!=null?t[this.options.index]:null:t},enumerable:!1,configurable:!0}),n.prototype.init=function(t){this.options=A({},t),this.render(),this.startListening()},n.prototype.startListening=function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),i.prototype.startListening.call(this)},n.prototype.stopListening=function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),i.prototype.stopListening.call(this)},n.prototype.render=function(){return this.container=document.createElement("div"),Rt(this.container,this.prefixClassName("widget-knob")),this.options.className&&Rt(this.container,this.options.className),this.view.addClass(Xr.KNOB),this.graph.container.appendChild(this.container),this.update(),this},n.prototype.remove=function(){return this.view.removeClass(Xr.KNOB),i.prototype.remove.call(this)},n.prototype.update=function(){if(this.metadata){var t=this.metadata,e=t.update,r=t.position,o={knob:this,cell:this.cell,node:this.node};if(r){var s=r.call(this.graph,A({},o));if(s){var a=this.graph.matrix(),l=this.node.getBBox(),u=c.Angle.normalize(this.node.getAngle()),h=c.Point.create(s);u!==0&&h.rotate(-u,{x:l.width/2,y:l.height/2}),h.translate(l).scale(a.a,a.d).translate(a.e,a.f),this.container.style.left=h.x+"px",this.container.style.top=h.y+"px"}}e&&e.call(this.graph,A({},o))}},n.prototype.hide=function(){this.container.style.display="none"},n.prototype.show=function(){this.container.style.display=""},n.prototype.onTransform=function(){this.hide()},n.prototype.onTransformed=function(){this.show()},n.prototype.onKnobMouseDown=function(t){var e=t.knob;this.cid!==e.cid&&this.hide()},n.prototype.onKnobMouseUp=function(){this.show()},n.prototype.notify=function(t,e){if(this.view){var r=this.view.normalizeEvent(e),o=this.graph.snapToGrid(r.clientX,r.clientY);this.view.notify("cell:"+t,{e:r,view:this.view,node:this.node,cell:this.cell,x:o.x,y:o.y,knob:this}),this.cell.isNode()?this.view.notify("node:"+t,{e:r,view:this.view,node:this.node,cell:this.cell,x:o.x,y:o.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:"+t,{e:r,view:this.view,edge:this.cell,cell:this.cell,x:o.x,y:o.y,knob:this})}},n.prototype.onMouseDown=function(t){t.stopPropagation(),this.setEventData(t,{knobbing:!1,originX:t.clientX,originY:t.clientY,clientX:t.clientX,clientY:t.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Xr.documentEvents,t.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e:t,data:this.getEventData(t),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",t)},n.prototype.onMouseMove=function(t){var e=this.getEventData(t),r=this.graph.findViewByCell(this.node);if(e.knobbing||(e.knobbing=!0,r&&(r.addClass(Xr.KNOBBING),this.notify("knob",t)),this.model.startBatch("knob",{cid:this.cid})),e.clientX=t.clientX,e.clientY=t.clientY,this.metadata&&this.metadata.onMouseMove){var o=this.graph.matrix(),s=(t.clientX-e.originX)/o.a,a=(t.clientY-e.originY)/o.d,l=this.node.getAngle(),u=new c.Point(s,a).rotate(l);this.metadata.onMouseMove.call(this.graph,{e:t,data:e,deltaX:u.x,deltaY:u.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",t),this.notify("knob:mousemove",t)},n.prototype.onMouseUp=function(t){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var e=this.getEventData(t),r=this.graph.findViewByCell(this.node);e.knobbing&&(r&&r.removeClass(Xr.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e:t,data:e,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",t)),this.notify("knob:mouseup",t)},n}(Fu);(function(i){i.KNOB="has-widget-knob",i.KNOBBING="node-knobbing",i.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(Xr||(Xr={})),function(i){i.root="widget-minimap",i.viewport=i.root+"-viewport",i.zoom=i.viewport+"-zoom"}(Ti||(Ti={}));var ya,zf=function(i){function n(t){var e=i.call(this)||this;e.options=A(A({},ya.defaultOptions),t),e.updateViewport=ml(e.updateViewport.bind(e),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Ti.root));var r=document.createElement("div");e.container.appendChild(r),e.$viewport=e.$("<div>").addClass(e.prefixClassName(Ti.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(Ti.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.graph;var o=A(A({},e.options.graphOptions),{container:r,model:e.sourceGraph.model,frozen:!0,async:e.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(o):new c.Graph(o),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scroller",{get:function(){return this.graph.scroller.widget},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"graphContainer",{get:function(){return this.scroller?this.scroller.container:this.graph.container},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$graphContainer",{get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)},enumerable:!1,configurable:!0}),n.prototype.startListening=function(){var t;this.scroller?this.$graphContainer.on("scroll"+this.getEventNamespace(),this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents(((t={mousedown:"startAction",touchstart:"startAction"})["mousedown ."+this.prefixClassName("graph")]="scrollTo",t["touchstart ."+this.prefixClassName("graph")]="scrollTo",t))},n.prototype.stopListening=function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()},n.prototype.onRemove=function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()},n.prototype.onTransform=function(t){(t.ui||this.targetGraphTransforming)&&this.updateViewport()},n.prototype.onModelUpdated=function(){this.targetGraph.zoomToFit()},n.prototype.updatePaper=function(t,e){var r,o;typeof t=="object"?(r=t.width,o=t.height):(r=t,o=e);var s=this.sourceGraph.options,a=this.sourceGraph.transform.getScale(),l=this.options.width-2*this.options.padding,u=this.options.height-2*this.options.padding;r/=a.sx,o/=a.sy,this.ratio=Math.min(l/r,u/o);var h=this.ratio,d=s.x*h/a.sx,f=s.y*h/a.sy;return r*=h,o*=h,this.targetGraph.resizeGraph(r,o),this.targetGraph.translate(d,f),this.scroller?this.targetGraph.scale(h,h):this.targetGraph.zoomToFit(),this.updateViewport(),this},n.prototype.updateViewport=function(){var t=this.sourceGraph.transform.getScale(),e=this.targetGraph.transform.getScale(),r=null;r=this.scroller?this.scroller.clientToLocalPoint(0,0):this.graph.graphToLocal(0,0);var o=this.$(this.targetGraph.container).position(),s=this.targetGraph.translate();s.ty=s.ty||0,this.geometry={top:o.top+r.y*e.sy+s.ty,left:o.left+r.x*e.sx+s.tx,width:this.$graphContainer.innerWidth()*e.sx/t.sx,height:this.$graphContainer.innerHeight()*e.sy/t.sy},this.$viewport.css(this.geometry)},n.prototype.startAction=function(t){var e=this.normalizeEvent(t),r=e.target===this.zoomHandle?"zooming":"panning",o=this.sourceGraph.translate(),s=o.tx,a=o.ty,l={action:r,clientX:e.clientX,clientY:e.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:s,translateY:a};this.targetGraphTransforming=!0,this.delegateDocumentEvents(ya.documentEvents,l)},n.prototype.doAction=function(t){var e=this,r=this.normalizeEvent(t),o=r.clientX,s=r.clientY,a=r.data;switch(a.action){case"panning":var l=this.sourceGraph.transform.getScale(),u=(o-a.clientX)*l.sx,h=(s-a.clientY)*l.sy;this.scroller?(this.graphContainer.scrollLeft=a.scrollLeft+u/this.ratio,this.graphContainer.scrollTop=a.scrollTop+h/this.ratio):this.sourceGraph.translate(a.translateX-u/this.ratio,a.translateY-h/this.ratio);break;case"zooming":var d=a.scale,f=a.geometry,v=1+(a.clientX-o)/f.width/d.sx;a.frameId&&cancelAnimationFrame(a.frameId),a.frameId=requestAnimationFrame(function(){e.sourceGraph.zoom(v*a.zoom,{absolute:!0,minScale:e.options.minScale,maxScale:e.options.maxScale})})}},n.prototype.stopAction=function(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1},n.prototype.scrollTo=function(t){var e,r,o=this.normalizeEvent(t),s=this.targetGraph.translate();if(s.ty=s.ty||0,o.offsetX==null){var a=this.$(this.targetGraph.container).offset();e=o.pageX-a.left,r=o.pageY-a.top}else e=o.offsetX,r=o.offsetY;var l=(e-s.tx)/this.ratio,u=(r-s.ty)/this.ratio;this.sourceGraph.centerPoint(l,u)},n.prototype.dispose=function(){this.remove()},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View);(function(i){i.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(n){return new c.Graph(n)}},i.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(ya||(ya={}));var Rf=function(i){function n(t){var e=i.call(this)||this,r=t.graph,o=z(t,["graph"]);return e.graph=r,e.options=A({tolerance:10},o),e.offset={x:0,y:0},e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return B(n,i),Object.defineProperty(n.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerClassName",{get:function(){return this.prefixClassName("widget-snapline")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"verticalClassName",{get:function(){return this.containerClassName+"-vertical"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"horizontalClassName",{get:function(){return this.containerClassName+"-horizontal"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0},enumerable:!1,configurable:!0}),n.prototype.enable=function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())},n.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())},n.prototype.setFilter=function(t){this.options.filter=t,this.parseFilter()},n.prototype.render=function(){var t=this.containerWrapper=new c.Vector("svg"),e=this.horizontal=new c.Vector("line"),r=this.vertical=new c.Vector("line");t.addClass(this.containerClassName),e.addClass(this.horizontalClassName),r.addClass(this.verticalClassName),t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.setAttribute("display","none"),r.setAttribute("display","none"),t.append([e,r]),this.options.className&&t.addClass(this.options.className),this.container=this.containerWrapper.node},n.prototype.startListening=function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})},n.prototype.stopListening=function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()},n.prototype.parseFilter=function(){var t=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var e=this.options.filter;Array.isArray(e)?e.forEach(function(r){typeof r=="string"?t.filterShapes[r]=!0:t.filterCells[r.id]=!0}):typeof e=="function"&&(this.filterFunction=e)},n.prototype.onBatchStop=function(t){var e=t.name,r=t.data;e==="resize"&&this.snapOnResizing(r.cell,r)},n.prototype.captureCursorOffset=function(t){var e=t.view,r=t.x,o=t.y,s=e.getDelegatedView();if(s&&this.isNodeMovable(s)){var a=e.cell.getPosition();this.offset={x:r-a.x,y:o-a.y}}},n.prototype.isNodeMovable=function(t){return t&&t.cell.isNode()&&t.can("nodeMovable")},n.prototype.snapOnResizing=function(t,e){var r=this;if(this.options.resizing&&!e.snapped&&e.ui&&e.direction&&e.trueDirection){var o=this.graph.renderer.findViewByCell(t);if(o&&o.cell.isNode()){var s,a,l,u,h,d,f=t.getBBox(),v=f.bbox(t.getAngle()),b=v.getTopLeft(),w=v.getBottomRight(),P=c.Angle.normalize(t.getAngle()),x=this.options.tolerance||0,S={vertical:0,horizontal:0},D=e.direction,N=e.trueDirection,V=e.relativeDirection;N.indexOf("right")!==-1?S.vertical=w.x:S.vertical=b.x,N.indexOf("bottom")!==-1?S.horizontal=w.y:S.horizontal=b.y,this.model.getNodes().some(function(at){if(r.isIgnored(t,at))return!1;var gt=at.getBBox().bbox(at.getAngle()),yt=gt.getTopLeft(),ft=gt.getBottomRight(),Et={vertical:[yt.x,ft.x],horizontal:[yt.y,ft.y]},Ft={};return Object.keys(Et).forEach(function(re){var Qt=re,zt=Et[Qt].map(function(Xt){return{position:Xt,distance:Math.abs(Xt-S[Qt])}}).filter(function(Xt){return Xt.distance<=x});Ft[Qt]=ys(zt,function(Xt){return Xt.distance})}),s==null&&Ft.vertical.length>0&&(s=Ft.vertical[0].position,a=Math.min(v.y,gt.y),l=Math.max(w.y,ft.y)-a),u==null&&Ft.horizontal.length>0&&(u=Ft.horizontal[0].position,h=Math.min(v.x,gt.x),d=Math.max(w.x,ft.x)-h),s!=null&&u!=null}),this.hide();var y=0,H=0;u==null&&s==null||(s!=null&&(y=N.indexOf("right")!==-1?s-w.x:b.x-s),u!=null&&(H=N.indexOf("bottom")!==-1?u-w.y:b.y-u));var I=0,X=0;if(P%90==0)P===90||P===270?(I=H,X=y):(I=y,X=H);else{var J=P>=0&&P<90?1:P>=90&&P<180?4:P>=180&&P<270?3:2;u!=null&&s!=null&&(y<H?(H=0,u=void 0):(y=0,s=void 0));var Z=c.Angle.toRad(P%90);y&&(I=J===3?y/Math.cos(Z):y/Math.sin(Z)),H&&(X=J===3?H/Math.cos(Z):H/Math.sin(Z));var it=J===1||J===3;switch(V){case"top":case"bottom":X=H?H/(it?Math.cos(Z):Math.sin(Z)):y/(it?Math.sin(Z):Math.cos(Z));break;case"left":case"right":I=y?y/(it?Math.cos(Z):Math.sin(Z)):H/(it?Math.sin(Z):Math.cos(Z))}}switch(V){case"top":case"bottom":I=0;break;case"left":case"right":X=0}var ct=this.graph.getGridSize(),et=Math.max(f.width+I,ct),lt=Math.max(f.height+X,ct);e.minWidth&&e.minWidth>ct&&(et=Math.max(et,e.minWidth)),e.minHeight&&e.minHeight>ct&&(lt=Math.max(lt,e.minHeight)),e.maxWidth&&(et=Math.min(et,e.maxWidth)),e.maxHeight&&(lt=Math.min(lt,e.maxHeight)),e.preserveAspectRatio&&(X<I?lt=et*(f.height/f.width):et=lt*(f.width/f.height)),et===f.width&&lt===f.height||(t.resize(et,lt,{direction:D,relativeDirection:V,trueDirection:N,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(o)}),l&&(l+=lt-f.height),d&&(d+=et-f.width));var ht=t.getBBox().bbox(P);s&&Math.abs(ht.x-s)>1&&Math.abs(ht.width+ht.x-s)>1&&(s=void 0),u&&Math.abs(ht.y-u)>1&&Math.abs(ht.height+ht.y-u)>1&&(u=void 0),this.update({verticalLeft:s,verticalTop:a,verticalHeight:l,horizontalTop:u,horizontalLeft:h,horizontalWidth:d})}}},n.prototype.snapOnMoving=function(t){var e=this,r=t.view,o=t.e,s=t.x,a=t.y,l=r.getEventData(o).delegatedView||r;if(this.isNodeMovable(l)){var u,h,d,f,v,b,w=l.cell,P=w.getSize(),x=w.getPosition(),S=new c.Rectangle(s-this.offset.x,a-this.offset.y,P.width,P.height),D=w.getAngle(),N=S.getCenter(),V=S.bbox(D),y=V.getTopLeft(),H=V.getBottomRight(),I=this.options.tolerance||0,X=0,J=0;if(this.model.getNodes().some(function(ht){if(e.isIgnored(w,ht))return!1;var at=ht.getBBox().bbox(ht.getAngle()),gt=at.getCenter(),yt=at.getTopLeft(),ft=at.getBottomRight();return u==null&&(Math.abs(gt.x-N.x)<I?(u=gt.x,X=.5):Math.abs(yt.x-y.x)<I?(u=yt.x,X=0):Math.abs(yt.x-H.x)<I?(u=yt.x,X=1):Math.abs(ft.x-H.x)<I?(u=ft.x,X=1):Math.abs(ft.x-y.x)<I&&(u=ft.x),u!=null&&(h=Math.min(V.y,at.y),d=Math.max(H.y,ft.y)-h)),f==null&&(Math.abs(gt.y-N.y)<I?(f=gt.y,J=.5):Math.abs(yt.y-y.y)<I?f=yt.y:Math.abs(yt.y-H.y)<I?(f=yt.y,J=1):Math.abs(ft.y-H.y)<I?(f=ft.y,J=1):Math.abs(ft.y-y.y)<I&&(f=ft.y),f!=null&&(v=Math.min(V.x,at.x),b=Math.max(H.x,ft.x)-v)),u!=null&&f!=null}),this.hide(),f!=null||u!=null){f!=null&&(V.y=f-J*V.height),u!=null&&(V.x=u-X*V.width);var Z=V.getCenter(),it=Z.x-S.width/2,ct=Z.y-S.height/2,et=it-x.x,lt=ct-x.y;et===0&&lt===0||(w.translate(et,lt,{snapped:!0,restrict:this.graph.hook.getRestrictArea(l)}),b&&(b+=et),d&&(d+=lt)),this.update({verticalLeft:u,verticalTop:h,verticalHeight:d,horizontalTop:f,horizontalLeft:v,horizontalWidth:b})}}},n.prototype.isIgnored=function(t,e){return e.id===t.id||e.isDescendantOf(t)||this.filterShapes[e.shape]||this.filterCells[e.id]||this.filterFunction&&dt(this.filterFunction,this.graph,e)},n.prototype.update=function(t){if(t.horizontalTop){var e=this.graph.localToGraph(new c.Point(t.horizontalLeft,t.horizontalTop)),r=this.graph.localToGraph(new c.Point(t.horizontalLeft+t.horizontalWidth,t.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?""+e.x:"0",y1:""+e.y,x2:this.options.sharp?""+r.x:"100%",y2:""+r.y,display:"inherit"})}else this.horizontal.setAttribute("display","none");t.verticalLeft?(e=this.graph.localToGraph(new c.Point(t.verticalLeft,t.verticalTop)),r=this.graph.localToGraph(new c.Point(t.verticalLeft,t.verticalTop+t.verticalHeight)),this.vertical.setAttributes({x1:""+e.x,y1:this.options.sharp?""+e.y:"0",x2:""+r.x,y2:this.options.sharp?""+r.y:"100%",display:"inherit"})):this.vertical.setAttribute("display","none"),this.show()},n.prototype.resetTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n.prototype.show=function(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this},n.prototype.hide=function(){var t=this;this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");var e=this.options.clean,r=typeof e=="number"?e:e!==!1?3e3:0;return r>0&&(this.timer=window.setTimeout(function(){t.container.parentNode!==null&&t.unmount()},r)),this},n.prototype.onRemove=function(){this.stopListening(),this.hide()},n.prototype.dispose=function(){this.remove()},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View),No=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.init=function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},n.prototype.startListening=function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)},n.prototype.stopListening=function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)},n.prototype.resetUpdates=function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}},n.prototype.onSortModel=function(){this.model.hasActiveBatch(n.SORT_DELAYING_BATCHES)||this.sortViews()},n.prototype.onModelReseted=function(t){var e=t.options;this.removeZPivots(),this.resetViews(this.model.getCells(),e)},n.prototype.onBatchStop=function(t){var e=t.name,r=t.data;if(!this.isFrozen()){var o=this.model;if(!this.isAsync()){var s=n.UPDATE_DELAYING_BATCHES;s.includes(e)&&!o.hasActiveBatch(s)&&this.updateViews(r)}var a=n.SORT_DELAYING_BATCHES;a.includes(e)&&!o.hasActiveBatch(a)&&this.sortViews()}},n.prototype.onCellAdded=function(t){var e=t.cell,r=t.options,o=r.position;this.isAsync()||typeof o!="number"?this.renderView(e,r):(r.maxPosition===o&&this.freeze({key:"addCells"}),this.renderView(e,r),o===0&&this.unfreeze({key:"addCells"}))},n.prototype.onCellRemoved=function(t){var e=t.cell,r=t.options,o=this.findViewByCell(e);o&&this.requestViewUpdate(o,n.FLAG_REMOVE,o.priority,r)},n.prototype.onCellZIndexChanged=function(t){var e=t.cell,r=t.options;if(this.options.sorting==="approx"){var o=this.findViewByCell(e);o&&this.requestViewUpdate(o,n.FLAG_INSERT,o.priority,r)}},n.prototype.onCellVisibleChanged=function(t){var e=t.cell,r=t.current,o=t.options;r||this.processEdgeOnTerminalVisibleChanged(e,!1);var s=this.findViewByCell(e);!r&&s?this.removeView(e):r&&s==null&&this.renderView(e,o),r&&this.processEdgeOnTerminalVisibleChanged(e,!0)},n.prototype.processEdgeOnTerminalVisibleChanged=function(t,e){this.model.getConnectedEdges(t).forEach(function(r){var o=function(s,a){return s.getSourceCellId()!==a.id?s.getSourceCell():s.getTargetCellId()!==a.id?s.getTargetCell():null}(r,t);(o==null||o.isVisible())&&(e?r.show():r.hide())})},n.prototype.isEdgeTerminalVisible=function(t,e){var r=e==="source"?t.getSourceCellId():t.getTargetCellId(),o=r?this.model.getCell(r):null;return!(o&&!o.isVisible())},n.prototype.requestConnectedEdgesUpdate=function(t,e){if(e===void 0&&(e={}),c.CellView.isCellView(t))for(var r=t.cell,o=this.model.getConnectedEdges(r),s=0,a=o.length;s<a;s+=1){var l=o[s],u=this.findViewByCell(l);if(u){var h=["update"];l.getTargetCell()===r&&h.push("target"),l.getSourceCell()===r&&h.push("source"),this.scheduleViewUpdate(u,u.getFlag(h),u.priority,e)}}},n.prototype.forcePostponedViewUpdate=function(t,e){if(!t||!c.CellView.isCellView(t))return!1;var r=t.cell;if(r.isNode())return!1;var o=t;if(r.isEdge()&&(e&t.getFlag(["source","target"]))==0){var s=0,a=this.findViewByCell(r.getSourceCell());a&&!this.isViewMounted(a)&&(s=this.dumpView(a),o.updateTerminalMagnet("source"));var l=0,u=this.findViewByCell(r.getTargetCell());if(u&&!this.isViewMounted(u)&&(l=this.dumpView(u),o.updateTerminalMagnet("target")),s===0&&l===0)return!this.dumpView(o)}return!1},n.prototype.scheduleViewUpdate=function(t,e,r,o){o===void 0&&(o={});var s=t.cid,a=this.updates,l=a.priorities[r];l||(l=a.priorities[r]={});var u=l[s]||0;(u&e)!==e&&(u||(a.count+=1),e&n.FLAG_REMOVE&&u&n.FLAG_INSERT?l[s]^=n.FLAG_INSERT:e&n.FLAG_INSERT&&u&n.FLAG_REMOVE&&(l[s]^=n.FLAG_REMOVE),l[s]|=e,this.graph.hook.onViewUpdated(t,e,o))},n.prototype.requestViewUpdate=function(t,e,r,o){o===void 0&&(o={}),this.scheduleViewUpdate(t,e,r,o);var s=this.isAsync();if(!(this.isFrozen()||s&&o.async!==!1||this.model.hasActiveBatch(n.UPDATE_DELAYING_BATCHES))){var a=this.updateViews(o);s&&this.graph.trigger("render:done",{stats:a,options:o})}},n.prototype.dumpView=function(t,e){if(e===void 0&&(e={}),t==null)return 0;var r=t.cid,o=this.updates.priorities[t.priority],s=this.registerMountedView(t)|o[r];return delete o[r],s?this.updateView(t,s,e):0},n.prototype.dumpViews=function(t){t===void 0&&(t={}),this.checkView(t),this.updateViews(t)},n.prototype.requireView=function(t,e){e===void 0&&(e={});var r=this.findViewByCell(t);return r==null?null:(this.dumpView(r,e),r)},n.prototype.updateView=function(t,e,r){if(r===void 0&&(r={}),t==null)return 0;if(c.CellView.isCellView(t)){if(e&n.FLAG_REMOVE)return this.removeView(t.cell),0;e&n.FLAG_INSERT&&(this.insertView(t),e^=n.FLAG_INSERT)}return e?t.confirmUpdate(e,r):0},n.prototype.updateViews=function(t){var e;t===void 0&&(t={});var r=0,o=0,s=n.MIN_PRIORITY;do r+=1,o+=(e=this.updateViewsBatch(t)).updatedCount,s=Math.min(e.priority,s);while(!e.empty);return{priority:s,batchCount:r,updatedCount:o}},n.prototype.updateViewsBatch=function(t){t===void 0&&(t={});var e=this.updates,r=e.priorities,o=t.batchSize||n.UPDATE_BATCH_SIZE,s=!0,a=n.MIN_PRIORITY,l=0,u=0,h=0,d=0,f=t.checkView||this.options.checkView;typeof f!="function"&&(f=null);t:for(var v=0,b=r.length;v<b;v+=1){var w=r[v];for(var P in w){if(h>=o){s=!1;break t}var x=c.View.views[P];if(x){var S=w[P];if((S&n.FLAG_REMOVE)==0){var D=P in e.unmounted;if(f&&!dt(f,this.graph,{view:x,unmounted:D})){D||(this.registerUnmountedView(x),x.unmount()),e.unmounted[P]|=S,delete w[P],u+=1;continue}D&&(S|=n.FLAG_INSERT,l+=1),S|=this.registerMountedView(x)}var N=x,V=this.updateView(x,S,t);if(V>0){var y=N.cell;y&&y.isEdge()&&(N.hasAction(V,"source")&&!this.isEdgeTerminalVisible(y,"source")&&(V=N.removeAction(V,"source"),V|=n.FLAG_REMOVE),N.hasAction(V,"target")&&!this.isEdgeTerminalVisible(y,"target")&&(V=N.removeAction(V,"target"),V|=n.FLAG_REMOVE))}V>0&&(w[P]=V,!this.graph.hook.onViewPostponed(N,V,t)||w[P])?(d+=1,s=!1):(a>v&&(a=v),h+=1,delete w[P])}else delete w[P]}}return{empty:s,priority:a,mountedCount:l,unmountedCount:u,updatedCount:h,postponedCount:d}},n.prototype.updateViewsAsync=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={processed:0,priority:n.MIN_PRIORITY});var o=this.updates,s=o.animationId;if(s){if(Vs(s),e.processed===0){var a=t.before;typeof a=="function"&&dt(a,this.graph,this.graph)}var l=this.updateViewsBatch(t),u=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:n.MOUNT_BATCH_SIZE-l.mountedCount,unmountedBatchSize:n.MOUNT_BATCH_SIZE-l.unmountedCount}),h=e.processed,d=o.count,f=u.mountedCount,v=u.unmountedCount;l.updatedCount>0&&(h+=l.updatedCount+l.unmountedCount,e.priority=Math.min(l.priority,e.priority),l.empty&&f===0?(l.priority=e.priority,l.mountedCount+=f,l.unmountedCount+=v,this.graph.trigger("render:done",{stats:l,options:t}),e.processed=0,o.count=0):e.processed=h);var b=t.progress;if(d&&typeof b=="function"&&dt(b,this.graph,{total:d,done:l.empty,current:h}),o.animationId!==s)return}o.animationId=Rs(function(){r.updateViewsAsync(t,e)})},n.prototype.registerMountedView=function(t){var e=t.cid,r=this.updates;if(e in r.mounted)return 0;r.mounted[e]=!0,r.mountedCids.push(e);var o=r.unmounted[e]||0;return delete r.unmounted[e],o},n.prototype.registerUnmountedView=function(t){var e=t.cid,r=this.updates;if(e in r.unmounted)return 0;r.unmounted[e]|=n.FLAG_INSERT;var o=r.unmounted[e];return r.unmountedCids.push(e),delete r.mounted[e],o},n.prototype.isViewMounted=function(t){return t!=null&&t.cid in this.updates.mounted},n.prototype.getMountedViews=function(){return Object.keys(this.updates.mounted).map(function(t){return c.CellView.views[t]})},n.prototype.getUnmountedViews=function(){return Object.keys(this.updates.unmounted).map(function(t){return c.CellView.views[t]})},n.prototype.checkMountedViews=function(t,e){var r=0;if(typeof t!="function")return r;for(var o=this.updates,s=o.mounted,a=o.mountedCids,l=e==null?a.length:Math.min(a.length,e),u=0;u<l;u+=1){var h=a[u];if(h in s){var d=c.CellView.views[h];d!=null&&(dt(t,this.graph,{view:d,unmounted:!0})?a.push(h):(r+=1,this.registerUnmountedView(d)&&d.unmount()))}}return a.splice(0,l),r},n.prototype.checkUnmountedViews=function(t,e){var r=0;typeof t!="function"&&(t=null);for(var o=this.updates,s=o.unmounted,a=o.unmountedCids,l=e==null?a.length:Math.min(a.length,e),u=0;u<l;u+=1){var h=a[u];if(h in s){var d=c.CellView.views[h];if(d!=null)if(!t||dt(t,this.graph,{view:d,unmounted:!1})){r+=1;var f=this.registerMountedView(d);f&&this.scheduleViewUpdate(d,f,d.priority,{mounting:!0})}else a.push(h)}}return a.splice(0,l),r},n.prototype.checkViewImpl=function(t){t===void 0&&(t={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER});var e=t.checkView||this.options.checkView,r=this.checkMountedViews(e,t.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(e,r>0?Math.min(this.updates.unmountedCids.length-r,t.mountedBatchSize):t.mountedBatchSize),unmountedCount:r}},n.prototype.checkView=function(t){return t===void 0&&(t={}),this.checkViewImpl(t)},n.prototype.isFrozen=function(){return!!this.options.frozen},n.prototype.freeze=function(t){t===void 0&&(t={});var e=t.key,r=this.updates,o=this.options.frozen,s=r.freezeKey;if(e&&e!==s){if(o&&s)return;r.frozen=o,r.freezeKey=e}this.options.frozen=!0;var a=r.animationId;r.animationId=null,this.isAsync()&&a!=null&&Vs(a),this.graph.trigger("freeze",{key:e})},n.prototype.unfreeze=function(t){var e=this;t===void 0&&(t={});var r=t.key,o=this.updates,s=o.freezeKey;if(!(r&&s&&r!==s||(o.freezeKey=null,r&&r===s&&o.frozen))){var a=function(){e.options.frozen=o.frozen=!1,o.sort&&(e.sortViews(),o.sort=!1);var u=t.after;u&&dt(u,e.graph,e.graph),e.graph.trigger("unfreeze",{key:r})};if(this.isAsync()){this.freeze();var l=t.progress;this.updateViewsAsync(A(A({},t),{progress:function(u){var h=u.done,d=u.current,f=u.total;l&&dt(l,e.graph,{done:h,current:d,total:f}),h&&a()}}))}else this.updateViews(t),a()}},n.prototype.isAsync=function(){return!!this.options.async},n.prototype.setAsync=function(t){this.options.async=t},n.prototype.onRemove=function(){this.freeze(),this.removeViews()},n.prototype.resetViews=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var r=0,o=t.length;r<o;r+=1)this.renderView(t[r],e);this.unfreeze({key:"reset"}),this.sortViews()},n.prototype.removeView=function(t){var e=this.views[t.id];if(e){var r=e.cid,o=this.updates,s=o.mounted,a=o.unmounted;e.remove(),delete this.views[t.id],delete s[r],delete a[r]}return e},n.prototype.removeViews=function(){var t=this;this.views&&Object.keys(this.views).forEach(function(e){var r=t.views[e];r&&t.removeView(r.cell)}),this.views={}},n.prototype.renderView=function(t,e){e===void 0&&(e={});var r=t.id,o=this.views,s=0,a=o[r];if(t.isVisible()&&(!t.isEdge()||this.isEdgeTerminalVisible(t,"source")&&this.isEdgeTerminalVisible(t,"target"))){if(a)s=n.FLAG_INSERT;else{var l=this.graph.hook.createCellView(t);l&&((a=o[t.id]=l).graph=this.graph,s=this.registerUnmountedView(a)|a.getBootstrapFlag())}a&&this.requestViewUpdate(a,s,a.priority,e)}},n.prototype.isExactSorting=function(){return this.options.sorting==="exact"},n.prototype.sortViews=function(){this.isExactSorting()&&(this.isFrozen()?this.updates.sort=!0:this.sortViewsExact())},n.prototype.sortElements=function(t,e){var r=t.map(function(o){var s=o.parentNode,a=s.insertBefore(document.createTextNode(""),o.nextSibling);return function(l){if(s===l)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(l,a),s.removeChild(a)}});t.sort(e).forEach(function(o,s){return r[s](o)})},n.prototype.sortViewsExact=function(){var t=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),e=this.model;this.sortElements(t,function(r,o){var s=e.getCell(r.getAttribute("data-cell-id")||""),a=e.getCell(o.getAttribute("data-cell-id")||""),l=s.getZIndex()||0,u=a.getZIndex()||0;return l===u?0:l<u?-1:1})},n.prototype.addZPivot=function(t){t===void 0&&(t=0),this.zPivots==null&&(this.zPivots={});var e=this.zPivots,r=e[t];if(r)return r;r=e[t]=document.createComment("z-index:"+(t+1));var o=-1/0;for(var s in e){var a=+s;a<t&&a>o&&(o=a)}var l=this.view.stage;if(o!==-1/0){var u=e[o];l.insertBefore(r,u.nextSibling)}else l.insertBefore(r,l.firstChild);return r},n.prototype.removeZPivots=function(){var t=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(e){var r=t.zPivots[e];r&&r.parentNode&&r.parentNode.removeChild(r)}),this.zPivots={}},n.prototype.insertView=function(t){var e=this.view.stage;switch(this.options.sorting){case"approx":var r=t.cell.getZIndex(),o=this.addZPivot(r);e.insertBefore(t.container,o);break;case"exact":default:e.appendChild(t.container)}},n.prototype.findViewByCell=function(t){if(t==null)return null;var e=c.Cell.isCell(t)?t.id:t;return this.views[e]},n.prototype.findViewByElem=function(t){if(t==null)return null;var e=typeof t=="string"?this.view.stage.querySelector(t):t instanceof Element?t:t[0];if(e){var r=this.view.findAttr("data-cell-id",e);if(r)return this.views[r]}return null},n.prototype.findViewsFromPoint=function(t){var e=this,r={x:t.x,y:t.y};return this.model.getCells().map(function(o){return e.findViewByCell(o)}).filter(function(o){return o!=null&&ye(o.container,{target:e.view.stage}).containsPoint(r)})},n.prototype.findEdgeViewsInArea=function(t,e){var r=this;e===void 0&&(e={});var o=c.Rectangle.create(t);return this.model.getEdges().map(function(s){return r.findViewByCell(s)}).filter(function(s){if(s){var a=ye(s.container,{target:r.view.stage});return a.width===0?a.inflate(1,0):a.height===0&&a.inflate(0,1),e.strict?o.containsRect(a):o.isIntersectWithRect(a)}return!1})},n.prototype.findViewsInArea=function(t,e){var r=this;e===void 0&&(e={});var o=c.Rectangle.create(t);return this.model.getNodes().map(function(s){return r.findViewByCell(s)}).filter(function(s){if(s){var a=ye(s.container,{target:r.view.stage});return e.strict?o.containsRect(a):o.isIntersectWithRect(a)}return!1})},n.prototype.dispose=function(){this.resetUpdates(),this.stopListening()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut);(function(i){i.FLAG_INSERT=1<<30,i.FLAG_REMOVE=1<<29,i.MOUNT_BATCH_SIZE=1e3,i.UPDATE_BATCH_SIZE=1e3,i.MIN_PRIORITY=2,i.SORT_DELAYING_BATCHES=["add","to-front","to-back"],i.UPDATE_DELAYING_BATCHES=["translate"]})(No||(No={}));var dn,zu=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"elem",{get:function(){return this.view.background},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.startListening(),this.options.background&&this.draw(this.options.background)},n.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},n.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},n.prototype.updateBackgroundImage=function(t){t===void 0&&(t={});var e=t.size||"auto auto",r=t.position||"center",o=this.graph.transform.getScale(),s=this.graph.translate();typeof r=="object"&&(r=s.tx+o.sx*(r.x||0)+"px "+(s.ty+o.sy*(r.y||0))+"px"),typeof e=="object"&&(e=(e=c.Rectangle.fromSize(e).scale(o.sx,o.sy)).width+"px "+e.height+"px"),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=r},n.prototype.drawBackgroundImage=function(t,e){if(e===void 0&&(e={}),t instanceof HTMLImageElement){var r=this.optionsCache;if(!r||r.image===e.image){var o,s=e.opacity,a=e.size,l=e.repeat||"no-repeat",u=Mo.registry.get(l);if(typeof u=="function"){var h=e.quality||1;t.width*=h,t.height*=h;var d=u(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");o=d.toDataURL("image/png"),l=e.repeat&&l!==e.repeat?e.repeat:"repeat",typeof a=="object"?(a.width*=d.width/t.width,a.height*=d.height/t.height):a===void 0&&(e.size={width:d.width/h,height:d.height/h})}else o=t.src,a===void 0&&(e.size={width:t.width,height:t.height});r!=null&&typeof e.size=="object"&&e.image===r.image&&e.repeat===r.repeat&&e.quality===r.quality&&(r.size=fo(e.size));var f=this.elem.style;f.backgroundImage="url("+o+")",f.backgroundRepeat=l,f.opacity=s==null||s>=1?"":""+s,this.updateBackgroundImage(e)}}else this.elem.style.backgroundImage=""},n.prototype.updateBackgroundColor=function(t){this.elem.style.backgroundColor=t||""},n.prototype.updateBackgroundOptions=function(t){this.graph.options.background=t},n.prototype.update=function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)},n.prototype.draw=function(t){var e=this,r=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(r.color),r.image){this.optionsCache=fo(r);var o=document.createElement("img");o.onload=function(){return e.drawBackgroundImage(o,t)},o.setAttribute("crossorigin","anonymous"),o.src=r.image}else this.drawBackgroundImage(null),this.optionsCache=null},n.prototype.clear=function(){this.draw()},n.prototype.dispose=function(){this.clear(),this.stopListening()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),ma=function(i){function n(t){var e=i.call(this)||this;e.padding={left:0,top:0,right:0,bottom:0},e.options=dn.getOptions(t);var r=e.graph.transform.getScale();e.sx=r.sx,e.sy=r.sy;var o=e.options.width||e.graph.options.width,s=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(dn.containerClass)).css({width:o,height:s}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(dn.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var a=e.graph.container;a.parentNode&&e.$container.insertBefore(a);var l=a.getAttribute("style");if(l){var u={};l.split(";").forEach(function(h){var d=h.trim();if(d){var f=d.split(":");f.length&&(u[f[0].trim()]=f[1]?f[1].trim():"")}}),Object.keys(u).forEach(function(h){h!=="width"&&h!=="height"&&(a.style[h]="",e.container.style[h]=u[h])})}return e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(dn.contentClass)).css({width:e.graph.options.width,height:e.graph.options.height}),e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(dn.backgroundClass)),e.$content.append(e.background),e.options.pageVisible||e.$content.append(e.graph.view.grid),e.$content.append(a),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||e.graph.grid.update(),e.backgroundManager=new n.Background(e),e.options.autoResize||e.update(),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),n.prototype.startListening=function(){var t=this.graph,e=this.model;t.on("scale",this.onScale,this),t.on("resize",this.onResize,this),t.on("before:print",this.storeScrollPosition,this),t.on("before:export",this.storeScrollPosition,this),t.on("after:print",this.restoreScrollPosition,this),t.on("after:export",this.restoreScrollPosition,this),t.on("render:done",this.onRenderDone,this),t.on("unfreeze",this.onUpdate,this),e.on("reseted",this.onUpdate,this),e.on("cell:added",this.onUpdate,this),e.on("cell:removed",this.onUpdate,this),e.on("cell:changed",this.onUpdate,this),e.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()},n.prototype.stopListening=function(){var t=this.graph,e=this.model;t.off("scale",this.onScale,this),t.off("resize",this.onResize,this),t.off("beforeprint",this.storeScrollPosition,this),t.off("beforeexport",this.storeScrollPosition,this),t.off("afterprint",this.restoreScrollPosition,this),t.off("afterexport",this.restoreScrollPosition,this),t.off("render:done",this.onRenderDone,this),t.off("unfreeze",this.onUpdate,this),e.off("reseted",this.onUpdate,this),e.off("cell:added",this.onUpdate,this),e.off("cell:removed",this.onUpdate,this),e.off("cell:changed",this.onUpdate,this),e.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()},n.prototype.enableAutoResize=function(){this.options.autoResize=!0},n.prototype.disableAutoResize=function(){this.options.autoResize=!1},n.prototype.onUpdate=function(){!this.graph.isAsync()&&this.options.autoResize&&this.update()},n.prototype.onBatchStop=function(t){!this.graph.isAsync()&&this.options.autoResize&&No.UPDATE_DELAYING_BATCHES.includes(t.name)&&this.update()},n.prototype.delegateBackgroundEvents=function(t){var e=this,r=t||Wr.events;this.delegatedHandlers=Object.keys(r).reduce(function(o,s){var a=r[s];if(s.indexOf(" ")===-1)if(typeof a=="function")o[s]=a;else{var l=e.graph.view[a];typeof l=="function"&&(l=l.bind(e.graph.view),o[s]=l)}return o},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(o){e.delegateEvent(o,{guarded:!1},e.onBackgroundEvent)})},n.prototype.undelegateBackgroundEvents=function(){var t=this;Object.keys(this.delegatedHandlers).forEach(function(e){t.undelegateEvent(e,t.onBackgroundEvent)})},n.prototype.onBackgroundEvent=function(t){var e=!1,r=t.target;if(this.options.pageVisible)e=this.options.background?this.background===r:this.content===r;else{var o=this.graph.view;e=o.background===r||o.grid===r}if(e){var s=this.delegatedHandlers[t.type];typeof s=="function"&&s.apply(this.graph,arguments)}},n.prototype.onRenderDone=function(t){var e=t.stats;this.options.autoResize&&e.priority<2&&this.update()},n.prototype.onResize=function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())},n.prototype.onScale=function(t){var e=t.sx,r=t.sy,o=t.ox,s=t.oy;this.updateScale(e,r),(o||s)&&(this.centerPoint(o,s),this.updatePageBreak()),typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)=="function"&&this.update()},n.prototype.storeScrollPosition=function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop},n.prototype.restoreScrollPosition=function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null},n.prototype.storeClientSize=function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}},n.prototype.restoreClientSize=function(){this.cachedClientSize=null},n.prototype.beforeManipulation=function(){(c.Platform.IS_IE||c.Platform.IS_EDGE)&&this.$container.css("visibility","hidden")},n.prototype.afterManipulation=function(){(c.Platform.IS_IE||c.Platform.IS_EDGE)&&this.$container.css("visibility","visible")},n.prototype.updatePageSize=function(t,e){t!=null&&(this.options.pageWidth=t),e!=null&&(this.options.pageHeight=e),this.updatePageBreak()},n.prototype.updatePageBreak=function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var t=this.graph.options.width,e=this.graph.options.height,r=this.options.pageWidth*this.sx,o=this.options.pageHeight*this.sy;if(r===0||o===0)return;if(t>r||e>o){for(var s=!1,a=document.createElement("div"),l=1,u=Math.floor(t/r);l<u;l+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:l*r}).appendTo(a),s=!0;for(l=1,u=Math.floor(e/o);l<u;l+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:l*o}).appendTo(a),s=!0;s&&(Rt(a,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(a),this.pageBreak=a)}}},n.prototype.update=function(){var t=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(t.width/2,t.height/2);var e=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof e=="function"&&(e=dt(e,this,this));var r=A({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(e)},e);this.graph.fitToContent(this.getFitToContentOptions(r))},n.prototype.calcContextArea=function(t){var e=t==null?void 0:t.direction;if(!e)return this.graph.transform.getContentArea(t);function r(l){var u=l.getBBox();if(u&&l.isNode()){var h=l.getAngle();h!=null&&h!==0&&(u=u.bbox(h))}return u}var o=this.options.pageWidth||1,s=this.options.pageHeight||1,a=this.graph.getCells();return e.includes("top")||(a=a.filter(function(l){return r(l).y>=0})),e.includes("left")||(a=a.filter(function(l){return r(l).x>=0})),e.includes("right")||(a=a.filter(function(l){var u=r(l);return u.x+u.width<=o})),e.includes("bottom")||(a=a.filter(function(l){var u=r(l);return u.y+u.height<=s})),this.model.getCellsBBox(a)||new c.Rectangle},n.prototype.getFitToContentOptions=function(t){var e=this.sx,r=this.sy;return t.gridWidth&&(t.gridWidth*=e),t.gridHeight&&(t.gridHeight*=r),t.minWidth&&(t.minWidth*=e),t.minHeight&&(t.minHeight*=r),typeof t.padding=="object"?t.padding={left:(t.padding.left||0)*e,right:(t.padding.right||0)*e,top:(t.padding.top||0)*r,bottom:(t.padding.bottom||0)*r}:typeof t.padding=="number"&&(t.padding*=e),this.options.autoResize||(t.contentArea=c.Rectangle.create()),t},n.prototype.updateScale=function(t,e){var r=this.graph.options,o=t/this.sx,s=e/this.sy;this.sx=t,this.sy=e,this.graph.translate(r.x*o,r.y*s),this.graph.resizeGraph(r.width*o,r.height*s)},n.prototype.scrollbarPosition=function(t,e,r){if(t==null&&e==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var o={};return typeof t=="number"&&(o.scrollLeft=t),typeof e=="number"&&(o.scrollTop=e),r&&r.animation?this.$container.animate(o,r.animation):this.$container.prop(o),this},n.prototype.scrollToPoint=function(t,e,r){var o=this.getClientSize(),s=this.graph.matrix(),a={};return typeof t=="number"&&(a.scrollLeft=t-o.width/2+s.e+(this.padding.left||0)),typeof e=="number"&&(a.scrollTop=e-o.height/2+s.f+(this.padding.top||0)),r&&r.animation?this.$container.animate(a,r.animation):this.$container.prop(a),this},n.prototype.scrollToContent=function(t){var e=this.sx,r=this.sy,o=this.graph.getContentArea().getCenter();return this.scrollToPoint(o.x*e,o.y*r,t)},n.prototype.scrollToCell=function(t,e){var r=this.sx,o=this.sy,s=t.getBBox().getCenter();return this.scrollToPoint(s.x*r,s.y*o,e)},n.prototype.center=function(t){return this.centerPoint(t)},n.prototype.centerPoint=function(t,e,r){var o,s=this.graph.matrix(),a=s.a,l=s.d,u=-s.e,h=-s.f,d=u+this.graph.options.width,f=h+this.graph.options.height;if(this.storeClientSize(),typeof t=="number"||typeof e=="number"){o=r;var v=this.getVisibleArea().getCenter();typeof t=="number"?t*=a:t=v.x,typeof e=="number"?e*=l:e=v.y}else o=t,t=(u+d)/2,e=(h+f)/2;if(o&&o.padding)return this.positionPoint({x:t,y:e},"50%","50%",o);var b=this.getPadding(),w=this.getClientSize(),P=w.width/2,x=w.height/2,S=P-b.left-t+u,D=P-b.right+t-d,N=x-b.top-e+h,V=x-b.bottom+e-f;this.addPadding(Math.max(S,0),Math.max(D,0),Math.max(N,0),Math.max(V,0));var y=this.scrollToPoint(t,e,o||void 0);return this.restoreClientSize(),y},n.prototype.centerContent=function(t){return this.positionContent("center",t)},n.prototype.centerCell=function(t,e){return this.positionCell(t,"center",e)},n.prototype.positionContent=function(t,e){var r=this.graph.getContentArea(e);return this.positionRect(r,t,e)},n.prototype.positionCell=function(t,e,r){var o=t.getBBox();return this.positionRect(o,e,r)},n.prototype.positionRect=function(t,e,r){var o=c.Rectangle.create(t);switch(e){case"center":return this.positionPoint(o.getCenter(),"50%","50%",r);case"top":return this.positionPoint(o.getTopCenter(),"50%",0,r);case"top-right":return this.positionPoint(o.getTopRight(),"100%",0,r);case"right":return this.positionPoint(o.getRightMiddle(),"100%","50%",r);case"bottom-right":return this.positionPoint(o.getBottomRight(),"100%","100%",r);case"bottom":return this.positionPoint(o.getBottomCenter(),"50%","100%",r);case"bottom-left":return this.positionPoint(o.getBottomLeft(),0,"100%",r);case"left":return this.positionPoint(o.getLeftMiddle(),0,"50%",r);case"top-left":return this.positionPoint(o.getTopLeft(),0,0,r);default:return this}},n.prototype.positionPoint=function(t,e,r,o){o===void 0&&(o={});var s=o.padding,a=z(o,["padding"]),l=$e(s),u=c.Rectangle.fromSize(this.getClientSize()),h=u.clone().moveAndExpand({x:l.left,y:l.top,width:-l.right-l.left,height:-l.top-l.bottom});(e=cn(e,Math.max(0,h.width)))<0&&(e=h.width+e),(r=cn(r,Math.max(0,h.height)))<0&&(r=h.height+r);var d=h.getTopLeft().translate(e,r),f=u.getCenter().diff(d),v=this.zoom(),b=f.scale(1/v,1/v),w=c.Point.create(t).translate(b);return this.centerPoint(w.x,w.y,a)},n.prototype.zoom=function(t,e){if(t==null)return this.sx;var r,o;e=e||{};var s=this.getClientSize(),a=this.clientToLocalPoint(s.width/2,s.height/2),l=t,u=t;if(e.absolute||(l+=this.sx,u+=this.sy),e.scaleGrid&&(l=Math.round(l/e.scaleGrid)*e.scaleGrid,u=Math.round(u/e.scaleGrid)*e.scaleGrid),e.maxScale&&(l=Math.min(e.maxScale,l),u=Math.min(e.maxScale,u)),e.minScale&&(l=Math.max(e.minScale,l),u=Math.max(e.minScale,u)),l=this.graph.transform.clampScale(l),u=this.graph.transform.clampScale(u),e.center){var h=l/this.sx,d=u/this.sy;r=e.center.x-(e.center.x-a.x)/h,o=e.center.y-(e.center.y-a.y)/d}else r=a.x,o=a.y;return this.beforeManipulation(),this.graph.transform.scale(l,u),this.centerPoint(r,o),this.afterManipulation(),this},n.prototype.zoomToRect=function(t,e){e===void 0&&(e={});var r=c.Rectangle.create(t),o=this.graph;e.contentArea=r,e.viewportArea==null&&(e.viewportArea={x:o.options.x,y:o.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),o.transform.scaleContentToFitImpl(e,!1);var s=r.getCenter();return this.centerPoint(s.x,s.y),this.afterManipulation(),this},n.prototype.zoomToFit=function(t){return t===void 0&&(t={}),this.zoomToRect(this.graph.getContentArea(t),t)},n.prototype.transitionToPoint=function(t,e,r){var o,s,a=this;typeof t=="object"?(r=e,e=t.y,t=t.x):e=e,r==null&&(r={});var l=this.sx,u=Math.max(r.scale||l,1e-6),h=this.getClientSize(),d=new c.Point(t,e),f=this.clientToLocalPoint(h.width/2,h.height/2);if(l===u){var v=f.diff(d).scale(l,l).round();o="translate("+v.x+"px,"+v.y+"px)"}else{var b=u/(l-u)*d.distance(f),w=f.clone().move(d,b),P=this.localToBackgroundPoint(w).round();o="scale("+u/l+")",s=P.x+"px "+P.y+"px"}var x=r.onTransitionEnd;return this.$container.addClass(dn.transitionClassName),this.$content.off(dn.transitionEventName).on(dn.transitionEventName,function(S){a.syncTransition(u,{x:t,y:e}),typeof x=="function"&&dt(x,a,S.originalEvent)}).css({transform:o,transformOrigin:s,transition:"transform",transitionDuration:r.duration||"1s",transitionDelay:r.delay,transitionTimingFunction:r.timing}),this},n.prototype.syncTransition=function(t,e){return this.beforeManipulation(),this.graph.scale(t),this.removeTransition(),this.centerPoint(e.x,e.y),this.afterManipulation(),this},n.prototype.removeTransition=function(){return this.$container.removeClass(dn.transitionClassName),this.$content.off(dn.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this},n.prototype.transitionToRect=function(t,e){e===void 0&&(e={});var r=c.Rectangle.create(t),o=e.maxScale||1/0,s=e.minScale||Number.MIN_VALUE,a=e.scaleGrid||null,l=e.visibility||1,u=e.center?c.Point.create(e.center):r.getCenter(),h=this.getClientSize(),d=h.width*l,f=h.height*l,v=new c.Rectangle(u.x-d/2,u.y-f/2,d,f).getMaxUniformScaleToFit(r,u);return v=Math.min(v,o),a&&(v=Math.floor(v/a)*a),v=Math.max(s,v),this.transitionToPoint(u,A({scale:v},e))},n.prototype.startPanning=function(t){var e=this.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.trigger("pan:start",{e}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))},n.prototype.pan=function(t){var e=this.normalizeEvent(t),r=e.clientX-this.clientX,o=e.clientY-this.clientY;this.container.scrollTop-=o,this.container.scrollLeft-=r,this.clientX=e.clientX,this.clientY=e.clientY,this.trigger("panning",{e})},n.prototype.stopPanning=function(t){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e:t})},n.prototype.clientToLocalPoint=function(t,e){var r=typeof t=="object"?t.x:t,o=typeof t=="object"?t.y:e,s=this.graph.matrix();return r+=this.container.scrollLeft-this.padding.left-s.e,o+=this.container.scrollTop-this.padding.top-s.f,new c.Point(r/s.a,o/s.d)},n.prototype.localToBackgroundPoint=function(t,e){var r=typeof t=="object"?c.Point.create(t):new c.Point(t,e),o=this.graph.matrix(),s=this.padding;return En(r,o).translate(s.left,s.top)},n.prototype.resize=function(t,e){var r=t!=null?t:this.container.offsetWidth,o=e!=null?e:this.container.offsetHeight;typeof r=="number"&&(r=Math.round(r)),typeof o=="number"&&(o=Math.round(o)),this.options.width=r,this.options.height=o,this.$container.css({width:r,height:o}),this.update()},n.prototype.getClientSize=function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}},n.prototype.autoScroll=function(t,e){var r=10,o=this.container,s=o.getBoundingClientRect(),a=0,l=0;return t<=s.left+r&&(a=-10),e<=s.top+r&&(l=-10),t>=s.right-r&&(a=r),e>=s.bottom-r&&(l=r),a!==0&&(o.scrollLeft+=a),l!==0&&(o.scrollTop+=l),{scrollerX:a,scrollerY:l}},n.prototype.addPadding=function(t,e,r,o){var s=this.getPadding();this.padding={left:Math.round(s.left+(t||0)),top:Math.round(s.top+(r||0)),bottom:Math.round(s.bottom+(o||0)),right:Math.round(s.right+(e||0))},s=this.padding,this.$content.css({width:s.left+this.graph.options.width+s.right,height:s.top+this.graph.options.height+s.bottom});var a=this.graph.container;return a.style.left=this.padding.left+"px",a.style.top=this.padding.top+"px",this},n.prototype.getPadding=function(){var t=this.options.padding;return $e(typeof t=="function"?dt(t,this,this):t)},n.prototype.getVisibleArea=function(){var t=this.graph.matrix(),e=this.getClientSize(),r=_e({x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:e.width,height:e.height},t.inverse());return r.x-=(this.padding.left||0)/this.sx,r.y-=(this.padding.top||0)/this.sy,r},n.prototype.isCellVisible=function(t,e){e===void 0&&(e={});var r=t.getBBox(),o=this.getVisibleArea();return e.strict?o.containsRect(r):o.isIntersectWithRect(r)},n.prototype.isPointVisible=function(t){return this.getVisibleArea().containsPoint(t)},n.prototype.lock=function(){return this.$container.css("overflow","hidden"),this},n.prototype.unlock=function(){return this.$container.css("overflow","scroll"),this},n.prototype.onRemove=function(){this.stopListening()},n.prototype.dispose=function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View);function me(i,n,t,e){if(e===void 0&&(e={}),t){var r=t.graph,o=r.view.normalizeEvent(n),s=r.snapToGrid(o.clientX,o.clientY);t.notify(i,A({e:o,view:t,node:t.cell,cell:t.cell,x:s.x,y:s.y},e))}}(function(i){var n=function(t){function e(r){var o=t.call(this,r.graph)||this;return o.scroller=r,r.options.background&&o.draw(r.options.background),o}return B(e,t),Object.defineProperty(e.prototype,"elem",{get:function(){return this.scroller.background},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},e.prototype.updateBackgroundOptions=function(r){this.scroller.options.background=r},e}(zu);i.Background=n})(ma||(ma={})),function(i){i.containerClass="graph-scroller",i.panningClass=i.containerClass+"-panning",i.pannableClass=i.containerClass+"-pannable",i.pagedClass=i.containerClass+"-paged",i.contentClass=i.containerClass+"-content",i.backgroundClass=i.containerClass+"-background",i.transitionClassName="transition-in-progress",i.transitionEventName="transitionend.graph-scroller-transition",i.defaultOptions={padding:function(){var n=this.getClientSize(),t=Math.max(this.options.minVisibleWidth||0,1)||1,e=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(n.width-t,0),o=Math.max(n.height-e,0);return{left:r,top:o,right:r,bottom:o}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0},i.getOptions=function(n){var t=Jt({},i.defaultOptions,n);return t.pageWidth==null&&(t.pageWidth=n.graph.options.width),t.pageHeight==null&&(t.pageHeight=n.graph.options.height),t}}(dn||(dn={}));var Ge,Ru=function(i){function n(t){var e=i.call(this)||this;return e.options=Jt({},Ge.defaultOptions,t),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new Du([],{comparator:Ge.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"boxClassName",{get:function(){return this.prefixClassName(Ge.classNames.box)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$boxes",{get:function(){return this.$container.children("."+this.boxClassName)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"handleOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),n.prototype.startListening=function(){var t,e=this.graph,r=this.collection;this.delegateEvents(((t={})["mousedown ."+this.boxClassName]="onSelectionBoxMouseDown",t["touchstart ."+this.boxClassName]="onSelectionBoxMouseDown",t),!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),r.on("added",this.onCellAdded,this),r.on("removed",this.onCellRemoved,this),r.on("reseted",this.onReseted,this),r.on("updated",this.onCollectionUpdated,this),r.on("node:change:position",this.onNodePositionChanged,this),r.on("cell:changed",this.onCellChanged,this)},n.prototype.stopListening=function(){var t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onGraphTransformed,this),t.off("translate",this.onGraphTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)},n.prototype.onRemove=function(){this.stopListening()},n.prototype.onGraphTransformed=function(){this.updateSelectionBoxes({async:!1})},n.prototype.onCellChanged=function(){this.updateSelectionBoxes()},n.prototype.onNodePositionChanged=function(t){var e=t.node,r=t.options,o=this.options,s=o.showNodeSelectionBox,a=o.pointerEvents,l=r.ui,u=r.selection,h=r.translateBy,d=r.snapped,f=!(s===!0&&a!=="none"||this.translating||u),v=l&&h&&e.id===h;if(f&&(v||d)){this.translating=!0;var b=e.position(),w=e.previous("position"),P=b.x-w.x,x=b.y-w.y;P===0&&x===0||this.translateSelectedNodes(P,x,e,r),this.translating=!1}},n.prototype.onModelUpdated=function(t){var e=t.removed;e&&e.length&&this.unselect(e)},n.prototype.isEmpty=function(){return this.length<=0},n.prototype.isSelected=function(t){return this.collection.has(t)},Object.defineProperty(n.prototype,"length",{get:function(){return this.collection.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cells",{get:function(){return this.collection.toArray()},enumerable:!1,configurable:!0}),n.prototype.select=function(t,e){e===void 0&&(e={}),e.dryrun=!0;var r=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(r,e),this},n.prototype.unselect=function(t,e){return e===void 0&&(e={}),e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this},n.prototype.reset=function(t,e){if(e===void 0&&(e={}),t){if(e.batch){var r=this.filter(Array.isArray(t)?t:[t]);return this.collection.reset(r,A(A({},e),{ui:!0})),this}var o=this.cells,s=this.filter(Array.isArray(t)?t:[t]),a={},l={};o.forEach(function(d){return a[d.id]=d}),s.forEach(function(d){return l[d.id]=d});var u=[],h=[];return s.forEach(function(d){a[d.id]||u.push(d)}),o.forEach(function(d){l[d.id]||h.push(d)}),h.length&&this.unselect(h,A(A({},e),{ui:!0})),u.length&&this.select(u,A(A({},e),{ui:!0})),h.length===0&&u.length===0&&this.updateContainer(),this}return this.clean(e)},n.prototype.clean=function(t){return t===void 0&&(t={}),this.length&&(t.batch===!1?this.unselect(this.cells,t):this.collection.reset([],A(A({},t),{ui:!0}))),this},n.prototype.setFilter=function(t){this.options.filter=t},n.prototype.setContent=function(t){this.options.content=t},n.prototype.startSelecting=function(t){var e,r;t=this.normalizeEvent(t),this.clean();var o=this.graph.container;if(t.offsetX!=null&&t.offsetY!=null&&o.contains(t.target))e=t.offsetX,r=t.offsetY;else{var s=this.$(o).offset(),a=o.scrollLeft,l=o.scrollTop;e=t.clientX-s.left+window.pageXOffset+a,r=t.clientY-s.top+window.pageYOffset+l}this.$container.css({top:r,left:e,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:e,offsetY:r,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Ge.documentEvents,t.data)},n.prototype.filter=function(t){var e=this,r=this.options.filter;return Array.isArray(r)?t.filter(function(o){return!r.includes(o)&&!r.includes(o.shape)}):typeof r=="function"?t.filter(function(o){return dt(r,e.graph,o)}):t},n.prototype.stopSelecting=function(t){var e=this.graph,r=this.getEventData(t);switch(r.action){case"selecting":var o=this.$container.width(),s=this.$container.height(),a=this.$container.offset(),l=e.pageToLocal(a.left,a.top),u=e.transform.getScale();o/=u.sx,s/=u.sy;var h=new c.Rectangle(l.x,l.y,o,s),d=this.getCellViewsInArea(h).map(function(b){return b.cell});this.reset(d,{batch:!0}),this.hideRubberband();break;case"translating":var f=e.snapToGrid(t.clientX,t.clientY);if(!this.options.following){var v=r;this.updateSelectedNodesPosition({dx:v.clientX-v.originX,dy:v.clientY-v.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",t,f.x,f.y);break;default:this.clean()}},n.prototype.onMouseUp=function(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())},n.prototype.onSelectionBoxMouseDown=function(t){this.options.following||t.stopPropagation();var e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);var r=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:r});var o=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,o.x,o.y),this.delegateDocumentEvents(Ge.documentEvents,e.data)},n.prototype.startTranslating=function(t){this.graph.model.startBatch("move-selection");var e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})},n.prototype.getSelectionOffset=function(t,e){var r=t.x-e.clientX,o=t.y-e.clientY,s=this.graph.hook.getRestrictArea();if(s){var a=this.collection.toArray(),l=c.Cell.getCellsBBox(a,{deep:!0})||c.Rectangle.create(),u=s.x-l.x,h=s.y-l.y,d=s.x+s.width-(l.x+l.width),f=s.y+s.height-(l.y+l.height);if(r<u&&(r=u),o<h&&(o=h),d<r&&(r=d),f<o&&(o=f),!this.options.following){var v=t.x-e.originX,b=t.y-e.originY;r=v<=u||v>=d?0:r,o=b<=h||b>=f?0:o}}return{dx:r,dy:o}},n.prototype.updateSelectedNodesPosition=function(t){var e=t.dx,r=t.dy;if(e||r)if(this.translateSelectedNodes(e,r),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var o=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+="+e*o.sx,top:"+="+r*o.sy})}},n.prototype.autoScrollGraph=function(t,e){var r=this.graph.scroller.widget;return r?r.autoScroll(t,e):{scrollerX:0,scrollerY:0}},n.prototype.adjustSelection=function(t){var e=this.normalizeEvent(t),r=this.getEventData(e);switch(r.action){case"selecting":(v=r).moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),v.moving=!0);var o=this.autoScrollGraph(e.clientX,e.clientY),s=o.scrollerX,a=o.scrollerY;v.scrollerX+=s,v.scrollerY+=a;var l=e.clientX-v.clientX+v.scrollerX,u=e.clientY-v.clientY+v.scrollerY,h=parseInt(this.$container.css("left"),10),d=parseInt(this.$container.css("top"),10);this.$container.css({left:l<0?v.offsetX+l:h,top:u<0?v.offsetY+u:d,width:Math.abs(l),height:Math.abs(u)});break;case"translating":var f=this.graph.snapToGrid(e.clientX,e.clientY),v=r,b=this.getSelectionOffset(f,v);this.options.following?this.updateSelectedNodesPosition(b):this.updateContainerPosition(b),b.dx&&(v.clientX=f.x),b.dy&&(v.clientY=f.y),this.notifyBoxEvent("box:mousemove",t,f.x,f.y)}this.boxesUpdated=!1},n.prototype.translateSelectedNodes=function(t,e,r,o){var s=this,a={},l=[];if(r&&(a[r.id]=!0),this.collection.toArray().forEach(function(h){h.getDescendants({deep:!0}).forEach(function(d){a[d.id]=!0})}),o&&o.translateBy){var u=this.graph.getCellById(o.translateBy);u&&(a[u.id]=!0,u.getDescendants({deep:!0}).forEach(function(h){a[h.id]=!0}),l.push(u))}this.collection.toArray().forEach(function(h){if(!a[h.id]){var d=A(A({},o),{selection:s.cid,exclude:l});h.translate(t,e,d),s.graph.model.getConnectedEdges(h).forEach(function(f){a[f.id]||(f.translate(t,e,d),a[f.id]=!0)})}})},n.prototype.getCellViewsInArea=function(t){var e=this.graph,r={strict:this.options.strict},o=[];return this.options.rubberNode&&(o=this.options.useCellGeometry?o.concat(e.model.getNodesInArea(t,r).map(function(s){return e.renderer.findViewByCell(s)}).filter(function(s){return s!=null})):o.concat(e.renderer.findViewsInArea(t,r))),this.options.rubberEdge&&(o=this.options.useCellGeometry?o.concat(e.model.getEdgesInArea(t,r).map(function(s){return e.renderer.findViewByCell(s)}).filter(function(s){return s!=null})):o.concat(e.renderer.findEdgeViewsInArea(t,r))),o},n.prototype.notifyBoxEvent=function(t,e,r,o){var s=this.getEventData(e).activeView;this.trigger(t,{e,view:s,x:r,y:o,cell:s.cell})},n.prototype.getSelectedClassName=function(t){return this.prefixClassName((t.isNode()?"node":"edge")+"-selected")},n.prototype.addCellSelectedClassName=function(t){var e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))},n.prototype.removeCellUnSelectedClassName=function(t){var e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))},n.prototype.destroySelectionBox=function(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(this.$container.find('[data-cell-id="'+t.id+'"]').remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))},n.prototype.destroyAllSelectionBoxes=function(t){var e=this;t.forEach(function(r){return e.removeCellUnSelectedClassName(r)}),this.hide(),this.$boxes.remove(),this.boxCount=0},n.prototype.hide=function(){this.$container.removeClass(this.prefixClassName(Ge.classNames.rubberband)).removeClass(this.prefixClassName(Ge.classNames.selected))},n.prototype.showRubberband=function(){this.$container.addClass(this.prefixClassName(Ge.classNames.rubberband))},n.prototype.hideRubberband=function(){this.$container.removeClass(this.prefixClassName(Ge.classNames.rubberband))},n.prototype.showSelected=function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Ge.classNames.selected))},n.prototype.createContainer=function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Ge.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Ge.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Ge.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer},n.prototype.updateContainerPosition=function(t){(t.dx||t.dy)&&this.$selectionContainer.css({left:"+="+t.dx,top:"+="+t.dy})},n.prototype.updateContainer=function(){var t=this,e={x:1/0,y:1/0},r={x:0,y:0};this.collection.toArray().filter(function(a){return t.canShowSelectionBox(a)}).forEach(function(a){var l=t.graph.renderer.findViewByCell(a);if(l){var u=l.getBBox({useCellGeometry:t.options.useCellGeometry});e.x=Math.min(e.x,u.x),e.y=Math.min(e.y,u.y),r.x=Math.max(r.x,u.x+u.width),r.y=Math.max(r.y,u.y+u.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:r.x-e.x,height:r.y-e.y}).attr("data-selection-length",this.collection.length);var o=this.options.content;if(o)if(typeof o=="function"){var s=dt(o,this.graph,this,this.$selectionContent[0]);s&&this.$selectionContent.html(s)}else this.$selectionContent.html(o);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)},n.prototype.canShowSelectionBox=function(t){return t.isNode()&&this.options.showNodeSelectionBox===!0||t.isEdge()&&this.options.showEdgeSelectionBox===!0},n.prototype.createSelectionBox=function(t){if(this.addCellSelectedClassName(t),this.canShowSelectionBox(t)){var e=this.graph.renderer.findViewByCell(t);if(e){var r=e.getBBox({useCellGeometry:this.options.useCellGeometry}),o=this.boxClassName;this.$("<div/>").addClass(o).addClass(o+"-"+(t.isNode()?"node":"edge")).attr("data-cell-id",t.id).css({position:"absolute",left:r.x,top:r.y,width:r.width,height:r.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}},n.prototype.updateSelectionBoxes=function(t){t===void 0&&(t={}),this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,t))},n.prototype.confirmUpdate=function(){var t=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(e,r){var o=t.$(r).remove().attr("data-cell-id"),s=t.collection.get(o);s&&t.createSelectionBox(s)}),this.updateContainer()),0},n.prototype.getCellViewFromElem=function(t){var e=t.getAttribute("data-cell-id");if(e){var r=this.collection.get(e);if(r)return this.graph.renderer.findViewByCell(r)}return null},n.prototype.onCellRemoved=function(t){var e=t.cell;this.destroySelectionBox(e),this.updateContainer()},n.prototype.onReseted=function(t){var e=this,r=t.previous,o=t.current;this.destroyAllSelectionBoxes(r),o.forEach(function(s){e.listenCellRemoveEvent(s),e.createSelectionBox(s)}),this.updateContainer()},n.prototype.onCellAdded=function(t){var e=t.cell;this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()},n.prototype.listenCellRemoveEvent=function(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)},n.prototype.onCollectionUpdated=function(t){var e=this,r=t.added,o=t.removed,s=t.options;r.forEach(function(l){e.trigger("cell:selected",{cell:l,options:s}),e.graph.trigger("cell:selected",{cell:l,options:s}),l.isNode()?(e.trigger("node:selected",{cell:l,options:s,node:l}),e.graph.trigger("node:selected",{cell:l,options:s,node:l})):l.isEdge()&&(e.trigger("edge:selected",{cell:l,options:s,edge:l}),e.graph.trigger("edge:selected",{cell:l,options:s,edge:l}))}),o.forEach(function(l){e.trigger("cell:unselected",{cell:l,options:s}),e.graph.trigger("cell:unselected",{cell:l,options:s}),l.isNode()?(e.trigger("node:unselected",{cell:l,options:s,node:l}),e.graph.trigger("node:unselected",{cell:l,options:s,node:l})):l.isEdge()&&(e.trigger("edge:unselected",{cell:l,options:s,edge:l}),e.graph.trigger("edge:unselected",{cell:l,options:s,edge:l}))});var a={added:r,removed:o,options:s,selected:this.cells.filter(function(l){return!!e.graph.getCellById(l.id)})};this.trigger("selection:changed",a),this.graph.trigger("selection:changed",a)},n.prototype.deleteSelectedCells=function(){var t=this.collection.toArray();this.clean(),this.graph.model.removeCells(t,{selection:this.cid})},n.prototype.startRotate=function(t){var e=t.e,r=this.collection.toArray(),o=c.Cell.getCellsBBox(r).getCenter(),s=this.graph.snapToGrid(e.clientX,e.clientY),a=r.reduce(function(l,u){return l[u.id]=c.Angle.normalize(u.getAngle()),l},{});this.setEventData(e,{center:o,angles:a,start:s.theta(o)})},n.prototype.doRotate=function(t){var e=this,r=t.e,o=this.getEventData(r),s=this.graph.options.rotating.grid,a=typeof s=="function"?dt(s,this.graph,null):s,l=this.graph.snapToGrid(r.clientX,r.clientY),u=o.start-l.theta(o.center);o.rotated||(o.rotated=!0),Math.abs(u)>.001&&(this.collection.toArray().forEach(function(h){var d=c.Util.snapToGrid(o.angles[h.id]+u,a||15);h.rotate(d,{absolute:!0,center:o.center,selection:e.cid})}),this.updateSelectionBoxes())},n.prototype.stopRotate=function(t){var e=this,r=t.e,o=this.getEventData(r);o.rotated&&(o.rotated=!1,this.collection.toArray().forEach(function(s){me("node:rotated",r,e.graph.findViewByCell(s))}))},n.prototype.startResize=function(t){var e=t.e,r=this.graph.getGridSize(),o=this.collection.toArray(),s=c.Cell.getCellsBBox(o),a=o.map(function(h){return h.getBBox()}),l=a.reduce(function(h,d){return d.width<h?d.width:h},1/0),u=a.reduce(function(h,d){return d.height<h?d.height:h},1/0);this.setEventData(e,{bbox:s,cells:this.graph.model.getSubGraph(o),minWidth:r*s.width/l,minHeight:r*s.height/u})},n.prototype.doResize=function(t){var e=t.e,r=t.dx,o=t.dy,s=this.eventData(e),a=s.bbox,l=a.width,u=a.height,h=Math.max(l+r,s.minWidth),d=Math.max(u+o,s.minHeight);s.resized||(s.resized=!0),(Math.abs(l-h)>.001||Math.abs(u-d)>.001)&&(this.graph.model.resizeCells(h,d,s.cells,{selection:this.cid}),a.width=h,a.height=d,this.updateSelectionBoxes())},n.prototype.stopResize=function(t){var e=this,r=t.e,o=this.eventData(r);o.resized&&(o.resized=!1,this.collection.toArray().forEach(function(s){me("node:resized",r,e.graph.findViewByCell(s))}))},n.prototype.dispose=function(){this.clean(),this.remove()},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View);Ol(Ru,ki),function(i){var n="widget-selection";i.classNames={root:n,inner:n+"-inner",box:n+"-box",content:n+"-content",rubberband:n+"-rubberband",selected:n+"-selected"},i.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(t){return Or('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:t.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]},i.depthComparator=function(t){return t.getAncestors().length}}(Ge||(Ge={}));var Ae,Mn,Vu=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"node",{get:function(){return this.cell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerClassName",{get:function(){return this.prefixClassName("widget-transform")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizeClassName",{get:function(){return this.containerClassName+"-resize"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotateClassName",{get:function(){return this.containerClassName+"-rotate"},enumerable:!1,configurable:!0}),n.prototype.init=function(t){this.options=A(A({},Ae.defaultOptions),t),this.render(),this.startListening()},n.prototype.startListening=function(){var t;this.delegateEvents(((t={})["mousedown ."+this.resizeClassName]="startResizing",t["touchstart ."+this.resizeClassName]="startResizing",t["mousedown ."+this.rotateClassName]="startRotating",t["touchstart ."+this.rotateClassName]="startRotating",t)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),i.prototype.startListening.call(this)},n.prototype.stopListening=function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),i.prototype.stopListening.call(this)},n.prototype.renderHandles=function(){var t=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var e=this.$("<div/>").prop("draggable",!1),r=e.clone().addClass(this.rotateClassName),o=Ae.POSITIONS.map(function(s){return e.clone().addClass(t.resizeClassName).attr("data-position",s)});this.empty(),this.$container.append(o,r)},n.prototype.render=function(){return this.renderHandles(),this.view.addClass(Ae.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()},n.prototype.update=function(){var t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;var r=c.Angle.normalize(this.node.getAngle()),o=r!==0?"rotate("+r+"deg)":"";return this.$container.css({transform:o,width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this},n.prototype.remove=function(){return this.view.removeClass(Ae.NODE_CLS),i.prototype.remove.call(this)},n.prototype.onKnobMouseDown=function(){this.startHandle()},n.prototype.onKnobMouseUp=function(){this.stopHandle()},n.prototype.updateResizerDirections=function(){var t=this,e=c.Angle.normalize(this.node.getAngle()),r=Math.floor(e*(Ae.DIRECTIONS.length/360));if(r!==this.prevShift){var o=Ae.DIRECTIONS.slice(r).concat(Ae.DIRECTIONS.slice(0,r)),s=function(a){return t.containerClassName+"-cursor-"+a};this.$container.find("."+this.resizeClassName).removeClass(Ae.DIRECTIONS.map(function(a){return s(a)}).join(" ")).each(function(a,l){t.$(l).addClass(s(o[a]))}),this.prevShift=r}},n.prototype.getTrueDirection=function(t){var e=c.Angle.normalize(this.node.getAngle()),r=Ae.POSITIONS.indexOf(t);return r+=Math.floor(e*(Ae.POSITIONS.length/360)),r%=Ae.POSITIONS.length,Ae.POSITIONS[r]},n.prototype.toValidResizeDirection=function(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t},n.prototype.startResizing=function(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var e=this.$(t.target).attr("data-position"),r=this.graph.findViewByCell(this.node);this.prepareResizing(t,e),this.startAction(t),me("node:resize:mousedown",t,r)},n.prototype.prepareResizing=function(t,e){var r=this.getTrueDirection(e),o=0,s=0;e.split("-").forEach(function(h){o={left:-1,right:1}[h]||o,s={top:-1,bottom:1}[h]||s});var a=this.toValidResizeDirection(e),l={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[a],u=c.Angle.normalize(this.node.getAngle());this.setEventData(t,{selector:l,direction:a,trueDirection:r,relativeDirection:e,angle:u,resizeX:o,resizeY:s,action:"resizing"})},n.prototype.startRotating=function(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var e=this.graph.findViewByCell(this.node),r=this.node.getBBox().getCenter(),o=this.normalizeEvent(t),s=this.graph.snapToGrid(o.clientX,o.clientY);this.setEventData(t,{center:r,action:"rotating",angle:c.Angle.normalize(this.node.getAngle()),start:c.Point.create(s).theta(r)}),this.startAction(t),me("node:rotate:mousedown",t,e)},n.prototype.onMouseMove=function(t){var e=this.graph.findViewByCell(this.node),r=this.getEventData(t);if(r.action){var o=this.normalizeEvent(t),s=o.clientX,a=o.clientY,l=this.graph.scroller.widget,u=this.options.restrictedResizing;if(u===!0||typeof u=="number"){var h=u===!0?0:u,d=l?Math.max(h,8):h,f=this.graph.container.getBoundingClientRect();s=Re(s,f.left+d,f.right-d),a=Re(a,f.top+d,f.bottom-d)}else this.options.autoScrollOnResizing&&l&&l.autoScroll(s,a);var v=this.graph.snapToGrid(s,a),b=this.graph.getGridSize(),w=this.node,P=this.options;if(r.action==="resizing"){(r=r).resized||(e&&(e.addClass("node-resizing"),me("node:resize",t,e)),r.resized=!0);var x=w.getBBox(),S=c.Point.create(v).rotate(r.angle,x.getCenter()).diff(x[r.selector]),D=r.resizeX?S.x*r.resizeX:x.width,N=r.resizeY?S.y*r.resizeY:x.height,V=D,y=N;if(D=c.Util.snapToGrid(D,b),N=c.Util.snapToGrid(N,b),D=Math.max(D,P.minWidth||b),N=Math.max(N,P.minHeight||b),D=Math.min(D,P.maxWidth||1/0),N=Math.min(N,P.maxHeight||1/0),P.preserveAspectRatio){var H=x.width*N/x.height,I=x.height*D/x.width;D<H?N=I:D=H}var X=r.relativeDirection;if(P.allowReverse&&(V<=-D||y<=-N)){var J=void 0;X==="left"?V<=-D&&(J="right"):X==="right"?V<=-D&&(J="left"):X==="top"?y<=-N&&(J="bottom"):X==="bottom"?y<=-N&&(J="top"):X==="top-left"?V<=-D&&y<=-N?J="bottom-right":V<=-D?J="top-right":y<=-N&&(J="bottom-left"):X==="top-right"?V<=-D&&y<=-N?J="bottom-left":V<=-D?J="top-left":y<=-N&&(J="bottom-right"):X==="bottom-left"?V<=-D&&y<=-N?J="top-right":V<=-D?J="bottom-right":y<=-N&&(J="top-left"):X==="bottom-right"&&(V<=-D&&y<=-N?J="top-left":V<=-D?J="bottom-left":y<=-N&&(J="top-right"));var Z=J;this.stopHandle();var it=this.$container.find("."+this.resizeClassName+'[data-position="'+Z+'"]');this.startHandle(it[0]),this.prepareResizing(t,Z),this.onMouseMove(t)}if(x.width!==D||x.height!==N){var ct={ui:!0,direction:r.direction,relativeDirection:r.relativeDirection,trueDirection:r.trueDirection,minWidth:P.minWidth,minHeight:P.minHeight,maxWidth:P.maxWidth,maxHeight:P.maxHeight,preserveAspectRatio:P.preserveAspectRatio===!0};w.resize(D,N,ct),me("node:resizing",t,e)}me("node:resize:mousemove",t,e)}else if(r.action==="rotating"){(r=r).rotated||(e&&(e.addClass("node-rotating"),me("node:rotate",t,e)),r.rotated=!0);var et=w.getAngle(),lt=r.start-c.Point.create(v).theta(r.center),ht=r.angle+lt;P.rotateGrid&&(ht=c.Util.snapToGrid(ht,P.rotateGrid)),et!==(ht=c.Angle.normalize(ht))&&(w.rotate(ht,{absolute:!0}),me("node:rotating",t,e)),me("node:rotate:mousemove",t,e)}}},n.prototype.onMouseUp=function(t){var e=this.graph.findViewByCell(this.node),r=this.getEventData(t);r.action&&(this.stopAction(t),this.model.stopBatch(r.action==="resizing"?"resize":"rotate",{cid:this.cid}),r.action==="resizing"?me("node:resize:mouseup",t,e):r.action==="rotating"&&me("node:rotate:mouseup",t,e))},n.prototype.startHandle=function(t){if(this.handle=t||null,this.$container.addClass(this.containerClassName+"-active"),t){this.$(t).addClass(this.containerClassName+"-active-handle");var e=t.getAttribute("data-position");if(e){var r=Ae.DIRECTIONS[Ae.POSITIONS.indexOf(e)];this.$container.addClass(this.containerClassName+"-cursor-"+r)}}},n.prototype.stopHandle=function(){if(this.$container.removeClass(this.containerClassName+"-active"),this.handle){this.$(this.handle).removeClass(this.containerClassName+"-active-handle");var t=this.handle.getAttribute("data-position");if(t){var e=Ae.DIRECTIONS[Ae.POSITIONS.indexOf(t)];this.$container.removeClass(this.containerClassName+"-cursor-"+e)}this.handle=null}},n.prototype.startAction=function(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Ae.documentEvents,t.data)},n.prototype.stopAction=function(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var e=this.graph.findViewByCell(this.node),r=this.getEventData(t);e&&(e.removeClass("node-"+r.action),r.action==="resizing"&&r.resized?me("node:resized",t,e):r.action==="rotating"&&r.rotated&&me("node:rotated",t,e))},n}(Fu);(function(i){i.NODE_CLS="has-widget-transform",i.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],i.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],i.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},i.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(Ae||(Ae={})),function(i){i.parseOptionGroup=function(n,t,e){var r={};return Object.keys(e||{}).forEach(function(o){var s=e[o];r[o]=typeof s=="function"?s.call(n,t):s}),r}}(Mn||(Mn={})),function(i){i.get=function(n){var t=n.grid;n.panning,n.selecting,n.embedding,n.snapline,n.resizing,n.rotating,n.knob,n.clipboard,n.history,n.scroller,n.minimap,n.keyboard,n.mousewheel;var e=z(n,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),r=n.container;if(r==null)throw new Error("Ensure the container of the graph is specified and valid");e.width==null&&(e.width=r.clientWidth),e.height==null&&(e.height=r.clientHeight);var o=Jt({},i.defaults,e),s={size:10,visible:!1};return o.grid=typeof t=="number"?{size:t,visible:!1}:A(A({},s),typeof t=="boolean"?{visible:t}:t),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(function(a){var l=n[a];typeof l=="boolean"?o[a].enabled=l:o[a]=A(A({},o[a]),l)}),o.background&&o.scroller.enabled&&o.scroller.background==null&&(o.scroller.background=o.background,delete o.background),o}}(Mn||(Mn={})),function(i){i.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:c.Util.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:c.Util.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(n){var t=n.type,e=n.sourceView,r=n.targetView;return(t==="target"?r:e)!=null},createEdge:function(){return new Nu}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(Mn||(Mn={}));var wr,Vf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"cid",{get:function(){return this.graph.view.cid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"svg",{get:function(){return this.view.svg},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defs",{get:function(){return this.view.defs},enumerable:!1,configurable:!0}),n.prototype.isDefined=function(t){return this.svg.getElementById(t)!=null},n.prototype.filter=function(t){var e=t.id,r=t.name;if(e||(e="filter-"+r+"-"+this.cid+"-"+xs(JSON.stringify(t))),!this.isDefined(e)){var o=jr.registry.get(r);if(o==null)return jr.registry.onNotFound(r);var s=o(t.args||{}),a=A(A({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});c.Vector.create(c.Markup.sanitize(s),a).appendTo(this.defs)}return e},n.prototype.gradient=function(t){var e=t.id,r=t.type;if(e||(e="gradient-"+r+"-"+this.cid+"-"+xs(JSON.stringify(t))),!this.isDefined(e)){var o="<"+r+">"+t.stops.map(function(a){var l=a.opacity!=null&&Number.isFinite(a.opacity)?a.opacity:1;return'<stop offset="'+a.offset+'" stop-color="'+a.color+'" stop-opacity="'+l+'"/>'}).join("")+"</"+r+">",s=A({id:e},t.attrs);c.Vector.create(o,s).appendTo(this.defs)}return e},n.prototype.marker=function(t){var e=t.id,r=t.refX,o=t.refY,s=t.markerUnits,a=t.markerOrient,l=t.tagName,u=t.children,h=z(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),d=e;if(d||(d="marker-"+this.cid+"-"+xs(JSON.stringify(t))),!this.isDefined(d)){l!=="path"&&delete h.d;var f=c.Vector.create("marker",{refX:r,refY:o,id:d,overflow:"visible",orient:a!=null?a:"auto",markerUnits:s||"userSpaceOnUse"},u?u.map(function(v){var b=v.tagName,w=z(v,["tagName"]);return c.Vector.create(""+b||"path",Co(A(A({},h),w)))}):[c.Vector.create(l||"path",Co(h))]);this.defs.appendChild(f.node)}return d},n.prototype.remove=function(t){var e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)},n}(Ut),jf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"elem",{get:function(){return this.view.grid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"grid",{get:function(){return this.options.grid},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.startListening(),this.draw(this.grid)},n.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},n.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},n.prototype.setVisible=function(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())},n.prototype.getGridSize=function(){return this.grid.size},n.prototype.setGridSize=function(t){this.grid.size=Math.max(t,1),this.update()},n.prototype.show=function(){this.setVisible(!0),this.update()},n.prototype.hide=function(){this.setVisible(!1),this.update()},n.prototype.clear=function(){this.elem.style.backgroundImage=""},n.prototype.draw=function(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()},n.prototype.update=function(t){t===void 0&&(t={});var e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();var r=this.graph.matrix(),o=this.getInstance(),s=Array.isArray(t)?t:[t];this.patterns.forEach(function(u,h){var d="pattern_"+h,f=r.a||1,v=r.d||1,b=u.update,w=u.markup,P=z(u,["update","markup"]),x=A(A(A({},P),s[h]),{sx:f,sy:v,ox:r.e||0,oy:r.f||0,width:e*f,height:e*v});o.has(d)||o.add(d,c.Vector.create("pattern",{id:d,patternUnits:"userSpaceOnUse"},c.Vector.createVectors(w)).node);var S=o.get(d);typeof b=="function"&&b(S.childNodes[0],x);var D=x.ox%x.width;D<0&&(D+=x.width);var N=x.oy%x.height;N<0&&(N+=x.height),Vt(S,{x:D,y:N,width:x.width,height:x.height})});var a=new XMLSerializer().serializeToString(o.root),l="url(data:image/svg+xml;base64,"+btoa(a)+")";this.elem.style.backgroundImage=l},n.prototype.getInstance=function(){return this.instance||(this.instance=new Jn),this.instance},n.prototype.resolveGrid=function(t){if(!t)return[];var e=t.type;if(e==null)return[A(A({},Jn.presets.dot),t.args)];var r=Jn.registry.get(e);if(r){var o=t.args||[];return Array.isArray(o)||(o=[o]),Array.isArray(r)?r.map(function(s,a){return A(A({},s),o[a])}):[A(A({},r),o[0])]}return Jn.registry.onNotFound(e)},n.prototype.dispose=function(){this.stopListening(),this.clear()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),If=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.getClientMatrix=function(){return ve(this.view.stage.getScreenCTM())},n.prototype.getClientOffset=function(){var t=this.view.svg.getBoundingClientRect();return new c.Point(t.left,t.top)},n.prototype.getPageOffset=function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)},n.prototype.snapToGrid=function(t,e){return(typeof t=="number"?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())},n.prototype.localToGraphPoint=function(t,e){return En(c.Point.create(t,e),this.graph.matrix())},n.prototype.localToClientPoint=function(t,e){return En(c.Point.create(t,e),this.getClientMatrix())},n.prototype.localToPagePoint=function(t,e){return(typeof t=="number"?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())},n.prototype.localToGraphRect=function(t,e,r,o){return _e(c.Rectangle.create(t,e,r,o),this.graph.matrix())},n.prototype.localToClientRect=function(t,e,r,o){return _e(c.Rectangle.create(t,e,r,o),this.getClientMatrix())},n.prototype.localToPageRect=function(t,e,r,o){return(typeof t=="number"?this.localToGraphRect(t,e,r,o):this.localToGraphRect(t)).translate(this.getPageOffset())},n.prototype.graphToLocalPoint=function(t,e){return En(c.Point.create(t,e),this.graph.matrix().inverse())},n.prototype.clientToLocalPoint=function(t,e){return En(c.Point.create(t,e),this.getClientMatrix().inverse())},n.prototype.clientToGraphPoint=function(t,e){return En(c.Point.create(t,e),this.graph.matrix().multiply(this.getClientMatrix().inverse()))},n.prototype.pageToLocalPoint=function(t,e){var r=c.Point.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(r)},n.prototype.graphToLocalRect=function(t,e,r,o){return _e(c.Rectangle.create(t,e,r,o),this.graph.matrix().inverse())},n.prototype.clientToLocalRect=function(t,e,r,o){return _e(c.Rectangle.create(t,e,r,o),this.getClientMatrix().inverse())},n.prototype.clientToGraphRect=function(t,e,r,o){return _e(c.Rectangle.create(t,e,r,o),this.graph.matrix().multiply(this.getClientMatrix().inverse()))},n.prototype.pageToLocalRect=function(t,e,r,o){var s=c.Rectangle.create(t,e,r,o),a=this.getPageOffset();return s.x-=a.x,s.y-=a.y,this.graphToLocalRect(s)},n}(Ut),_f=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.widget=t.graph.hook.createSnapline(),t}return B(n,i),n.prototype.dispose=function(){this.widget.dispose()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut);(function(i){function n(t){var e=[],r=[];return Array.isArray(t)?e.push.apply(e,t):t.split("|").forEach(function(o){o.indexOf("&")===-1?e.push(o):r.push.apply(r,o.split("&"))}),{or:e,and:r}}i.parse=n,i.equals=function(t,e){if(t!=null&&e!=null){var r=n(t),o=n(e),s=r.or.sort(),a=o.or.sort(),l=r.and.sort(),u=o.and.sort(),h=function(d,f){return d.length===f.length&&(d.length===0||d.every(function(v,b){return v===f[b]}))};return h(s,a)&&h(l,u)}return t==null&&e==null},i.isMatch=function(t,e,r){if(e==null||Array.isArray(e)&&e.length===0)return!r||t.altKey!==!0&&t.ctrlKey!==!0&&t.metaKey!==!0&&t.shiftKey!==!0;var o=n(e),s=o.or,a=o.and,l=function(u){var h=u.toLowerCase()+"Key";return t[h]===!0};return s.some(function(u){return l(u)})&&a.every(function(u){return l(u)})}})(wr||(wr={}));var le,Gf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"widgetOptions",{get:function(){return this.options.scroller},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pannable",{get:function(){return!!this.widgetOptions&&(typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable)},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()},n.prototype.startListening=function(){var t=[],e=this.widgetOptions.pannable;(t=typeof e=="object"?e.eventTypes||[]:["leftMouseDown"]).includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))},n.prototype.stopListening=function(){var t=[],e=this.widgetOptions.pannable;(t=typeof e=="object"?e.eventTypes||[]:["leftMouseDown"]).includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)},n.prototype.onRightMouseDown=function(t){var e=this;t.button===2&&this.allowPanning(t,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(t),this.widget.once("pan:stop",function(){return e.updateClassName(!1)}))},n.prototype.preparePanning=function(t){var e=this,r=t.e;this.widget&&(this.allowPanning(r,!0)||this.allowPanning(r)&&!this.graph.selection.allowRubberband(r,!0))&&(this.updateClassName(!0),this.widget.startPanning(r),this.widget.once("pan:stop",function(){return e.updateClassName(!1)}))},n.prototype.allowPanning=function(t,e){return this.widget&&this.pannable&&wr.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowPanning(t)},n.prototype.updateClassName=function(t){if(this.widget!=null){var e=this.widget.container,r=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(Rt(e,r),e.dataset.panning=(!!t).toString()):tn(e,r)}},n.prototype.enablePanning=function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())},n.prototype.disablePanning=function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())},n.prototype.lock=function(){this.widget&&this.widget.lock()},n.prototype.unlock=function(){this.widget&&this.widget.unlock()},n.prototype.update=function(){this.widget&&this.widget.update()},n.prototype.enableAutoResize=function(){this.widget&&this.widget.enableAutoResize()},n.prototype.disableAutoResize=function(){this.widget&&this.widget.disableAutoResize()},n.prototype.resize=function(t,e){this.widget&&this.widget.resize(t,e)},n.prototype.dispose=function(){this.widget&&this.widget.dispose(),this.stopListening()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),Hf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"commonOptions",{get:function(){var t=this.instanceOptions;return t.enabled,z(t,["enabled"])},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"instanceOptions",{get:function(){return this.options.clipboard},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cells",{get:function(){return this.widget.cells},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.instanceOptions.enabled!==!0},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)},n.prototype.enable=function(){this.disabled&&(this.instanceOptions.enabled=!0)},n.prototype.disable=function(){this.disabled||(this.instanceOptions.enabled=!1)},n.prototype.copy=function(t,e){e===void 0&&(e={}),this.disabled||(this.widget.copy(t,this.graph,A(A({},this.commonOptions),e)),this.graph.trigger("clipboard:changed",{cells:t}))},n.prototype.cut=function(t,e){e===void 0&&(e={}),this.disabled||(this.widget.cut(t,this.graph,A(A({},this.commonOptions),e)),this.graph.trigger("clipboard:changed",{cells:t}))},n.prototype.paste=function(t,e){return t===void 0&&(t={}),e===void 0&&(e=this.graph),this.disabled?[]:this.widget.paste(e,A(A({},this.commonOptions),t))},n.prototype.clean=function(t){this.disabled&&!t||(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))},n.prototype.isEmpty=function(){return this.widget.isEmpty()},n.prototype.dispose=function(){this.clean(!0)},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),Uf=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.highlights={},t}return B(n,i),n.prototype.init=function(){this.startListening()},n.prototype.startListening=function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)},n.prototype.stopListening=function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)},n.prototype.onCellHighlight=function(t){var e=t.view,r=t.magnet,o=t.options,s=o===void 0?{}:o,a=this.resolveHighlighter(s);if(a){var l=this.getHighlighterId(r,a);if(!this.highlights[l]){var u=a.highlighter;u.highlight(e,r,A({},a.args)),this.highlights[l]={cellView:e,magnet:r,highlighter:u,args:a.args}}}},n.prototype.onCellUnhighlight=function(t){var e=t.magnet,r=t.options,o=r===void 0?{}:r,s=this.resolveHighlighter(o);if(s){var a=this.getHighlighterId(e,s);this.unhighlight(a)}},n.prototype.resolveHighlighter=function(t){var e=this.options,r=t.highlighter;if(r==null){var o=t.type;r=o&&e.highlighting[o]||e.highlighting.default}if(r==null)return null;var s=typeof r=="string"?{name:r}:r,a=s.name,l=Bn.registry.get(a);return l==null?Bn.registry.onNotFound(a):(Bn.check(a,l),{name:a,highlighter:l,args:s.args||{}})},n.prototype.getHighlighterId=function(t,e){return ni(t),e.name+t.id+JSON.stringify(e.args)},n.prototype.unhighlight=function(t){var e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])},n.prototype.dispose=function(){var t=this;Object.keys(this.highlights).forEach(function(e){return t.unhighlight(e)}),this.stopListening()},_([n.dispose()],n.prototype,"dispose",null),n}(Ut),qf=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.widgets=new Map,t}return B(n,i),Object.defineProperty(n.prototype,"container",{get:function(){return this.graph.view.container},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"viewport",{get:function(){return this.graph.view.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSelectionEnabled",{get:function(){return this.options.selecting.enabled===!0},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.startListening(),this.resize()},n.prototype.startListening=function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)},n.prototype.stopListening=function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)},n.prototype.onNodeMouseUp=function(t){var e=t.node;if(!this.isSelectionEnabled){var r=this.graph.hook.createTransform(e,{clearAll:!0});r&&this.widgets.set(e,r)}},n.prototype.onNodeSelected=function(t){var e=t.node;if(this.isSelectionEnabled){var r=this.graph.hook.createTransform(e,{clearAll:!1});r&&this.widgets.set(e,r)}},n.prototype.onNodeUnSelected=function(t){var e=t.node;if(this.isSelectionEnabled){var r=this.widgets.get(e);r&&r.dispose(),this.widgets.delete(e)}},n.prototype.getMatrix=function(){var t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),ve(this.viewportMatrix)},n.prototype.setMatrix=function(t){var e=ve(t),r=pr(e);this.viewport.setAttribute("transform",r),this.viewportMatrix=e,this.viewportTransformString=r},n.prototype.resize=function(t,e){var r=t===void 0?this.options.width:t,o=e===void 0?this.options.height:e;this.options.width=r,this.options.height=o,typeof r=="number"&&(r=Math.round(r)),typeof o=="number"&&(o=Math.round(o)),this.container.style.width=r==null?"":r+"px",this.container.style.height=o==null?"":o+"px";var s=this.getComputedSize();return this.graph.trigger("resize",A({},s)),this},n.prototype.getComputedSize=function(){var t=this.options.width,e=this.options.height;return ti(t)||(t=this.container.clientWidth),ti(e)||(e=this.container.clientHeight),{width:t,height:e}},n.prototype.getScale=function(){return Cd(this.getMatrix())},n.prototype.scale=function(t,e,r,o,s){if(e===void 0&&(e=t),r===void 0&&(r=0),o===void 0&&(o=0),s===void 0&&(s={}),t=this.clampScale(t),e=this.clampScale(e),r||o){var a=this.getTranslation(),l=a.tx-r*(t-1),u=a.ty-o*(e-1);l===a.tx&&u===a.ty||this.translate(l,u)}var h=this.getMatrix();return h.a=t,h.d=e,this.setMatrix(h),this.graph.trigger("scale",A({sx:t,sy:e,ox:r,oy:o},s)),this},n.prototype.clampScale=function(t){var e=this.graph.options.scaling;return Re(t,e.min||.01,e.max||16)},n.prototype.getZoom=function(){return this.getScale().sx},n.prototype.zoom=function(t,e){e=e||{};var r=t,o=t,s=this.getScale(),a=this.getComputedSize(),l=a.width/2,u=a.height/2;if(e.absolute||(r+=s.sx,o+=s.sy),e.scaleGrid&&(r=Math.round(r/e.scaleGrid)*e.scaleGrid,o=Math.round(o/e.scaleGrid)*e.scaleGrid),e.maxScale&&(r=Math.min(e.maxScale,r),o=Math.min(e.maxScale,o)),e.minScale&&(r=Math.max(e.minScale,r),o=Math.max(e.minScale,o)),e.center&&(l=e.center.x,u=e.center.y),r=this.clampScale(r),o=this.clampScale(o),l||u){var h=this.getTranslation(),d=l-(l-h.tx)*(r/s.sx),f=u-(u-h.ty)*(o/s.sy);d===h.tx&&f===h.ty||this.translate(d,f,{ui:e.ui})}return this.scale(r,o,0,0,{ui:e.ui}),this},n.prototype.getRotation=function(){return wd(this.getMatrix())},n.prototype.rotate=function(t,e,r){if(e==null||r==null){var o=ye(this.graph.view.stage);e=o.width/2,r=o.height/2}var s=this.getMatrix().translate(e,r).rotate(t).translate(-e,-r);return this.setMatrix(s),this},n.prototype.getTranslation=function(){return xd(this.getMatrix())},n.prototype.translate=function(t,e,r){r===void 0&&(r={});var o=this.getMatrix();o.e=t||0,o.f=e||0,this.setMatrix(o);var s=this.getTranslation();return this.options.x=s.tx,this.options.y=s.ty,this.graph.trigger("translate",A(A({},s),r)),this},n.prototype.setOrigin=function(t,e){return this.translate(t||0,e||0)},n.prototype.fitToContent=function(t,e,r,o){if(typeof t=="object"){var s=t;t=s.gridWidth||1,e=s.gridHeight||1,r=s.padding||0,o=s}else t=t||1,e=e||1,r=r||0,o==null&&(o={});var a=$e(r),l=o.border||0,u=o.contentArea?c.Rectangle.create(o.contentArea):this.getContentArea(o);l>0&&u.inflate(l);var h=this.getScale(),d=this.getTranslation(),f=h.sx,v=h.sy;u.x*=f,u.y*=v,u.width*=f,u.height*=v;var b=Math.max(Math.ceil((u.width+u.x)/t),1)*t,w=Math.max(Math.ceil((u.height+u.y)/e),1)*e,P=0,x=0;(o.allowNewOrigin==="negative"&&u.x<0||o.allowNewOrigin==="positive"&&u.x>=0||o.allowNewOrigin==="any")&&(P=Math.ceil(-u.x/t)*t,b+=P+=a.left),(o.allowNewOrigin==="negative"&&u.y<0||o.allowNewOrigin==="positive"&&u.y>=0||o.allowNewOrigin==="any")&&(x=Math.ceil(-u.y/e)*e,w+=x+=a.top),b+=a.right,w+=a.bottom,b=Math.max(b,o.minWidth||0),w=Math.max(w,o.minHeight||0),b=Math.min(b,o.maxWidth||Number.MAX_SAFE_INTEGER),w=Math.min(w,o.maxHeight||Number.MAX_SAFE_INTEGER);var S=this.getComputedSize(),D=b!==S.width||w!==S.height;return(P!==d.tx||x!==d.ty)&&this.translate(P,x),D&&this.resize(b,w),new c.Rectangle(-P/f,-x/v,b/f,w/v)},n.prototype.scaleContentToFit=function(t){t===void 0&&(t={}),this.scaleContentToFitImpl(t)},n.prototype.scaleContentToFitImpl=function(t,e){var r,o;if(t===void 0&&(t={}),e===void 0&&(e=!0),t.contentArea){var s=t.contentArea;r=this.graph.localToGraph(s),o=c.Point.create(s)}else r=this.getContentBBox(t),o=this.graph.graphToLocal(r);if(r.width&&r.height){var a,l=$e(t.padding),u=t.minScale||0,h=t.maxScale||Number.MAX_SAFE_INTEGER,d=t.minScaleX||u,f=t.maxScaleX||h,v=t.minScaleY||u,b=t.maxScaleY||h;if(t.viewportArea)a=t.viewportArea;else{var w=this.getComputedSize(),P=this.getTranslation();a={x:P.tx,y:P.ty,width:w.width,height:w.height}}a=c.Rectangle.create(a).moveAndExpand({x:l.left,y:l.top,width:-l.left-l.right,height:-l.top-l.bottom});var x=this.getScale(),S=a.width/r.width*x.sx,D=a.height/r.height*x.sy;t.preserveAspectRatio!==!1&&(S=D=Math.min(S,D));var N=t.scaleGrid;if(N&&(S=N*Math.floor(S/N),D=N*Math.floor(D/N)),S=Re(S,d,f),D=Re(D,v,b),this.scale(S,D),e){var V=this.options,y=a.x-o.x*S-V.x,H=a.y-o.y*D-V.y;this.translate(y,H)}}},n.prototype.getContentArea=function(t){return t===void 0&&(t={}),t.useCellGeometry?this.model.getAllCellsBBox()||new c.Rectangle:ye(this.graph.view.stage)},n.prototype.getContentBBox=function(t){return t===void 0&&(t={}),this.graph.localToGraph(this.getContentArea(t))},n.prototype.getGraphArea=function(){var t=c.Rectangle.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)},n.prototype.zoomToRect=function(t,e){e===void 0&&(e={});var r=c.Rectangle.create(t),o=this.graph;e.contentArea=r,e.viewportArea==null&&(e.viewportArea={x:o.options.x,y:o.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);var s=r.getCenter();return this.centerPoint(s.x,s.y),this},n.prototype.zoomToFit=function(t){return t===void 0&&(t={}),this.zoomToRect(this.getContentArea(t),t)},n.prototype.centerPoint=function(t,e){var r=this.getComputedSize(),o=this.getScale(),s=this.getTranslation(),a=r.width/2,l=r.height/2;e=typeof e=="number"?e:l,t=a-(t=typeof t=="number"?t:a)*o.sx,e=l-e*o.sy,s.tx===t&&s.ty===e||this.translate(t,e)},n.prototype.centerContent=function(t){var e=this.graph.getContentArea(t).getCenter();this.centerPoint(e.x,e.y)},n.prototype.centerCell=function(t){return this.positionCell(t,"center")},n.prototype.positionPoint=function(t,e,r){var o=this.getComputedSize();(e=cn(e,Math.max(0,o.width)))<0&&(e=o.width+e),(r=cn(r,Math.max(0,o.height)))<0&&(r=o.height+r);var s=this.getTranslation(),a=this.getScale(),l=e-t.x*a.sx,u=r-t.y*a.sy;s.tx===l&&s.ty===u||this.translate(l,u)},n.prototype.positionRect=function(t,e){var r=c.Rectangle.create(t);switch(e){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}},n.prototype.positionCell=function(t,e){var r=t.getBBox();return this.positionRect(r,e)},n.prototype.positionContent=function(t,e){var r=this.graph.getContentArea(e);return this.positionRect(r,t)},n.prototype.dispose=function(){this.widgets.forEach(function(t){return t.dispose()}),this.widgets.clear(),this.stopListening()},_([n.dispose()],n.prototype,"dispose",null),n}(Ut),$f=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.movedMap=new WeakMap,t.unselectMap=new WeakMap,t}return B(n,i),Object.defineProperty(n.prototype,"widgetOptions",{get:function(){return this.options.selecting},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rubberbandDisabled",{get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.widgetOptions.enabled!==!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this.widget.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cells",{get:function(){return this.widget.cells},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.widget=this.graph.hook.createSelection(),this.startListening()},n.prototype.startListening=function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)},n.prototype.stopListening=function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)},n.prototype.onBlankMouseDown=function(t){var e=t.e;(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)},n.prototype.onBlankClick=function(){this.clean()},n.prototype.allowRubberband=function(t,e){return!this.rubberbandDisabled&&wr.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowRubberband(t)},n.prototype.allowMultipleSelection=function(t){return this.isMultiple()&&wr.isMatch(t,this.widgetOptions.multipleSelectionModifiers)},n.prototype.onCellMouseMove=function(t){var e=t.cell;this.movedMap.set(e,!0)},n.prototype.onCellMouseUp=function(t){var e=t.e,r=t.cell,o=this.widgetOptions,s=this.disabled;!s&&this.movedMap.has(r)&&((s=o.selectCellOnMoved===!1)||(s=o.selectNodeOnMoved===!1&&r.isNode()),s||(s=o.selectEdgeOnMoved===!1&&r.isEdge())),s||(this.allowMultipleSelection(e)?this.unselectMap.has(r)?this.unselectMap.delete(r):this.isSelected(r)?this.unselect(r):this.select(r):this.reset(r)),this.movedMap.delete(r)},n.prototype.onBoxMouseDown=function(t){var e=t.e,r=t.cell;this.disabled||this.allowMultipleSelection(e)&&(this.unselect(r),this.unselectMap.set(r,!0))},n.prototype.isEmpty=function(){return this.length<=0},n.prototype.isSelected=function(t){return this.widget.isSelected(t)},n.prototype.getCells=function(t){var e=this;return(Array.isArray(t)?t:[t]).map(function(r){return typeof r=="string"?e.graph.getCellById(r):r}).filter(function(r){return r!=null})},n.prototype.select=function(t,e){e===void 0&&(e={});var r=this.getCells(t);return r.length&&(this.isMultiple()?this.widget.select(r,e):this.reset(r.slice(0,1),e)),this},n.prototype.unselect=function(t,e){return e===void 0&&(e={}),this.widget.unselect(this.getCells(t),e),this},n.prototype.reset=function(t,e){return e===void 0&&(e={}),this.widget.reset(t?this.getCells(t):[],e),this},n.prototype.clean=function(t){return t===void 0&&(t={}),this.widget.clean(t),this},n.prototype.enable=function(){return this.disabled&&(this.widgetOptions.enabled=!0),this},n.prototype.disable=function(){return this.disabled||(this.widgetOptions.enabled=!1),this},n.prototype.startRubberband=function(t){return this.rubberbandDisabled||this.widget.startSelecting(t),this},n.prototype.enableRubberband=function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this},n.prototype.disableRubberband=function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this},n.prototype.isMultiple=function(){return this.widgetOptions.multiple!==!1},n.prototype.enableMultiple=function(){return this.widgetOptions.multiple=!0,this},n.prototype.disableMultiple=function(){return this.widgetOptions.multiple=!1,this},n.prototype.setModifiers=function(t){return this.widgetOptions.modifiers=t,this},n.prototype.setContent=function(t){return this.widget.setContent(t),this},n.prototype.setFilter=function(t){return this.widget.setFilter(t),this},n.prototype.dispose=function(){this.stopListening(),this.widget.dispose()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),ba=function(i){function n(t){var e=i.call(this)||this;return e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.graph=t.graph,e.model=t.graph.model,e.options=le.getOptions(t),e.validator=new n.Validator({history:e,cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return B(n,i),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.options.enabled!==!0},enumerable:!1,configurable:!0}),n.prototype.enable=function(){this.disabled&&(this.options.enabled=!0)},n.prototype.disable=function(){this.disabled||(this.options.enabled=!1)},n.prototype.undo=function(t){if(t===void 0&&(t={}),!this.disabled){var e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack.push(e),this.notify("undo",e,t))}return this},n.prototype.redo=function(t){if(t===void 0&&(t={}),!this.disabled){var e=this.redoStack.pop();e&&(this.applyCommand(e,t),this.undoStack.push(e),this.notify("redo",e,t))}return this},n.prototype.cancel=function(t){if(t===void 0&&(t={}),!this.disabled){var e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack=[],this.notify("cancel",e,t))}return this},n.prototype.clean=function(t){return t===void 0&&(t={}),this.undoStack=[],this.redoStack=[],this.notify("clean",null,t),this},n.prototype.canUndo=function(){return!this.disabled&&this.undoStack.length>0},n.prototype.canRedo=function(){return!this.disabled&&this.redoStack.length>0},n.prototype.validate=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(e=this.validator).validate.apply(e,W([t],r,!1)),this},n.prototype.dispose=function(){this.validator.dispose(),this.clean(),this.stopListening()},n.prototype.startListening=function(){var t=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(e,r){t.handlers[r]=t.addCommand.bind(t,e),t.model.on(e,t.handlers[r])}),this.validator.on("invalid",function(e){return t.trigger("invalid",e)})},n.prototype.stopListening=function(){var t=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(e,r){t.model.off(e,t.handlers[r])}),this.handlers.length=0),this.validator.off("invalid")},n.prototype.createCommand=function(t){return{batch:!!t&&t.batch,data:{}}},n.prototype.revertCommand=function(t,e){this.freezed=!0;for(var r=Array.isArray(t)?le.sortBatchCommands(t):[t],o=r.length-1;o>=0;o-=1){var s=r[o],a=A(A({},e),kl(s.options,this.options.revertOptionsList||[]));this.executeCommand(s,!0,a)}this.freezed=!1},n.prototype.applyCommand=function(t,e){this.freezed=!0;for(var r=Array.isArray(t)?le.sortBatchCommands(t):[t],o=0;o<r.length;o+=1){var s=r[o],a=A(A({},e),kl(s.options,this.options.applyOptionsList||[]));this.executeCommand(s,!1,a)}this.freezed=!1},n.prototype.executeCommand=function(t,e,r){var o=this.model,s=o.getCell(t.data.id),a=t.event;if(le.isAddEvent(a)&&e||le.isRemoveEvent(a)&&!e)s&&s.remove(r);else if(le.isAddEvent(a)&&!e||le.isRemoveEvent(a)&&e)(l=t.data).node?o.addNode(l.props,r):l.edge&&o.addEdge(l.props,r);else if(le.isChangeEvent(a)){var l,u=(l=t.data).key;if(u&&s){var h=e?l.prev[u]:l.next[u];s.prop(u,h,r)}}else{var d=this.options.executeCommand;d&&dt(d,this,t,e,r)}},n.prototype.addCommand=function(t,e){if(!this.freezed&&!this.disabled){var r=e,o=r.options||{};if(!o.dryrun&&!(le.isAddEvent(t)&&this.options.ignoreAdd||le.isRemoveEvent(t)&&this.options.ignoreRemove||le.isChangeEvent(t)&&this.options.ignoreChange)){var s=this.options.beforeAddCommand;if(s==null||dt(s,this,t,e)!==!1){t==="cell:change:*"&&(t="cell:change:"+r.key);var a,l=r.cell,u=c.Model.isModel(l);if(this.batchCommands){a=this.batchCommands[Math.max(this.lastBatchIndex,0)];var h=u&&!a.modelChange||a.data.id!==l.id,d=a.event!==t;if(this.lastBatchIndex>=0&&(h||d)){var f=this.batchCommands.findIndex(function(P){return(u&&P.modelChange||P.data.id===l.id)&&P.event===t});f<0||le.isAddEvent(t)||le.isRemoveEvent(t)?a=this.createCommand({batch:!0}):(a=this.batchCommands[f],this.batchCommands.splice(f,1)),this.batchCommands.push(a),this.lastBatchIndex=this.batchCommands.length-1}}else a=this.createCommand({batch:!1});if(le.isAddEvent(t)||le.isRemoveEvent(t)){var v=a.data;return a.event=t,a.options=o,v.id=l.id,v.props=se(l.toJSON()),l.isEdge()?v.edge=!0:l.isNode()&&(v.node=!0),this.push(a,o)}if(le.isChangeEvent(t)){var b=e.key;return v=a.data,a.batch&&a.event||(a.event=t,a.options=o,v.key=b,v.prev==null&&(v.prev={}),v.prev[b]=fo(l.previous(b)),u?a.modelChange=!0:v.id=l.id),v.next==null&&(v.next={}),v.next[b]=fo(l.prop(b)),this.push(a,o)}var w=this.options.afterAddCommand;w&&dt(w,this,t,e,a),this.push(a,o)}}}},n.prototype.initBatchCommand=function(t){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))},n.prototype.storeBatchCommand=function(t){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){var e=this.filterBatchCommand(this.batchCommands);e.length>0&&(this.redoStack=[],this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)},n.prototype.filterBatchCommand=function(t){for(var e=t.slice(),r=[],o=function(){var s=e.shift(),a=s.event,l=s.data.id;if(a!=null&&(l!=null||s.modelChange)){if(le.isAddEvent(a)){var u=e.findIndex(function(f){return le.isRemoveEvent(f.event)&&f.data.id===l});if(u>=0)return e=e.filter(function(f,v){return u<v||f.data.id!==l}),"continue"}else if(le.isRemoveEvent(a)){var h=e.findIndex(function(f){return le.isAddEvent(f.event)&&f.data.id===l});if(h>=0)return e.splice(h,1),"continue"}else if(le.isChangeEvent(a)){var d=s.data;if(Cn(d.prev,d.next))return"continue"}r.push(s)}};e.length>0;)o();return r},n.prototype.notify=function(t,e,r){var o=e==null?null:Array.isArray(e)?e:[e];this.emit(t,{cmds:o,options:r}),this.emit("change",{cmds:o,options:r})},n.prototype.push=function(t,e){this.redoStack=[],t.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:t,options:e})):(this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e))},n.prototype.consolidateCommands=function(){var t,e=this.undoStack[this.undoStack.length-1],r=this.undoStack[this.undoStack.length-2];if(Array.isArray(e)){var o=new Set(e.map(function(a){return a.event}));if(o.size===2&&o.has("cell:change:parent")&&o.has("cell:change:children")&&e.every(function(a){var l;return a.batch&&((l=a.options)===null||l===void 0?void 0:l.ui)})&&Array.isArray(r)&&r.length===1){var s=r[0];s.event==="cell:change:position"&&((t=s.options)===null||t===void 0?void 0:t.ui)&&(r.push.apply(r,e),this.undoStack.pop())}}},_([c.Basecoat.dispose()],n.prototype,"dispose",null),n}(c.Basecoat);(function(i){var n=function(t){function e(r){var o=t.call(this)||this;return o.map={},o.command=r.history,o.cancelInvalid=r.cancelInvalid!==!1,o.command.on("add",o.onCommandAdded,o),o}return B(e,t),e.prototype.onCommandAdded=function(r){var o=this,s=r.cmds;return Array.isArray(s)?s.every(function(a){return o.isValidCommand(a)}):this.isValidCommand(s)},e.prototype.isValidCommand=function(r){if(r.options&&r.options.validation===!1)return!0;var o=r.event&&this.map[r.event]||[],s=null;return o.forEach(function(a){var l=0,u=function(h){var d=a[l];l+=1;try{if(!d)return void(s=h);d(h,r,u)}catch(f){u(f)}};u(s)}),!s||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:s}),!1)},e.prototype.validate=function(r){for(var o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=Array.isArray(r)?r:r.split(/\s+/);return s.forEach(function(u){if(typeof u!="function")throw new Error(l.join(" ")+" requires callback functions.")}),l.forEach(function(u){o.map[u]==null&&(o.map[u]=[]),o.map[u].push(s)}),this},e.prototype.dispose=function(){this.command.off("add",this.onCommandAdded,this)},_([c.Basecoat.dispose()],e.prototype,"dispose",null),e}(c.Basecoat);i.Validator=n})(ba||(ba={})),function(i){i.isAddEvent=function(n){return n==="cell:added"},i.isRemoveEvent=function(n){return n==="cell:removed"},i.isChangeEvent=function(n){return n!=null&&n.startsWith("cell:change:")},i.getOptions=function(n){n.graph;var t=z(n,["graph"]),e=["cell:added","cell:removed","cell:change:*"],r=["batch:start","batch:stop"],o=n.eventNames?n.eventNames.filter(function(s){return!(i.isChangeEvent(s)||e.includes(s)||r.includes(s))}):e;return A(A({},t),{eventNames:o,applyOptionsList:n.applyOptionsList||["propertyPath"],revertOptionsList:n.revertOptionsList||["propertyPath"]})},i.sortBatchCommands=function(n){for(var t=[],e=0,r=n.length;e<r;e+=1){var o=n[e],s=null;if(i.isAddEvent(o.event)){for(var a=o.data.id,l=0;l<e;l+=1)if(n[l].data.id===a){s=l;break}}s!==null?t.splice(s,0,o):t.push(o)}return t}}(le||(le={}));var Wf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"widgetOptions",{get:function(){return this.options.minimap},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.widget=this.graph.hook.createMiniMap()},n.prototype.dispose=function(){this.widget&&this.widget.dispose()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),Xf={exports:{}};(function(i){(function(n,t,e){if(n){for(var r,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)o[111+u]="f"+u;for(u=0;u<=9;++u)o[u+96]=u.toString();P.prototype.bind=function(x,S,D){var N=this;return x=x instanceof Array?x:[x],N._bindMultiple.call(N,x,S,D),N},P.prototype.unbind=function(x,S){return this.bind.call(this,x,function(){},S)},P.prototype.trigger=function(x,S){var D=this;return D._directMap[x+":"+S]&&D._directMap[x+":"+S]({},x),D},P.prototype.reset=function(){var x=this;return x._callbacks={},x._directMap={},x},P.prototype.stopCallback=function(x,S){if((" "+S.className+" ").indexOf(" mousetrap ")>-1||w(S,this.target))return!1;if("composedPath"in x&&typeof x.composedPath=="function"){var D=x.composedPath()[0];D!==x.target&&(S=D)}return S.tagName=="INPUT"||S.tagName=="SELECT"||S.tagName=="TEXTAREA"||S.isContentEditable},P.prototype.handleKey=function(){var x=this;return x._handleKey.apply(x,arguments)},P.addKeycodes=function(x){for(var S in x)x.hasOwnProperty(S)&&(o[S]=x[S]);r=null},P.init=function(){var x=P(t);for(var S in x)S.charAt(0)!=="_"&&(P[S]=function(D){return function(){return x[D].apply(x,arguments)}}(S))},P.init(),n.Mousetrap=P,i.exports&&(i.exports=P)}function h(x,S,D){x.addEventListener?x.addEventListener(S,D,!1):x.attachEvent("on"+S,D)}function d(x){if(x.type=="keypress"){var S=String.fromCharCode(x.which);return x.shiftKey||(S=S.toLowerCase()),S}return o[x.which]?o[x.which]:s[x.which]?s[x.which]:String.fromCharCode(x.which).toLowerCase()}function f(x){return x=="shift"||x=="ctrl"||x=="alt"||x=="meta"}function v(x,S,D){return D||(D=function(){if(!r)for(var N in r={},o)N>95&&N<112||o.hasOwnProperty(N)&&(r[o[N]]=N);return r}()[x]?"keydown":"keypress"),D=="keypress"&&S.length&&(D="keydown"),D}function b(x,S){var D,N,V,y=[];for(D=function(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus")).split("+")}(x),V=0;V<D.length;++V)N=D[V],l[N]&&(N=l[N]),S&&S!="keypress"&&a[N]&&(N=a[N],y.push("shift")),f(N)&&y.push(N);return{key:N,modifiers:y,action:S=v(N,y,S)}}function w(x,S){return x!==null&&x!==t&&(x===S||w(x.parentNode,S))}function P(x){var S=this;if(x=x||t,!(S instanceof P))return new P(x);S.target=x,S._callbacks={},S._directMap={};var D,N={},V=!1,y=!1,H=!1;function I(et){et=et||{};var lt,ht=!1;for(lt in N)et[lt]?ht=!0:N[lt]=0;ht||(H=!1)}function X(et,lt,ht,at,gt,yt){var ft,Et,Ft,re,Qt=[],zt=ht.type;if(!S._callbacks[et])return[];for(zt=="keyup"&&f(et)&&(lt=[et]),ft=0;ft<S._callbacks[et].length;++ft)if(Et=S._callbacks[et][ft],(at||!Et.seq||N[Et.seq]==Et.level)&&zt==Et.action&&(zt=="keypress"&&!ht.metaKey&&!ht.ctrlKey||(Ft=lt,re=Et.modifiers,Ft.sort().join(",")===re.sort().join(",")))){var Xt=!at&&Et.combo==gt,Bt=at&&Et.seq==at&&Et.level==yt;(Xt||Bt)&&S._callbacks[et].splice(ft,1),Qt.push(Et)}return Qt}function J(et,lt,ht,at){S.stopCallback(lt,lt.target||lt.srcElement,ht,at)||et(lt,ht)===!1&&(function(gt){gt.preventDefault?gt.preventDefault():gt.returnValue=!1}(lt),function(gt){gt.stopPropagation?gt.stopPropagation():gt.cancelBubble=!0}(lt))}function Z(et){typeof et.which!="number"&&(et.which=et.keyCode);var lt=d(et);lt&&(et.type!="keyup"||V!==lt?S.handleKey(lt,function(ht){var at=[];return ht.shiftKey&&at.push("shift"),ht.altKey&&at.push("alt"),ht.ctrlKey&&at.push("ctrl"),ht.metaKey&&at.push("meta"),at}(et),et):V=!1)}function it(et,lt,ht,at){function gt(Ft){return function(){H=Ft,++N[et],clearTimeout(D),D=setTimeout(I,1e3)}}function yt(Ft){J(ht,Ft,et),at!=="keyup"&&(V=d(Ft)),setTimeout(I,10)}N[et]=0;for(var ft=0;ft<lt.length;++ft){var Et=ft+1===lt.length?yt:gt(at||b(lt[ft+1]).action);ct(lt[ft],Et,at,et,ft)}}function ct(et,lt,ht,at,gt){S._directMap[et+":"+ht]=lt;var yt,ft=(et=et.replace(/\s+/g," ")).split(" ");ft.length>1?it(et,ft,lt,ht):(yt=b(et,ht),S._callbacks[yt.key]=S._callbacks[yt.key]||[],X(yt.key,yt.modifiers,{type:yt.action},at,et,gt),S._callbacks[yt.key][at?"unshift":"push"]({callback:lt,modifiers:yt.modifiers,action:yt.action,seq:at,level:gt,combo:et}))}S._handleKey=function(et,lt,ht){var at,gt=X(et,lt,ht),yt={},ft=0,Et=!1;for(at=0;at<gt.length;++at)gt[at].seq&&(ft=Math.max(ft,gt[at].level));for(at=0;at<gt.length;++at)if(gt[at].seq){if(gt[at].level!=ft)continue;Et=!0,yt[gt[at].seq]=1,J(gt[at].callback,ht,gt[at].combo,gt[at].seq)}else Et||J(gt[at].callback,ht,gt[at].combo);var Ft=ht.type=="keypress"&&y;ht.type!=H||f(et)||Ft||I(yt),y=Et&&ht.type=="keydown"},S._bindMultiple=function(et,lt,ht){for(var at=0;at<et.length;++at)ct(et[at],lt,ht)},h(x,"keypress",Z),h(x,"keydown",Z),h(x,"keyup",Z)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Xf);var G1=Xf.exports,Ca=function(i){function n(t){var e=i.call(this)||this;e.options=t;var r=e.graph.scroller.widget;return e.container=r?r.container:e.graph.container,t.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mouseup",e.focus,e),e.graph.on("blank:mouseup",e.focus,e)),e.mousetrap=n.createMousetrap(e),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.options.enabled!==!0},enumerable:!1,configurable:!0}),n.prototype.enable=function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))},n.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},n.prototype.on=function(t,e,r){this.mousetrap.bind(this.getKeys(t),e,r)},n.prototype.off=function(t,e){this.mousetrap.unbind(this.getKeys(t),e)},n.prototype.focus=function(t){this.isInputEvent(t.e)||this.target.focus({preventScroll:!0})},n.prototype.getKeys=function(t){var e=this;return(Array.isArray(t)?t:[t]).map(function(r){return e.formatkey(r)})},n.prototype.formatkey=function(t){var e=t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),r=this.options.format;return r?dt(r,this.graph,e):e},n.prototype.isGraphEvent=function(t){var e=t.srcElement||t.target,r=t.currentTarget;return!!e&&(e===this.target||r===this.target||e===document.body||Ns(this.container,e))},n.prototype.isInputEvent=function(t){var e,r=t.target,o=(e=r==null?void 0:r.tagName)===null||e===void 0?void 0:e.toLowerCase();return["input","textarea"].includes(o)},n.prototype.isEnabledForEvent=function(t){var e=!this.disabled&&this.isGraphEvent(t),r=this.isInputEvent(t);if(e){var o=t.keyCode||t.which;if(r&&(o===8||o===46))return!1;if(this.options.guard)return dt(this.options.guard,this.graph,t)}return e},n.prototype.dispose=function(){this.mousetrap.reset()},_([c.Disposable.dispose()],n.prototype,"dispose",null),n}(c.Disposable);(function(i){i.createMousetrap=function(n){var t=new G1(n.target),e=t.stopCallback;return t.stopCallback=function(r,o,s){return!n.isEnabledForEvent(r)||!!e&&e.call(t,r,o,s)},t}})(Ca||(Ca={}));var Yf=function(i){function n(t){var e=i.call(this)||this;e.options=t,e.cumulatedFactor=1;var r=e.graph.scroller.widget;return e.container=r?r.container:e.graph.container,e.target=e.options.global?document:e.container,e.mousewheelHandle=new cu(e.target,e.onMouseWheel.bind(e),e.allowMouseWheel.bind(e)),e.options.enabled&&e.enable(!0),e}return B(n,i),Object.defineProperty(n.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.options.enabled!==!0},enumerable:!1,configurable:!0}),n.prototype.enable=function(t){(this.disabled||t)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())},n.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())},n.prototype.allowMouseWheel=function(t){var e=t.originalEvent||t,r=this.options.guard;return(r==null||r.call(this.graph,e))&&wr.isMatch(e,this.options.modifiers)},n.prototype.onMouseWheel=function(t){var e=t.originalEvent||t,r=this.options.guard;if((r==null||r.call(this.graph,e))&&wr.isMatch(e,this.options.modifiers)){var o=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*o*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/o)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var s=this.graph.scroller.widget,a=this.currentScale,l=this.graph.transform.clampScale(a*this.cumulatedFactor);if((l=Re(l,this.options.minScale||Number.MIN_SAFE_INTEGER,this.options.maxScale||Number.MAX_SAFE_INTEGER))!==a)if(s)if(this.options.zoomAtMousePosition){var u=this.graph.coord.clientToLocalPoint(this.startPos);s.zoom(l,{absolute:!0,center:u.clone()})}else s.zoom(l,{absolute:!0});else if(this.options.zoomAtMousePosition){var h=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(l,{absolute:!0,center:h.clone(),ui:!0})}else this.graph.transform.zoom(l,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}},n.prototype.dispose=function(){this.disable()},_([c.Disposable.dispose()],n.prototype,"dispose",null),n}(c.Disposable),wa=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.show=function(t){var e=this;t===void 0&&(t={});var r=A(A({},n.defaultOptions),t),o=this.createPrintPages(r);r.ready(o,function(s){return e.showPrintWindow(s,r)},{sheetSize:this.getSheetSize(r)})},Object.defineProperty(n.prototype,"className",{get:function(){return this.view.prefixClassName("graph-print")},enumerable:!1,configurable:!0}),n.prototype.showPrintWindow=function(t,e){var r=this;if(t){var o=Ct(document.body),s=Ct(this.view.container),a=this.view.prefixClassName("graph-printing");o.addClass(a);var l=s.children().detach();t.forEach(function(d){d.removeClass(r.className+"-preview").addClass(r.className+"-ready").appendTo(o)});var u=!1,h=function(){u||(u=!0,o.removeClass(a),t.forEach(function(d){return d.remove()}),s.append(l),Ct("#"+r.styleSheetId).remove(),r.graph.trigger("after:print",e),Ct(window).off("afterprint",h))};Ct(window).one("afterprint",h),setTimeout(h,200),window.print()}},n.prototype.createPrintPage=function(t,e){this.graph.trigger("before:print",e);var r=Ct("<div/>").addClass(this.className),o=Ct("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");e.size&&r.addClass(this.className+"-size-"+e.size);var s=c.Vector.create(this.view.svg).clone(),a=s.findOne("."+this.view.prefixClassName("graph-svg-stage"));o.append(s.node);var l=this.getSheetSize(e),u=this.graph.transform.getGraphArea(),h=this.graph.transform.getScale(),d=this.graph.translate(),f=ve().translate(d.tx/h.sx,d.ty/h.sy),v=this.getPageInfo(u,t,l),b=v.scale,w=v.bbox;return o.css({left:0,top:0}),s.attr({width:w.width*b,height:w.height*b,style:"position:relative",viewBox:[w.x,w.y,w.width,w.height].join(" ")}),a.attr("transform",pr(f)),r.append(o),r.addClass(this.className+"-preview"),{$page:r,sheetSize:l}},n.prototype.createPrintPages=function(t){var e,r=this,o=this.getPrintArea(t),s=[];if(t.page){var a=this.getPageSize(o,t.page);this.getPageAreas(o,a).forEach(function(u){e=r.createPrintPage(u,t),s.push(e.$page)})}else e=this.createPrintPage(o,t),s.push(e.$page);if(e){var l={width:e.sheetSize.cssWidth,height:e.sheetSize.cssHeight};this.updatePrintStyle(l,t)}return s},Object.defineProperty(n.prototype,"styleSheetId",{get:function(){return this.view.prefixClassName("graph-print-style")},enumerable:!1,configurable:!0}),n.prototype.updatePrintStyle=function(t,e){var r=Object.keys(t).reduce(function(d,f){return d+" "+f+":"+t[f]+";"},""),o=$e(e.margin),s=e.marginUnit||"",a=e.sheetUnit||"",l=`
      @media print {
        .`+this.className+"."+this.className+`-ready {
          `+r+`
        }

        @page {
          margin:
          `+[o.top+s,o.right+s,o.bottom+s,o.left+s].join(" ")+`;
          size: `+(e.sheet.width+a)+" "+(e.sheet.height+a)+`;

        .`+this.className+"."+this.className+`-preview {
          `+r+`
        }
      }`,u=this.styleSheetId,h=Ct("#"+u);h.length?h.html(l):Ct("head").append(`'<style type="text/css" id="`+u+'">'+l+"</style>'")},n.prototype.getPrintArea=function(t){var e=t.area;if(!e){var r=$e(t.padding);e=this.graph.getContentArea().moveAndExpand({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom})}return e},n.prototype.getPageSize=function(t,e){if(typeof e=="object"){var r=e,o={width:r.width,height:r.height};return o.width==null&&(o.width=Math.ceil(t.width/(r.columns||1))),o.height==null&&(o.height=Math.ceil(t.height/(r.rows||1))),o}return{width:t.width,height:t.height}},n.prototype.getPageAreas=function(t,e){for(var r=[],o=e.width,s=e.height,a=0,l=0;a<t.height&&l<200;a+=s,l+=1)for(var u=0,h=0;u<t.width&&h<200;u+=o,h+=1)r.push(new c.Rectangle(t.x+u,t.y+a,o,s));return r},n.prototype.getSheetSize=function(t){var e=t.sheet,r=$e(t.margin),o=t.marginUnit||"",s=t.sheetUnit||"",a="calc("+e.width+s+" - "+(r.left+r.right)+o+")",l="calc("+e.height+s+" - "+(r.top+r.bottom)+o+")",u=c.Unit.measure(a,l);return{cssWidth:a,cssHeight:l,width:u.width,height:u.height}},n.prototype.getPageInfo=function(t,e,r){var o=new c.Rectangle(e.x-t.x,e.y-t.y,e.width,e.height),s=o.width/o.height,a=r.width/r.height;return{bbox:o,scale:a<s?r.width/o.width:r.height/o.height,fitHorizontal:a<s}},n.prototype.dispose=function(){},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut);(function(i){i.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(n,t){return t(n)}}})(wa||(wa={}));var Lt,Jf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.toSVG=function(t,e){var r=this;e===void 0&&(e={}),this.graph.trigger("before:export",e);var o=this.view.svg,s=c.Vector.create(o).clone(),a=s.node,l=s.findOne("."+this.view.prefixClassName("graph-svg-stage")),u=e.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),h=e.preserveDimensions;if(h){var d=typeof h=="boolean"?u:h;s.attr({width:d.width,height:d.height})}if(s.removeAttribute("style").attr("viewBox",[u.x,u.y,u.width,u.height].join(" ")),l.removeAttribute("transform"),e.copyStyles!==!1){for(var f=o.ownerDocument,v=Array.from(o.querySelectorAll("*")),b=Array.from(a.querySelectorAll("*")),w=f.styleSheets.length,P=[],x=w-1;x>=0;x-=1)P[x]=f.styleSheets[x],f.styleSheets[x].disabled=!0;var S={};v.forEach(function(X,J){var Z=window.getComputedStyle(X,null),it={};Object.keys(Z).forEach(function(ct){it[ct]=Z.getPropertyValue(ct)}),S[J]=it}),w!==f.styleSheets.length&&P.forEach(function(X,J){f.styleSheets[J]=X});for(var D=0;D<w;D+=1)f.styleSheets[D].disabled=!1;var N={};v.forEach(function(X,J){var Z=window.getComputedStyle(X,null),it=S[J],ct={};Object.keys(Z).forEach(function(et){Nl(et)||Z.getPropertyValue(et)===it[et]||(ct[et]=Z.getPropertyValue(et))}),N[J]=ct}),b.forEach(function(X,J){Ct(X).css(N[J])})}var V=e.stylesheet;if(typeof V=="string"){var y=o.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(V);s.prepend(c.Vector.create("style",{type:"text/css"},[y]))}var H=function(){var X=e.beforeSerialize;if(typeof X=="function"){var J=dt(X,r.graph,a);J instanceof SVGSVGElement&&(a=J)}var Z=new XMLSerializer().serializeToString(a).replace(/&nbsp;/g,"\xA0");r.graph.trigger("after:export",e),t(Z)};if(e.serializeImages){var I=s.find("image").map(function(X){return new Promise(function(J){var Z=X.attr("xlink:href")||X.attr("href");c.DataUri.imageToDataUri(Z,function(it,ct){!it&&ct&&X.attr("xlink:href",ct),J()})})});Promise.all(I).then(H)}else H()},n.prototype.toDataURL=function(t,e){var r=e.viewBox||this.graph.getContentBBox(),o=$e(e.padding);e.width&&e.height&&(o.left+o.right>=e.width&&(o.left=o.right=0),o.top+o.bottom>=e.height&&(o.top=o.bottom=0));var s=new c.Rectangle(-o.left,-o.top,o.left+o.right,o.top+o.bottom);if(e.width&&e.height){var a=r.width+o.left+o.right,l=r.height+o.top+o.bottom;s.scale(a/e.width,l/e.height)}r=c.Rectangle.create(r).moveAndExpand(s);var u=typeof e.width=="number"&&typeof e.height=="number"?{width:e.width,height:e.height}:r,h=e.ratio?parseFloat(e.ratio):1;Number.isFinite(h)&&h!==0||(h=1);var d={width:Math.max(Math.round(u.width*h),1),height:Math.max(Math.round(u.height*h),1)},f=document.createElement("canvas"),v=f.getContext("2d");f.width=d.width,f.height=d.height;var b=d.width-1,w=d.height-1;v.fillStyle="rgb(1,1,1)",v.fillRect(b,w,1,1);var P=v.getImageData(b,w,1,1).data;if(P[0]!==1||P[1]!==1||P[2]!==1)throw new Error("size exceeded");var x=new Image;x.onload=function(){var S=document.createElement("canvas");S.width=d.width,S.height=d.height;var D=S.getContext("2d");D.fillStyle=e.backgroundColor||"white",D.fillRect(0,0,d.width,d.height);try{D.drawImage(x,0,0,d.width,d.height);var N=S.toDataURL(e.type,e.quality);t(N)}catch{}},this.toSVG(function(S){x.src="data:image/svg+xml,"+encodeURIComponent(S)},A(A({},e),{viewBox:r,serializeImages:!0,preserveDimensions:A({},d)}))},n.prototype.toPNG=function(t,e){e===void 0&&(e={}),this.toDataURL(t,A(A({},e),{type:"image/png"}))},n.prototype.toJPEG=function(t,e){e===void 0&&(e={}),this.toDataURL(t,A(A({},e),{type:"image/jpeg"}))},n}(Ut),H1=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.widgets=new Map,t}return B(n,i),Object.defineProperty(n.prototype,"isSelectionEnabled",{get:function(){return this.options.selecting.enabled===!0},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.startListening()},n.prototype.startListening=function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)},n.prototype.stopListening=function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)},n.prototype.onNodeMouseUp=function(t){var e=t.node;if(!this.isSelectionEnabled){var r=this.graph.hook.createKnob(e,{clearAll:!0});r&&this.widgets.set(e,r)}},n.prototype.onNodeSelected=function(t){var e=t.node;if(this.isSelectionEnabled){var r=this.graph.hook.createKnob(e,{clearAll:!1});r&&this.widgets.set(e,r)}},n.prototype.onNodeUnSelected=function(t){var e=t.node;if(this.isSelectionEnabled){var r=this.widgets.get(e);r&&r.forEach(function(o){return o.dispose()}),this.widgets.delete(e)}},n}(Ut),U1=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"widgetOptions",{get:function(){return this.options.panning},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pannable",{get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.startListening(),this.updateClassName()},n.prototype.startListening=function(){var t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),t.includes("mouseWheel")&&(this.mousewheelHandle=new cu(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))},n.prototype.stopListening=function(){var t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),t.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())},n.prototype.preparePanning=function(t){var e=t.e;(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)},n.prototype.allowPanning=function(t,e){return this.pannable&&wr.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowPanning(t)},n.prototype.startPanning=function(t){var e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))},n.prototype.pan=function(t){var e=this.view.normalizeEvent(t),r=e.clientX-this.clientX,o=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY;var s=this.graph.transform.getTranslation(),a=s.tx+r,l=s.ty+o;this.graph.transform.translate(a,l,{ui:!0})},n.prototype.stopPanning=function(t){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")},n.prototype.updateClassName=function(){var t=this.view.container,e=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(Rt(t,e),tn(t,r)):(tn(t,e),Rt(t,r)):(tn(t,e),tn(t,r))},n.prototype.onRightMouseDown=function(t){t.button===2&&this.allowPanning(t,!0)&&this.startPanning(t)},n.prototype.allowMouseWheel=function(t){return this.pannable&&!t.ctrlKey},n.prototype.onMouseWheel=function(t,e,r){t.ctrlKey||this.graph.translateBy(-e,-r)},n.prototype.autoPanning=function(t,e){var r=10,o=this.graph.getGraphArea(),s=0,a=0;t<=o.left+r&&(s=-10),e<=o.top+r&&(a=-10),t>=o.right-r&&(s=r),e>=o.bottom-r&&(a=r),s===0&&a===0||this.graph.translateBy(-s,-a)},n.prototype.enablePanning=function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())},n.prototype.disablePanning=function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())},n.prototype.dispose=function(){this.stopListening()},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut),q1=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.hasScroller=function(){return this.graph.scroller.widget!=null},n.prototype.getContainer=function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container},n.prototype.init=function(){var t=this,e=this.options.autoResize;if(e){var r=typeof e=="boolean"?this.getContainer():e;c.SizeSensor.bind(r,function(){var o=t.getContainer(),s=o.offsetWidth,a=o.offsetHeight;t.resize(s,a)})}},n.prototype.resize=function(t,e){this.hasScroller()?this.resizeScroller(t,e):this.resizeGraph(t,e)},n.prototype.resizeGraph=function(t,e){this.graph.transform.resize(t,e)},n.prototype.resizeScroller=function(t,e){this.graph.scroller.resize(t,e)},n.prototype.resizePage=function(t,e){var r=this.graph.scroller.widget;r&&r.updatePageSize(t,e)},n.prototype.dispose=function(){c.SizeSensor.clear(this.getContainer())},_([Ut.dispose()],n.prototype,"dispose",null),n}(Ut);(function(i){i.hook=function(n,t){return function(e,r,o){var s=o.value,a=t||r;o.value=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var h=this.options[a];if(h!=null){this.getNativeValue=s.bind.apply(s,W([this],l,!1));var d=dt.apply(Rl,W([h,this.graph],l,!1));if(this.getNativeValue=null,d!=null||n===!0&&d===null)return d}return s.call.apply(s,W([this],l,!1))}}},i.after=function(n){return function(t,e,r){var o=r.value,s=n||e;r.value=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=o.call.apply(o,W([this],a,!1)),h=this.options[s];return h!=null&&(u=dt.apply(Rl,W([h,this.graph],a,!1))&&u),u}}}})(Lt||(Lt={}));var be,Zf=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),n.prototype.createModel=function(){if(this.options.model)return this.options.model;var t=new c.Model;return t.graph=this.graph,t},n.prototype.createView=function(){return new Wr(this.graph)},n.prototype.createRenderer=function(){return new No(this.graph)},n.prototype.createDefsManager=function(){return new Vf(this.graph)},n.prototype.createGridManager=function(){return new jf(this.graph)},n.prototype.createCoordManager=function(){return new If(this.graph)},n.prototype.createKnobManager=function(){return new H1(this.graph)},n.prototype.createTransform=function(t,e){var r=this.getTransformOptions(t);return r.resizable||r.rotatable?new Vu(A(A({node:t,graph:this.graph},r),e)):(r.clearAll&&Vu.removeInstances(this.graph),null)},n.prototype.createKnob=function(t,e){var r=this,o=Mn.parseOptionGroup(this.graph,t,this.options.knob),s=A(A({},o),e);s.clearAll&&Bu.removeInstances(this.graph),s.clearAll=!1;var a=t.prop("knob"),l=[];return(Array.isArray(a)?a:[a]).forEach(function(u,h){u&&u.enabled!==!1&&(typeof u.enabled=="function"&&u.enabled.call(r.graph,t)===!1||o.enabled&&l.push(new Bu(A({node:t,index:h,graph:r.graph},s))))}),l},n.prototype.getTransformOptions=function(t){var e=Mn.parseOptionGroup(this.graph,t,this.options.resizing),r=Mn.parseOptionGroup(this.graph,t,this.options.rotating),o=Mn.parseOptionGroup(this.graph,t,this.options.transforming);return A(A({},o),{resizable:e.enabled,minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight,orthogonalResizing:e.orthogonal,restrictedResizing:e.restrict!=null?e.restrict:e.restricted,autoScrollOnResizing:e.autoScroll,preserveAspectRatio:e.preserveAspectRatio,allowReverse:e.allowReverse,rotatable:r.enabled,rotateGrid:r.grid})},n.prototype.createTransformManager=function(){return new qf(this.graph)},n.prototype.createHighlightManager=function(){return new Uf(this.graph)},n.prototype.createBackgroundManager=function(){return new zu(this.graph)},n.prototype.createClipboard=function(){return new Kf},n.prototype.createClipboardManager=function(){return new Hf(this.graph)},n.prototype.createSnapline=function(){return new Rf(A({graph:this.graph},this.options.snapline))},n.prototype.createSnaplineManager=function(){return new _f(this.graph)},n.prototype.createSelection=function(){return new Ru(A({graph:this.graph},this.options.selecting))},n.prototype.createSelectionManager=function(){return new $f(this.graph)},n.prototype.allowRubberband=function(t){return!0},n.prototype.createHistoryManager=function(){return new ba(A({graph:this.graph},this.options.history))},n.prototype.createScroller=function(){return this.options.scroller.enabled?new ma(A({graph:this.graph},this.options.scroller)):null},n.prototype.createScrollerManager=function(){return new Gf(this.graph)},n.prototype.allowPanning=function(t){return!0},n.prototype.createMiniMap=function(){var t=this.options.minimap,e=t.enabled,r=z(t,["enabled"]);return e?new zf(A({graph:this.graph},r)):null},n.prototype.createMiniMapManager=function(){return new Wf(this.graph)},n.prototype.createKeyboard=function(){return new Ca(A({graph:this.graph},this.options.keyboard))},n.prototype.createMouseWheel=function(){return new Yf(A({graph:this.graph},this.options.mousewheel))},n.prototype.createPrintManager=function(){return new wa(this.graph)},n.prototype.createFormatManager=function(){return new Jf(this.graph)},n.prototype.createPanningManager=function(){return new U1(this.graph)},n.prototype.createSizeManager=function(){return new q1(this.graph)},n.prototype.allowConnectToBlank=function(t){var e=this.options.connecting,r=e.allowBlank!=null?e.allowBlank:e.dangling;if(typeof r!="function")return!!r;var o=this.graph.findViewByCell(t),s=t.getSourceCell(),a=t.getTargetCell(),l=this.graph.findViewByCell(s),u=this.graph.findViewByCell(a);return dt(r,this.graph,{edge:t,edgeView:o,sourceCell:s,targetCell:a,sourceView:l,targetView:u,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:o.sourceMagnet,targetMagnet:o.targetMagnet})},n.prototype.validateEdge=function(t,e,r){if(!this.allowConnectToBlank(t)){var o=t.getSourceCellId(),s=t.getTargetCellId();if(!o||!s)return!1}var a=this.options.connecting.validateEdge;return!a||dt(a,this.graph,{edge:t,type:e,previous:r})},n.prototype.validateMagnet=function(t,e,r){if(e.getAttribute("magnet")!=="passive"){var o=this.options.connecting.validateMagnet;return!o||dt(o,this.graph,{e:r,magnet:e,view:t,cell:t.cell})}return!1},n.prototype.getDefaultEdge=function(t,e){var r,o=this.options.connecting.createEdge;return o&&(r=dt(o,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),r==null&&(r=new Nu),r},n.prototype.validateConnection=function(t,e,r,o,s,a,l){var u=this,h=this.options.connecting,d=h.allowLoop,f=h.allowNode,v=h.allowEdge,b=h.allowPort,w=h.allowMulti!=null?h.allowMulti:h.multi,P=h.validateConnection,x=a?a.cell:null,S=s==="target"?r:t,D=s==="target"?o:e,N=!0,V=function(Z){var it=s==="source"?l?l.port:null:x?x.getSourcePortId():null,ct=s==="target"?l?l.port:null:x?x.getTargetPortId():null;return dt(Z,u.graph,{edge:x,edgeView:a,sourceView:t,targetView:r,sourcePort:it,targetPort:ct,sourceMagnet:e,targetMagnet:o,sourceCell:t?t.cell:null,targetCell:r?r.cell:null,type:s})};if(d!=null&&(typeof d=="boolean"?d||t!==r||(N=!1):N=V(d)),N&&b!=null&&(typeof b=="boolean"?!b&&D&&(N=!1):N=V(b)),N&&v!=null&&(typeof v=="boolean"?!v&&c.EdgeView.isEdgeView(S)&&(N=!1):N=V(v)),N&&f!=null&&D==null&&(typeof f=="boolean"?!f&&c.NodeView.isNodeView(S)&&(N=!1):N=V(f)),N&&w!=null&&a){var y=a.cell,H=s==="source"?l:y.getSource(),I=s==="target"?l:y.getTarget(),X=l?this.graph.getCellById(l.cell):null;if(H&&I&&H.cell&&I.cell&&X)if(typeof w=="function")N=V(w);else{var J=this.model.getConnectedEdges(X,{outgoing:s==="source",incoming:s==="target"});J.length&&(w==="withPort"?J.some(function(Z){var it=Z.getSource(),ct=Z.getTarget();return it&&ct&&it.cell===H.cell&&ct.cell===I.cell&&it.port!=null&&it.port===H.port&&ct.port!=null&&ct.port===I.port})&&(N=!1):w||J.some(function(Z){var it=Z.getSource(),ct=Z.getTarget();return it&&ct&&it.cell===H.cell&&ct.cell===I.cell})&&(N=!1))}}return N&&P!=null&&(N=V(P)),N},n.prototype.getRestrictArea=function(t){var e=this.options.translating.restrict,r=typeof e=="function"?dt(e,this.graph,t):e;return typeof r=="number"?this.graph.transform.getGraphArea().inflate(r):r===!0?this.graph.transform.getGraphArea():r||null},n.prototype.onViewUpdated=function(t,e,r){e&No.FLAG_INSERT||r.mounting||this.graph.renderer.requestConnectedEdgesUpdate(t,r)},n.prototype.onViewPostponed=function(t,e,r){return this.graph.renderer.forcePostponedViewUpdate(t,e)},n.prototype.getCellView=function(t){return null},n.prototype.createCellView=function(t){var e={graph:this.graph},r=this.getCellView(t);if(r)return new r(t,e);var o=t.view;if(o!=null&&typeof o=="string"){var s=c.CellView.registry.get(o);return s?new s(t,e):c.CellView.registry.onNotFound(o)}return t.isNode()?new c.NodeView(t,e):t.isEdge()?new c.EdgeView(t,e):null},n.prototype.getHTMLComponent=function(t){var e=t.getHTML();return typeof e=="string"&&(e=Pn.componentRegistry.get(e)||e),qe(e)&&(e=e.render),typeof e=="function"?dt(e,this.graph,t):e},n.prototype.shouldUpdateHTMLComponent=function(t){var e=t.getHTML();if(typeof e=="string"&&(e=Pn.componentRegistry.get(e)||e),qe(e)){var r=e.shouldComponentUpdate;return typeof r=="function"?dt(r,this.graph,t):!!r}return!1},n.prototype.onEdgeLabelRendered=function(t){},n.prototype.onPortRendered=function(t){},n.prototype.onToolItemCreated=function(t){},_([Lt.hook()],n.prototype,"createModel",null),_([Lt.hook()],n.prototype,"createView",null),_([Lt.hook()],n.prototype,"createRenderer",null),_([Lt.hook()],n.prototype,"createDefsManager",null),_([Lt.hook()],n.prototype,"createGridManager",null),_([Lt.hook()],n.prototype,"createCoordManager",null),_([Lt.hook()],n.prototype,"createKnobManager",null),_([Lt.hook()],n.prototype,"createTransform",null),_([Lt.hook()],n.prototype,"createKnob",null),_([Lt.hook()],n.prototype,"createTransformManager",null),_([Lt.hook()],n.prototype,"createHighlightManager",null),_([Lt.hook()],n.prototype,"createBackgroundManager",null),_([Lt.hook()],n.prototype,"createClipboard",null),_([Lt.hook()],n.prototype,"createClipboardManager",null),_([Lt.hook()],n.prototype,"createSnapline",null),_([Lt.hook()],n.prototype,"createSnaplineManager",null),_([Lt.hook()],n.prototype,"createSelection",null),_([Lt.hook()],n.prototype,"createSelectionManager",null),_([Lt.hook()],n.prototype,"allowRubberband",null),_([Lt.hook()],n.prototype,"createHistoryManager",null),_([Lt.hook()],n.prototype,"createScroller",null),_([Lt.hook()],n.prototype,"createScrollerManager",null),_([Lt.hook()],n.prototype,"allowPanning",null),_([Lt.hook()],n.prototype,"createMiniMap",null),_([Lt.hook()],n.prototype,"createMiniMapManager",null),_([Lt.hook()],n.prototype,"createKeyboard",null),_([Lt.hook()],n.prototype,"createMouseWheel",null),_([Lt.hook()],n.prototype,"createPrintManager",null),_([Lt.hook()],n.prototype,"createFormatManager",null),_([Lt.hook()],n.prototype,"createPanningManager",null),_([Lt.hook()],n.prototype,"createSizeManager",null),_([Lt.after()],n.prototype,"onViewUpdated",null),_([Lt.after()],n.prototype,"onViewPostponed",null),_([Lt.hook()],n.prototype,"getCellView",null),_([Lt.hook(!0)],n.prototype,"createCellView",null),_([Lt.hook()],n.prototype,"getHTMLComponent",null),_([Lt.hook()],n.prototype,"shouldUpdateHTMLComponent",null),_([Lt.hook()],n.prototype,"onEdgeLabelRendered",null),_([Lt.hook()],n.prototype,"onPortRendered",null),_([Lt.hook()],n.prototype,"onToolItemCreated",null),n}(Ut);c.Graph=function(i){function n(t){var e=i.call(this)||this;return e.options=Mn.get(t),e.css=new Lu(e),e.hook=new Zf(e),e.view=e.hook.createView(),e.defs=e.hook.createDefsManager(),e.coord=e.hook.createCoordManager(),e.transform=e.hook.createTransformManager(),e.knob=e.hook.createKnobManager(),e.highlight=e.hook.createHighlightManager(),e.grid=e.hook.createGridManager(),e.background=e.hook.createBackgroundManager(),e.model=e.hook.createModel(),e.renderer=e.hook.createRenderer(),e.clipboard=e.hook.createClipboardManager(),e.snapline=e.hook.createSnaplineManager(),e.selection=e.hook.createSelectionManager(),e.history=e.hook.createHistoryManager(),e.scroller=e.hook.createScrollerManager(),e.minimap=e.hook.createMiniMapManager(),e.keyboard=e.hook.createKeyboard(),e.mousewheel=e.hook.createMouseWheel(),e.print=e.hook.createPrintManager(),e.format=e.hook.createFormatManager(),e.panning=e.hook.createPanningManager(),e.size=e.hook.createSizeManager(),e}return B(n,i),Object.defineProperty(n.prototype,"container",{get:function(){return this.view.container},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.isNode=function(t){return t.isNode()},n.prototype.isEdge=function(t){return t.isEdge()},n.prototype.resetCells=function(t,e){return e===void 0&&(e={}),this.model.resetCells(t,e),this},n.prototype.clearCells=function(t){return t===void 0&&(t={}),this.model.clear(t),this},n.prototype.toJSON=function(t){return t===void 0&&(t={}),this.model.toJSON(t)},n.prototype.parseJSON=function(t){return this.model.parseJSON(t)},n.prototype.fromJSON=function(t,e){return e===void 0&&(e={}),this.model.fromJSON(t,e),this},n.prototype.getCellById=function(t){return this.model.getCell(t)},n.prototype.addNode=function(t,e){return e===void 0&&(e={}),this.model.addNode(t,e)},n.prototype.addNodes=function(t,e){var r=this;return e===void 0&&(e={}),this.addCell(t.map(function(o){return c.Node.isNode(o)?o:r.createNode(o)}),e)},n.prototype.createNode=function(t){return this.model.createNode(t)},n.prototype.removeNode=function(t,e){return e===void 0&&(e={}),this.model.removeCell(t,e)},n.prototype.addEdge=function(t,e){return e===void 0&&(e={}),this.model.addEdge(t,e)},n.prototype.addEdges=function(t,e){var r=this;return e===void 0&&(e={}),this.addCell(t.map(function(o){return c.Edge.isEdge(o)?o:r.createEdge(o)}),e)},n.prototype.removeEdge=function(t,e){return e===void 0&&(e={}),this.model.removeCell(t,e)},n.prototype.createEdge=function(t){return this.model.createEdge(t)},n.prototype.addCell=function(t,e){return e===void 0&&(e={}),this.model.addCell(t,e),this},n.prototype.removeCell=function(t,e){return e===void 0&&(e={}),this.model.removeCell(t,e)},n.prototype.removeCells=function(t,e){return e===void 0&&(e={}),this.model.removeCells(t,e)},n.prototype.removeConnectedEdges=function(t,e){return e===void 0&&(e={}),this.model.removeConnectedEdges(t,e)},n.prototype.disconnectConnectedEdges=function(t,e){return e===void 0&&(e={}),this.model.disconnectConnectedEdges(t,e),this},n.prototype.hasCell=function(t){return this.model.has(t)},n.prototype.getCell=function(t){return this.model.getCell(t)},n.prototype.getCells=function(){return this.model.getCells()},n.prototype.getCellCount=function(){return this.model.total()},n.prototype.getNodes=function(){return this.model.getNodes()},n.prototype.getEdges=function(){return this.model.getEdges()},n.prototype.getOutgoingEdges=function(t){return this.model.getOutgoingEdges(t)},n.prototype.getIncomingEdges=function(t){return this.model.getIncomingEdges(t)},n.prototype.getConnectedEdges=function(t,e){return e===void 0&&(e={}),this.model.getConnectedEdges(t,e)},n.prototype.getRootNodes=function(){return this.model.getRoots()},n.prototype.getLeafNodes=function(){return this.model.getLeafs()},n.prototype.isRootNode=function(t){return this.model.isRoot(t)},n.prototype.isLeafNode=function(t){return this.model.isLeaf(t)},n.prototype.getNeighbors=function(t,e){return e===void 0&&(e={}),this.model.getNeighbors(t,e)},n.prototype.isNeighbor=function(t,e,r){return r===void 0&&(r={}),this.model.isNeighbor(t,e,r)},n.prototype.getSuccessors=function(t,e){return e===void 0&&(e={}),this.model.getSuccessors(t,e)},n.prototype.isSuccessor=function(t,e,r){return r===void 0&&(r={}),this.model.isSuccessor(t,e,r)},n.prototype.getPredecessors=function(t,e){return e===void 0&&(e={}),this.model.getPredecessors(t,e)},n.prototype.isPredecessor=function(t,e,r){return r===void 0&&(r={}),this.model.isPredecessor(t,e,r)},n.prototype.getCommonAncestor=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.model).getCommonAncestor.apply(t,e)},n.prototype.getSubGraph=function(t,e){return e===void 0&&(e={}),this.model.getSubGraph(t,e)},n.prototype.cloneSubGraph=function(t,e){return e===void 0&&(e={}),this.model.cloneSubGraph(t,e)},n.prototype.cloneCells=function(t){return this.model.cloneCells(t)},n.prototype.getNodesFromPoint=function(t,e){return this.model.getNodesFromPoint(t,e)},n.prototype.getNodesInArea=function(t,e,r,o,s){return this.model.getNodesInArea(t,e,r,o,s)},n.prototype.getNodesUnderNode=function(t,e){return e===void 0&&(e={}),this.model.getNodesUnderNode(t,e)},n.prototype.searchCell=function(t,e,r){return r===void 0&&(r={}),this.model.search(t,e,r),this},n.prototype.getShortestPath=function(t,e,r){return r===void 0&&(r={}),this.model.getShortestPath(t,e,r)},n.prototype.getAllCellsBBox=function(){return this.model.getAllCellsBBox()},n.prototype.getCellsBBox=function(t,e){return e===void 0&&(e={}),this.model.getCellsBBox(t,e)},n.prototype.startBatch=function(t,e){e===void 0&&(e={}),this.model.startBatch(t,e)},n.prototype.stopBatch=function(t,e){e===void 0&&(e={}),this.model.stopBatch(t,e)},n.prototype.batchUpdate=function(t,e,r){var o=typeof t=="string"?t:"update",s=typeof t=="string"?e:t,a=typeof e=="function"?r:e;this.startBatch(o,a);var l=s();return this.stopBatch(o,a),l},n.prototype.updateCellId=function(t,e){return this.model.updateCellId(t,e)},n.prototype.isFrozen=function(){return this.renderer.isFrozen()},n.prototype.freeze=function(t){return t===void 0&&(t={}),this.renderer.freeze(t),this},n.prototype.unfreeze=function(t){return t===void 0&&(t={}),this.renderer.unfreeze(t),this},n.prototype.isAsync=function(){return this.renderer.isAsync()},n.prototype.setAsync=function(t){return this.renderer.setAsync(t),this},n.prototype.findView=function(t){return c.Cell.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)},n.prototype.findViews=function(t){return c.Rectangle.isRectangleLike(t)?this.findViewsInArea(t):c.Point.isPointLike(t)?this.findViewsFromPoint(t):[]},n.prototype.findViewByCell=function(t){return this.renderer.findViewByCell(t)},n.prototype.findViewByElem=function(t){return this.renderer.findViewByElem(t)},n.prototype.findViewsFromPoint=function(t,e){var r=typeof t=="number"?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(r)},n.prototype.findViewsInArea=function(t,e,r,o,s){var a=typeof t=="number"?{x:t,y:e,width:r,height:o}:t,l=typeof t=="number"?s:e;return this.renderer.findViewsInArea(a,l)},n.prototype.isViewMounted=function(t){return this.renderer.isViewMounted(t)},n.prototype.getMountedViews=function(){return this.renderer.getMountedViews()},n.prototype.getUnmountedViews=function(){return this.renderer.getUnmountedViews()},n.prototype.matrix=function(t){return t===void 0?this.transform.getMatrix():(this.transform.setMatrix(t),this)},n.prototype.resize=function(t,e){return this.size.resize(t,e),this},n.prototype.resizeGraph=function(t,e){return this.size.resizeGraph(t,e),this},n.prototype.resizeScroller=function(t,e){return this.size.resizeScroller(t,e),this},n.prototype.resizePage=function(t,e){return this.size.resizePage(t,e),this},n.prototype.scale=function(t,e,r,o){return e===void 0&&(e=t),r===void 0&&(r=0),o===void 0&&(o=0),t===void 0?this.transform.getScale():(this.transform.scale(t,e,r,o),this)},n.prototype.zoom=function(t,e){var r=this.scroller.widget;if(r){if(t===void 0)return r.zoom();r.zoom(t,e)}else{if(t===void 0)return this.transform.getZoom();this.transform.zoom(t,e)}return this},n.prototype.zoomTo=function(t,e){e===void 0&&(e={});var r=this.scroller.widget;return r?r.zoom(t,A(A({},e),{absolute:!0})):this.transform.zoom(t,A(A({},e),{absolute:!0})),this},n.prototype.zoomToRect=function(t,e){e===void 0&&(e={});var r=this.scroller.widget;return r?r.zoomToRect(t,e):this.transform.zoomToRect(t,e),this},n.prototype.zoomToFit=function(t){t===void 0&&(t={});var e=this.scroller.widget;return e?e.zoomToFit(t):this.transform.zoomToFit(t),this},n.prototype.rotate=function(t,e,r){return t===void 0?this.transform.getRotation():(this.transform.rotate(t,e,r),this)},n.prototype.translate=function(t,e){return t===void 0?this.transform.getTranslation():(this.transform.translate(t,e),this)},n.prototype.translateBy=function(t,e){var r=this.translate(),o=r.tx+t,s=r.ty+e;return this.translate(o,s)},n.prototype.getArea=function(){return this.transform.getGraphArea()},n.prototype.getGraphArea=function(){return this.transform.getGraphArea()},n.prototype.getContentArea=function(t){return t===void 0&&(t={}),this.transform.getContentArea(t)},n.prototype.getContentBBox=function(t){return t===void 0&&(t={}),this.transform.getContentBBox(t)},n.prototype.fitToContent=function(t,e,r,o){return this.transform.fitToContent(t,e,r,o)},n.prototype.scaleContentToFit=function(t){return t===void 0&&(t={}),this.transform.scaleContentToFit(t),this},n.prototype.center=function(t){return this.centerPoint(t)},n.prototype.centerPoint=function(t,e,r){var o=this.scroller.widget;return o?o.centerPoint(t,e,r):this.transform.centerPoint(t,e),this},n.prototype.centerContent=function(t){var e=this.scroller.widget;return e?e.centerContent(t):this.transform.centerContent(t),this},n.prototype.centerCell=function(t,e){var r=this.scroller.widget;return r?r.centerCell(t,e):this.transform.centerCell(t),this},n.prototype.positionPoint=function(t,e,r,o){o===void 0&&(o={});var s=this.scroller.widget;return s?s.positionPoint(t,e,r,o):this.transform.positionPoint(t,e,r),this},n.prototype.positionRect=function(t,e,r){var o=this.scroller.widget;return o?o.positionRect(t,e,r):this.transform.positionRect(t,e),this},n.prototype.positionCell=function(t,e,r){var o=this.scroller.widget;return o?o.positionCell(t,e,r):this.transform.positionCell(t,e),this},n.prototype.positionContent=function(t,e){var r=this.scroller.widget;return r?r.positionContent(t,e):this.transform.positionContent(t,e),this},n.prototype.getClientMatrix=function(){return this.coord.getClientMatrix()},n.prototype.getClientOffset=function(){return this.coord.getClientOffset()},n.prototype.getPageOffset=function(){return this.coord.getPageOffset()},n.prototype.snapToGrid=function(t,e){return this.coord.snapToGrid(t,e)},n.prototype.pageToLocal=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.pageToLocalRect(t,e,r,o):this.coord.pageToLocalPoint(t,e)},n.prototype.localToPage=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToPageRect(t,e,r,o):this.coord.localToPagePoint(t,e)},n.prototype.clientToLocal=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.clientToLocalRect(t,e,r,o):this.coord.clientToLocalPoint(t,e)},n.prototype.localToClient=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToClientRect(t,e,r,o):this.coord.localToClientPoint(t,e)},n.prototype.localToGraph=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToGraphRect(t,e,r,o):this.coord.localToGraphPoint(t,e)},n.prototype.graphToLocal=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.graphToLocalRect(t,e,r,o):this.coord.graphToLocalPoint(t,e)},n.prototype.clientToGraph=function(t,e,r,o){return c.Rectangle.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.clientToGraphRect(t,e,r,o):this.coord.clientToGraphPoint(t,e)},n.prototype.defineFilter=function(t){return this.defs.filter(t)},n.prototype.defineGradient=function(t){return this.defs.gradient(t)},n.prototype.defineMarker=function(t){return this.defs.marker(t)},n.prototype.getGridSize=function(){return this.grid.getGridSize()},n.prototype.setGridSize=function(t){return this.grid.setGridSize(t),this},n.prototype.showGrid=function(){return this.grid.show(),this},n.prototype.hideGrid=function(){return this.grid.hide(),this},n.prototype.clearGrid=function(){return this.grid.clear(),this},n.prototype.drawGrid=function(t){return this.grid.draw(t),this},n.prototype.updateBackground=function(){return this.background.update(),this},n.prototype.drawBackground=function(t,e){var r=this.scroller.widget;return r==null||this.options.background!=null&&e?this.background.draw(t):r.backgroundManager.draw(t),this},n.prototype.clearBackground=function(t){var e=this.scroller.widget;return e==null||this.options.background!=null&&t?this.background.clear():e.backgroundManager.clear(),this},n.prototype.isClipboardEnabled=function(){return!this.clipboard.disabled},n.prototype.enableClipboard=function(){return this.clipboard.enable(),this},n.prototype.disableClipboard=function(){return this.clipboard.disable(),this},n.prototype.toggleClipboard=function(t){return t!=null?t!==this.isClipboardEnabled()&&(t?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this},n.prototype.isClipboardEmpty=function(){return this.clipboard.isEmpty()},n.prototype.getCellsInClipboard=function(){return this.clipboard.cells},n.prototype.cleanClipboard=function(){return this.clipboard.clean(),this},n.prototype.copy=function(t,e){return e===void 0&&(e={}),this.clipboard.copy(t,e),this},n.prototype.cut=function(t,e){return e===void 0&&(e={}),this.clipboard.cut(t,e),this},n.prototype.paste=function(t,e){return t===void 0&&(t={}),e===void 0&&(e=this),this.clipboard.paste(t,e)},n.prototype.isHistoryEnabled=function(){return!this.history.disabled},n.prototype.enableHistory=function(){return this.history.enable(),this},n.prototype.disableHistory=function(){return this.history.disable(),this},n.prototype.toggleHistory=function(t){return t!=null?t!==this.isHistoryEnabled()&&(t?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this},n.prototype.undo=function(t){return t===void 0&&(t={}),this.history.undo(t),this},n.prototype.undoAndCancel=function(t){return t===void 0&&(t={}),this.history.cancel(t),this},n.prototype.redo=function(t){return t===void 0&&(t={}),this.history.redo(t),this},n.prototype.canUndo=function(){return this.history.canUndo()},n.prototype.canRedo=function(){return this.history.canRedo()},n.prototype.cleanHistory=function(t){t===void 0&&(t={}),this.history.clean(t)},n.prototype.isKeyboardEnabled=function(){return!this.keyboard.disabled},n.prototype.enableKeyboard=function(){return this.keyboard.enable(),this},n.prototype.disableKeyboard=function(){return this.keyboard.disable(),this},n.prototype.toggleKeyboard=function(t){return t!=null?t!==this.isKeyboardEnabled()&&(t?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this},n.prototype.bindKey=function(t,e,r){return this.keyboard.on(t,e,r),this},n.prototype.unbindKey=function(t,e){return this.keyboard.off(t,e),this},n.prototype.isMouseWheelEnabled=function(){return!this.mousewheel.disabled},n.prototype.enableMouseWheel=function(){return this.mousewheel.enable(),this},n.prototype.disableMouseWheel=function(){return this.mousewheel.disable(),this},n.prototype.toggleMouseWheel=function(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this},n.prototype.isPannable=function(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable},n.prototype.enablePanning=function(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this},n.prototype.disablePanning=function(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this},n.prototype.togglePanning=function(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this},n.prototype.lockScroller=function(){var t;(t=this.scroller.widget)===null||t===void 0||t.lock()},n.prototype.unlockScroller=function(){var t;(t=this.scroller.widget)===null||t===void 0||t.unlock()},n.prototype.updateScroller=function(){var t;(t=this.scroller.widget)===null||t===void 0||t.update()},n.prototype.getScrollbarPosition=function(){return this.scroller.widget.scrollbarPosition()},n.prototype.setScrollbarPosition=function(t,e,r){return this.scroller.widget.scrollbarPosition(t,e,r),this},n.prototype.scrollToPoint=function(t,e,r){return this.scroller.widget.scrollToPoint(t,e,r),this},n.prototype.scrollToContent=function(t){return this.scroller.widget.scrollToContent(t),this},n.prototype.scrollToCell=function(t,e){return this.scroller.widget.scrollToCell(t,e),this},n.prototype.transitionToPoint=function(t,e,r){return this.scroller.widget.transitionToPoint(t,e,r),this},n.prototype.transitionToRect=function(t,e){return e===void 0&&(e={}),this.scroller.widget.transitionToRect(t,e),this},n.prototype.isSelectionEnabled=function(){return!this.selection.disabled},n.prototype.enableSelection=function(){return this.selection.enable(),this},n.prototype.disableSelection=function(){return this.selection.disable(),this},n.prototype.toggleSelection=function(t){return t!=null?t!==this.isSelectionEnabled()&&(t?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this},n.prototype.isMultipleSelection=function(){return this.selection.isMultiple()},n.prototype.enableMultipleSelection=function(){return this.selection.enableMultiple(),this},n.prototype.disableMultipleSelection=function(){return this.selection.disableMultiple(),this},n.prototype.toggleMultipleSelection=function(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this},n.prototype.isSelectionMovable=function(){return this.selection.widget.options.movable!==!1},n.prototype.enableSelectionMovable=function(){return this.selection.widget.options.movable=!0,this},n.prototype.disableSelectionMovable=function(){return this.selection.widget.options.movable=!1,this},n.prototype.toggleSelectionMovable=function(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this},n.prototype.isRubberbandEnabled=function(){return!this.selection.rubberbandDisabled},n.prototype.enableRubberband=function(){return this.selection.enableRubberband(),this},n.prototype.disableRubberband=function(){return this.selection.disableRubberband(),this},n.prototype.toggleRubberband=function(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this},n.prototype.isStrictRubberband=function(){return this.selection.widget.options.strict===!0},n.prototype.enableStrictRubberband=function(){return this.selection.widget.options.strict=!0,this},n.prototype.disableStrictRubberband=function(){return this.selection.widget.options.strict=!1,this},n.prototype.toggleStrictRubberband=function(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this},n.prototype.setRubberbandModifiers=function(t){this.selection.setModifiers(t)},n.prototype.setSelectionFilter=function(t){return this.selection.setFilter(t),this},n.prototype.setSelectionDisplayContent=function(t){return this.selection.setContent(t),this},n.prototype.isSelectionEmpty=function(){return this.selection.isEmpty()},n.prototype.cleanSelection=function(t){return this.selection.clean(t),this},n.prototype.resetSelection=function(t,e){return this.selection.reset(t,e),this},n.prototype.getSelectedCells=function(){return this.selection.cells},n.prototype.getSelectedCellCount=function(){return this.selection.length},n.prototype.isSelected=function(t){return this.selection.isSelected(t)},n.prototype.select=function(t,e){return this.selection.select(t,e),this},n.prototype.unselect=function(t,e){return this.selection.unselect(t,e),this},n.prototype.isSnaplineEnabled=function(){return!this.snapline.widget.disabled},n.prototype.enableSnapline=function(){return this.snapline.widget.enable(),this},n.prototype.disableSnapline=function(){return this.snapline.widget.disable(),this},n.prototype.toggleSnapline=function(t){if(t==null)return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this;t!==this.isSnaplineEnabled()&&(t?this.enableSnapline():this.disableSnapline())},n.prototype.hideSnapline=function(){return this.snapline.widget.hide(),this},n.prototype.setSnaplineFilter=function(t){return this.snapline.widget.setFilter(t),this},n.prototype.isSnaplineOnResizingEnabled=function(){return this.snapline.widget.options.resizing===!0},n.prototype.enableSnaplineOnResizing=function(){return this.snapline.widget.options.resizing=!0,this},n.prototype.disableSnaplineOnResizing=function(){return this.snapline.widget.options.resizing=!1,this},n.prototype.toggleSnaplineOnResizing=function(t){return t!=null?t!==this.isSnaplineOnResizingEnabled()&&(t?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this},n.prototype.isSharpSnapline=function(){return this.snapline.widget.options.sharp===!0},n.prototype.enableSharpSnapline=function(){return this.snapline.widget.options.sharp=!0,this},n.prototype.disableSharpSnapline=function(){return this.snapline.widget.options.sharp=!1,this},n.prototype.toggleSharpSnapline=function(t){return t!=null?t!==this.isSharpSnapline()&&(t?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this},n.prototype.getSnaplineTolerance=function(){return this.snapline.widget.options.tolerance},n.prototype.setSnaplineTolerance=function(t){return this.snapline.widget.options.tolerance=t,this},n.prototype.removeTools=function(){return this.emit("tools:remove"),this},n.prototype.hideTools=function(){return this.emit("tools:hide"),this},n.prototype.showTools=function(){return this.emit("tools:show"),this},n.prototype.toSVG=function(t,e){e===void 0&&(e={}),this.format.toSVG(t,e)},n.prototype.toDataURL=function(t,e){this.format.toDataURL(t,e)},n.prototype.toPNG=function(t,e){e===void 0&&(e={}),this.format.toPNG(t,e)},n.prototype.toJPEG=function(t,e){e===void 0&&(e={}),this.format.toJPEG(t,e)},n.prototype.printPreview=function(t){this.print.show(t)},n.prototype.dispose=function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()},_([pn.checkScroller()],n.prototype,"lockScroller",null),_([pn.checkScroller()],n.prototype,"unlockScroller",null),_([pn.checkScroller()],n.prototype,"updateScroller",null),_([pn.checkScroller()],n.prototype,"getScrollbarPosition",null),_([pn.checkScroller()],n.prototype,"setScrollbarPosition",null),_([pn.checkScroller()],n.prototype,"scrollToPoint",null),_([pn.checkScroller()],n.prototype,"scrollToContent",null),_([pn.checkScroller()],n.prototype,"scrollToCell",null),_([pn.checkScroller()],n.prototype,"transitionToPoint",null),_([pn.checkScroller()],n.prototype,"transitionToRect",null),_([c.Basecoat.dispose()],n.prototype,"dispose",null),n}(c.Basecoat),(be=c.Graph||(c.Graph={})).View=Wr,be.Hook=Zf,be.Renderer=No,be.Keyboard=Ca,be.MouseWheel=Yf,be.BaseManager=Ut,be.DefsManager=Vf,be.GridManager=jf,be.CoordManager=If,be.PrintManager=wa,be.FormatManager=Jf,be.MiniMapManager=Wf,be.HistoryManager=ba,be.SnaplineManager=_f,be.ScrollerManager=Gf,be.ClipboardManager=Hf,be.TransformManager=qf,be.HighlightManager=Uf,be.BackgroundManager=zu,be.SelectionManager=$f,function(i){i.toStringTag="X6."+i.name,i.isGraph=function(n){if(n==null)return!1;if(n instanceof i)return!0;var t=n[Symbol.toStringTag],e=n;return(t==null||t===i.toStringTag)&&e.hook!=null&&e.view!=null&&e.model!=null}}(c.Graph||(c.Graph={})),function(i){i.render=function(n,t){var e=n instanceof HTMLElement?new i({container:n}):new i(n);return t!=null&&e.fromJSON(t),e}}(c.Graph||(c.Graph={})),function(i){i.registerNode=c.Node.registry.register,i.registerEdge=c.Edge.registry.register,i.registerView=c.CellView.registry.register,i.registerAttr=An.registry.register,i.registerGrid=Jn.registry.register,i.registerFilter=jr.registry.register,i.registerNodeTool=Gr.registry.register,i.registerEdgeTool=Hr.registry.register,i.registerBackground=Mo.registry.register,i.registerHighlighter=Bn.registry.register,i.registerPortLayout=vr.registry.register,i.registerPortLabelLayout=Ir.registry.register,i.registerMarker=Yn.registry.register,i.registerRouter=Kn.registry.register,i.registerConnector=Cr.registry.register,i.registerAnchor=Ur.registry.register,i.registerEdgeAnchor=qr.registry.register,i.registerConnectionPoint=$r.registry.register,i.registerConnectionStrategy=_r.registry.register,i.registerHTMLComponent=Pn.componentRegistry.register}(c.Graph||(c.Graph={})),function(i){i.unregisterNode=c.Node.registry.unregister,i.unregisterEdge=c.Edge.registry.unregister,i.unregisterView=c.CellView.registry.unregister,i.unregisterAttr=An.registry.unregister,i.unregisterGrid=Jn.registry.unregister,i.unregisterFilter=jr.registry.unregister,i.unregisterNodeTool=Gr.registry.unregister,i.unregisterEdgeTool=Hr.registry.unregister,i.unregisterBackground=Mo.registry.unregister,i.unregisterHighlighter=Bn.registry.unregister,i.unregisterPortLayout=vr.registry.unregister,i.unregisterPortLabelLayout=Ir.registry.unregister,i.unregisterMarker=Yn.registry.unregister,i.unregisterRouter=Kn.registry.unregister,i.unregisterConnector=Cr.registry.unregister,i.unregisterAnchor=Ur.registry.unregister,i.unregisterEdgeAnchor=qr.registry.unregister,i.unregisterConnectionPoint=$r.registry.unregister,i.unregisterConnectionStrategy=_r.registry.unregister,i.unregisterHTMLComponent=Pn.componentRegistry.unregister}(c.Graph||(c.Graph={}));var Di,Kf=function(){function i(){this.cells=[]}return i.prototype.copy=function(n,t,e){e===void 0&&(e={}),this.options=A({},e);var r=(c.Model.isModel(t)?t:t.model).cloneSubGraph(n,e);this.cells=ys(Object.keys(r).map(function(o){return r[o]}),function(o){return o.isEdge()?2:1}),this.serialize(e)},i.prototype.cut=function(n,t,e){e===void 0&&(e={}),this.copy(n,t,e),(c.Graph.isGraph(t)?t.model:t).batchUpdate("cut",function(){n.forEach(function(r){return r.remove()})})},i.prototype.paste=function(n,t){var e=this;t===void 0&&(t={});var r=A(A({},this.options),t),o=r.offset,s=r.edgeProps,a=r.nodeProps,l=20,u=20;o&&(l=typeof o=="number"?o:o.dx,u=typeof o=="number"?o:o.dy),this.deserialize(r);var h=this.cells;h.forEach(function(f){f.model=null,f.removeProp("zIndex"),(l||u)&&f.translate(l,u),a&&f.isNode()&&f.prop(a),s&&f.isEdge()&&f.prop(s)});var d=c.Graph.isGraph(n)?n.model:n;return d.batchUpdate("paste",function(){d.addCells(e.cells)}),this.copy(h,n,t),h},i.prototype.serialize=function(n){n.useLocalStorage!==!1&&Di.save(this.cells)},i.prototype.deserialize=function(n){if(n.useLocalStorage){var t=Di.fetch();t&&(this.cells=t)}},i.prototype.isEmpty=function(){return this.cells.length<=0},i.prototype.clean=function(){this.options={},this.cells=[],Di.clean()},i}();(function(i){var n=We.prefixCls+".clipboard.cells";i.save=function(t){if(window.localStorage){var e=t.map(function(r){return r.toJSON()});localStorage.setItem(n,JSON.stringify(e))}},i.fetch=function(){if(window.localStorage){var t=localStorage.getItem(n),e=t?JSON.parse(t):[];if(e)return c.Model.fromJSON(e)}},i.clean=function(){window.localStorage&&localStorage.removeItem(n)}})(Di||(Di={}));var xa,$1=function(){function i(n){this.halo=n}return Object.defineProperty(i.prototype,"options",{get:function(){return this.halo.options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"graph",{get:function(){return this.halo.graph},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this.halo.model},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.halo.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cell",{get:function(){return this.halo.cell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"node",{get:function(){return this.cell},enumerable:!1,configurable:!0}),i.prototype.getPresets=function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){return this.options.useCellGeometry?n.cell.getBBox():n.getBBox()},content:function(n){var t=Or("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),e=n.cell,r=e.getBBox();return t({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(e.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}},i.prototype.removeCell=function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()},i.prototype.startLink=function(n){var t=n.x,e=n.y;this.halo.startBatch();var r=this.graph,o=this.createEdgeConnectedToSource();o.setTarget({x:t,y:e}),this.model.addEdge(o,{validation:!1,halo:this.halo.cid,async:!1}),r.view.undelegateEvents(),this.edgeView=r.renderer.findViewByCell(o),this.edgeView.prepareArrowheadDragging("target",{x:t,y:e,fallbackAction:"remove"})},i.prototype.createEdgeConnectedToSource=function(){var n=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,n),e=this.graph.hook.getDefaultEdge(this.view,n);return e.setSource(t),e},i.prototype.getMagnet=function(n,t){var e=this.options.magnet;if(typeof e=="function"){var r=dt(e,this.halo,n,t);if(r instanceof SVGElement)return r}throw new Error("`magnet()` has to return an SVGElement")},i.prototype.getEdgeTerminal=function(n,t){var e={cell:n.cell.id};if(t!==n.container){var r=t.getAttribute("port");r?e.port=r:e.selector=n.getSelector(t)}return e},i.prototype.doLink=function(n){var t=n.e,e=n.x,r=n.y;this.edgeView&&this.edgeView.onMouseMove(t,e,r)},i.prototype.stopLink=function(n){var t=n.e,e=n.x,r=n.y,o=this.edgeView;if(o){o.onMouseUp(t,e,r);var s=o.cell;s.hasLoop()&&this.makeLoopEdge(s),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:s}),this.edgeView=null}this.graph.view.delegateEvents()},i.prototype.makeLoopEdge=function(n){var t=null,e=null,r=this.options.loopEdgeWidth,o=this.graph.options,s=new c.Rectangle(0,0,o.width,o.height),a=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(l){var u=null,h=0,d=0;switch(l){case"top":u=new c.Point(a.x+a.width/2,a.y-r),h=r/2;break;case"bottom":u=new c.Point(a.x+a.width/2,a.y+a.height+r),h=r/2;break;case"left":u=new c.Point(a.x-r,a.y+a.height/2),d=r/2;break;case"right":u=new c.Point(a.x+a.width+r,a.y+a.height/2),d=r/2}return!!u&&(t=u.translate(-h,-d),e=u.translate(h,d),s.containsPoint(t)&&s.containsPoint(e))})&&t&&e&&n.setVertices([t,e])},i.prototype.startResize=function(n){var t=n.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(c.Angle.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),me("node:resize",t,this.view)},i.prototype.doResize=function(n){var t=n.e,e=n.dx,r=n.dy,o=this.node.getSize(),s=Math.max(o.width+(this.flip?e:r),1),a=Math.max(o.height+(this.flip?r:e),1);this.node.resize(s,a,{absolute:!0}),me("node:resizing",t,this.view)},i.prototype.stopResize=function(n){var t=n.e;this.view.removeClass("node-resizing"),me("node:resized",t,this.view),this.halo.stopBatch()},i.prototype.startClone=function(n){var t=n.e,e=n.x,r=n.y;this.halo.startBatch();var o=this.options.clone(this.cell,{clone:!0});if(!c.Cell.isCell(o))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(o,e,r),this.model.addCell(o,{halo:this.halo.cid,async:!1});var s=this.graph.renderer.findViewByCell(o);s.onMouseDown(t,e,r),this.halo.setEventData(t,{cloneView:s})},i.prototype.centerNodeAtCursor=function(n,t,e){var r=n.getBBox().getCenter(),o=t-r.x,s=e-r.y;n.translate(o,s)},i.prototype.doClone=function(n){var t=n.e,e=n.x,r=n.y,o=this.halo.getEventData(t).cloneView;o&&o.onMouseMove(t,e,r)},i.prototype.stopClone=function(n){var t=n.e,e=n.x,r=n.y,o=this.halo.getEventData(t).cloneView;o&&o.onMouseUp(t,e,r),this.halo.stopBatch()},i.prototype.startFork=function(n){var t=n.e,e=n.x,r=n.y;this.halo.startBatch();var o=this.options.clone(this.cell,{fork:!0});if(!c.Cell.isCell(o))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(o,e,r),this.model.addCell(o,{halo:this.halo.cid,async:!1});var s=this.createEdgeConnectedToSource(),a=this.graph.renderer.findViewByCell(o),l=this.getMagnet(a,"target"),u=this.getEdgeTerminal(a,l);s.setTarget(u),this.model.addEdge(s,{halo:this.halo.cid,async:!1}),a.onMouseDown(t,e,r),this.halo.setEventData(t,{cloneView:a})},i.prototype.doFork=function(n){var t=n.e,e=n.x,r=n.y,o=this.halo.getEventData(t).cloneView;o&&o.onMouseMove(t,e,r)},i.prototype.stopFork=function(n){var t=n.e,e=n.x,r=n.y,o=this.halo.getEventData(t).cloneView;o&&o.onMouseUp(t,e,r),this.halo.stopBatch()},i.prototype.startRotate=function(n){var t=this,e=n.e,r=n.x,o=n.y;this.halo.startBatch();var s=this.node.getBBox().getCenter(),a=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(l,u){return u.isNode()&&l.push(u),l},a),this.halo.setEventData(e,{center:s,nodes:a,rotateStartAngles:a.map(function(l){return l.getAngle()}),clientStartAngle:new c.Point(r,o).theta(s)}),a.forEach(function(l){var u=t.graph.findViewByCell(l);u&&(u.addClass("node-rotating"),me("node:rotate",e,u))})},i.prototype.doRotate=function(n){var t=this,e=n.e,r=n.x,o=n.y,s=this.halo.getEventData(e),a=s.clientStartAngle-new c.Point(r,o).theta(s.center);s.nodes.forEach(function(l,u){var h=s.rotateStartAngles[u],d=c.Util.snapToGrid(h+a,t.options.rotateGrid);l.rotate(d,{absolute:!0,center:s.center,halo:t.halo.cid}),me("node:rotating",e,t.graph.findViewByCell(l))})},i.prototype.stopRotate=function(n){var t=this,e=n.e;this.halo.getEventData(e).nodes.forEach(function(r){var o=t.graph.findViewByCell(r);o.removeClass("node-rotating"),me("node:rotated",e,o)}),this.halo.stopBatch()},i.prototype.unlink=function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()},i}(),W1=function(){function i(n){this.halo=n}return Object.defineProperty(i.prototype,"options",{get:function(){return this.halo.options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"graph",{get:function(){return this.halo.graph},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this.halo.model},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.halo.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cell",{get:function(){return this.halo.cell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edge",{get:function(){return this.cell},enumerable:!1,configurable:!0}),i.prototype.getPresets=function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}},i.prototype.removeEdge=function(){this.cell.remove()},i.prototype.directionSwap=function(){var n=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:n})},i}(),Ea=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return B(n,i),Object.defineProperty(n.prototype,"type",{get:function(){return this.options.type||"surround"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"handleOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),n.prototype.init=function(t){this.options=Jt(n.defaultOptions,this.cell.isNode()?new $1(this).getPresets():this.cell.isEdge()?new W1(this).getPresets():null,t),this.render(),this.initHandles(),this.update(),this.startListening()},n.prototype.startListening=function(){var t=this.model,e=this.graph;this.view.cell.on("removed",this.remove,this),t.on("reseted",this.remove,this),e.on("halo:destroy",this.remove,this),t.on("*",this.update,this),e.on("scale",this.update,this),e.on("translate",this.update,this),i.prototype.startListening.call(this)},n.prototype.stopListening=function(){var t=this.model,e=this.graph,r=this.view.cell;this.undelegateEvents(),r.off("removed",this.remove,this),t.off("reseted",this.remove,this),e.off("halo:destroy",this.remove,this),t.off("*",this.update,this),e.off("scale",this.update,this),e.off("translate",this.update,this),i.prototype.stopListening.call(this)},n.prototype.render=function(){var t=this.options,e=this.prefixClassName("widget-halo");return this.view.addClass(xa.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(e).attr("data-shape",this.view.cell.shape),t.className&&this.$container.addClass(t.className),this.$handleContainer=this.$("<div/>").addClass(e+"-handles").appendTo(this.container),this.$content=this.$("<div/>").addClass(e+"-content").appendTo(this.container),this.$container.appendTo(this.graph.container),this},n.prototype.remove=function(){return this.stopBatch(),this.view.removeClass(xa.NODE_CLS),i.prototype.remove.call(this)},n.prototype.update=function(){if(this.isRendered()){this.updateContent();var t=this.getBBox(),e=this.options.tinyThreshold||0,r=this.options.smallThreshold||0;this.$handleContainer.toggleClass(this.handleClassName+"-tiny",t.width<e&&t.height<e);var o=this.handleClassName+"-small";this.$handleContainer.toggleClass(o,!this.$handleContainer.hasClass(o)&&t.width<r&&t.height<r),this.$container.css({width:t.width,height:t.height,left:t.x,top:t.y}),this.hasHandle("unlink")&&this.toggleUnlink(),this.type!=="surround"&&this.type!=="toolbar"||this.hasHandle("fork")&&this.toggleFork()}},n.prototype.updateContent=function(){var t=this.options.content;if(typeof t=="function"){var e=dt(t,this,this.view,this.$content[0]);e&&this.$content.html(e)}else t?this.$content.html(t):this.$content.remove()},n.prototype.getBBox=function(){var t=this.view,e=this.options.bbox,r=typeof e=="function"?dt(e,this,t):e;return c.Rectangle.create(A({x:0,y:0,width:1,height:1},r))},n.prototype.removeCell=function(){this.cell.remove()},n.prototype.toggleFork=function(){var t=this.view.cell.clone(),e=this.graph.hook.createCellView(t),r=this.graph.hook.validateConnection(this.view,null,e,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!r),e.remove()},n.prototype.toggleUnlink=function(){var t=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!t)},n.prototype.startBatch=function(){this.model.startBatch("halo",{halo:this.cid})},n.prototype.stopBatch=function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})},n}(Fu);(function(i){i.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(n){return n.clone().removeZIndex()}}})(Ea||(Ea={})),Object.getOwnPropertyNames(ki.prototype).forEach(function(i){i!=="constructor"&&Object.defineProperty(Ea.prototype,i,Object.getOwnPropertyDescriptor(ki.prototype,i))}),function(i){i.NODE_CLS="has-widget-halo"}(xa||(xa={}));var Vn,Ni=function(i){function n(t){var e=i.call(this)||this;return e.options=A(A({},n.defaults),t),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new c.Graph(A(A({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return B(n,i),Object.defineProperty(n.prototype,"targetScroller",{get:function(){var t=this.options.target;return c.Graph.isGraph(t)?t.scroller.widget:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetGraph",{get:function(){var t=this.options.target;return c.Graph.isGraph(t)?t:t.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetModel",{get:function(){return this.targetGraph.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"snapline",{get:function(){return this.targetGraph.snapline.widget},enumerable:!1,configurable:!0}),n.prototype.start=function(t,e){var r=e;r.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=t,this.prepareDragging(t,r.clientX,r.clientY);var o=this.updateNodePosition(r.clientX,r.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:r,node:t,cell:t,view:this.draggingView,x:o.x,y:o.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(n.documentEvents,r.data)},n.prototype.isSnaplineEnabled=function(){return this.snapline&&!this.snapline.disabled},n.prototype.prepareDragging=function(t,e,r){var o=this.draggingGraph,s=o.model,a=this.options.getDragNode(t,{sourceNode:t,draggingGraph:o,targetGraph:this.targetGraph});a.position(0,0);var l=5;if(this.isSnaplineEnabled()&&(l+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var u=this.targetGraph.transform.getScale();o.scale(u.sx,u.sy),l*=Math.max(u.sx,u.sy)}else o.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),s.resetCells([a]);var h=o.findViewByCell(a);h.undelegateEvents(),h.cell.off("changed"),o.fitToContent({padding:l,allowNewOrigin:"any"});var d=h.getBBox();this.geometryBBox=h.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(d.getTopLeft()),this.draggingNode=a,this.draggingView=h,this.draggingBBox=a.getBBox(),this.padding=l,this.originOffset=this.updateGraphPosition(e,r)},n.prototype.updateGraphPosition=function(t,e){var r=document.body.scrollTop||document.documentElement.scrollTop,o=this.delta,s=this.geometryBBox,a=this.padding||5,l={left:t-o.x-s.width/2-a,top:e-o.y-s.height/2-a+r};return this.draggingGraph&&this.$container.offset(l),l},n.prototype.updateNodePosition=function(t,e){var r=this.targetGraph.clientToLocal(t,e),o=this.draggingBBox;return r.x-=o.width/2,r.y-=o.height/2,this.draggingNode.position(r.x,r.y),r},n.prototype.snap=function(t){var e=t.cell,r=t.current,o=t.options,s=e;if(o.snapped){var a=this.draggingBBox;s.position(a.x+o.tx,a.y+o.ty,{silent:!0}),this.draggingView.translate(),s.position(r.x,r.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}}else this.snapOffset=null},n.prototype.onDragging=function(t){var e=this.draggingView;if(e){t.preventDefault();var r=this.normalizeEvent(t),o=r.clientX,s=r.clientY;this.updateGraphPosition(o,s);var a=this.updateNodePosition(o,s),l=this.targetGraph.options.embedding.enabled,u=(l||this.isSnaplineEnabled())&&this.isInsideValidArea({x:o,y:s});if(l){e.setEventData(r,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var h=e.getEventData(r);u?e.processEmbedding(r,h):e.clearEmbedding(h),this.candidateEmbedView=h.candidateEmbedView}this.isSnaplineEnabled()&&(u?this.snapline.snapOnMoving({e:r,view:e,x:a.x,y:a.y}):this.snapline.hide())}},n.prototype.onDragEnd=function(t){var e=this,r=this.draggingNode;if(r){var o=this.normalizeEvent(t),s=this.draggingView,a=this.draggingBBox,l=this.snapOffset,u=a.x,h=a.y;l&&(u+=l.x,h+=l.y),r.position(u,h,{silent:!0});var d=this.drop(r,{x:o.clientX,y:o.clientY}),f=function(v){v?(e.onDropped(r),e.targetGraph.options.embedding.enabled&&s&&(s.setEventData(o,{cell:v,graph:e.targetGraph,candidateEmbedView:e.candidateEmbedView}),s.finalizeEmbedding(o,s.getEventData(o)))):e.onDropInvalid(),e.candidateEmbedView=null,e.targetModel.stopBatch("dnd")};Ps(d)?(this.undelegateDocumentEvents(),d.then(f)):f(d)}},n.prototype.clearDragging=function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())},n.prototype.onDropped=function(t){this.draggingNode===t&&(this.clearDragging(),this.$container.removeClass("dragging").remove())},n.prototype.onDropInvalid=function(){var t=this,e=this.draggingNode;if(e){var r=this.options.animation;if(r){var o=typeof r=="object"&&r.duration||150,s=typeof r=="object"&&r.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,o,s,function(){return t.onDropped(e)})}else this.onDropped(e)}},n.prototype.isInsideValidArea=function(t){var e,r=null,o=this.targetGraph,s=this.targetScroller;this.options.dndContainer&&(r=this.getDropArea(this.options.dndContainer));var a=r&&r.containsPoint(t);if(s)if(s.options.autoResize)e=this.getDropArea(s.container);else{var l=this.getDropArea(s.container);e=this.getDropArea(o.container).intersectsWithRect(l)}else e=this.getDropArea(o.container);return!a&&e&&e.containsPoint(t)},n.prototype.getDropArea=function(t){var e=this.$(t),r=e.offset(),o=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft;return c.Rectangle.create({x:r.left+parseInt(e.css("border-left-width"),10)-s,y:r.top+parseInt(e.css("border-top-width"),10)-o,width:e.innerWidth(),height:e.innerHeight()})},n.prototype.drop=function(t,e){var r=this;if(this.isInsideValidArea(e)){var o=this.targetGraph,s=o.model,a=o.clientToLocal(e),l=this.sourceNode,u=this.options.getDropNode(t,{sourceNode:l,draggingNode:t,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),h=u.getBBox();a.x+=h.x-h.width/2,a.y+=h.y-h.height/2;var d=this.snapOffset?1:o.getGridSize();u.position(c.Util.snapToGrid(a.x,d),c.Util.snapToGrid(a.y,d)),u.removeZIndex();var f=this.options.validateNode,v=!f||f(u,{sourceNode:l,draggingNode:t,droppingNode:u,targetGraph:o,draggingGraph:this.draggingGraph});return typeof v=="boolean"?v?(s.addCell(u,{stencil:this.cid}),u):null:qp(v).then(function(b){return b?(s.addCell(u,{stencil:r.cid}),u):null})}return null},n.prototype.onRemove=function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())},n.prototype.dispose=function(){this.remove()},_([c.View.dispose()],n.prototype,"dispose",null),n}(c.View);(function(i){i.defaults={animation:!1,getDragNode:function(n){return n.clone()},getDropNode:function(n){return n.clone()}},i.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}})(Ni||(Ni={})),function(i){i.getMaxDim=function(n,t){return n.reduce(function(e,r){return Math.max(r.getSize()[t],e)},0)},i.getNodesInRow=function(n,t,e){for(var r=[],o=e*t,s=o+e;o<s;o+=1)r.push(n[o]);return r},i.getNodesInColumn=function(n,t,e){for(var r=[],o=t,s=n.length;o<s;o+=e)r.push(n[o]);return r},i.accumulate=function(n,t){return n.reduce(function(e,r,o){return e.push(e[o]+r),e},[t||0])}}(Vn||(Vn={}));var Xe,Oi,ju=function(i){function n(t){var e=i.call(this)||this;e.graphs={},e.$groups={},e.options=A(A({},n.defaultOptions),t),e.dnd=new Ni(e.options),e.onSearch=ml(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Xe.base)).attr("data-not-found-text",e.options.notFoundText||"No matches found"),e.options.collapsable=t.collapsable&&t.groups&&t.groups.some(function(s){return s.collapsable!==!1}),e.options.collapsable&&(e.$container.addClass("collapsable"),t.groups&&t.groups.every(function(s){return s.collapsed||s.collapsable===!1})&&e.$container.addClass("collapsed")),e.$("<div/>").addClass(e.prefixClassName(Xe.title)).html(e.options.title).appendTo(e.$container),t.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(Xe.content)).appendTo(e.$container);var r=t.stencilGraphOptions||{};if(t.groups&&t.groups.length)t.groups.forEach(function(s){var a=e.$("<div/>").addClass(e.prefixClassName(Xe.group)).attr("data-name",s.name);(s.collapsable==null&&t.collapsable||s.collapsable!==!1)&&a.addClass("collapsable"),a.toggleClass("collapsed",s.collapsed===!0);var l=e.$("<h3/>").addClass(e.prefixClassName(Xe.groupTitle)).html(s.title||s.name),u=e.$("<div/>").addClass(e.prefixClassName(Xe.groupContent)),h=s.graphOptions,d=new c.Graph(A(A(A({},r),h),{container:document.createElement("div"),model:r.model||new c.Model,width:s.graphWidth||t.stencilGraphWidth,height:s.graphHeight||t.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));u.append(d.container),a.append(l,u).appendTo(e.$content),e.$groups[s.name]=a,e.graphs[s.name]=d});else{var o=new c.Graph(A(A({},r),{container:document.createElement("div"),model:r.model||new c.Model,width:t.stencilGraphWidth,height:t.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(o.container),e.graphs[Oi.defaultGroupName]=o}return e.startListening(),e}return B(n,i),Object.defineProperty(n.prototype,"targetScroller",{get:function(){var t=this.options.target;return c.Graph.isGraph(t)?t.scroller.widget:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetGraph",{get:function(){var t=this.options.target;return c.Graph.isGraph(t)?t:t.graph},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetModel",{get:function(){return this.targetGraph.model},enumerable:!1,configurable:!0}),n.prototype.renderSearch=function(){return this.$("<div/>").addClass(this.prefixClassName(Xe.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Xe.searchText)))},n.prototype.startListening=function(){var t,e=this,r=this.prefixClassName(Xe.title),o=this.prefixClassName(Xe.searchText),s=this.prefixClassName(Xe.groupTitle);this.delegateEvents(((t={})["click ."+r]="onTitleClick",t["touchstart ."+r]="onTitleClick",t["click ."+s]="onGroupTitleClick",t["touchstart ."+s]="onGroupTitleClick",t["input ."+o]="onSearch",t["focusin ."+o]="onSearchFocusIn",t["focusout ."+o]="onSearchFocusOut",t)),Object.keys(this.graphs).forEach(function(a){e.graphs[a].on("cell:mousedown",e.onDragStart,e)})},n.prototype.stopListening=function(){var t=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(e){t.graphs[e].off("cell:mousedown",t.onDragStart,t)})},n.prototype.load=function(t,e){var r=this;return Array.isArray(t)?this.loadGroup(t,e):this.options.groups&&Object.keys(this.options.groups).forEach(function(o){t[o]&&r.loadGroup(t[o],o)}),this},n.prototype.loadGroup=function(t,e){var r=this.getModel(e);if(r){var o=t.map(function(h){return c.Node.isNode(h)?h:c.Node.create(h)});r.resetCells(o)}var s=this.getGroup(e),a=this.options.stencilGraphHeight;s&&s.graphHeight!=null&&(a=s.graphHeight);var l=s&&s.layout||this.options.layout;if(l&&r&&dt(l,this,r,s),!a){var u=this.getGraph(e);u.fitToContent({minWidth:u.options.width,gridHeight:1,padding:s&&s.graphPadding||this.options.stencilGraphPadding||10})}return this},n.prototype.onDragStart=function(t){var e=t.e,r=t.node;this.dnd.start(r,e)},n.prototype.filter=function(t,e){var r=this,o=Object.keys(this.graphs).reduce(function(s,a){var l=r.graphs[a],u=a===Oi.defaultGroupName?null:a,h=l.model.getNodes().filter(function(b){var w=!1;w=typeof e=="function"?dt(e,r,b,t,u,r):typeof e=="boolean"?e:r.isCellMatched(b,t,e,t.toLowerCase()!==t);var P=l.renderer.findViewByCell(b);return P&&P.$(P.container).toggleClass("unmatched",!w),w}),d=h.length>0,f=r.options,v=new c.Model;return v.resetCells(h),f.layout&&dt(f.layout,r,v,r.getGroup(a)),r.$groups[a]&&r.$groups[a].toggleClass("unmatched",!d),l.fitToContent({gridWidth:1,gridHeight:1,padding:f.stencilGraphPadding||10}),s||d},!1);this.$container.toggleClass("not-found",!o)},n.prototype.isCellMatched=function(t,e,r,o){return!e||!r||Object.keys(r).some(function(s){if(s==="*"||t.shape===s){var a=r[s];return typeof a=="boolean"?a:(Array.isArray(a)?a:[a]).some(function(l){var u=t.getPropByPath(l);return u!=null&&(u=""+u,o||(u=u.toLowerCase()),u.indexOf(e)>=0)})}return!1})},n.prototype.onSearch=function(t){this.filter(t.target.value,this.options.search)},n.prototype.onSearchFocusIn=function(){this.$container.addClass("is-focused")},n.prototype.onSearchFocusOut=function(){this.$container.removeClass("is-focused")},n.prototype.onTitleClick=function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())},n.prototype.onGroupTitleClick=function(t){var e=this,r=this.$(t.target).closest("."+this.prefixClassName(Xe.group));this.toggleGroup(r.attr("data-name")||"");var o=Object.keys(this.$groups).every(function(s){var a=e.getGroup(s),l=e.$groups[s];return a&&a.collapsable===!1||l.hasClass("collapsed")});this.$container.toggleClass("collapsed",o)},n.prototype.getModel=function(t){var e=this.getGraph(t);return e?e.model:null},n.prototype.getGraph=function(t){return this.graphs[t||Oi.defaultGroupName]},n.prototype.getGroup=function(t){var e=this.options.groups;return t!=null&&e&&e.length?e.find(function(r){return r.name===t}):null},n.prototype.toggleGroup=function(t){return this.isGroupCollapsed(t)?this.expandGroup(t):this.collapseGroup(t),this},n.prototype.collapseGroup=function(t){if(this.isGroupCollapsable(t)){var e=this.$groups[t];e&&!this.isGroupCollapsed(t)&&(this.trigger("group:collapse",{name:t}),e.addClass("collapsed"))}return this},n.prototype.expandGroup=function(t){if(this.isGroupCollapsable(t)){var e=this.$groups[t];e&&this.isGroupCollapsed(t)&&(this.trigger("group:expand",{name:t}),e.removeClass("collapsed"))}return this},n.prototype.isGroupCollapsable=function(t){return this.$groups[t].hasClass("collapsable")},n.prototype.isGroupCollapsed=function(t){var e=this.$groups[t];return e&&e.hasClass("collapsed")},n.prototype.collapseGroups=function(){var t=this;return Object.keys(this.$groups).forEach(function(e){return t.collapseGroup(e)}),this},n.prototype.expandGroups=function(){var t=this;return Object.keys(this.$groups).forEach(function(e){return t.expandGroup(e)}),this},n.prototype.resizeGroup=function(t,e){var r=this.graphs[t];return r&&r.resize(e.width,e.height),this},n.prototype.onRemove=function(){var t=this;Object.keys(this.graphs).forEach(function(e){t.graphs[e].view.remove(),delete t.graphs[e]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()},n}(c.View);(function(i){i.defaultOptions=A({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(n,t){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};(function(r,o){o===void 0&&(o={});var s=c.Model.isModel(r)?r:new c.Model().resetCells(r,{sort:!1,dryrun:!0}),a=s.getNodes(),l=o.columns||1,u=Math.ceil(a.length/l),h=o.dx||0,d=o.dy||0,f=o.center!==!1,v=o.resizeToFit===!0,b=o.marginX||0,w=o.marginY||0,P=[],x=o.columnWidth;if(x==="compact")for(var S=0;S<l;S+=1){var D=Vn.getNodesInColumn(a,S,l);P.push(Vn.getMaxDim(D,"width")+h)}else{x!=null&&x!=="auto"||(x=Vn.getMaxDim(a,"width")+h);for(var N=0;N<l;N+=1)P.push(x)}var V=Vn.accumulate(P,b),y=[],H=o.rowHeight;if(H==="compact")for(N=0;N<u;N+=1)D=Vn.getNodesInRow(a,N,l),y.push(Vn.getMaxDim(D,"height")+d);else for(H!=null&&H!=="auto"||(H=Vn.getMaxDim(a,"height")+d),N=0;N<u;N+=1)y.push(H);var I=Vn.accumulate(y,w);s.startBatch("layout"),a.forEach(function(X,J){var Z=J%l,it=Math.floor(J/l),ct=P[Z],et=y[it],lt=0,ht=0,at=X.getSize();if(v){var gt=ct-2*h,yt=et-2*d,ft=at.height*(at.width?gt/at.width:1),Et=at.width*(at.height?yt/at.height:1);et<ft?gt=Et:yt=ft,at={width:gt,height:yt},X.setSize(at,o)}f&&(lt=(ct-at.width)/2,ht=(et-at.height)/2),X.position(V[Z]+h+lt,I[it]+d+ht,o)}),s.stopBatch("layout")})(n,A(A(A({},e),this.options.layoutOptions),t?t.layoutOptions:{}))}},Ni.defaults)})(ju||(ju={})),function(i){i.base="widget-stencil",i.title=i.base+"-title",i.search=i.base+"-search",i.searchText=i.search+"-text",i.content=i.base+"-content",i.group=i.base+"-group",i.groupTitle=i.group+"-title",i.groupContent=i.group+"-content"}(Xe||(Xe={})),function(i){i.defaultGroupName="__default__"}(Oi||(Oi={}));var X1=Object.freeze({__proto__:null,get AutoSave(){return Ou},Clipboard:Kf,get Halo(){return Ea},MiniMap:zf,get Scroller(){return ma},Selection:Ru,Snapline:Rf,Transform:Vu,Knob:Bu,get Dnd(){return Ni},get Stencil(){return ju}});c.Addon=X1,c.ArrayExt=s2,c.Collection=Du,c.Config=We,c.Dictionary=ta,c.Disablable=Eu,c.DisposableDelegate=Im,c.Dom=z2,c.Events=uf,c.FunctionExt=Rl,c.JQuery=Ct,c.Lang=i2,c.NumberExt=y2,c.ObjectExt=u2,c.Registry=w1,c.Segment=ci,c.Shape=_1,c.StringExt=v2,c.Text=C2,Object.defineProperty(c,"__esModule",{value:!0})})})(or,or.exports);var fc={};(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.registry=void 0;var T=or.exports;E.registry=T.Registry.create({type:"vue componnet"}),T.Graph.registerVueComponent=E.registry.register,T.Graph.unregisterVueComponent=E.registry.unregister})(fc);var _g=or.exports,Gg=fc;_g.Graph.Hook.prototype.getVueComponent=function(E){var T=this.options.getVueComponent;if(typeof T=="function"){var c=_g.FunctionExt.call(T,this.graph,E);if(c!=null)return c}var F=E.getComponent();if(typeof F=="string"){var B=Gg.registry.get(F);if(B==null)return Gg.registry.onNotFound(F);F=B}return F};var i0={};(function(E){var T=Te&&Te.__extends||function(){var A=function(z,_){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,tt){W.__proto__=tt}||function(W,tt){for(var wt in tt)Object.prototype.hasOwnProperty.call(tt,wt)&&(W[wt]=tt[wt])},A(z,_)};return function(z,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");A(z,_);function W(){this.constructor=z}z.prototype=_===null?Object.create(_):(W.prototype=_.prototype,new W)}}(),c=Te&&Te.__assign||function(){return c=Object.assign||function(A){for(var z,_=1,W=arguments.length;_<W;_++){z=arguments[_];for(var tt in z)Object.prototype.hasOwnProperty.call(z,tt)&&(A[tt]=z[tt])}return A},c.apply(this,arguments)};Object.defineProperty(E,"__esModule",{value:!0}),E.VueShape=void 0;var F=or.exports,B=function(A){T(z,A);function z(){return A!==null&&A.apply(this,arguments)||this}return Object.defineProperty(z.prototype,"component",{get:function(){return this.getComponent()},set:function(_){this.setComponent(_)},enumerable:!1,configurable:!0}),z.prototype.getComponent=function(){return this.store.get("component")},z.prototype.setComponent=function(_,W){return W===void 0&&(W={}),_==null?this.removeComponent(W):this.store.set("component",_,W),this},z.prototype.removeComponent=function(_){return _===void 0&&(_={}),this.store.remove("component",_),this},z}(F.Node);E.VueShape=B,function(A){function z(_,W){W===void 0&&(W="rect");var tt=[{tagName:W,selector:"body"}];return _?tt.push(F.Markup.getForeignObjectMarkup()):tt.push({tagName:"g",selector:"content"}),tt.push({tagName:"text",selector:"label"}),tt}A.config({view:"vue-shape-view",markup:z(!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks:function(_){if(_.markup==null){var W=_.primer,tt=_.useForeignObject;if((W!=null||tt!=null)&&(_.markup=z(tt!==!1,W),W)){_.attrs==null&&(_.attrs={});var wt={};W==="circle"?wt={refCx:"50%",refCy:"50%",refR:"50%"}:W==="ellipse"&&(wt={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),W!=="rect"&&(_.attrs=F.ObjectExt.merge({},_.attrs,{body:c({refWidth:null,refHeight:null},wt)}))}}return _}}),F.Node.registry.register("vue-shape",A,!0)}(B=E.VueShape||(E.VueShape={})),E.VueShape=B})(i0);var gc={},vc={};const Hb=Rb(Vb);(function(E){var T=Hb;Object.keys(T).forEach(function(c){E[c]=T[c]}),E.set=function(c,F,B){return Array.isArray(c)?(c.length=Math.max(c.length,F),c.splice(F,1,B),B):(c[F]=B,B)},E.del=function(c,F){if(Array.isArray(c)){c.splice(F,1);return}delete c[F]},E.Vue=T,E.Vue2=void 0,E.isVue2=!1,E.isVue3=!0,E.install=function(){}})(vc);(function(E){var T=Te&&Te.__extends||function(){var A=function(z,_){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,tt){W.__proto__=tt}||function(W,tt){for(var wt in tt)Object.prototype.hasOwnProperty.call(tt,wt)&&(W[wt]=tt[wt])},A(z,_)};return function(z,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");A(z,_);function W(){this.constructor=z}z.prototype=_===null?Object.create(_):(W.prototype=_.prototype,new W)}}();Object.defineProperty(E,"__esModule",{value:!0}),E.VueShapeView=void 0;var c=or.exports,F=vc,B=function(A){T(z,A);function z(){return A!==null&&A.apply(this,arguments)||this}return z.prototype.init=function(){A.prototype.init.call(this)},z.prototype.getComponentContainer=function(){return this.selectors.foContent},z.prototype.confirmUpdate=function(_){var W=this,tt=A.prototype.confirmUpdate.call(this,_);return this.handleAction(tt,z.action,function(){c.Scheduler.scheduleTask(function(){W.renderVueComponent()})})},z.prototype.renderVueComponent=function(){this.unmountVueComponent();var _=this.getComponentContainer(),W=this.cell,tt=this.graph;if(_){var wt=this.graph.hook.getVueComponent(W);if(F.isVue2){var Ct=F.Vue2;typeof wt=="string"?this.vm=new Ct({template:wt}):this.vm=new Ct({render:function(){return(0,F.h)(wt,{graph:tt,node:W})},provide:function(){return{getGraph:function(){return tt},getNode:function(){return W}}}}),this.vm.$mount(_)}else F.isVue3&&(this.vm=(0,F.createApp)({render:function(){return(0,F.h)(wt,{graph:tt,node:W})},provide:function(){return{getGraph:function(){return tt},getNode:function(){return W}}}}),this.vm.mount(_))}},z.prototype.unmountVueComponent=function(){var _=this.getComponentContainer();return this.vm&&(F.isVue2&&this.vm.$destroy(),F.isVue3&&this.vm.unmount(),this.vm=null),_.innerHTML="",_},z.prototype.unmount=function(){return this.unmountVueComponent(),A.prototype.unmount.call(this),this},z}(c.NodeView);E.VueShapeView=B,function(A){A.action="vue",A.config({bootstrap:[A.action],actions:{component:A.action}}),c.NodeView.registry.register("vue-shape-view",A,!0)}(B=E.VueShapeView||(E.VueShapeView={})),E.VueShapeView=B})(gc);var $i={},Ub=Te&&Te.__extends||function(){var E=function(T,c){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,B){F.__proto__=B}||function(F,B){for(var A in B)Object.prototype.hasOwnProperty.call(B,A)&&(F[A]=B[A])},E(T,c)};return function(T,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");E(T,c);function F(){this.constructor=T}T.prototype=c===null?Object.create(c):(F.prototype=c.prototype,new F)}}();Object.defineProperty($i,"__esModule",{value:!0});$i.useTeleport=void 0;var _n=vc,ja=or.exports,qb=gc;function s0(E){if(_n.isVue3){var T=_n.Vue,c=T.Teleport,F=T.markRaw,B=T.Fragment;T.VNode,T.VNodeData;var A="vue",z=(0,_n.reactive)({}),_=(0,_n.defineComponent)({setup:function(){return function(){return(0,_n.h)(B,{},Object.keys(z).map(function(Ct){return(0,_n.h)(z[Ct])}))}}}),W=function(Ct,kt,Pt,xt,It){z[Ct]||(z[Ct]=F((0,_n.defineComponent)({render:function(){return It()?(0,_n.h)(c,{to:It()},[(0,_n.h)(xt,{graph:Pt,node:kt})]):null},provide:function(){return{getGraph:function(){return Pt},getNode:function(){return kt}}}})))},tt=function(Ct){delete z[Ct]},wt=function(Ct){Ub(kt,Ct);function kt(){return Ct!==null&&Ct.apply(this,arguments)||this}return kt.prototype.getTargetId=function(){return this.graph.view.cid+":"+this.cell.id},kt.prototype.init=function(){Ct.prototype.init.call(this);var Pt=this.getTargetId();this.cell.on("removed",function(){tt(Pt)}),this.renderVueComponent()},kt.prototype.renderVueComponent=function(){var Pt=this.getTargetId(),xt=this.graph.hook.getVueComponent(this.cell);W(Pt,this.cell,this.graph,xt,this.getComponentContainer.bind(this))},kt.prototype.getComponentContainer=function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent},kt.prototype.confirmUpdate=function(Pt){var xt=this,It=Ct.prototype.confirmUpdate.call(this,Pt);return this.handleAction(It,A,function(){ja.Scheduler.scheduleTask(function(){xt.renderVueComponent()})})},kt.prototype.unmount=function(Pt){var xt=this.getTargetId();return tt(xt),Ct.prototype.unmount.call(this,Pt),this},kt}(ja.NodeView);return wt.config({bootstrap:[A],actions:{component:A}}),ja.NodeView.registry.register(E,wt,!0),_}return console.warn("useTeleport should run in vue3"),ja.NodeView.registry.register(E,qb.VueShapeView,!0),(0,_n.defineComponent)(function(){return null})}$i.useTeleport=s0;$i.default=s0;(function(E){var T=Te&&Te.__createBinding||(Object.create?function(F,B,A,z){z===void 0&&(z=A),Object.defineProperty(F,z,{enumerable:!0,get:function(){return B[A]}})}:function(F,B,A,z){z===void 0&&(z=A),F[z]=B[A]}),c=Te&&Te.__exportStar||function(F,B){for(var A in F)A!=="default"&&!Object.prototype.hasOwnProperty.call(B,A)&&T(B,F,A)};Object.defineProperty(E,"__esModule",{value:!0}),c(i0,E),c(gc,E),c(fc,E),c($i,E)})(Gb);function a0(E,T){return function(){return E.apply(T,arguments)}}const{toString:l0}=Object.prototype,{getPrototypeOf:yc}=Object,mc=(E=>T=>{const c=l0.call(T);return E[c]||(E[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),ir=E=>(E=E.toLowerCase(),T=>mc(T)===E),Ga=E=>T=>typeof T===E,{isArray:Wi}=Array,lc=Ga("undefined");function $b(E){return E!==null&&!lc(E)&&E.constructor!==null&&!lc(E.constructor)&&Ho(E.constructor.isBuffer)&&E.constructor.isBuffer(E)}const u0=ir("ArrayBuffer");function Wb(E){let T;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?T=ArrayBuffer.isView(E):T=E&&E.buffer&&u0(E.buffer),T}const Xb=Ga("string"),Ho=Ga("function"),c0=Ga("number"),h0=E=>E!==null&&typeof E=="object",Yb=E=>E===!0||E===!1,Ia=E=>{if(mc(E)!=="object")return!1;const T=yc(E);return(T===null||T===Object.prototype||Object.getPrototypeOf(T)===null)&&!(Symbol.toStringTag in E)&&!(Symbol.iterator in E)},Jb=ir("Date"),Zb=ir("File"),Kb=ir("Blob"),Qb=ir("FileList"),tC=E=>h0(E)&&Ho(E.pipe),eC=E=>{const T="[object FormData]";return E&&(typeof FormData=="function"&&E instanceof FormData||l0.call(E)===T||Ho(E.toString)&&E.toString()===T)},nC=ir("URLSearchParams"),rC=E=>E.trim?E.trim():E.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ha(E,T,{allOwnKeys:c=!1}={}){if(E===null||typeof E>"u")return;let F,B;if(typeof E!="object"&&(E=[E]),Wi(E))for(F=0,B=E.length;F<B;F++)T.call(null,E[F],F,E);else{const A=c?Object.getOwnPropertyNames(E):Object.keys(E),z=A.length;let _;for(F=0;F<z;F++)_=A[F],T.call(null,E[_],_,E)}}function uc(){const E={},T=(c,F)=>{Ia(E[F])&&Ia(c)?E[F]=uc(E[F],c):Ia(c)?E[F]=uc({},c):Wi(c)?E[F]=c.slice():E[F]=c};for(let c=0,F=arguments.length;c<F;c++)arguments[c]&&Ha(arguments[c],T);return E}const oC=(E,T,c,{allOwnKeys:F}={})=>(Ha(T,(B,A)=>{c&&Ho(B)?E[A]=a0(B,c):E[A]=B},{allOwnKeys:F}),E),iC=E=>(E.charCodeAt(0)===65279&&(E=E.slice(1)),E),sC=(E,T,c,F)=>{E.prototype=Object.create(T.prototype,F),E.prototype.constructor=E,Object.defineProperty(E,"super",{value:T.prototype}),c&&Object.assign(E.prototype,c)},aC=(E,T,c,F)=>{let B,A,z;const _={};if(T=T||{},E==null)return T;do{for(B=Object.getOwnPropertyNames(E),A=B.length;A-- >0;)z=B[A],(!F||F(z,E,T))&&!_[z]&&(T[z]=E[z],_[z]=!0);E=c!==!1&&yc(E)}while(E&&(!c||c(E,T))&&E!==Object.prototype);return T},lC=(E,T,c)=>{E=String(E),(c===void 0||c>E.length)&&(c=E.length),c-=T.length;const F=E.indexOf(T,c);return F!==-1&&F===c},uC=E=>{if(!E)return null;if(Wi(E))return E;let T=E.length;if(!c0(T))return null;const c=new Array(T);for(;T-- >0;)c[T]=E[T];return c},cC=(E=>T=>E&&T instanceof E)(typeof Uint8Array<"u"&&yc(Uint8Array)),hC=(E,T)=>{const F=(E&&E[Symbol.iterator]).call(E);let B;for(;(B=F.next())&&!B.done;){const A=B.value;T.call(E,A[0],A[1])}},pC=(E,T)=>{let c;const F=[];for(;(c=E.exec(T))!==null;)F.push(c);return F},dC=ir("HTMLFormElement"),fC=E=>E.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(c,F,B){return F.toUpperCase()+B}),Hg=(({hasOwnProperty:E})=>(T,c)=>E.call(T,c))(Object.prototype),gC=ir("RegExp"),p0=(E,T)=>{const c=Object.getOwnPropertyDescriptors(E),F={};Ha(c,(B,A)=>{T(B,A,E)!==!1&&(F[A]=B)}),Object.defineProperties(E,F)},vC=E=>{p0(E,(T,c)=>{const F=E[c];if(!!Ho(F)){if(T.enumerable=!1,"writable"in T){T.writable=!1;return}T.set||(T.set=()=>{throw Error("Can not read-only method '"+c+"'")})}})},yC=(E,T)=>{const c={},F=B=>{B.forEach(A=>{c[A]=!0})};return Wi(E)?F(E):F(String(E).split(T)),c},mC=()=>{},bC=(E,T)=>(E=+E,Number.isFinite(E)?E:T),ot={isArray:Wi,isArrayBuffer:u0,isBuffer:$b,isFormData:eC,isArrayBufferView:Wb,isString:Xb,isNumber:c0,isBoolean:Yb,isObject:h0,isPlainObject:Ia,isUndefined:lc,isDate:Jb,isFile:Zb,isBlob:Kb,isRegExp:gC,isFunction:Ho,isStream:tC,isURLSearchParams:nC,isTypedArray:cC,isFileList:Qb,forEach:Ha,merge:uc,extend:oC,trim:rC,stripBOM:iC,inherits:sC,toFlatObject:aC,kindOf:mc,kindOfTest:ir,endsWith:lC,toArray:uC,forEachEntry:hC,matchAll:pC,isHTMLForm:dC,hasOwnProperty:Hg,hasOwnProp:Hg,reduceDescriptors:p0,freezeMethods:vC,toObjectSet:yC,toCamelCase:fC,noop:mC,toFiniteNumber:bC};function Ht(E,T,c,F,B){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=E,this.name="AxiosError",T&&(this.code=T),c&&(this.config=c),F&&(this.request=F),B&&(this.response=B)}ot.inherits(Ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const d0=Ht.prototype,f0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(E=>{f0[E]={value:E}});Object.defineProperties(Ht,f0);Object.defineProperty(d0,"isAxiosError",{value:!0});Ht.from=(E,T,c,F,B,A)=>{const z=Object.create(d0);return ot.toFlatObject(E,z,function(W){return W!==Error.prototype},_=>_!=="isAxiosError"),Ht.call(z,E.message,T,c,F,B),z.cause=E,z.name=E.name,A&&Object.assign(z,A),z};var CC=typeof self=="object"?self.FormData:window.FormData;function cc(E){return ot.isPlainObject(E)||ot.isArray(E)}function g0(E){return ot.endsWith(E,"[]")?E.slice(0,-2):E}function Ug(E,T,c){return E?E.concat(T).map(function(B,A){return B=g0(B),!c&&A?"["+B+"]":B}).join(c?".":""):T}function wC(E){return ot.isArray(E)&&!E.some(cc)}const xC=ot.toFlatObject(ot,{},null,function(T){return/^is[A-Z]/.test(T)});function EC(E){return E&&ot.isFunction(E.append)&&E[Symbol.toStringTag]==="FormData"&&E[Symbol.iterator]}function Ua(E,T,c){if(!ot.isObject(E))throw new TypeError("target must be an object");T=T||new(CC||FormData),c=ot.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(It,Nn){return!ot.isUndefined(Nn[It])});const F=c.metaTokens,B=c.visitor||wt,A=c.dots,z=c.indexes,W=(c.Blob||typeof Blob<"u"&&Blob)&&EC(T);if(!ot.isFunction(B))throw new TypeError("visitor must be a function");function tt(xt){if(xt===null)return"";if(ot.isDate(xt))return xt.toISOString();if(!W&&ot.isBlob(xt))throw new Ht("Blob is not supported. Use a Buffer instead.");return ot.isArrayBuffer(xt)||ot.isTypedArray(xt)?W&&typeof Blob=="function"?new Blob([xt]):Buffer.from(xt):xt}function wt(xt,It,Nn){let Ue=xt;if(xt&&!Nn&&typeof xt=="object"){if(ot.endsWith(It,"{}"))It=F?It:It.slice(0,-2),xt=JSON.stringify(xt);else if(ot.isArray(xt)&&wC(xt)||ot.isFileList(xt)||ot.endsWith(It,"[]")&&(Ue=ot.toArray(xt)))return It=g0(It),Ue.forEach(function(Er,Yi){!(ot.isUndefined(Er)||Er===null)&&T.append(z===!0?Ug([It],Yi,A):z===null?It:It+"[]",tt(Er))}),!1}return cc(xt)?!0:(T.append(Ug(Nn,It,A),tt(xt)),!1)}const Ct=[],kt=Object.assign(xC,{defaultVisitor:wt,convertValue:tt,isVisitable:cc});function Pt(xt,It){if(!ot.isUndefined(xt)){if(Ct.indexOf(xt)!==-1)throw Error("Circular reference detected in "+It.join("."));Ct.push(xt),ot.forEach(xt,function(Ue,Gn){(!(ot.isUndefined(Ue)||Ue===null)&&B.call(T,Ue,ot.isString(Gn)?Gn.trim():Gn,It,kt))===!0&&Pt(Ue,It?It.concat(Gn):[Gn])}),Ct.pop()}}if(!ot.isObject(E))throw new TypeError("data must be an object");return Pt(E),T}function qg(E){const T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(E).replace(/[!'()~]|%20|%00/g,function(F){return T[F]})}function bc(E,T){this._pairs=[],E&&Ua(E,this,T)}const v0=bc.prototype;v0.append=function(T,c){this._pairs.push([T,c])};v0.toString=function(T){const c=T?function(F){return T.call(this,F,qg)}:qg;return this._pairs.map(function(B){return c(B[0])+"="+c(B[1])},"").join("&")};function AC(E){return encodeURIComponent(E).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function y0(E,T,c){if(!T)return E;const F=c&&c.encode||AC,B=c&&c.serialize;let A;if(B?A=B(T,c):A=ot.isURLSearchParams(T)?T.toString():new bc(T,c).toString(F),A){const z=E.indexOf("#");z!==-1&&(E=E.slice(0,z)),E+=(E.indexOf("?")===-1?"?":"&")+A}return E}class $g{constructor(){this.handlers=[]}use(T,c,F){return this.handlers.push({fulfilled:T,rejected:c,synchronous:F?F.synchronous:!1,runWhen:F?F.runWhen:null}),this.handlers.length-1}eject(T){this.handlers[T]&&(this.handlers[T]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(T){ot.forEach(this.handlers,function(F){F!==null&&T(F)})}}const m0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PC=typeof URLSearchParams<"u"?URLSearchParams:bc,MC=FormData,SC=(()=>{let E;return typeof navigator<"u"&&((E=navigator.product)==="ReactNative"||E==="NativeScript"||E==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),rr={isBrowser:!0,classes:{URLSearchParams:PC,FormData:MC,Blob},isStandardBrowserEnv:SC,protocols:["http","https","file","blob","url","data"]};function kC(E,T){return Ua(E,new rr.classes.URLSearchParams,Object.assign({visitor:function(c,F,B,A){return rr.isNode&&ot.isBuffer(c)?(this.append(F,c.toString("base64")),!1):A.defaultVisitor.apply(this,arguments)}},T))}function TC(E){return ot.matchAll(/\w+|\[(\w*)]/g,E).map(T=>T[0]==="[]"?"":T[1]||T[0])}function DC(E){const T={},c=Object.keys(E);let F;const B=c.length;let A;for(F=0;F<B;F++)A=c[F],T[A]=E[A];return T}function b0(E){function T(c,F,B,A){let z=c[A++];const _=Number.isFinite(+z),W=A>=c.length;return z=!z&&ot.isArray(B)?B.length:z,W?(ot.hasOwnProp(B,z)?B[z]=[B[z],F]:B[z]=F,!_):((!B[z]||!ot.isObject(B[z]))&&(B[z]=[]),T(c,F,B[z],A)&&ot.isArray(B[z])&&(B[z]=DC(B[z])),!_)}if(ot.isFormData(E)&&ot.isFunction(E.entries)){const c={};return ot.forEachEntry(E,(F,B)=>{T(TC(F),B,c,0)}),c}return null}function NC(E,T,c){const F=c.config.validateStatus;!c.status||!F||F(c.status)?E(c):T(new Ht("Request failed with status code "+c.status,[Ht.ERR_BAD_REQUEST,Ht.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}const OC=rr.isStandardBrowserEnv?function(){return{write:function(c,F,B,A,z,_){const W=[];W.push(c+"="+encodeURIComponent(F)),ot.isNumber(B)&&W.push("expires="+new Date(B).toGMTString()),ot.isString(A)&&W.push("path="+A),ot.isString(z)&&W.push("domain="+z),_===!0&&W.push("secure"),document.cookie=W.join("; ")},read:function(c){const F=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return F?decodeURIComponent(F[3]):null},remove:function(c){this.write(c,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function LC(E){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(E)}function FC(E,T){return T?E.replace(/\/+$/,"")+"/"+T.replace(/^\/+/,""):E}function C0(E,T){return E&&!LC(T)?FC(E,T):T}const BC=rr.isStandardBrowserEnv?function(){const T=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");let F;function B(A){let z=A;return T&&(c.setAttribute("href",z),z=c.href),c.setAttribute("href",z),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return F=B(window.location.href),function(z){const _=ot.isString(z)?B(z):z;return _.protocol===F.protocol&&_.host===F.host}}():function(){return function(){return!0}}();function Xi(E,T,c){Ht.call(this,E==null?"canceled":E,Ht.ERR_CANCELED,T,c),this.name="CanceledError"}ot.inherits(Xi,Ht,{__CANCEL__:!0});function zC(E){const T=/^([-+\w]{1,25})(:?\/\/|:)/.exec(E);return T&&T[1]||""}const RC=ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VC=E=>{const T={};let c,F,B;return E&&E.split(`
`).forEach(function(z){B=z.indexOf(":"),c=z.substring(0,B).trim().toLowerCase(),F=z.substring(B+1).trim(),!(!c||T[c]&&RC[c])&&(c==="set-cookie"?T[c]?T[c].push(F):T[c]=[F]:T[c]=T[c]?T[c]+", "+F:F)}),T},Wg=Symbol("internals"),w0=Symbol("defaults");function Ui(E){return E&&String(E).trim().toLowerCase()}function _a(E){return E===!1||E==null?E:ot.isArray(E)?E.map(_a):String(E)}function jC(E){const T=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let F;for(;F=c.exec(E);)T[F[1]]=F[2];return T}function Xg(E,T,c,F){if(ot.isFunction(F))return F.call(this,T,c);if(!!ot.isString(T)){if(ot.isString(F))return T.indexOf(F)!==-1;if(ot.isRegExp(F))return F.test(T)}}function IC(E){return E.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(T,c,F)=>c.toUpperCase()+F)}function _C(E,T){const c=ot.toCamelCase(" "+T);["get","set","has"].forEach(F=>{Object.defineProperty(E,F+c,{value:function(B,A,z){return this[F].call(this,T,B,A,z)},configurable:!0})})}function Hi(E,T){T=T.toLowerCase();const c=Object.keys(E);let F=c.length,B;for(;F-- >0;)if(B=c[F],T===B.toLowerCase())return B;return null}function yn(E,T){E&&this.set(E),this[w0]=T||null}Object.assign(yn.prototype,{set:function(E,T,c){const F=this;function B(A,z,_){const W=Ui(z);if(!W)throw new Error("header name must be a non-empty string");const tt=Hi(F,W);tt&&_!==!0&&(F[tt]===!1||_===!1)||(F[tt||z]=_a(A))}return ot.isPlainObject(E)?ot.forEach(E,(A,z)=>{B(A,z,T)}):B(T,E,c),this},get:function(E,T){if(E=Ui(E),!E)return;const c=Hi(this,E);if(c){const F=this[c];if(!T)return F;if(T===!0)return jC(F);if(ot.isFunction(T))return T.call(this,F,c);if(ot.isRegExp(T))return T.exec(F);throw new TypeError("parser must be boolean|regexp|function")}},has:function(E,T){if(E=Ui(E),E){const c=Hi(this,E);return!!(c&&(!T||Xg(this,this[c],c,T)))}return!1},delete:function(E,T){const c=this;let F=!1;function B(A){if(A=Ui(A),A){const z=Hi(c,A);z&&(!T||Xg(c,c[z],z,T))&&(delete c[z],F=!0)}}return ot.isArray(E)?E.forEach(B):B(E),F},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(E){const T=this,c={};return ot.forEach(this,(F,B)=>{const A=Hi(c,B);if(A){T[A]=_a(F),delete T[B];return}const z=E?IC(B):String(B).trim();z!==B&&delete T[B],T[z]=_a(F),c[z]=!0}),this},toJSON:function(E){const T=Object.create(null);return ot.forEach(Object.assign({},this[w0]||null,this),(c,F)=>{c==null||c===!1||(T[F]=E&&ot.isArray(c)?c.join(", "):c)}),T}});Object.assign(yn,{from:function(E){return ot.isString(E)?new this(VC(E)):E instanceof this?E:new this(E)},accessor:function(E){const c=(this[Wg]=this[Wg]={accessors:{}}).accessors,F=this.prototype;function B(A){const z=Ui(A);c[z]||(_C(F,A),c[z]=!0)}return ot.isArray(E)?E.forEach(B):B(E),this}});yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);ot.freezeMethods(yn.prototype);ot.freezeMethods(yn);function GC(E,T){E=E||10;const c=new Array(E),F=new Array(E);let B=0,A=0,z;return T=T!==void 0?T:1e3,function(W){const tt=Date.now(),wt=F[A];z||(z=tt),c[B]=W,F[B]=tt;let Ct=A,kt=0;for(;Ct!==B;)kt+=c[Ct++],Ct=Ct%E;if(B=(B+1)%E,B===A&&(A=(A+1)%E),tt-z<T)return;const Pt=wt&&tt-wt;return Pt?Math.round(kt*1e3/Pt):void 0}}function Yg(E,T){let c=0;const F=GC(50,250);return B=>{const A=B.loaded,z=B.lengthComputable?B.total:void 0,_=A-c,W=F(_),tt=A<=z;c=A;const wt={loaded:A,total:z,progress:z?A/z:void 0,bytes:_,rate:W||void 0,estimated:W&&z&&tt?(z-A)/W:void 0};wt[T?"download":"upload"]=!0,E(wt)}}function Jg(E){return new Promise(function(c,F){let B=E.data;const A=yn.from(E.headers).normalize(),z=E.responseType;let _;function W(){E.cancelToken&&E.cancelToken.unsubscribe(_),E.signal&&E.signal.removeEventListener("abort",_)}ot.isFormData(B)&&rr.isStandardBrowserEnv&&A.setContentType(!1);let tt=new XMLHttpRequest;if(E.auth){const Pt=E.auth.username||"",xt=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";A.set("Authorization","Basic "+btoa(Pt+":"+xt))}const wt=C0(E.baseURL,E.url);tt.open(E.method.toUpperCase(),y0(wt,E.params,E.paramsSerializer),!0),tt.timeout=E.timeout;function Ct(){if(!tt)return;const Pt=yn.from("getAllResponseHeaders"in tt&&tt.getAllResponseHeaders()),It={data:!z||z==="text"||z==="json"?tt.responseText:tt.response,status:tt.status,statusText:tt.statusText,headers:Pt,config:E,request:tt};NC(function(Ue){c(Ue),W()},function(Ue){F(Ue),W()},It),tt=null}if("onloadend"in tt?tt.onloadend=Ct:tt.onreadystatechange=function(){!tt||tt.readyState!==4||tt.status===0&&!(tt.responseURL&&tt.responseURL.indexOf("file:")===0)||setTimeout(Ct)},tt.onabort=function(){!tt||(F(new Ht("Request aborted",Ht.ECONNABORTED,E,tt)),tt=null)},tt.onerror=function(){F(new Ht("Network Error",Ht.ERR_NETWORK,E,tt)),tt=null},tt.ontimeout=function(){let xt=E.timeout?"timeout of "+E.timeout+"ms exceeded":"timeout exceeded";const It=E.transitional||m0;E.timeoutErrorMessage&&(xt=E.timeoutErrorMessage),F(new Ht(xt,It.clarifyTimeoutError?Ht.ETIMEDOUT:Ht.ECONNABORTED,E,tt)),tt=null},rr.isStandardBrowserEnv){const Pt=(E.withCredentials||BC(wt))&&E.xsrfCookieName&&OC.read(E.xsrfCookieName);Pt&&A.set(E.xsrfHeaderName,Pt)}B===void 0&&A.setContentType(null),"setRequestHeader"in tt&&ot.forEach(A.toJSON(),function(xt,It){tt.setRequestHeader(It,xt)}),ot.isUndefined(E.withCredentials)||(tt.withCredentials=!!E.withCredentials),z&&z!=="json"&&(tt.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&tt.addEventListener("progress",Yg(E.onDownloadProgress,!0)),typeof E.onUploadProgress=="function"&&tt.upload&&tt.upload.addEventListener("progress",Yg(E.onUploadProgress)),(E.cancelToken||E.signal)&&(_=Pt=>{!tt||(F(!Pt||Pt.type?new Xi(null,E,tt):Pt),tt.abort(),tt=null)},E.cancelToken&&E.cancelToken.subscribe(_),E.signal&&(E.signal.aborted?_():E.signal.addEventListener("abort",_)));const kt=zC(wt);if(kt&&rr.protocols.indexOf(kt)===-1){F(new Ht("Unsupported protocol "+kt+":",Ht.ERR_BAD_REQUEST,E));return}tt.send(B||null)})}const Zg={http:Jg,xhr:Jg},Kg={getAdapter:E=>{if(ot.isString(E)){const T=Zg[E];if(!E)throw Error(ot.hasOwnProp(E)?`Adapter '${E}' is not available in the build`:`Can not resolve adapter '${E}'`);return T}if(!ot.isFunction(E))throw new TypeError("adapter is not a function");return E},adapters:Zg},HC={"Content-Type":"application/x-www-form-urlencoded"};function UC(){let E;return typeof XMLHttpRequest<"u"?E=Kg.getAdapter("xhr"):typeof process<"u"&&ot.kindOf(process)==="process"&&(E=Kg.getAdapter("http")),E}function qC(E,T,c){if(ot.isString(E))try{return(T||JSON.parse)(E),ot.trim(E)}catch(F){if(F.name!=="SyntaxError")throw F}return(c||JSON.stringify)(E)}const Uo={transitional:m0,adapter:UC(),transformRequest:[function(T,c){const F=c.getContentType()||"",B=F.indexOf("application/json")>-1,A=ot.isObject(T);if(A&&ot.isHTMLForm(T)&&(T=new FormData(T)),ot.isFormData(T))return B&&B?JSON.stringify(b0(T)):T;if(ot.isArrayBuffer(T)||ot.isBuffer(T)||ot.isStream(T)||ot.isFile(T)||ot.isBlob(T))return T;if(ot.isArrayBufferView(T))return T.buffer;if(ot.isURLSearchParams(T))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),T.toString();let _;if(A){if(F.indexOf("application/x-www-form-urlencoded")>-1)return kC(T,this.formSerializer).toString();if((_=ot.isFileList(T))||F.indexOf("multipart/form-data")>-1){const W=this.env&&this.env.FormData;return Ua(_?{"files[]":T}:T,W&&new W,this.formSerializer)}}return A||B?(c.setContentType("application/json",!1),qC(T)):T}],transformResponse:[function(T){const c=this.transitional||Uo.transitional,F=c&&c.forcedJSONParsing,B=this.responseType==="json";if(T&&ot.isString(T)&&(F&&!this.responseType||B)){const z=!(c&&c.silentJSONParsing)&&B;try{return JSON.parse(T)}catch(_){if(z)throw _.name==="SyntaxError"?Ht.from(_,Ht.ERR_BAD_RESPONSE,this,null,this.response):_}}return T}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(T){return T>=200&&T<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ot.forEach(["delete","get","head"],function(T){Uo.headers[T]={}});ot.forEach(["post","put","patch"],function(T){Uo.headers[T]=ot.merge(HC)});function sc(E,T){const c=this||Uo,F=T||c,B=yn.from(F.headers);let A=F.data;return ot.forEach(E,function(_){A=_.call(c,A,B.normalize(),T?T.status:void 0)}),B.normalize(),A}function x0(E){return!!(E&&E.__CANCEL__)}function ac(E){if(E.cancelToken&&E.cancelToken.throwIfRequested(),E.signal&&E.signal.aborted)throw new Xi}function Qg(E){return ac(E),E.headers=yn.from(E.headers),E.data=sc.call(E,E.transformRequest),(E.adapter||Uo.adapter)(E).then(function(F){return ac(E),F.data=sc.call(E,E.transformResponse,F),F.headers=yn.from(F.headers),F},function(F){return x0(F)||(ac(E),F&&F.response&&(F.response.data=sc.call(E,E.transformResponse,F.response),F.response.headers=yn.from(F.response.headers))),Promise.reject(F)})}function qi(E,T){T=T||{};const c={};function F(tt,wt){return ot.isPlainObject(tt)&&ot.isPlainObject(wt)?ot.merge(tt,wt):ot.isPlainObject(wt)?ot.merge({},wt):ot.isArray(wt)?wt.slice():wt}function B(tt){if(ot.isUndefined(T[tt])){if(!ot.isUndefined(E[tt]))return F(void 0,E[tt])}else return F(E[tt],T[tt])}function A(tt){if(!ot.isUndefined(T[tt]))return F(void 0,T[tt])}function z(tt){if(ot.isUndefined(T[tt])){if(!ot.isUndefined(E[tt]))return F(void 0,E[tt])}else return F(void 0,T[tt])}function _(tt){if(tt in T)return F(E[tt],T[tt]);if(tt in E)return F(void 0,E[tt])}const W={url:A,method:A,data:A,baseURL:z,transformRequest:z,transformResponse:z,paramsSerializer:z,timeout:z,timeoutMessage:z,withCredentials:z,adapter:z,responseType:z,xsrfCookieName:z,xsrfHeaderName:z,onUploadProgress:z,onDownloadProgress:z,decompress:z,maxContentLength:z,maxBodyLength:z,beforeRedirect:z,transport:z,httpAgent:z,httpsAgent:z,cancelToken:z,socketPath:z,responseEncoding:z,validateStatus:_};return ot.forEach(Object.keys(E).concat(Object.keys(T)),function(wt){const Ct=W[wt]||B,kt=Ct(wt);ot.isUndefined(kt)&&Ct!==_||(c[wt]=kt)}),c}const E0="1.1.3",Cc={};["object","boolean","number","function","string","symbol"].forEach((E,T)=>{Cc[E]=function(F){return typeof F===E||"a"+(T<1?"n ":" ")+E}});const t0={};Cc.transitional=function(T,c,F){function B(A,z){return"[Axios v"+E0+"] Transitional option '"+A+"'"+z+(F?". "+F:"")}return(A,z,_)=>{if(T===!1)throw new Ht(B(z," has been removed"+(c?" in "+c:"")),Ht.ERR_DEPRECATED);return c&&!t0[z]&&(t0[z]=!0,console.warn(B(z," has been deprecated since v"+c+" and will be removed in the near future"))),T?T(A,z,_):!0}};function $C(E,T,c){if(typeof E!="object")throw new Ht("options must be an object",Ht.ERR_BAD_OPTION_VALUE);const F=Object.keys(E);let B=F.length;for(;B-- >0;){const A=F[B],z=T[A];if(z){const _=E[A],W=_===void 0||z(_,A,E);if(W!==!0)throw new Ht("option "+A+" must be "+W,Ht.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Ht("Unknown option "+A,Ht.ERR_BAD_OPTION)}}const hc={assertOptions:$C,validators:Cc},xr=hc.validators;class no{constructor(T){this.defaults=T,this.interceptors={request:new $g,response:new $g}}request(T,c){typeof T=="string"?(c=c||{},c.url=T):c=T||{},c=qi(this.defaults,c);const{transitional:F,paramsSerializer:B}=c;F!==void 0&&hc.assertOptions(F,{silentJSONParsing:xr.transitional(xr.boolean),forcedJSONParsing:xr.transitional(xr.boolean),clarifyTimeoutError:xr.transitional(xr.boolean)},!1),B!==void 0&&hc.assertOptions(B,{encode:xr.function,serialize:xr.function},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();const A=c.headers&&ot.merge(c.headers.common,c.headers[c.method]);A&&ot.forEach(["delete","get","head","post","put","patch","common"],function(xt){delete c.headers[xt]}),c.headers=new yn(c.headers,A);const z=[];let _=!0;this.interceptors.request.forEach(function(xt){typeof xt.runWhen=="function"&&xt.runWhen(c)===!1||(_=_&&xt.synchronous,z.unshift(xt.fulfilled,xt.rejected))});const W=[];this.interceptors.response.forEach(function(xt){W.push(xt.fulfilled,xt.rejected)});let tt,wt=0,Ct;if(!_){const Pt=[Qg.bind(this),void 0];for(Pt.unshift.apply(Pt,z),Pt.push.apply(Pt,W),Ct=Pt.length,tt=Promise.resolve(c);wt<Ct;)tt=tt.then(Pt[wt++],Pt[wt++]);return tt}Ct=z.length;let kt=c;for(wt=0;wt<Ct;){const Pt=z[wt++],xt=z[wt++];try{kt=Pt(kt)}catch(It){xt.call(this,It);break}}try{tt=Qg.call(this,kt)}catch(Pt){return Promise.reject(Pt)}for(wt=0,Ct=W.length;wt<Ct;)tt=tt.then(W[wt++],W[wt++]);return tt}getUri(T){T=qi(this.defaults,T);const c=C0(T.baseURL,T.url);return y0(c,T.params,T.paramsSerializer)}}ot.forEach(["delete","get","head","options"],function(T){no.prototype[T]=function(c,F){return this.request(qi(F||{},{method:T,url:c,data:(F||{}).data}))}});ot.forEach(["post","put","patch"],function(T){function c(F){return function(A,z,_){return this.request(qi(_||{},{method:T,headers:F?{"Content-Type":"multipart/form-data"}:{},url:A,data:z}))}}no.prototype[T]=c(),no.prototype[T+"Form"]=c(!0)});class wc{constructor(T){if(typeof T!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(A){c=A});const F=this;this.promise.then(B=>{if(!F._listeners)return;let A=F._listeners.length;for(;A-- >0;)F._listeners[A](B);F._listeners=null}),this.promise.then=B=>{let A;const z=new Promise(_=>{F.subscribe(_),A=_}).then(B);return z.cancel=function(){F.unsubscribe(A)},z},T(function(A,z,_){F.reason||(F.reason=new Xi(A,z,_),c(F.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(T){if(this.reason){T(this.reason);return}this._listeners?this._listeners.push(T):this._listeners=[T]}unsubscribe(T){if(!this._listeners)return;const c=this._listeners.indexOf(T);c!==-1&&this._listeners.splice(c,1)}static source(){let T;return{token:new wc(function(B){T=B}),cancel:T}}}function WC(E){return function(c){return E.apply(null,c)}}function XC(E){return ot.isObject(E)&&E.isAxiosError===!0}function A0(E){const T=new no(E),c=a0(no.prototype.request,T);return ot.extend(c,no.prototype,T,{allOwnKeys:!0}),ot.extend(c,T,null,{allOwnKeys:!0}),c.create=function(B){return A0(qi(E,B))},c}const Be=A0(Uo);Be.Axios=no;Be.CanceledError=Xi;Be.CancelToken=wc;Be.isCancel=x0;Be.VERSION=E0;Be.toFormData=Ua;Be.AxiosError=Ht;Be.Cancel=Be.CanceledError;Be.all=function(T){return Promise.all(T)};Be.spread=WC;Be.isAxiosError=XC;Be.formToJSON=E=>b0(ot.isHTMLForm(E)?new FormData(E):E);Be.defaults.baseURL="/api";Be.defaults.timeout=1e4;Be.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";Be.interceptors.request.use(E=>{const T=window.sessionStorage.getItem("token");return T&&((E.headers=E.headers||{}).token=T),E},E=>{throw E});Be.interceptors.response.use(E=>E.data);function P0(E){return new URL(E,import.meta.url).href}const e0=Object.assign({"../assets/icon/back.png":()=>Wt(()=>import("./back.56e16ded.js"),[],import.meta.url),"../assets/icon/classify.png":()=>Wt(()=>import("./classify.eb98957b.js"),[],import.meta.url),"../assets/icon/clear.png":()=>Wt(()=>import("./clear.62f9449c.js"),[],import.meta.url),"../assets/icon/decode.png":()=>Wt(()=>import("./decode.2f5a943c.js"),[],import.meta.url),"../assets/icon/download.png":()=>Wt(()=>import("./download.f29aacd5.js"),[],import.meta.url),"../assets/icon/edit.png":()=>Wt(()=>import("./edit.a6a8ce71.js"),[],import.meta.url),"../assets/icon/fire.png":()=>Wt(()=>import("./fire.5c59ff3d.js"),[],import.meta.url),"../assets/icon/label.png":()=>Wt(()=>import("./label.12fb49e7.js"),[],import.meta.url),"../assets/icon/like.png":()=>Wt(()=>import("./like.1e6ff0c1.js"),[],import.meta.url),"../assets/icon/location.png":()=>Wt(()=>import("./location.4dbec614.js"),[],import.meta.url),"../assets/icon/mes.png":()=>Wt(()=>import("./mes.6ce1a1c5.js"),[],import.meta.url),"../assets/icon/next.png":()=>Wt(()=>import("./next.353b5318.js"),[],import.meta.url),"../assets/icon/notes.png":()=>Wt(()=>import("./notes.aa2b4fcd.js"),[],import.meta.url),"../assets/icon/password.png":()=>Wt(()=>import("./password.4c3fee92.js"),[],import.meta.url),"../assets/icon/pause.png":()=>Wt(()=>import("./pause.d8729d67.js"),[],import.meta.url),"../assets/icon/personal.png":()=>Wt(()=>import("./personal.b715e37d.js"),[],import.meta.url),"../assets/icon/photo.png":()=>Wt(()=>import("./photo.0668fed9.js"),[],import.meta.url),"../assets/icon/picture.png":()=>Wt(()=>import("./picture.dc6c3ef1.js"),[],import.meta.url),"../assets/icon/play.png":()=>Wt(()=>import("./play.1bcfb4a8.js"),[],import.meta.url),"../assets/icon/pre.png":()=>Wt(()=>import("./pre.e1114549.js"),[],import.meta.url),"../assets/icon/review.png":()=>Wt(()=>import("./review.728a35fd.js"),[],import.meta.url),"../assets/icon/search.png":()=>Wt(()=>import("./search.7e147a57.js"),[],import.meta.url),"../assets/icon/set.png":()=>Wt(()=>import("./set.8d0dc0fb.js"),[],import.meta.url),"../assets/icon/share.png":()=>Wt(()=>import("./share.3e343392.js"),[],import.meta.url),"../assets/icon/speed.png":()=>Wt(()=>import("./speed.e743b63d.js"),[],import.meta.url),"../assets/icon/step.png":()=>Wt(()=>import("./step.443bc256.js"),[],import.meta.url),"../assets/icon/store.png":()=>Wt(()=>import("./store.813d4aef.js"),[],import.meta.url),"../assets/icon/time.png":()=>Wt(()=>import("./time.39299cf8.js"),[],import.meta.url),"../assets/icon/upload.png":()=>Wt(()=>import("./upload.04b6cce5.js"),[],import.meta.url),"../assets/icon/vip.png":()=>Wt(()=>import("./vip.f67f1986.js"),[],import.meta.url),"../assets/icon/zan.png":()=>Wt(()=>import("./zan.70bf8627.js"),[],import.meta.url)});let M0={};for(const E in e0)e0[E]().then(T=>{console.log(T.default,"modules res"),M0[E]=T.default});function YC(E){const T=`../assets/${E}`;return console.log(T,"getAssetsFile"),M0[T]}let S0=["back","classify","clear","decode","download","edit","fire","label","like","location","mes","next","notes","password","pause","personal","photo","picture","play","pre","review","search","set","share","speed","step","store","time","upload","vip","zan"];const n0=Math.ceil(S0.length/2),pc=[],r0=(E,T)=>T?{type:E}:{type:E,children:[]};S0.forEach((E,T)=>{var F;[0,n0].includes(T)&&pc.push(r0(T?"\u6761\u4EF6":"\u6267\u884C",0));let c=Math.floor(T/n0);(F=pc[c].children)==null||F.push(r0(E,1))});const JC={preventOnFilter:!1,sort:!1,disabled:!1,ghostClass:"tt",forceFallback:!0,fallbackClass:"flow-node-draggable"},ZC=dc({name:"strategicMenu",components:{},setup(E,{emit:T,slots:c}){function F(A,z){console.log(A,z,"evt, e")}function B(){}return{getIcon:P0,getAssetsFile:YC,menuList:pc,start:B,end:F,drag:!1,draggableOptions:JC,myArray:[],element:{id:100,name:"element test"}}}});const KC={class:"strategic-menu"},QC={class:"menu-title"},tw={class:"item-list"},ew={style:{width:"100%"}},nw={class:"menu-item-bg"},rw={class:"img-content"},ow=["src"];function iw(E,T,c,F,B,A){return Gi(),_i("div",KC,[(Gi(!0),_i(jg,null,Ig(E.menuList,z=>(Gi(),_i("div",{key:z.type,class:"menu"},[Go("p",QC,Ib(z.type),1),Go("ul",tw,[Go("section",ew,[(Gi(!0),_i(jg,null,Ig(z.children,_=>(Gi(),_i("li",{class:"menu-item",draggable:"true",key:_.type},[Go("div",nw,[Go("div",rw,[Go("img",{src:E.getIcon(`../assets/icon/${_.type}.png`)},null,8,ow)])])]))),128))])])]))),128))])}const o0=jb(ZC,[["render",iw],["__scopeId","data-v-67e39f6b"]]);const sw=dc({name:"antv",components:{},setup(E,{emit:T,slots:c}){return()=>eo("div",{class:"node-component","data-type":"addComponent"},[eo("img",{src:P0("../assets/icon/clear.png")},null)])}});function aw(){return or.exports.Graph.registerVueComponent("nodeComponent",{template:"<nodeDom></nodeDom>",data(){return{}},methods:{},components:{nodeDom:sw}},!0),new or.exports.Graph({container:document.getElementById("picture"),width:2200,height:1e3,grid:!0,translating:{restrict(E){const T=E.cell;return{x:T.getBBox().x,y:T.getBBox().y,width:0,height:0}}},panning:{enabled:!0,eventTypes:["leftMouseDown","rightMouseDown"]},mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},clipboard:{enabled:!0},selecting:{enabled:!0},keyboard:{enabled:!0,global:!0},connecting:{snap:!0,allowBlank:!1,allowMulti:"withPort",allowLoop:!1,allowEdge:!1,allowPort:!1,highlight:!0,router:{name:"manhattan"}}})}function lw(E){E.on("node:mouseenter",({e:T})=>{var F;console.log("node:mouseenter");let c=T.target;for(;c;){if(((F=c==null?void 0:c.dataset)==null?void 0:F.type)==="addComponent"){c.style=`
            box-shadow: 0 0 5px #03e9f4,
            0 0 5px #03e9f4,
            0 0 10px #03e9f4,
            0 0 20px #03e9f4;`;break}c=c.parentNode}}),E.on("node:mouseleave",({e:T})=>{let c=T.target;for(;c;){if(c.className==="node-component"){c.style="";break}c=c.parentNode}})}const cw=dc({name:"antv",components:{strategicMenu:o0},setup(E,{emit:T,slots:c}){let F=null;return _b(()=>{F=aw(),lw(F)}),setTimeout(()=>{F.addNode({id:"header",shape:"vue-shape",x:200,y:200,width:50,height:50,component:"nodeComponent",movable:!1,draggable:!0,data:{jjfd:"fjfdk"}})},3e3),()=>eo("div",{class:"strategic-canvas"},[eo("section",{class:"left"},[eo(o0,null,null)]),eo("section",{class:"right"},[eo("div",{ref:"picture",class:"picture",id:"picture"},null)])])}});export{cw as default};
